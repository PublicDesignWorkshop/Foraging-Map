function ECB(n,t){this.count=n;this.dataCodewords=t;this.__defineGetter__("Count",function(){return this.count});this.__defineGetter__("DataCodewords",function(){return this.dataCodewords})}function ECBlocks(n,t,i){this.ecCodewordsPerBlock=n;this.ecBlocks=i?[t,i]:new Array(t);this.__defineGetter__("ECCodewordsPerBlock",function(){return this.ecCodewordsPerBlock});this.__defineGetter__("TotalECCodewords",function(){return this.ecCodewordsPerBlock*this.NumBlocks});this.__defineGetter__("NumBlocks",function(){for(var t=0,n=0;n<this.ecBlocks.length;n++)t+=this.ecBlocks[n].length;return t});this.getECBlocks=function(){return this.ecBlocks}}function Version(n,t,i,r,u,f){var e,o;this.versionNumber=n;this.alignmentPatternCenters=t;this.ecBlocks=[i,r,u,f];var s=0,c=i.ECCodewordsPerBlock,h=i.getECBlocks();for(e=0;e<h.length;e++)o=h[e],s+=o.Count*(o.DataCodewords+c);this.totalCodewords=s;this.__defineGetter__("VersionNumber",function(){return this.versionNumber});this.__defineGetter__("AlignmentPatternCenters",function(){return this.alignmentPatternCenters});this.__defineGetter__("TotalCodewords",function(){return this.totalCodewords});this.__defineGetter__("DimensionForVersion",function(){return 17+4*this.versionNumber});this.buildFunctionPattern=function(){var t=this.DimensionForVersion,n=new BitMatrix(t),u,r,f,i;for(n.setRegion(0,0,9,9),n.setRegion(t-8,0,8,9),n.setRegion(0,t-8,9,8),u=this.alignmentPatternCenters.length,r=0;r<u;r++)for(f=this.alignmentPatternCenters[r]-2,i=0;i<u;i++)(r!=0||i!=0&&i!=u-1)&&(r!=u-1||i!=0)&&n.setRegion(this.alignmentPatternCenters[i]-2,f,5,5);return n.setRegion(6,9,1,t-17),n.setRegion(9,6,t-17,1),this.versionNumber>6&&(n.setRegion(t-11,0,3,6),n.setRegion(0,t-11,6,3)),n};this.getECBlocksForLevel=function(n){return this.ecBlocks[n.ordinal()]}}function buildVersions(){return[new Version(1,[],new ECBlocks(7,new ECB(1,19)),new ECBlocks(10,new ECB(1,16)),new ECBlocks(13,new ECB(1,13)),new ECBlocks(17,new ECB(1,9))),new Version(2,[6,18],new ECBlocks(10,new ECB(1,34)),new ECBlocks(16,new ECB(1,28)),new ECBlocks(22,new ECB(1,22)),new ECBlocks(28,new ECB(1,16))),new Version(3,[6,22],new ECBlocks(15,new ECB(1,55)),new ECBlocks(26,new ECB(1,44)),new ECBlocks(18,new ECB(2,17)),new ECBlocks(22,new ECB(2,13))),new Version(4,[6,26],new ECBlocks(20,new ECB(1,80)),new ECBlocks(18,new ECB(2,32)),new ECBlocks(26,new ECB(2,24)),new ECBlocks(16,new ECB(4,9))),new Version(5,[6,30],new ECBlocks(26,new ECB(1,108)),new ECBlocks(24,new ECB(2,43)),new ECBlocks(18,new ECB(2,15),new ECB(2,16)),new ECBlocks(22,new ECB(2,11),new ECB(2,12))),new Version(6,[6,34],new ECBlocks(18,new ECB(2,68)),new ECBlocks(16,new ECB(4,27)),new ECBlocks(24,new ECB(4,19)),new ECBlocks(28,new ECB(4,15))),new Version(7,[6,22,38],new ECBlocks(20,new ECB(2,78)),new ECBlocks(18,new ECB(4,31)),new ECBlocks(18,new ECB(2,14),new ECB(4,15)),new ECBlocks(26,new ECB(4,13),new ECB(1,14))),new Version(8,[6,24,42],new ECBlocks(24,new ECB(2,97)),new ECBlocks(22,new ECB(2,38),new ECB(2,39)),new ECBlocks(22,new ECB(4,18),new ECB(2,19)),new ECBlocks(26,new ECB(4,14),new ECB(2,15))),new Version(9,[6,26,46],new ECBlocks(30,new ECB(2,116)),new ECBlocks(22,new ECB(3,36),new ECB(2,37)),new ECBlocks(20,new ECB(4,16),new ECB(4,17)),new ECBlocks(24,new ECB(4,12),new ECB(4,13))),new Version(10,[6,28,50],new ECBlocks(18,new ECB(2,68),new ECB(2,69)),new ECBlocks(26,new ECB(4,43),new ECB(1,44)),new ECBlocks(24,new ECB(6,19),new ECB(2,20)),new ECBlocks(28,new ECB(6,15),new ECB(2,16))),new Version(11,[6,30,54],new ECBlocks(20,new ECB(4,81)),new ECBlocks(30,new ECB(1,50),new ECB(4,51)),new ECBlocks(28,new ECB(4,22),new ECB(4,23)),new ECBlocks(24,new ECB(3,12),new ECB(8,13))),new Version(12,[6,32,58],new ECBlocks(24,new ECB(2,92),new ECB(2,93)),new ECBlocks(22,new ECB(6,36),new ECB(2,37)),new ECBlocks(26,new ECB(4,20),new ECB(6,21)),new ECBlocks(28,new ECB(7,14),new ECB(4,15))),new Version(13,[6,34,62],new ECBlocks(26,new ECB(4,107)),new ECBlocks(22,new ECB(8,37),new ECB(1,38)),new ECBlocks(24,new ECB(8,20),new ECB(4,21)),new ECBlocks(22,new ECB(12,11),new ECB(4,12))),new Version(14,[6,26,46,66],new ECBlocks(30,new ECB(3,115),new ECB(1,116)),new ECBlocks(24,new ECB(4,40),new ECB(5,41)),new ECBlocks(20,new ECB(11,16),new ECB(5,17)),new ECBlocks(24,new ECB(11,12),new ECB(5,13))),new Version(15,[6,26,48,70],new ECBlocks(22,new ECB(5,87),new ECB(1,88)),new ECBlocks(24,new ECB(5,41),new ECB(5,42)),new ECBlocks(30,new ECB(5,24),new ECB(7,25)),new ECBlocks(24,new ECB(11,12),new ECB(7,13))),new Version(16,[6,26,50,74],new ECBlocks(24,new ECB(5,98),new ECB(1,99)),new ECBlocks(28,new ECB(7,45),new ECB(3,46)),new ECBlocks(24,new ECB(15,19),new ECB(2,20)),new ECBlocks(30,new ECB(3,15),new ECB(13,16))),new Version(17,[6,30,54,78],new ECBlocks(28,new ECB(1,107),new ECB(5,108)),new ECBlocks(28,new ECB(10,46),new ECB(1,47)),new ECBlocks(28,new ECB(1,22),new ECB(15,23)),new ECBlocks(28,new ECB(2,14),new ECB(17,15))),new Version(18,[6,30,56,82],new ECBlocks(30,new ECB(5,120),new ECB(1,121)),new ECBlocks(26,new ECB(9,43),new ECB(4,44)),new ECBlocks(28,new ECB(17,22),new ECB(1,23)),new ECBlocks(28,new ECB(2,14),new ECB(19,15))),new Version(19,[6,30,58,86],new ECBlocks(28,new ECB(3,113),new ECB(4,114)),new ECBlocks(26,new ECB(3,44),new ECB(11,45)),new ECBlocks(26,new ECB(17,21),new ECB(4,22)),new ECBlocks(26,new ECB(9,13),new ECB(16,14))),new Version(20,[6,34,62,90],new ECBlocks(28,new ECB(3,107),new ECB(5,108)),new ECBlocks(26,new ECB(3,41),new ECB(13,42)),new ECBlocks(30,new ECB(15,24),new ECB(5,25)),new ECBlocks(28,new ECB(15,15),new ECB(10,16))),new Version(21,[6,28,50,72,94],new ECBlocks(28,new ECB(4,116),new ECB(4,117)),new ECBlocks(26,new ECB(17,42)),new ECBlocks(28,new ECB(17,22),new ECB(6,23)),new ECBlocks(30,new ECB(19,16),new ECB(6,17))),new Version(22,[6,26,50,74,98],new ECBlocks(28,new ECB(2,111),new ECB(7,112)),new ECBlocks(28,new ECB(17,46)),new ECBlocks(30,new ECB(7,24),new ECB(16,25)),new ECBlocks(24,new ECB(34,13))),new Version(23,[6,30,54,74,102],new ECBlocks(30,new ECB(4,121),new ECB(5,122)),new ECBlocks(28,new ECB(4,47),new ECB(14,48)),new ECBlocks(30,new ECB(11,24),new ECB(14,25)),new ECBlocks(30,new ECB(16,15),new ECB(14,16))),new Version(24,[6,28,54,80,106],new ECBlocks(30,new ECB(6,117),new ECB(4,118)),new ECBlocks(28,new ECB(6,45),new ECB(14,46)),new ECBlocks(30,new ECB(11,24),new ECB(16,25)),new ECBlocks(30,new ECB(30,16),new ECB(2,17))),new Version(25,[6,32,58,84,110],new ECBlocks(26,new ECB(8,106),new ECB(4,107)),new ECBlocks(28,new ECB(8,47),new ECB(13,48)),new ECBlocks(30,new ECB(7,24),new ECB(22,25)),new ECBlocks(30,new ECB(22,15),new ECB(13,16))),new Version(26,[6,30,58,86,114],new ECBlocks(28,new ECB(10,114),new ECB(2,115)),new ECBlocks(28,new ECB(19,46),new ECB(4,47)),new ECBlocks(28,new ECB(28,22),new ECB(6,23)),new ECBlocks(30,new ECB(33,16),new ECB(4,17))),new Version(27,[6,34,62,90,118],new ECBlocks(30,new ECB(8,122),new ECB(4,123)),new ECBlocks(28,new ECB(22,45),new ECB(3,46)),new ECBlocks(30,new ECB(8,23),new ECB(26,24)),new ECBlocks(30,new ECB(12,15),new ECB(28,16))),new Version(28,[6,26,50,74,98,122],new ECBlocks(30,new ECB(3,117),new ECB(10,118)),new ECBlocks(28,new ECB(3,45),new ECB(23,46)),new ECBlocks(30,new ECB(4,24),new ECB(31,25)),new ECBlocks(30,new ECB(11,15),new ECB(31,16))),new Version(29,[6,30,54,78,102,126],new ECBlocks(30,new ECB(7,116),new ECB(7,117)),new ECBlocks(28,new ECB(21,45),new ECB(7,46)),new ECBlocks(30,new ECB(1,23),new ECB(37,24)),new ECBlocks(30,new ECB(19,15),new ECB(26,16))),new Version(30,[6,26,52,78,104,130],new ECBlocks(30,new ECB(5,115),new ECB(10,116)),new ECBlocks(28,new ECB(19,47),new ECB(10,48)),new ECBlocks(30,new ECB(15,24),new ECB(25,25)),new ECBlocks(30,new ECB(23,15),new ECB(25,16))),new Version(31,[6,30,56,82,108,134],new ECBlocks(30,new ECB(13,115),new ECB(3,116)),new ECBlocks(28,new ECB(2,46),new ECB(29,47)),new ECBlocks(30,new ECB(42,24),new ECB(1,25)),new ECBlocks(30,new ECB(23,15),new ECB(28,16))),new Version(32,[6,34,60,86,112,138],new ECBlocks(30,new ECB(17,115)),new ECBlocks(28,new ECB(10,46),new ECB(23,47)),new ECBlocks(30,new ECB(10,24),new ECB(35,25)),new ECBlocks(30,new ECB(19,15),new ECB(35,16))),new Version(33,[6,30,58,86,114,142],new ECBlocks(30,new ECB(17,115),new ECB(1,116)),new ECBlocks(28,new ECB(14,46),new ECB(21,47)),new ECBlocks(30,new ECB(29,24),new ECB(19,25)),new ECBlocks(30,new ECB(11,15),new ECB(46,16))),new Version(34,[6,34,62,90,118,146],new ECBlocks(30,new ECB(13,115),new ECB(6,116)),new ECBlocks(28,new ECB(14,46),new ECB(23,47)),new ECBlocks(30,new ECB(44,24),new ECB(7,25)),new ECBlocks(30,new ECB(59,16),new ECB(1,17))),new Version(35,[6,30,54,78,102,126,150],new ECBlocks(30,new ECB(12,121),new ECB(7,122)),new ECBlocks(28,new ECB(12,47),new ECB(26,48)),new ECBlocks(30,new ECB(39,24),new ECB(14,25)),new ECBlocks(30,new ECB(22,15),new ECB(41,16))),new Version(36,[6,24,50,76,102,128,154],new ECBlocks(30,new ECB(6,121),new ECB(14,122)),new ECBlocks(28,new ECB(6,47),new ECB(34,48)),new ECBlocks(30,new ECB(46,24),new ECB(10,25)),new ECBlocks(30,new ECB(2,15),new ECB(64,16))),new Version(37,[6,28,54,80,106,132,158],new ECBlocks(30,new ECB(17,122),new ECB(4,123)),new ECBlocks(28,new ECB(29,46),new ECB(14,47)),new ECBlocks(30,new ECB(49,24),new ECB(10,25)),new ECBlocks(30,new ECB(24,15),new ECB(46,16))),new Version(38,[6,32,58,84,110,136,162],new ECBlocks(30,new ECB(4,122),new ECB(18,123)),new ECBlocks(28,new ECB(13,46),new ECB(32,47)),new ECBlocks(30,new ECB(48,24),new ECB(14,25)),new ECBlocks(30,new ECB(42,15),new ECB(32,16))),new Version(39,[6,26,54,82,110,138,166],new ECBlocks(30,new ECB(20,117),new ECB(4,118)),new ECBlocks(28,new ECB(40,47),new ECB(7,48)),new ECBlocks(30,new ECB(43,24),new ECB(22,25)),new ECBlocks(30,new ECB(10,15),new ECB(67,16))),new Version(40,[6,30,58,86,114,142,170],new ECBlocks(30,new ECB(19,118),new ECB(6,119)),new ECBlocks(28,new ECB(18,47),new ECB(31,48)),new ECBlocks(30,new ECB(34,24),new ECB(34,25)),new ECBlocks(30,new ECB(20,15),new ECB(61,16)))]}function PerspectiveTransform(n,t,i,r,u,f,e,o,s){this.a11=n;this.a12=r;this.a13=e;this.a21=t;this.a22=u;this.a23=o;this.a31=i;this.a32=f;this.a33=s;this.transformPoints1=function(n){for(var f=n.length,e=this.a11,o=this.a12,s=this.a13,h=this.a21,c=this.a22,l=this.a23,a=this.a31,v=this.a32,y=this.a33,t=0;t<f;t+=2){var i=n[t],r=n[t+1],u=s*i+l*r+y;n[t]=(e*i+h*r+a)/u;n[t+1]=(o*i+c*r+v)/u}};this.transformPoints2=function(n,t){for(var e=n.length,i=0;i<e;i++){var r=n[i],u=t[i],f=this.a13*r+this.a23*u+this.a33;n[i]=(this.a11*r+this.a21*u+this.a31)/f;t[i]=(this.a12*r+this.a22*u+this.a32)/f}};this.buildAdjoint=function(){return new PerspectiveTransform(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)};this.times=function(n){return new PerspectiveTransform(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}function DetectorResult(n,t){this.bits=n;this.points=t}function Detector(n){this.image=n;this.resultPointCallback=null;this.sizeOfBlackWhiteBlackRun=function(n,t,i,r){var s=Math.abs(r-t)>Math.abs(i-n),e,u,f,c,l,a,v,y,p;s&&(e=n,n=t,t=e,e=i,i=r,r=e);var w=Math.abs(i-n),b=Math.abs(r-t),h=-w>>1,k=t<r?1:-1,d=n<i?1:-1,o=0;for(u=n,f=t;u!=i;u+=d){if(c=s?f:u,l=s?u:f,o==1?this.image[c+l*qrcode.width]&&o++:this.image[c+l*qrcode.width]||o++,o==3)return a=u-n,v=f-t,Math.sqrt(a*a+v*v);if(h+=b,h>0){if(f==r)break;f+=k;h-=w}}return y=i-n,p=r-t,Math.sqrt(y*y+p*p)};this.sizeOfBlackWhiteBlackRunBothWays=function(n,t,i,r){var o=this.sizeOfBlackWhiteBlackRun(n,t,i,r),e=1,u=n-(i-n),f;return u<0?(e=n/(n-u),u=0):u>=qrcode.width&&(e=(qrcode.width-1-n)/(u-n),u=qrcode.width-1),f=Math.floor(t-(r-t)*e),e=1,f<0?(e=t/(t-f),f=0):f>=qrcode.height&&(e=(qrcode.height-1-t)/(f-t),f=qrcode.height-1),u=Math.floor(n+(u-n)*e),o+=this.sizeOfBlackWhiteBlackRun(n,t,u,f),o-1};this.calculateModuleSizeOneWay=function(n,t){var i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.X),Math.floor(n.Y),Math.floor(t.X),Math.floor(t.Y)),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.X),Math.floor(t.Y),Math.floor(n.X),Math.floor(n.Y));return isNaN(i)?r/7:isNaN(r)?i/7:(i+r)/14};this.calculateModuleSize=function(n,t,i){return(this.calculateModuleSizeOneWay(n,t)+this.calculateModuleSizeOneWay(n,i))/2};this.distance=function(n,t){return xDiff=n.X-t.X,yDiff=n.Y-t.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)};this.computeDimension=function(n,t,i,r){var f=Math.round(this.distance(n,t)/r),e=Math.round(this.distance(n,i)/r),u=(f+e>>1)+7;switch(u&3){case 0:u++;break;case 2:u--;break;case 3:throw"Error";}return u};this.findAlignmentInRegion=function(n,t,i,r){var u=Math.floor(r*n),f=Math.max(0,t-u),e=Math.min(qrcode.width-1,t+u);if(e-f<n*3)throw"Error";var o=Math.max(0,i-u),s=Math.min(qrcode.height-1,i+u),h=new AlignmentPatternFinder(this.image,f,o,e-f,s-o,n,this.resultPointCallback);return h.find()};this.createTransform=function(n,t,i,r,u){var f=u-3.5,e,o,s,h;return r!=null?(e=r.X,o=r.Y,s=h=f-3):(e=t.X-n.X+i.X,o=t.Y-n.Y+i.Y,s=h=f),PerspectiveTransform.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,s,h,3.5,f,n.X,n.Y,t.X,t.Y,e,o,i.X,i.Y)};this.sampleGrid=function(n,t,i){var r=GridSampler;return r.sampleGrid3(n,i,t)};this.processFinderPatternInfo=function(n){var t=n.TopLeft,i=n.TopRight,r=n.BottomLeft,e=this.calculateModuleSize(t,i,r),f,c,l,a;if(e<1)throw"Error";var o=this.computeDimension(t,i,r,e),s=Version.getProvisionalVersionForDimension(o),v=s.DimensionForVersion-7,u=null;if(s.AlignmentPatternCenters.length>0){var y=i.X-t.X+r.X,p=i.Y-t.Y+r.Y,h=1-3/v,w=Math.floor(t.X+h*(y-t.X)),b=Math.floor(t.Y+h*(p-t.Y));for(f=4;f<=16;f<<=1){u=this.findAlignmentInRegion(e,w,b,f);break}}return c=this.createTransform(t,i,r,u,o),l=this.sampleGrid(this.image,c,o),a=u==null?[r,t,i]:[r,t,i,u],new DetectorResult(l,a)};this.detect=function(){var n=(new FinderPatternFinder).findFinderPattern(this.image);return this.processFinderPatternInfo(n)}}function FormatInformation(n){this.errorCorrectionLevel=ErrorCorrectionLevel.forBits(n>>3&3);this.dataMask=n&7;this.__defineGetter__("ErrorCorrectionLevel",function(){return this.errorCorrectionLevel});this.__defineGetter__("DataMask",function(){return this.dataMask});this.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|dataMask};this.Equals=function(n){var t=n;return this.errorCorrectionLevel==t.errorCorrectionLevel&&this.dataMask==t.dataMask}}function ErrorCorrectionLevel(n,t,i){this.ordinal_Renamed_Field=n;this.bits=t;this.name=i;this.__defineGetter__("Bits",function(){return this.bits});this.__defineGetter__("Name",function(){return this.name});this.ordinal=function(){return this.ordinal_Renamed_Field}}function BitMatrix(n,t){var i,r;if(t||(t=n),n<1||t<1)throw"Both dimensions must be greater than 0";for(this.width=n,this.height=t,i=n>>5,(n&31)!=0&&i++,this.rowSize=i,this.bits=new Array(i*t),r=0;r<this.bits.length;r++)this.bits[r]=0;this.__defineGetter__("Width",function(){return this.width});this.__defineGetter__("Height",function(){return this.height});this.__defineGetter__("Dimension",function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width});this.get_Renamed=function(n,t){var i=t*this.rowSize+(n>>5);return(URShift(this.bits[i],n&31)&1)!=0};this.set_Renamed=function(n,t){var i=t*this.rowSize+(n>>5);this.bits[i]|=1<<(n&31)};this.flip=function(n,t){var i=t*this.rowSize+(n>>5);this.bits[i]^=1<<(n&31)};this.clear=function(){for(var t=this.bits.length,n=0;n<t;n++)this.bits[n]=0};this.setRegion=function(n,t,i,r){var e,o,f,s,u;if(t<0||n<0)throw"Left and top must be nonnegative";if(r<1||i<1)throw"Height and width must be at least 1";if(e=n+i,o=t+r,o>this.height||e>this.width)throw"The region must fit inside the matrix";for(f=t;f<o;f++)for(s=f*this.rowSize,u=n;u<e;u++)this.bits[s+(u>>5)]|=1<<(u&31)}}function DataBlock(n,t){this.numDataCodewords=n;this.codewords=t;this.__defineGetter__("NumDataCodewords",function(){return this.numDataCodewords});this.__defineGetter__("Codewords",function(){return this.codewords})}function BitMatrixParser(n){var t=n.Dimension;if(t<21||(t&3)!=1)throw"Error BitMatrixParser";this.bitMatrix=n;this.parsedVersion=null;this.parsedFormatInfo=null;this.copyBit=function(n,t,i){return this.bitMatrix.get_Renamed(n,t)?i<<1|1:i<<1};this.readFormatInformation=function(){var n,r,u,t,i;if(this.parsedFormatInfo!=null)return this.parsedFormatInfo;for(n=0,t=0;t<6;t++)n=this.copyBit(t,8,n);for(n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n),i=5;i>=0;i--)n=this.copyBit(8,i,n);if(this.parsedFormatInfo=FormatInformation.decodeFormatInformation(n),this.parsedFormatInfo!=null)return this.parsedFormatInfo;for(r=this.bitMatrix.Dimension,n=0,u=r-8,t=r-1;t>=u;t--)n=this.copyBit(t,8,n);for(i=r-7;i<r;i++)n=this.copyBit(8,i,n);if(this.parsedFormatInfo=FormatInformation.decodeFormatInformation(n),this.parsedFormatInfo!=null)return this.parsedFormatInfo;throw"Error readFormatInformation";};this.readVersion=function(){var r,u,n,f,i,t;if(this.parsedVersion!=null)return this.parsedVersion;if(r=this.bitMatrix.Dimension,u=r-17>>2,u<=6)return Version.getVersionForNumber(u);for(n=0,f=r-11,t=5;t>=0;t--)for(i=r-9;i>=f;i--)n=this.copyBit(i,t,n);if(this.parsedVersion=Version.decodeVersionInformation(n),this.parsedVersion!=null&&this.parsedVersion.DimensionForVersion==r)return this.parsedVersion;for(n=0,i=5;i>=0;i--)for(t=r-9;t>=f;t--)n=this.copyBit(i,t,n);if(this.parsedVersion=Version.decodeVersionInformation(n),this.parsedVersion!=null&&this.parsedVersion.DimensionForVersion==r)return this.parsedVersion;throw"Error readVersion";};this.readCodewords=function(){var l=this.readFormatInformation(),f=this.readVersion(),a=DataMask.forReference(l.DataMask),r=this.bitMatrix.Dimension,n,t,o,i;a.unmaskBitMatrix(this.bitMatrix,r);var v=f.buildFunctionPattern(),s=!0,h=new Array(f.TotalCodewords),c=0,u=0,e=0;for(n=r-1;n>0;n-=2){for(n==6&&n--,t=0;t<r;t++)for(o=s?r-1-t:t,i=0;i<2;i++)v.get_Renamed(n-i,o)||(e++,u<<=1,this.bitMatrix.get_Renamed(n-i,o)&&(u|=1),e==8&&(h[c++]=u,e=0,u=0));s^=!0}if(c!=f.TotalCodewords)throw"Error readCodewords";return h}}function DataMask000(){this.unmaskBitMatrix=function(n,t){for(var r,i=0;i<t;i++)for(r=0;r<t;r++)this.isMasked(i,r)&&n.flip(r,i)};this.isMasked=function(n,t){return(n+t&1)==0}}function DataMask001(){this.unmaskBitMatrix=function(n,t){for(var r,i=0;i<t;i++)for(r=0;r<t;r++)this.isMasked(i,r)&&n.flip(r,i)};this.isMasked=function(n){return(n&1)==0}}function DataMask010(){this.unmaskBitMatrix=function(n,t){for(var r,i=0;i<t;i++)for(r=0;r<t;r++)this.isMasked(i,r)&&n.flip(r,i)};this.isMasked=function(n,t){return t%3==0}}function DataMask011(){this.unmaskBitMatrix=function(n,t){for(var r,i=0;i<t;i++)for(r=0;r<t;r++)this.isMasked(i,r)&&n.flip(r,i)};this.isMasked=function(n,t){return(n+t)%3==0}}function DataMask100(){this.unmaskBitMatrix=function(n,t){for(var r,i=0;i<t;i++)for(r=0;r<t;r++)this.isMasked(i,r)&&n.flip(r,i)};this.isMasked=function(n,t){return(URShift(n,1)+t/3&1)==0}}function DataMask101(){this.unmaskBitMatrix=function(n,t){for(var r,i=0;i<t;i++)for(r=0;r<t;r++)this.isMasked(i,r)&&n.flip(r,i)};this.isMasked=function(n,t){var i=n*t;return(i&1)+i%3==0}}function DataMask110(){this.unmaskBitMatrix=function(n,t){for(var r,i=0;i<t;i++)for(r=0;r<t;r++)this.isMasked(i,r)&&n.flip(r,i)};this.isMasked=function(n,t){var i=n*t;return((i&1)+i%3&1)==0}}function DataMask111(){this.unmaskBitMatrix=function(n,t){for(var r,i=0;i<t;i++)for(r=0;r<t;r++)this.isMasked(i,r)&&n.flip(r,i)};this.isMasked=function(n,t){return((n+t&1)+n*t%3&1)==0}}function ReedSolomonDecoder(n){this.field=n;this.decode=function(n,t){for(var f,e,o,u,c=new GF256Poly(this.field,n),r=new Array(t),i=0;i<r.length;i++)r[i]=0;for(f=!1,e=!0,i=0;i<t;i++)o=c.evaluateAt(this.field.exp(f?i+1:i)),r[r.length-1-i]=o,o!=0&&(e=!1);if(!e){var l=new GF256Poly(this.field,r),h=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),l,t),a=h[0],v=h[1],s=this.findErrorLocations(a),y=this.findErrorMagnitudes(v,s,f);for(i=0;i<s.length;i++){if(u=n.length-1-this.field.log(s[i]),u<0)throw"ReedSolomonException Bad error location";n[u]=GF256.addOrSubtract(n[u],y[i])}}};this.runEuclideanAlgorithm=function(n,t,i){var a,h,c,l;n.Degree<t.Degree&&(a=n,n=t,t=a);for(var u=n,r=t,o=this.field.One,v=this.field.Zero,s=this.field.Zero,f=this.field.One;r.Degree>=Math.floor(i/2);){var p=u,w=o,b=s;if(u=r,o=v,s=f,u.Zero)throw"r_{i-1} was zero";r=p;for(var e=this.field.Zero,k=u.getCoefficient(u.Degree),d=this.field.inverse(k);r.Degree>=u.Degree&&!r.Zero;)h=r.Degree-u.Degree,c=this.field.multiply(r.getCoefficient(r.Degree),d),e=e.addOrSubtract(this.field.buildMonomial(h,c)),r=r.addOrSubtract(u.multiplyByMonomial(h,c));v=e.multiply1(o).addOrSubtract(w);f=e.multiply1(s).addOrSubtract(b)}if(l=f.getCoefficient(0),l==0)throw"ReedSolomonException sigmaTilde(0) was zero";var y=this.field.inverse(l),g=f.multiply2(y),nt=r.multiply2(y);return[g,nt]};this.findErrorLocations=function(n){var r=n.Degree,u,t,i;if(r==1)return new Array(n.getCoefficient(1));for(u=new Array(r),t=0,i=1;i<256&&t<r;i++)n.evaluateAt(i)==0&&(u[t]=this.field.inverse(i),t++);if(t!=r)throw"Error locator degree does not match number of roots";return u};this.findErrorMagnitudes=function(n,t,i){for(var e,o,u,s=t.length,f=new Array(s),r=0;r<s;r++){for(e=this.field.inverse(t[r]),o=1,u=0;u<s;u++)r!=u&&(o=this.field.multiply(o,GF256.addOrSubtract(1,this.field.multiply(t[u],e))));f[r]=this.field.multiply(n.evaluateAt(e),this.field.inverse(o));i&&(f[r]=this.field.multiply(f[r],e))}return f}}function GF256Poly(n,t){var r,i,f,u;if(t==null||t.length==0)throw"System.ArgumentException";if(this.field=n,r=t.length,r>1&&t[0]==0){for(i=1;i<r&&t[i]==0;)i++;if(i==r)this.coefficients=n.Zero.coefficients;else{for(this.coefficients=new Array(r-i),f=0;f<this.coefficients.length;f++)this.coefficients[f]=0;for(u=0;u<this.coefficients.length;u++)this.coefficients[u]=t[i+u]}}else this.coefficients=t;this.__defineGetter__("Zero",function(){return this.coefficients[0]==0});this.__defineGetter__("Degree",function(){return this.coefficients.length-1});this.__defineGetter__("Coefficients",function(){return this.coefficients});this.getCoefficient=function(n){return this.coefficients[this.coefficients.length-1-n]};this.evaluateAt=function(n){var u,i,r,t;if(n==0)return this.getCoefficient(0);if(u=this.coefficients.length,n==1){for(i=0,t=0;t<u;t++)i=GF256.addOrSubtract(i,this.coefficients[t]);return i}for(r=this.coefficients[0],t=1;t<u;t++)r=GF256.addOrSubtract(this.field.multiply(n,r),this.coefficients[t]);return r};this.addOrSubtract=function(t){var r,i,s,e,o,f,u;if(this.field!=t.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return t;if(t.Zero)return this;for(r=this.coefficients,i=t.coefficients,r.length>i.length&&(s=r,r=i,i=s),e=new Array(i.length),o=i.length-r.length,f=0;f<o;f++)e[f]=i[f];for(u=o;u<i.length;u++)e[u]=GF256.addOrSubtract(r[u-o],i[u]);return new GF256Poly(n,e)};this.multiply1=function(n){var t,s,i;if(this.field!=n.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||n.Zero)return this.field.Zero;var u=this.coefficients,f=u.length,e=n.coefficients,o=e.length,r=new Array(f+o-1);for(t=0;t<f;t++)for(s=u[t],i=0;i<o;i++)r[t+i]=GF256.addOrSubtract(r[t+i],this.field.multiply(s,e[i]));return new GF256Poly(this.field,r)};this.multiply2=function(n){var i,r,t;if(n==0)return this.field.Zero;if(n==1)return this;for(i=this.coefficients.length,r=new Array(i),t=0;t<i;t++)r[t]=this.field.multiply(this.coefficients[t],n);return new GF256Poly(this.field,r)};this.multiplyByMonomial=function(n,t){var u,r,i;if(n<0)throw"System.ArgumentException";if(t==0)return this.field.Zero;for(u=this.coefficients.length,r=new Array(u+n),i=0;i<r.length;i++)r[i]=0;for(i=0;i<u;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new GF256Poly(this.field,r)};this.divide=function(n){if(this.field!=n.field)throw"GF256Polys do not have same GF256 field";if(n.Zero)throw"Divide by 0";for(var i=this.field.Zero,t=this,f=n.getCoefficient(n.Degree),e=this.field.inverse(f);t.Degree>=n.Degree&&!t.Zero;){var r=t.Degree-n.Degree,u=this.field.multiply(t.getCoefficient(t.Degree),e),o=n.multiplyByMonomial(r,u),s=this.field.buildMonomial(r,u);i=i.addOrSubtract(s);t=t.addOrSubtract(o)}return[i,t]}}function GF256(n){var i,t,r,u;for(this.expTable=new Array(256),this.logTable=new Array(256),i=1,t=0;t<256;t++)this.expTable[t]=i,i<<=1,i>=256&&(i^=n);for(t=0;t<255;t++)this.logTable[this.expTable[t]]=t;r=new Array(1);r[0]=0;this.zero=new GF256Poly(this,new Array(r));u=new Array(1);u[0]=1;this.one=new GF256Poly(this,new Array(u));this.__defineGetter__("Zero",function(){return this.zero});this.__defineGetter__("One",function(){return this.one});this.buildMonomial=function(n,t){var i,r;if(n<0)throw"System.ArgumentException";if(t==0)return zero;for(i=new Array(n+1),r=0;r<i.length;r++)i[r]=0;return i[0]=t,new GF256Poly(this,i)};this.exp=function(n){return this.expTable[n]};this.log=function(n){if(n==0)throw"System.ArgumentException";return this.logTable[n]};this.inverse=function(n){if(n==0)throw"System.ArithmeticException";return this.expTable[255-this.logTable[n]]};this.multiply=function(n,t){return n==0||t==0?0:n==1?t:t==1?n:this.expTable[(this.logTable[n]+this.logTable[t])%255]}}function URShift(n,t){return n>=0?n>>t:(n>>t)+(2<<~t)}function FinderPattern(n,t,i){this.x=n;this.y=t;this.count=1;this.estimatedModuleSize=i;this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize});this.__defineGetter__("Count",function(){return this.count});this.__defineGetter__("X",function(){return this.x});this.__defineGetter__("Y",function(){return this.y});this.incrementCount=function(){this.count++};this.aboutEquals=function(n,t,i){if(Math.abs(t-this.y)<=n&&Math.abs(i-this.x)<=n){var r=Math.abs(n-this.estimatedModuleSize);return r<=1||r/this.estimatedModuleSize<=1}return!1}}function FinderPatternInfo(n){this.bottomLeft=n[0];this.topLeft=n[1];this.topRight=n[2];this.__defineGetter__("BottomLeft",function(){return this.bottomLeft});this.__defineGetter__("TopLeft",function(){return this.topLeft});this.__defineGetter__("TopRight",function(){return this.topRight})}function FinderPatternFinder(){this.image=null;this.possibleCenters=[];this.hasSkipped=!1;this.crossCheckStateCount=[0,0,0,0,0];this.resultPointCallback=null;this.__defineGetter__("CrossCheckStateCount",function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount});this.foundPatternCross=function(n){for(var f,t,i,r=0,u=0;u<5;u++){if(f=n[u],f==0)return!1;r+=f}return r<7?!1:(t=Math.floor((r<<INTEGER_MATH_SHIFT)/7),i=Math.floor(t/2),Math.abs(t-(n[0]<<INTEGER_MATH_SHIFT))<i&&Math.abs(t-(n[1]<<INTEGER_MATH_SHIFT))<i&&Math.abs(3*t-(n[2]<<INTEGER_MATH_SHIFT))<3*i&&Math.abs(t-(n[3]<<INTEGER_MATH_SHIFT))<i&&Math.abs(t-(n[4]<<INTEGER_MATH_SHIFT))<i)};this.centerFromEnd=function(n,t){return t-n[4]-n[3]-n[2]/2};this.crossCheckVertical=function(n,t,i,r){for(var e=this.image,o=qrcode.height,f=this.CrossCheckStateCount,u=n,s;u>=0&&e[t+u*qrcode.width];)f[2]++,u--;if(u<0)return NaN;while(u>=0&&!e[t+u*qrcode.width]&&f[1]<=i)f[1]++,u--;if(u<0||f[1]>i)return NaN;while(u>=0&&e[t+u*qrcode.width]&&f[0]<=i)f[0]++,u--;if(f[0]>i)return NaN;for(u=n+1;u<o&&e[t+u*qrcode.width];)f[2]++,u++;if(u==o)return NaN;while(u<o&&!e[t+u*qrcode.width]&&f[3]<i)f[3]++,u++;if(u==o||f[3]>=i)return NaN;while(u<o&&e[t+u*qrcode.width]&&f[4]<i)f[4]++,u++;return f[4]>=i?NaN:(s=f[0]+f[1]+f[2]+f[3]+f[4],5*Math.abs(s-r)>=2*r)?NaN:this.foundPatternCross(f)?this.centerFromEnd(f,u):NaN};this.crossCheckHorizontal=function(n,t,i,r){for(var e=this.image,o=qrcode.width,f=this.CrossCheckStateCount,u=n,s;u>=0&&e[u+t*qrcode.width];)f[2]++,u--;if(u<0)return NaN;while(u>=0&&!e[u+t*qrcode.width]&&f[1]<=i)f[1]++,u--;if(u<0||f[1]>i)return NaN;while(u>=0&&e[u+t*qrcode.width]&&f[0]<=i)f[0]++,u--;if(f[0]>i)return NaN;for(u=n+1;u<o&&e[u+t*qrcode.width];)f[2]++,u++;if(u==o)return NaN;while(u<o&&!e[u+t*qrcode.width]&&f[3]<i)f[3]++,u++;if(u==o||f[3]>=i)return NaN;while(u<o&&e[u+t*qrcode.width]&&f[4]<i)f[4]++,u++;return f[4]>=i?NaN:(s=f[0]+f[1]+f[2]+f[3]+f[4],5*Math.abs(s-r)>=r)?NaN:this.foundPatternCross(f)?this.centerFromEnd(f,u):NaN};this.handlePossibleCenter=function(n,t,i){var e=n[0]+n[1]+n[2]+n[3]+n[4],r=this.centerFromEnd(n,i),u=this.crossCheckVertical(t,Math.floor(r),n[2],e),f,o,s;if(!isNaN(u)&&(r=this.crossCheckHorizontal(Math.floor(r),Math.floor(u),n[2],e),!isNaN(r))){var h=e/7,c=!1,l=this.possibleCenters.length;for(f=0;f<l;f++)if(o=this.possibleCenters[f],o.aboutEquals(h,u,r)){o.incrementCount();c=!0;break}return c||(s=new FinderPattern(r,u,h),this.possibleCenters.push(s),this.resultPointCallback!=null&&this.resultPointCallback.foundPossibleResultPoint(s)),!0}return!1};this.selectBestPatterns=function(){var i=this.possibleCenters.length,u,f,r,t,e,o,n,s;if(i<3)throw"Couldn't find enough finder patterns";if(i>3){for(u=0,f=0,n=0;n<i;n++)r=this.possibleCenters[n].EstimatedModuleSize,u+=r,f+=r*r;for(t=u/i,this.possibleCenters.sort(function(n,i){var r=Math.abs(i.EstimatedModuleSize-t),u=Math.abs(n.EstimatedModuleSize-t);return r<u?-1:r==u?0:1}),e=Math.sqrt(f/i-t*t),o=Math.max(.2*t,e),n=0;n<this.possibleCenters.length&&this.possibleCenters.length>3;n++)s=this.possibleCenters[n],Math.abs(s.EstimatedModuleSize-t)>o&&(this.possibleCenters.remove(n),n--)}return this.possibleCenters.length>3&&this.possibleCenters.sort(function(n,t){return n.count>t.count?-1:n.count<t.count?1:0}),[this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2]]};this.findRowSkip=function(){var r=this.possibleCenters.length,n,i,t;if(r<=1)return 0;for(n=null,i=0;i<r;i++)if(t=this.possibleCenters[i],t.Count>=CENTER_QUORUM)if(n==null)n=t;else return this.hasSkipped=!0,Math.floor((Math.abs(n.X-t.X)-Math.abs(n.Y-t.Y))/2);return 0};this.haveMultiplyConfirmedCenters=function(){for(var t,e,u,f=0,i=0,r=this.possibleCenters.length,n=0;n<r;n++)t=this.possibleCenters[n],t.Count>=CENTER_QUORUM&&(f++,i+=t.EstimatedModuleSize);if(f<3)return!1;for(e=i/r,u=0,n=0;n<r;n++)t=this.possibleCenters[n],u+=Math.abs(t.EstimatedModuleSize-e);return u<=.05*i};this.findFinderPattern=function(n){var o,t,u,i,r,h,s,c;this.image=n;var l=qrcode.height,e=qrcode.width,f=Math.floor(3*l/(4*MAX_MODULES));for((f<MIN_SKIP||!1)&&(f=MIN_SKIP),o=!1,t=new Array(5),u=f-1;u<l&&!o;u+=f){for(t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,i=0,r=0;r<e;r++)if(n[r+u*qrcode.width])(i&1)==1&&i++,t[i]++;else if((i&1)==0)if(i==4)if(this.foundPatternCross(t)){if(s=this.handlePossibleCenter(t,u,r),s)f=2,this.hasSkipped?o=this.haveMultiplyConfirmedCenters():(h=this.findRowSkip(),h>t[2]&&(u+=h-t[2]-f,r=e-1));else{do r++;while(r<e&&!n[r+u*qrcode.width]);r--}i=0;t[0]=0;t[1]=0;t[2]=0;t[3]=0;t[4]=0}else t[0]=t[2],t[1]=t[3],t[2]=t[4],t[3]=1,t[4]=0,i=3;else t[++i]++;else t[i]++;this.foundPatternCross(t)&&(s=this.handlePossibleCenter(t,u,e),s&&(f=t[0],this.hasSkipped&&(o=haveMultiplyConfirmedCenters())))}return c=this.selectBestPatterns(),qrcode.orderBestPatterns(c),new FinderPatternInfo(c)}}function AlignmentPattern(n,t,i){this.x=n;this.y=t;this.count=1;this.estimatedModuleSize=i;this.__defineGetter__("EstimatedModuleSize",function(){return this.estimatedModuleSize});this.__defineGetter__("Count",function(){return this.count});this.__defineGetter__("X",function(){return Math.floor(this.x)});this.__defineGetter__("Y",function(){return Math.floor(this.y)});this.incrementCount=function(){this.count++};this.aboutEquals=function(n,t,i){if(Math.abs(t-this.y)<=n&&Math.abs(i-this.x)<=n){var r=Math.abs(n-this.estimatedModuleSize);return r<=1||r/this.estimatedModuleSize<=1}return!1}}function AlignmentPatternFinder(n,t,i,r,u,f,e){this.image=n;this.possibleCenters=[];this.startX=t;this.startY=i;this.width=r;this.height=u;this.moduleSize=f;this.crossCheckStateCount=[0,0,0];this.resultPointCallback=e;this.centerFromEnd=function(n,t){return t-n[2]-n[1]/2};this.foundPatternCross=function(n){for(var i=this.moduleSize,r=i/2,t=0;t<3;t++)if(Math.abs(i-n[t])>=r)return!1;return!0};this.crossCheckVertical=function(n,t,i,r){var e=this.image,o=qrcode.height,u=this.crossCheckStateCount,f,s;for(u[0]=0,u[1]=0,u[2]=0,f=n;f>=0&&e[t+f*qrcode.width]&&u[1]<=i;)u[1]++,f--;if(f<0||u[1]>i)return NaN;while(f>=0&&!e[t+f*qrcode.width]&&u[0]<=i)u[0]++,f--;if(u[0]>i)return NaN;for(f=n+1;f<o&&e[t+f*qrcode.width]&&u[1]<=i;)u[1]++,f++;if(f==o||u[1]>i)return NaN;while(f<o&&!e[t+f*qrcode.width]&&u[2]<=i)u[2]++,f++;return u[2]>i?NaN:(s=u[0]+u[1]+u[2],5*Math.abs(s-r)>=2*r)?NaN:this.foundPatternCross(u)?this.centerFromEnd(u,f):NaN};this.handlePossibleCenter=function(n,t,i){var c=n[0]+n[1]+n[2],r=this.centerFromEnd(n,i),u=this.crossCheckVertical(t,Math.floor(r),2*n[1],c),f,s,e,h,o;if(!isNaN(u)){for(f=(n[0]+n[1]+n[2])/3,s=this.possibleCenters.length,e=0;e<s;e++)if(h=this.possibleCenters[e],h.aboutEquals(f,u,r))return new AlignmentPattern(r,u,f);o=new AlignmentPattern(r,u,f);this.possibleCenters.push(o);this.resultPointCallback!=null&&this.resultPointCallback.foundPossibleResultPoint(o)}return null};this.find=function(){for(var s,f,u,e,c=this.startX,l=this.height,h=c+r,a=i+(l>>1),t=[0,0,0],o=0;o<l;o++){for(s=a+((o&1)==0?o+1>>1:-(o+1>>1)),t[0]=0,t[1]=0,t[2]=0,f=c;f<h&&!n[f+qrcode.width*s];)f++;for(u=0;f<h;){if(n[f+s*qrcode.width])if(u==1)t[u]++;else if(u==2){if(this.foundPatternCross(t)&&(e=this.handlePossibleCenter(t,s,f),e!=null))return e;t[0]=t[2];t[1]=1;t[2]=0;u=1}else t[++u]++;else u==1&&u++,t[u]++;f++}if(this.foundPatternCross(t)&&(e=this.handlePossibleCenter(t,s,h),e!=null))return e}if(!(this.possibleCenters.length==0))return this.possibleCenters[0];throw"Couldn't find enough alignment patterns";}}function QRCodeDataBlockReader(n,t,i){this.blockPointer=0;this.bitPointer=7;this.dataLength=0;this.blocks=n;this.numErrorCorrectionCode=i;t<=9?this.dataLengthMode=0:t>=10&&t<=26?this.dataLengthMode=1:t>=27&&t<=40&&(this.dataLengthMode=2);this.getNextBits=function(n){var i=0,u,r,f,e,o,t,s;if(n<this.bitPointer+1){for(u=0,t=0;t<n;t++)u+=1<<t;return u<<=this.bitPointer-n+1,i=(this.blocks[this.blockPointer]&u)>>this.bitPointer-n+1,this.bitPointer-=n,i}if(n<this.bitPointer+1+8){for(r=0,t=0;t<this.bitPointer+1;t++)r+=1<<t;return i=(this.blocks[this.blockPointer]&r)<<n-(this.bitPointer+1),this.blockPointer++,i+=this.blocks[this.blockPointer]>>8-(n-(this.bitPointer+1)),this.bitPointer=this.bitPointer-n%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),i}if(n<this.bitPointer+1+16){for(r=0,f=0,t=0;t<this.bitPointer+1;t++)r+=1<<t;for(e=(this.blocks[this.blockPointer]&r)<<n-(this.bitPointer+1),this.blockPointer++,o=this.blocks[this.blockPointer]<<n-(this.bitPointer+1+8),this.blockPointer++,t=0;t<n-(this.bitPointer+1+8);t++)f+=1<<t;return f<<=8-(n-(this.bitPointer+1+8)),s=(this.blocks[this.blockPointer]&f)>>8-(n-(this.bitPointer+1+8)),i=e+o+s,this.bitPointer=this.bitPointer-(n-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),i}return 0};this.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)};this.getDataLength=function(n){for(var t=0;;){if(n>>t==1)break;t++}return this.getNextBits(qrcode.sizeOfDataLengthInfo[this.dataLengthMode][t])};this.getRomanAndFigureString=function(n){var t=n,i=0,r="",u=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"],f,e;do t>1?(i=this.getNextBits(11),f=Math.floor(i/45),e=i%45,r+=u[f],r+=u[e],t-=2):t==1&&(i=this.getNextBits(6),r+=u[i],t-=1);while(t>0);return r};this.getFigureString=function(n){var t=n,i=0,r="";do t>=3?(i=this.getNextBits(10),i<100&&(r+="0"),i<10&&(r+="0"),t-=3):t==2?(i=this.getNextBits(7),i<10&&(r+="0"),t-=2):t==1&&(i=this.getNextBits(4),t-=1),r+=i;while(t>0);return r};this.get8bitByteArray=function(n){var t=n,i=0,r=[];do i=this.getNextBits(8),r.push(i),t--;while(t>0);return r};this.getKanjiString=function(n){var r=n,t=0,u="";do{t=getNextBits(13);var e=t%192,o=t/192,i=(o<<8)+e,f=0;f=i+33088<=40956?i+33088:i+49472;u+=String.fromCharCode(f);r--}while(r>0);return u};this.__defineGetter__("DataByte",function(){var r=[],f=1,e=2,o=4,s=8,i,u,t,h,n;do{if(i=this.NextMode(),i==0)if(r.length>0)break;else throw"Empty data block";if(i!=f&&i!=e&&i!=o&&i!=s)throw"Invalid mode: "+i+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";if(dataLength=this.getDataLength(i),dataLength<1)throw"Invalid data length: "+dataLength;switch(i){case f:for(n=this.getFigureString(dataLength),u=new Array(n.length),t=0;t<n.length;t++)u[t]=n.charCodeAt(t);r.push(u);break;case e:for(n=this.getRomanAndFigureString(dataLength),u=new Array(n.length),t=0;t<n.length;t++)u[t]=n.charCodeAt(t);r.push(u);break;case o:h=this.get8bitByteArray(dataLength);r.push(h);break;case s:n=this.getKanjiString(dataLength);r.push(n)}}while(1);return r})}function prepareUpload(n){files=n.target.files}function uploadFiles(n,t){n.stopPropagation();n.preventDefault();var i=new FormData;$.each(files,function(n,t){i.append(n,t)});$.ajax({url:FMS.getBaseUrl()+"core/php/upload.php?files",type:"POST",data:i,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(i){typeof i.error=="undefined"?submitForm(n,i,t):console.log("ERRORS: "+i.error)},error:function(n,t){console.log("ERRORS: "+t)}})}function submitForm(n,t,i){$form=$(n.target);var r=$form.serialize();$.each(t.files,function(n,t){r=r+"&filenames[]="+t});$.ajax({url:FMS.getBaseUrl()+"core/php/upload.php",type:"POST",data:r,cache:!1,dataType:"json",success:function(n){typeof n.error=="undefined"?i.save({url:n.formData.filenames[0].replace("../../content/picture/","")},{success:function(n){FMM.getPictures().add(n);FMV.getUIView().render();n.setIsSavable(!0);FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIDataDeleteSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIDataSaveErrorMsg())}}):console.log("ERRORS: "+n.error)},error:function(n,t){console.log("ERRORS: "+t)},complete:function(){}})}var FMC,FMS,FML,FMV,FMM,files,FMViewTemplate,FMUIInfoLayerTemplate,FMUIAddLayerTemplate,FMViewUIDataLayerTemplate,FMViewUIThresholdLayerTemplate,FMViewUIDataLayerDeleteTemplate,FMViewUIDataLayerAddTemplate,FMViewUILayerPictureTemplate,FMViewUIPictureTemplate,FMUIPictureSelectTemplate,FMUIPictureAddTemplate,FMViewGalleryTemplate,FMViewLayerTemplate,FMMenuTemplate,FMViewMenuSetSerialTemplate,FMUIAddSensorTemplate,FMMapControlViewTemplate,UIMode,FMMsgViewErrorTemplate,FMMsgViewSuccessTemplate,FMViewSliderTemplate,qrcode,itemColumn,FMViewSensorTemplate,FMAnimationViewTemplate,FMViewAnimationTemplate,ItemType,ThresholdType,__extends,ForagingMap;(function(n){var o="0.4.2",e="hasOwnProperty",f=/[\.\/]/,s=/\s*,\s*/,h="*",v=function(){},c=function(n,t){return n-t},r,i,u={n:{}},l=function(){for(var n=0,t=this.length;n<t;n++)if(typeof this[n]!="undefined")return this[n]},a=function(){for(var n=this.length;--n;)if(typeof this[n]!="undefined")return this[n]},t=function(n,f){var o,b;n=String(n);var g=u,k=i,p=Array.prototype.slice.call(arguments,2),h=t.listeners(n),y=0,e,v=[],w={},s=[],d=r;for(s.firstDefined=l,s.lastDefined=a,r=n,i=0,o=0,b=h.length;o<b;o++)"zIndex"in h[o]&&(v.push(h[o].zIndex),h[o].zIndex<0&&(w[h[o].zIndex]=h[o]));for(v.sort(c);v[y]<0;)if(e=w[v[y++]],s.push(e.apply(f,p)),i)return i=k,s;for(o=0;o<b;o++)if(e=h[o],"zIndex"in e)if(e.zIndex==v[y]){if(s.push(e.apply(f,p)),i)break;do if(y++,e=w[v[y]],e&&s.push(e.apply(f,p)),i)break;while(e)}else w[e.zIndex]=e;else if(s.push(e.apply(f,p)),i)break;return i=k,r=d,s};t._events=u;t.listeners=function(n){for(var a=n.split(f),t=u,i,v,o,e,p,s,c=[t],l=[],r=0,y=a.length;r<y;r++){for(s=[],e=0,p=c.length;e<p;e++)for(t=c[e].n,v=[t[a[r]],t[h]],o=2;o--;)i=v[o],i&&(s.push(i),l=l.concat(i.f||[]));c=s}return l};t.on=function(n,t){var r,i,e;if(n=String(n),typeof t!="function")return function(){};for(r=n.split(s),i=0,e=r.length;i<e;i++)(function(n){for(var e=n.split(f),i=u,s,r=0,o=e.length;r<o;r++)i=i.n,i=i.hasOwnProperty(e[r])&&i[e[r]]||(i[e[r]]={n:{}});for(i.f=i.f||[],r=0,o=i.f.length;r<o;r++)if(i.f[r]==t){s=!0;break}s||i.f.push(t)})(r[i]);return function(n){+n==+n&&(t.zIndex=+n)}};t.f=function(n){var i=[].slice.call(arguments,1);return function(){t.apply(null,[n,null].concat(i).concat([].slice.call(arguments,0)))}};t.stop=function(){i=1};t.nt=function(n){return n?new RegExp("(?:\\.|\\/|^)"+n+"(?:\\.|\\/|$)").test(r):r};t.nts=function(){return r.split(f)};t.off=t.unbind=function(n,i){var a,r,l,p,c,y,o,b,v,w;if(!n){t._events=u={n:{}};return}if(a=n.split(s),a.length>1){for(c=0,y=a.length;c<y;c++)t.off(a[c],i);return}for(a=n.split(f),v=[u],c=0,y=a.length;c<y;c++)for(o=0;o<v.length;o+=p.length-2){if(p=[o,1],r=v[o].n,a[c]!=h)r[a[c]]&&p.push(r[a[c]]);else for(l in r)r[e](l)&&p.push(r[l]);v.splice.apply(v,p)}for(c=0,y=v.length;c<y;c++)for(r=v[c];r.n;){if(i){if(r.f){for(o=0,b=r.f.length;o<b;o++)if(r.f[o]==i){r.f.splice(o,1);break}r.f.length||delete r.f}for(l in r.n)if(r.n[e](l)&&r.n[l].f){for(w=r.n[l].f,o=0,b=w.length;o<b;o++)if(w[o]==i){w.splice(o,1);break}w.length||delete r.n[l].f}}else{delete r.f;for(l in r.n)r.n[e](l)&&r.n[l].f&&delete r.n[l].f}r=r.n}};t.once=function(n,i){var r=function(){return t.unbind(n,r),i.apply(this,arguments)};return t.on(n,r)};t.version=o;t.toString=function(){return"You are running Eve "+o};typeof module!="undefined"&&module.exports?module.exports=t:typeof define=="function"&&define.amd?define("eve",[],function(){return t}):n.eve=t})(this),function(n,t){if(typeof define=="function"&&define.amd)define(["eve"],function(i){return t(n,i)});else if(typeof exports!="undefined"){var i=require("eve");module.exports=t(n,i)}else t(n,n.eve)}(window||this,function(n,t){var r=function(t){var r={},u=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(n){setTimeout(n,16)},f=Array.isArray||function(n){return n instanceof Array||Object.prototype.toString.call(n)=="[object Array]"},o=0,s="M"+(+new Date).toString(36),h=function(){return s+(o++).toString(36)},c=function(n,t,i,r){var u,e,o;if(f(n)){for(res=[],u=0,e=n.length;u<e;u++)res[u]=c(n[u],t,i[u],r);return res}return o=(i-n)/(r-t),function(i){return n+o*(i-t)}},l=Date.now||function(){return+new Date},a=function(n){var t=this,i;if(n==null)return t.s;i=t.s-n;t.b+=t.dur*i;t.B+=t.dur*i;t.s=n},v=function(n){var t=this;if(n==null)return t.spd;t.spd=n},y=function(n){var t=this;if(n==null)return t.dur;t.s=t.s*n/t.dur;t.dur=n},p=function(){var n=this;delete r[n.id];n.update();t("mina.stop."+n.id,n)},w=function(){var n=this;n.pdif||(delete r[n.id],n.update(),n.pdif=n.get()-n.b)},b=function(){var n=this;n.pdif&&(n.b=n.get()-n.pdif,delete n.pdif,r[n.id]=n)},k=function(){var n=this,i,t,r;if(f(n.start))for(i=[],t=0,r=n.start.length;t<r;t++)i[t]=+n.start[t]+(n.end[t]-n.start[t])*n.easing(n.s);else i=+n.start+(n.end-n.start)*n.easing(n.s);n.set(i)},e=function(){var f=0,i,n,o;for(i in r)r.hasOwnProperty(i)&&(n=r[i],o=n.get(),f++,n.s=(o-n.b)/(n.dur/n.spd),n.s>=1&&(delete r[i],n.s=1,f--,function(n){setTimeout(function(){t("mina.finish."+n.id,n)})}(n)),n.update());f&&u(e)},i=function(n,t,f,o,s,c,l){var g={id:h(),start:n,end:t,b:f,s:0,dur:o-f,spd:1,get:s,set:c,easing:l||i.linear,status:a,speed:v,duration:y,stop:p,pause:w,resume:b,update:k},d,nt;r[g.id]=g;d=0;for(nt in r)if(r.hasOwnProperty(nt)&&(d++,d==2))break;return d==1&&u(e),g};return i.time=l,i.getById=function(n){return r[n]||null},i.linear=function(n){return n},i.easeout=function(n){return Math.pow(n,1.7)},i.easein=function(n){return Math.pow(n,.48)},i.easeinout=function(n){if(n==1)return 1;if(n==0)return 0;var i=.48-n/1.04,r=Math.sqrt(.1734+i*i),u=r-i,e=Math.pow(Math.abs(u),1/3)*(u<0?-1:1),f=-r-i,o=Math.pow(Math.abs(f),1/3)*(f<0?-1:1),t=e+o+.5;return(1-t)*3*t*t+t*t*t},i.backin=function(n){if(n==1)return 1;var t=1.70158;return n*n*((t+1)*n-t)},i.backout=function(n){if(n==0)return 0;n=n-1;var t=.35;return n*n*((t+1)*n+t)+1},i.elastic=function(n){return n==!!n?n:Math.pow(2,-10*n)*Math.sin((n-.075)*2*Math.PI/.3)+1},i.bounce=function(n){var r=7.5625,t=2.75,i;return n<1/t?i=r*n*n:n<2/t?(n-=1.5/t,i=r*n*n+.75):n<2.5/t?(n-=2.25/t,i=r*n*n+.9375):(n-=2.625/t,i=r*n*n+.984375),i},n.mina=i,i}(typeof t=="undefined"?function(){}:t),i=function(n){function i(n,t){if(n){if(n.nodeType)return h(n);if(r(n,"array")&&i.set)return i.set.apply(i,n);if(n instanceof v)return n;if(t==null)return n=f.doc.querySelector(String(n)),h(n)}return n=n==null?"100%":n,t=t==null?"100%":t,new s(n,t)}function o(n,t){var i,r;if(t){if(n=="#text"&&(n=f.doc.createTextNode(t.text||t["#text"]||"")),n=="#comment"&&(n=f.doc.createComment(t.text||t["#text"]||"")),typeof n=="string"&&(n=o(n)),typeof t=="string")return n.nodeType==1?t.substring(0,6)=="xlink:"?n.getAttributeNS(st,t.substring(6)):t.substring(0,4)=="xml:"?n.getAttributeNS(d,t.substring(4)):n.getAttribute(t):t=="text"?n.nodeValue:null;if(n.nodeType==1)for(i in t)t[c](i)&&(r=l(t[i]),r?i.substring(0,6)=="xlink:"?n.setAttributeNS(st,i.substring(6),r):i.substring(0,4)=="xml:"?n.setAttributeNS(d,i.substring(4),r):n.setAttribute(i,r):n.removeAttribute(i));else"text"in t&&(n.nodeValue=t.text)}else n=f.doc.createElementNS(d,n);return n}function r(n,t){return(t=l.prototype.toLowerCase.call(t),t=="finite")?isFinite(n):t=="array"&&(n instanceof Array||Array.isArray&&Array.isArray(n))?!0:t=="null"&&n===null||t==typeof n&&n!==null||t=="object"&&n===Object(n)||ni.call(n).slice(8,-1).toLowerCase()==t}function yt(n){var i,t;if(typeof n=="function"||Object(n)!==n)return n;i=new n.constructor;for(t in n)n[c](t)&&(i[t]=yt(n[t]));return i}function oi(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return n.push(n.splice(i,1)[0])}function b(n,t,i){function r(){var o=Array.prototype.slice.call(arguments,0),u=o.join("␀"),f=r.cache=r.cache||{},e=r.count=r.count||[];return f[c](u)?(oi(e,u),i?i(f[u]):f[u]):(e.length>=1e3&&delete f[e.shift()],e.push(u),f[u]=n.apply(t,o),i?i(f[u]):f[u])}return r}function ht(n,t,i,r,f,e){if(f==null){var o=n-i,s=t-r;return!o&&!s?0:(180+u.atan2(-s,-o)*180/ut+360)%360}return ht(n,t,f,e)-ht(i,r,f,e)}function ct(n){return n%360*ut/180}function si(n){return n*180/ut%360}function li(n){var t=[];return n=n.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(n,i,r){return r=r.split(/\s*,\s*|\s+/),i=="rotate"&&r.length==1&&r.push(0,0),i=="scale"&&(r.length>2?r=r.slice(0,2):r.length==2&&r.push(0,0),r.length==1&&r.push(r[0],0,0)),i=="skewX"?t.push(["m",1,0,u.tan(ct(r[0])),1,0,0]):i=="skewY"?t.push(["m",1,u.tan(ct(r[0])),0,1,0,0]):t.push([i.charAt(0)].concat(r)),n}),t}function ai(n,t){var y=bt(n),u=new i.Matrix,v,p;if(y)for(v=0,p=y.length;v<p;v++){var r=y[v],e=r.length,c=l(r[0]).toLowerCase(),a=r[0]!=c,o=a?u.invert():0,w,b,s,h,f;c=="t"&&e==2?u.translate(r[1],0):c=="t"&&e==3?a?(w=o.x(0,0),b=o.y(0,0),s=o.x(r[1],r[2]),h=o.y(r[1],r[2]),u.translate(s-w,h-b)):u.translate(r[1],r[2]):c=="r"?e==2?(f=f||t,u.rotate(r[1],f.x+f.width/2,f.y+f.height/2)):e==4&&(a?(s=o.x(r[2],r[3]),h=o.y(r[2],r[3]),u.rotate(r[1],s,h)):u.rotate(r[1],r[2],r[3])):c=="s"?e==2||e==3?(f=f||t,u.scale(r[1],r[e-1],f.x+f.width/2,f.y+f.height/2)):e==4?a?(s=o.x(r[2],r[3]),h=o.y(r[2],r[3]),u.scale(r[1],r[1],s,h)):u.scale(r[1],r[1],r[2],r[3]):e==5&&(a?(s=o.x(r[3],r[4]),h=o.y(r[3],r[4]),u.scale(r[1],r[2],s,h)):u.scale(r[1],r[2],r[3],r[4])):c=="m"&&e==7&&u.add(r[1],r[2],r[3],r[4],r[5],r[6])}return u}function yi(n){var r=n.node.ownerSVGElement&&h(n.node.ownerSVGElement)||n.node.parentNode&&h(n.node.parentNode)||i.select("svg")||i(0,0),u=r.select("defs"),t=u==null?!1:u.node;return t||(t=tt("defs",r.node).node),t}function kt(n){return n.node.ownerSVGElement&&h(n.node.ownerSVGElement)||i.select("svg")}function pi(n,t,i){function u(n){if(n==null)return k;if(n==+n)return n;o(e,{width:n});try{return e.getBBox().width}catch(t){return 0}}function f(n){if(n==null)return k;if(n==+n)return n;o(e,{height:n});try{return e.getBBox().height}catch(t){return 0}}function r(r,u){t==null?h[r]=u(n.attr(r)||0):r==t&&(h=u(i==null?n.attr(r)||0:i))}var s=kt(n).node,h={},e=s.querySelector(".svg---mgr");e||(e=o("rect"),o(e,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),s.appendChild(e));switch(n.type){case"rect":r("rx",u);r("ry",f);case"image":r("width",u);r("height",f);case"text":r("x",u);r("y",f);break;case"circle":r("cx",u);r("cy",f);r("r",u);break;case"ellipse":r("cx",u);r("cy",f);r("rx",u);r("ry",f);break;case"line":r("x1",u);r("x2",u);r("y1",f);r("y2",f);break;case"marker":r("refX",u);r("markerWidth",u);r("refY",f);r("markerHeight",f);break;case"radialGradient":r("fx",u);r("fy",f);break;case"tspan":r("dx",u);r("dy",f);break;default:r(t,u)}return s.removeChild(e),h}function wi(n){var u;r(n,"array")||(n=Array.prototype.slice.call(arguments,0));for(var t=0,f=0,i=this.node;this[t];)delete this[t++];for(t=0;t<n.length;t++)n[t].type=="set"?n[t].forEach(function(n){i.appendChild(n.node)}):i.appendChild(n[t].node);for(u=i.childNodes,t=0;t<u.length;t++)this[f++]=h(u[t]);return this}function v(n){var i,r,t;if(n.snap in a)return a[n.snap];try{i=n.ownerSVGElement}catch(u){}if(this.node=n,i&&(this.paper=new s(i)),this.type=n.tagName||n.nodeName,r=this.id=ot(this),this.anims={},this._={transform:[]},n.snap=r,a[r]=this,this.type=="g"&&(this.add=wi),this.type in{g:1,mask:1,pattern:1,symbol:1})for(t in s.prototype)s.prototype[c](t)&&(this[t]=s.prototype[t])}function nt(n){this.node=n}function tt(n,t){var i=o(n);return t.appendChild(i),h(i)}function s(n,t){var i,r,u,h=s.prototype,l,e;if(n&&n.tagName=="svg"){if(n.snap in a)return a[n.snap];l=n.ownerDocument;i=new v(n);r=n.getElementsByTagName("desc")[0];u=n.getElementsByTagName("defs")[0];r||(r=o("desc"),r.appendChild(l.createTextNode("Created with Snap")),i.node.appendChild(r));u||(u=o("defs"),i.node.appendChild(u));i.defs=u;for(e in h)h[c](e)&&(i[e]=h[e]);i.paper=i.root=i}else i=tt("svg",f.doc.body),o(i.node,{height:t,version:1.1,width:n,xmlns:d});return i}function h(n){return n?n instanceof v||n instanceof nt?n:n.tagName&&n.tagName.toLowerCase()=="svg"?new s(n):n.tagName&&n.tagName.toLowerCase()=="object"&&n.type=="image/svg+xml"?new s(n.contentDocument.getElementsByTagName("svg")[0]):new v(n):n}function dt(n,t){for(var r,u,i=0,f=n.length;i<f;i++)r={type:n[i].type,attr:n[i].attr()},u=n[i].children(),t.push(r),u.length&&dt(u,r.childNodes=[])}var f,bt,vi,at,gt;i.version="0.4.0";i.toString=function(){return"Snap v"+this.version};i._={};f={win:n.window,doc:n.window.document};i._.glob=f;var c="hasOwnProperty",l=String,e=parseFloat,p=parseInt,u=Math,it=u.max,w=u.min,rt=u.abs,bi=u.pow,ut=u.PI,ki=u.round,k="",ft=" ",ni=Object.prototype.toString,ti=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,di=i._.separator=/[,\s]+/,et=/[\s]*,[\s]*/,ii={hs:1,rg:1},ri=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/ig,ui=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/ig,vt=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/ig,fi=0,ei="S"+(+new Date).toString(36),ot=function(n){return(n&&n.type?n.type:k)+ei+(fi++).toString(36)},st="http://www.w3.org/1999/xlink",d="http://www.w3.org/2000/svg",a={},gi=i.url=function(n){return"url('#"+n+"')"};i._.$=o;i._.id=ot;i.format=function(){var n=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(n,i,r){var u=r;return i.replace(t,function(n,t,i,r,f){t=t||r;u&&(t in u&&(u=u[t]),typeof u=="function"&&f&&(u=u()))}),u=(u==null||u==r?n:u)+""};return function(t,r){return l(t).replace(n,function(n,t){return i(n,t,r)})}}();i._.clone=yt;i._.cacher=b;i.rad=ct;i.deg=si;i.sin=function(n){return u.sin(i.rad(n))};i.tan=function(n){return u.tan(i.rad(n))};i.cos=function(n){return u.cos(i.rad(n))};i.asin=function(n){return i.deg(u.asin(n))};i.acos=function(n){return i.deg(u.acos(n))};i.atan=function(n){return i.deg(u.atan(n))};i.atan2=function(n){return i.deg(u.atan2(n))};i.angle=ht;i.len=function(n,t,r,u){return Math.sqrt(i.len2(n,t,r,u))};i.len2=function(n,t,i,r){return(n-i)*(n-i)+(t-r)*(t-r)};i.closestPoint=function(n,t,i){function h(n){var r=n.x-t,u=n.y-i;return r*r+u*u}for(var p,w,l,a,b,k,e=n.node,c=e.getTotalLength(),u=c/e.pathSegList.numberOfItems*.125,o,f,r=Infinity,v,s=0,y;s<=c;s+=u)(y=h(v=e.getPointAtLength(s)))<r&&(o=v,f=s,r=y);for(u*=.5;u>.5;)(l=f-u)>=0&&(b=h(p=e.getPointAtLength(l)))<r?(o=p,f=l,r=b):(a=f+u)<=c&&(k=h(w=e.getPointAtLength(a)))<r?(o=w,f=a,r=k):u*=.5;return{x:o.x,y:o.y,length:f,distance:Math.sqrt(r)}};i.is=r;i.snapTo=function(n,t,i){var f,u;if(i=r(i,"finite")?i:10,r(n,"array")){for(f=n.length;f--;)if(rt(n[f]-t)<=i)return n[f]}else{if(n=+n,u=t%n,u<i)return t-u;if(u>n-i)return t-u+n}return t};i.getRGB=b(function(n){if(!n||!!((n=l(n)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:y};if(n=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:y};if(ii[c](n.toLowerCase().substring(0,2))||n.charAt()=="#"||(n=lt(n)),!n)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:y};var o,s,h,a,v,t,f=n.match(ti);return f?(f[2]&&(h=p(f[2].substring(5),16),s=p(f[2].substring(3,5),16),o=p(f[2].substring(1,3),16)),f[3]&&(h=p((v=f[3].charAt(3))+v,16),s=p((v=f[3].charAt(2))+v,16),o=p((v=f[3].charAt(1))+v,16)),f[4]&&(t=f[4].split(et),o=e(t[0]),t[0].slice(-1)=="%"&&(o*=2.55),s=e(t[1]),t[1].slice(-1)=="%"&&(s*=2.55),h=e(t[2]),t[2].slice(-1)=="%"&&(h*=2.55),f[1].toLowerCase().slice(0,4)=="rgba"&&(a=e(t[3])),t[3]&&t[3].slice(-1)=="%"&&(a/=100)),f[5])?(t=f[5].split(et),o=e(t[0]),t[0].slice(-1)=="%"&&(o/=100),s=e(t[1]),t[1].slice(-1)=="%"&&(s/=100),h=e(t[2]),t[2].slice(-1)=="%"&&(h/=100),(t[0].slice(-3)=="deg"||t[0].slice(-1)=="°")&&(o/=360),f[1].toLowerCase().slice(0,4)=="hsba"&&(a=e(t[3])),t[3]&&t[3].slice(-1)=="%"&&(a/=100),i.hsb2rgb(o,s,h,a)):f[6]?(t=f[6].split(et),o=e(t[0]),t[0].slice(-1)=="%"&&(o/=100),s=e(t[1]),t[1].slice(-1)=="%"&&(s/=100),h=e(t[2]),t[2].slice(-1)=="%"&&(h/=100),(t[0].slice(-3)=="deg"||t[0].slice(-1)=="°")&&(o/=360),f[1].toLowerCase().slice(0,4)=="hsla"&&(a=e(t[3])),t[3]&&t[3].slice(-1)=="%"&&(a/=100),i.hsl2rgb(o,s,h,a)):(o=w(u.round(o),255),s=w(u.round(s),255),h=w(u.round(h),255),a=w(it(a,0),1),f={r:o,g:s,b:h,toString:y},f.hex="#"+(16777216|h|s<<8|o<<16).toString(16).slice(1),f.opacity=r(a,"finite")?a:1,f):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:y}},i);i.hsb=b(function(n,t,r){return i.hsb2rgb(n,t,r).hex});i.hsl=b(function(n,t,r){return i.hsl2rgb(n,t,r).hex});i.rgb=b(function(n,t,i,f){if(r(f,"finite")){var e=u.round;return"rgba("+[e(n),e(t),e(i),+f.toFixed(2)]+")"}return"#"+(16777216|i|t<<8|n<<16).toString(16).slice(1)});var lt=function(n){var t=f.doc.getElementsByTagName("head")[0]||f.doc.getElementsByTagName("svg")[0],i="rgb(255, 0, 0)";return lt=b(function(n){if(n.toLowerCase()=="red")return i;t.style.color=i;t.style.color=n;var r=f.doc.defaultView.getComputedStyle(t,k).getPropertyValue("color");return r==i?null:r}),lt(n)},hi=function(){return"hsb("+[this.h,this.s,this.b]+")"},ci=function(){return"hsl("+[this.h,this.s,this.l]+")"},y=function(){return this.opacity==1||this.opacity==null?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},pt=function(n,t,u){if(t==null&&r(n,"object")&&"r"in n&&"g"in n&&"b"in n&&(u=n.b,t=n.g,n=n.r),t==null&&r(n,string)){var f=i.getRGB(n);n=f.r;t=f.g;u=f.b}return(n>1||t>1||u>1)&&(n/=255,t/=255,u/=255),[n,t,u]},wt=function(n,t,f,e){n=u.round(n*255);t=u.round(t*255);f=u.round(f*255);var o={r:n,g:t,b:f,opacity:r(e,"finite")?e:1,hex:i.rgb(n,t,f),toString:y};return r(e,"finite")&&(o.opacity=e),o};i.color=function(n){var t;return r(n,"object")&&"h"in n&&"s"in n&&"b"in n?(t=i.hsb2rgb(n),n.r=t.r,n.g=t.g,n.b=t.b,n.opacity=1,n.hex=t.hex):r(n,"object")&&"h"in n&&"s"in n&&"l"in n?(t=i.hsl2rgb(n),n.r=t.r,n.g=t.g,n.b=t.b,n.opacity=1,n.hex=t.hex):(r(n,"string")&&(n=i.getRGB(n)),r(n,"object")&&"r"in n&&"g"in n&&"b"in n&&!("error"in n)?(t=i.rgb2hsl(n),n.h=t.h,n.s=t.s,n.l=t.l,t=i.rgb2hsb(n),n.v=t.b):(n={hex:"none"},n.r=n.g=n.b=n.h=n.s=n.v=n.l=-1,n.error=1)),n.toString=y,n};i.hsb2rgb=function(n,t,i,u){r(n,"object")&&"h"in n&&"s"in n&&"b"in n&&(i=n.b,t=n.s,u=n.o,n=n.h);n*=360;var o,s,h,e,f;return n=n%360/60,f=i*t,e=f*(1-rt(n%2-1)),o=s=h=i-f,n=~~n,o+=[f,e,0,0,e,f][n],s+=[e,f,f,e,0,0][n],h+=[0,0,e,f,f,e][n],wt(o,s,h,u)};i.hsl2rgb=function(n,t,i,u){r(n,"object")&&"h"in n&&"s"in n&&"l"in n&&(i=n.l,t=n.s,n=n.h);(n>1||t>1||i>1)&&(n/=360,t/=100,i/=100);n*=360;var o,s,h,e,f;return n=n%360/60,f=2*t*(i<.5?i:1-i),e=f*(1-rt(n%2-1)),o=s=h=i-f/2,n=~~n,o+=[f,e,0,0,e,f][n],s+=[e,f,f,e,0,0][n],h+=[0,0,e,f,f,e][n],wt(o,s,h,u)};i.rgb2hsb=function(n,t,i){i=pt(n,t,i);n=i[0];t=i[1];i=i[2];var f,e,u,r;return u=it(n,t,i),r=u-w(n,t,i),f=r==0?null:u==n?(t-i)/r:u==t?(i-n)/r+2:(n-t)/r+4,f=(f+360)%6/6,e=r==0?0:r/u,{h:f,s:e,b:u,toString:hi}};i.rgb2hsl=function(n,t,i){i=pt(n,t,i);n=i[0];t=i[1];i=i[2];var e,s,u,f,o,r;return f=it(n,t,i),o=w(n,t,i),r=f-o,e=r==0?null:f==n?(t-i)/r:f==t?(i-n)/r+2:(n-t)/r+4,e=(e+360)%6/6,u=(f+o)/2,s=r==0?0:u<.5?r/(2*u):r/(2-2*u),{h:e,s:s,l:u,toString:ci}};i.parsePathString=function(n){var u,f,t;return n?(u=i.path(n),u.arr)?i.path.clone(u.arr):(f={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[],r(n,"array")&&r(n[0],"array")&&(t=i.path.clone(n)),t.length||l(n).replace(ri,function(n,i,r){var u=[],e=i.toLowerCase();if(r.replace(vt,function(n,t){t&&u.push(+t)}),e=="m"&&u.length>2&&(t.push([i].concat(u.splice(0,2))),e="l",i=i=="m"?"l":"L"),e=="o"&&u.length==1&&t.push([i,u[0]]),e=="r")t.push([i].concat(u));else while(u.length>=f[e])if(t.push([i].concat(u.splice(0,f[e]))),!f[e])break}),t.toString=i.path.toString,u.arr=i.path.clone(t),t):null};bt=i.parseTransformString=function(n){if(!n)return null;var t=[];return r(n,"array")&&r(n[0],"array")&&(t=i.path.clone(n)),t.length||l(n).replace(ui,function(n,i,r){var u=[],f=i.toLowerCase();r.replace(vt,function(n,t){t&&u.push(+t)});t.push([i].concat(u))}),t.toString=i.path.toString,t};i._.svgTransform2string=li;i._.rgTransform=/^[a-z][\s]*-?\.?\d/i;i._.transform2matrix=ai;i._unit2px=pi;vi=f.doc.contains||f.doc.compareDocumentPosition?function(n,t){var r=n.nodeType==9?n.documentElement:n,i=t&&t.parentNode;return n==i||!!(i&&i.nodeType==1&&(r.contains?r.contains(i):n.compareDocumentPosition&&n.compareDocumentPosition(i)&16))}:function(n,t){if(t)while(t)if(t=t.parentNode,t==n)return!0;return!1};i._.getSomeDefs=yi;i._.getSomeSVG=kt;i.select=function(n){return n=l(n).replace(/([^\\]):/g,"$1\\:"),h(f.doc.querySelector(n))};i.selectAll=function(n){for(var r=f.doc.querySelectorAll(n),u=(i.set||Array)(),t=0;t<r.length;t++)u.push(h(r[t]));return u};setInterval(function(){var t,i,n;for(t in a)a[c](t)&&(i=a[t],n=i.node,(i.type!="svg"&&!n.ownerSVGElement||i.type=="svg"&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete a[t])},1e4);v.prototype.attr=function(n,i){var f=this,s=f.node,e,h,u,a,l,o;if(!n){if(s.nodeType!=1)return{text:s.nodeValue};for(e=s.attributes,h={},u=0,a=e.length;u<a;u++)h[e[u].nodeName]=e[u].nodeValue;return h}if(r(n,"string"))if(arguments.length>1)l={},l[n]=i,n=l;else return t("snap.util.getattr."+n,f).firstDefined();for(o in n)n[c](o)&&t("snap.util.attr."+o,f,n[o]);return f};i.parse=function(n){var t=f.doc.createDocumentFragment(),i=!0,r=f.doc.createElement("div");if(n=l(n),n.match(/^\s*<\s*svg(?:\s|>)/)||(n="<svg>"+n+"<\/svg>",i=!1),r.innerHTML=n,n=r.getElementsByTagName("svg")[0],n)if(i)t=n;else while(n.firstChild)t.appendChild(n.firstChild);return new nt(t)};i.fragment=function(){for(var n,u=Array.prototype.slice.call(arguments,0),t=f.doc.createDocumentFragment(),r=0,e=u.length;r<e;r++)n=u[r],n.node&&n.node.nodeType&&t.appendChild(n.node),n.nodeType&&t.appendChild(n),typeof n=="string"&&t.appendChild(i.parse(n).node);return new nt(t)};i._.make=tt;i._.wrap=h;s.prototype.el=function(n,t){var i=tt(n,this.node);return t&&i.attr(t),i};v.prototype.children=function(){for(var t=[],r=this.node.childNodes,n=0,u=r.length;n<u;n++)t[n]=i(r[n]);return t};v.prototype.toJSON=function(){var n=[];return dt([this],n),n[0]};t.on("snap.util.getattr",function(){var n=t.nt(),i;return n=n.substring(n.lastIndexOf(".")+1),i=n.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()}),at[c](i)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(i):o(this.node,n)});at={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(n){var i=t.nt(),r={},u,f;i=i.substring(i.lastIndexOf(".")+1);r[i]=n;u=i.replace(/-(\w)/gi,function(n,t){return t.toUpperCase()});f=i.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()});at[c](f)?this.node.style[u]=n==null?k:n:o(this.node,r)});return function(){}(s.prototype),i.ajax=function(n,i,u,f){var e=new XMLHttpRequest,o=ot(),h,s;if(e){if(r(i,"function"))f=u,u=i,i=null;else if(r(i,"object")){h=[];for(s in i)i.hasOwnProperty(s)&&h.push(encodeURIComponent(s)+"="+encodeURIComponent(i[s]));i=h.join("&")}if(e.open(i?"POST":"GET",n,!0),i&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("Content-type","application/x-www-form-urlencoded")),u){t.once("snap.ajax."+o+".0",u);t.once("snap.ajax."+o+".200",u);t.once("snap.ajax."+o+".304",u)}return(e.onreadystatechange=function(){e.readyState==4&&t("snap.ajax."+o+"."+e.status,f,e)},e.readyState==4)?e:(e.send(i),e)}},i.load=function(n,t,r){i.ajax(n,function(n){var u=i.parse(n.responseText);r?t.call(r,u):t(u)})},gt=function(n){var r=n.getBoundingClientRect(),u=n.ownerDocument,t=u.body,i=u.documentElement,f=i.clientTop||t.clientTop||0,e=i.clientLeft||t.clientLeft||0,o=r.top+(g.win.pageYOffset||i.scrollTop||t.scrollTop)-f,s=r.left+(g.win.pageXOffset||i.scrollLeft||t.scrollLeft)-e;return{y:o,x:s}},i.getElementByPoint=function(n,t){var o=this,s=o.canvas,i=f.doc.elementFromPoint(n,t),e,r,u;return(f.win.opera&&i.tagName=="svg"&&(e=gt(i),r=i.createSVGRect(),r.x=n-e.x,r.y=t-e.y,r.width=r.height=1,u=i.getIntersectionList(r,null),u.length&&(i=u[u.length-1])),!i)?null:h(i)},i.plugin=function(n){n(i,v,s,f,nt)},f.win.Snap=i,i}(n||this);return i.plugin(function(n,t,i){i.prototype.multitext=function(t,i,r,u,f,e){var p=n(),w="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",b=p.text(0,0,w),h,o,v,y;b.attr(e);h=b.getBBox().width/w.length;p.remove();var c=r.split(" "),l=0,s=0,a=[""];for(o=0;o<c.length;o++){if(v=c[o].length,l+v*h>u)if(s*CPTSetting.getPreviewBoxMargin()*1.45*1.25<f)a.push(""),s++,l=0;else break;(s-1)*CPTSetting.getThumbnailRadius()*.75*1.25<f&&(l+=v*h,a[s]+=c[o]+" ")}return y=this.text(t,i,a).attr(e),y.selectAll("tspan:nth-child(n+2)").attr({dy:CPTSetting.getThumbnailRadius()*.75,x:t}),y}}),i.plugin(function(i,u,f,e,o){function k(n,t){var u,r;if(t==null){if(u=!0,t=n.type=="linearGradient"||n.type=="radialGradient"?n.node.getAttribute("gradientTransform"):n.type=="pattern"?n.node.getAttribute("patternTransform"):n.node.getAttribute("transform"),!t)return new i.Matrix;t=i._.svgTransform2string(t)}else t=i._.rgTransform.test(t)?l(t).replace(/\.{3}|\u2026/g,n._.transform||""):i._.svgTransform2string(t),y(t,"array")&&(t=i.path?i.path.toString.call(t):l(t)),n._.transform=t;if(r=i._.transform2matrix(t,n.getBBox(1)),u)return r;n.matrix=r}function tt(n){function u(n,t){var i=h(n.node,t);if(i=i&&i.match(v),i=i&&i[2],i&&i.charAt()=="#")i=i.substring(1);else return;i&&(r[i]=(r[i]||[]).concat(function(i){var r={};r[t]=URL(i);h(n.node,r)}))}function y(n){var t=h(n.node,"xlink:href");if(t&&t.charAt()=="#")t=t.substring(1);else return;t&&(r[t]=(r[t]||[]).concat(function(t){n.attr("xlink:href","#"+t)}))}for(var c,e,o,a,l=n.selectAll("*"),t,v=/^\s*url\(("|'|)(.*)\1\)\s*$/,f=[],r={},i=0,s=l.length;i<s;i++)t=l[i],u(t,"fill"),u(t,"stroke"),u(t,"filter"),u(t,"mask"),u(t,"clip-path"),y(t),c=h(t.node,"id"),c&&(h(t.node,{id:t.id}),f.push({old:c,id:t.id}));for(i=0,s=f.length;i<s;i++)if(e=r[f[i].old],e)for(o=0,a=e.length;o<a;o++)e[o](f[i].id)}function it(n,t,i){return function(r){var u=r.slice(n,t);return u.length==1&&(u=u[0]),i?i(u):u}}function g(n){return function(){var i=n?"<"+this.type:"",f=this.node.attributes,r=this.node.childNodes,t,u;if(n)for(t=0,u=f.length;t<u;t++)i+=" "+f[t].name+'="'+f[t].value.replace(/"/g,'\\"')+'"';if(r.length){for(n&&(i+=">"),t=0,u=r.length;t<u;t++)r[t].nodeType==3?i+=r[t].nodeValue:r[t].nodeType==1&&(i+=c(r[t]).toString());n&&(i+="<\/"+this.type+">")}else n&&(i+="/>");return i}}var s=u.prototype,y=i.is,l=String,nt=i._unit2px,h=i._.$,p=i._.make,b=i._.getSomeDefs,w="hasOwnProperty",c=i._.wrap,d,v,a;s.getBBox=function(n){var t,u,e,r,f;if(!i.Matrix||!i.path)return this.node.getBBox();if(t=this,u=new i.Matrix,t.removed)return i._.box();while(t.type=="use")n||(u=u.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))),t.original?t=t.original:(e=t.attr("xlink:href"),t=t.original=t.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1)));r=t._;f=i.path.get[t.type]||i.path.get.deflt;try{return n?(r.bboxwt=f?i.path.getBBox(t.realPath=f(t)):i._.box(t.node.getBBox()),i._.box(r.bboxwt)):(t.realPath=f(t),t.matrix=t.transform().localMatrix,r.bbox=i.path.getBBox(i.path.map(t.realPath,u.add(t.matrix))),i._.box(r.bbox))}catch(o){return i._.box()}};d=function(){return this.string};s.transform=function(n){var c=this._;if(n==null){for(var r=this,u=new i.Matrix(this.node.getCTM()),t=k(this),f=[t],e=new i.Matrix,o,s=t.toTransformString(),a=l(t)==l(this.matrix)?l(c.transform):s;r.type!="svg"&&(r=r.parent());)f.push(k(r));for(o=f.length;o--;)e.add(f[o]);return{string:a,globalMatrix:u,totalMatrix:e,localMatrix:t,diffMatrix:u.clone().add(t.invert()),global:u.toTransformString(),total:e.toTransformString(),local:s,toString:d}}return n instanceof i.Matrix?(this.matrix=n,this._.transform=n.toTransformString()):k(this,n),this.node&&(this.type=="linearGradient"||this.type=="radialGradient"?h(this.node,{gradientTransform:this.matrix}):this.type=="pattern"?h(this.node,{patternTransform:this.matrix}):h(this.node,{transform:this.matrix})),this};s.parent=function(){return c(this.node.parentNode)};s.append=s.add=function(n){if(n){if(n.type=="set"){var t=this;return n.forEach(function(n){t.add(n)}),this}n=c(n);this.node.appendChild(n.node);n.paper=this.paper}return this};s.appendTo=function(n){return n&&(n=c(n),n.append(this)),this};s.prepend=function(n){var r,t,i;if(n){if(n.type=="set")return r=this,n.forEach(function(n){t?t.after(n):r.prepend(n);t=n}),this;n=c(n);i=n.parent();this.node.insertBefore(n.node,this.node.firstChild);this.add&&this.add();n.paper=this.paper;this.parent()&&this.parent().add();i&&i.add()}return this};s.prependTo=function(n){return n=c(n),n.prepend(this),this};s.before=function(n){var t,i;return n.type=="set"?(t=this,n.forEach(function(n){var i=n.parent();t.node.parentNode.insertBefore(n.node,t.node);i&&i.add()}),this.parent().add(),this):(n=c(n),i=n.parent(),this.node.parentNode.insertBefore(n.node,this.node),this.parent()&&this.parent().add(),i&&i.add(),n.paper=this.paper,this)};s.after=function(n){n=c(n);var t=n.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(n.node,this.node.nextSibling):this.node.parentNode.appendChild(n.node),this.parent()&&this.parent().add(),t&&t.add(),n.paper=this.paper,this};s.insertBefore=function(n){n=c(n);var t=this.parent();return n.node.parentNode.insertBefore(this.node,n.node),this.paper=n.paper,t&&t.add(),n.parent()&&n.parent().add(),this};s.insertAfter=function(n){n=c(n);var t=this.parent();return n.node.parentNode.insertBefore(this.node,n.node.nextSibling),this.paper=n.paper,t&&t.add(),n.parent()&&n.parent().add(),this};s.remove=function(){var n=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,n&&n.add(),this};s.select=function(n){return c(this.node.querySelector(n))};s.selectAll=function(n){for(var r=this.node.querySelectorAll(n),u=(i.set||Array)(),t=0;t<r.length;t++)u.push(c(r[t]));return u};s.asPX=function(n,t){return t==null&&(t=this.attr(n)),+nt(this,n,t)};s.use=function(){var n,t=this.node.id;return t||(t=this.id,h(this.node,{id:t})),n=this.type=="linearGradient"||this.type=="radialGradient"||this.type=="pattern"?p(this.type,this.node.parentNode):p("use",this.node.parentNode),h(n.node,{"xlink:href":"#"+t}),n.original=this,n};s.clone=function(){var n=c(this.node.cloneNode(!0));return h(n.node,"id")&&h(n.node,{id:n.id}),tt(n),n.insertAfter(this),n};s.toDefs=function(){var n=b(this);return n.appendChild(this.node),this};s.pattern=s.toPattern=function(n,t,i,r){var u=p("pattern",b(this));return n==null&&(n=this.getBBox()),y(n,"object")&&"x"in n&&(t=n.y,i=n.width,r=n.height,n=n.x),h(u.node,{x:n,y:t,width:i,height:r,patternUnits:"userSpaceOnUse",id:u.id,viewBox:[n,t,i,r].join(" ")}),u.node.appendChild(this.node),u};s.marker=function(n,t,i,r,u,f){var e=p("marker",b(this));return n==null&&(n=this.getBBox()),y(n,"object")&&"x"in n&&(t=n.y,i=n.width,r=n.height,u=n.refX||n.cx,f=n.refY||n.cy,n=n.x),h(e.node,{viewBox:[n,t,i,r].join(" "),markerWidth:i,markerHeight:r,orient:"auto",refX:u||0,refY:f||0,id:e.id}),e.node.appendChild(this.node),e};v=function(n,t,i,u){typeof i!="function"||i.length||(u=i,i=r.linear);this.attr=n;this.dur=t;i&&(this.easing=i);u&&(this.callback=u)};i._.Animation=v;i.animation=function(n,t,i,r){return new v(n,t,i,r)};s.inAnim=function(){var n=this,t=[];for(var i in n.anims)n.anims[w](i)&&function(n){t.push({anim:new v(n._attrs,n.dur,n.easing,n._callback),mina:n,curStatus:n.status(),status:function(t){return n.status(t)},stop:function(){n.stop()}})}(n.anims[i]);return t};i.animate=function(n,i,u,f,e,o){typeof e!="function"||e.length||(o=e,e=r.linear);var s=r.time(),h=r(n,i,s,s+f,r.time,u,e);return o&&t.once("mina.finish."+h.id,o),h};s.stop=function(){for(var t=this.inAnim(),n=0,i=t.length;n<i;n++)t[n].stop();return this};s.animate=function(n,i,u,f){var s,nt,d,o;typeof u!="function"||u.length||(f=u,u=r.linear);n instanceof v&&(f=n.callback,u=n.easing,i=n.dur,n=n.attr);var h=[],b=[],a={},c,k,g,p,e=this;for(s in n)n[w](s)&&(e.equal?(p=e.equal(s,l(n[s])),c=p.from,k=p.to,g=p.f):(c=+e.attr(s),k=+n[s]),nt=y(c,"array")?c.length:1,a[s]=it(h.length,h.length+nt,g),h=h.concat(c),b=b.concat(k));d=r.time();o=r(h,b,d,d+i,r.time,function(n){var i={};for(var t in a)a[w](t)&&(i[t]=a[t](n));e.attr(i)},u);e.anims[o.id]=o;o._attrs=n;o._callback=f;t("snap.animcreated."+e.id,o);t.once("mina.finish."+o.id,function(){delete e.anims[o.id];f&&f.call(e)});t.once("mina.stop."+o.id,function(){delete e.anims[o.id]});return e};a={};s.data=function(n,r){var u=a[this.id]=a[this.id]||{},f;if(arguments.length==0)return t("snap.data.get."+this.id,this,u,null),u;if(arguments.length==1){if(i.is(n,"object")){for(f in n)n[w](f)&&this.data(f,n[f]);return this}return t("snap.data.get."+this.id,this,u[n],n),u[n]}return u[n]=r,t("snap.data.set."+this.id,this,r,n),this};s.removeData=function(n){return n==null?a[this.id]={}:a[this.id]&&delete a[this.id][n],this};s.outerSVG=s.toString=g(1);s.innerSVG=g();s.toDataURL=function(){if(n&&n.btoa){var t=this.getBBox(),r=i.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}<\/svg>',{x:+t.x.toFixed(3),y:+t.y.toFixed(3),width:+t.width.toFixed(3),height:+t.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r)))}};o.prototype.select=s.select;o.prototype.selectAll=s.selectAll}),i.plugin(function(n){function i(n,t,i,r,f,e){if(t==null&&u.call(n)=="[object SVGMatrix]"){this.a=n.a;this.b=n.b;this.c=n.c;this.d=n.d;this.e=n.e;this.f=n.f;return}n!=null?(this.a=+n,this.b=+t,this.c=+i,this.d=+r,this.e=+f,this.f=+e):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}var u=Object.prototype.toString,f=String,t=Math,r="";(function(u){function e(n){return n[0]*n[0]+n[1]*n[1]}function o(n){var i=t.sqrt(e(n));n[0]&&(n[0]/=i);n[1]&&(n[1]/=i)}u.add=function(n,t,r,u,f,e){var o=[[],[],[]],v=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],a=[[n,r,f],[t,u,e],[0,0,1]],s,h,c,l;for(n&&n instanceof i&&(a=[[n.a,n.c,n.e],[n.b,n.d,n.f],[0,0,1]]),s=0;s<3;s++)for(h=0;h<3;h++){for(l=0,c=0;c<3;c++)l+=v[s][c]*a[c][h];o[s][h]=l}return this.a=o[0][0],this.b=o[1][0],this.c=o[0][1],this.d=o[1][1],this.e=o[0][2],this.f=o[1][2],this};u.invert=function(){var n=this,t=n.a*n.d-n.b*n.c;return new i(n.d/t,-n.b/t,-n.c/t,n.a/t,(n.c*n.f-n.d*n.e)/t,(n.b*n.e-n.a*n.f)/t)};u.clone=function(){return new i(this.a,this.b,this.c,this.d,this.e,this.f)};u.translate=function(n,t){return this.add(1,0,0,1,n,t)};u.scale=function(n,t,i,r){return t==null&&(t=n),(i||r)&&this.add(1,0,0,1,i,r),this.add(n,0,0,t,0,0),(i||r)&&this.add(1,0,0,1,-i,-r),this};u.rotate=function(i,r,u){i=n.rad(i);r=r||0;u=u||0;var f=+t.cos(i).toFixed(9),e=+t.sin(i).toFixed(9);return this.add(f,e,-e,f,r,u),this.add(1,0,0,1,-r,-u)};u.x=function(n,t){return n*this.a+t*this.c+this.e};u.y=function(n,t){return n*this.b+t*this.d+this.f};u.get=function(n){return+this[f.fromCharCode(97+n)].toFixed(4)};u.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};u.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};u.determinant=function(){return this.a*this.d-this.b*this.c};u.split=function(){var i={},r,u,f;return i.dx=this.e,i.dy=this.f,r=[[this.a,this.c],[this.b,this.d]],i.scalex=t.sqrt(e(r[0])),o(r[0]),i.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1],r[1]=[r[1][0]-r[0][0]*i.shear,r[1][1]-r[0][1]*i.shear],i.scaley=t.sqrt(e(r[1])),o(r[1]),i.shear/=i.scaley,this.determinant()<0&&(i.scalex=-i.scalex),u=-r[0][1],f=r[1][1],f<0?(i.rotate=n.deg(t.acos(f)),u<0&&(i.rotate=360-i.rotate)):i.rotate=n.deg(t.asin(u)),i.isSimple=!+i.shear.toFixed(9)&&(i.scalex.toFixed(9)==i.scaley.toFixed(9)||!i.rotate),i.isSuperSimple=!+i.shear.toFixed(9)&&i.scalex.toFixed(9)==i.scaley.toFixed(9)&&!i.rotate,i.noRotation=!+i.shear.toFixed(9)&&!i.rotate,i};u.toTransformString=function(n){var t=n||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:r)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:r)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:r))}})(i.prototype);n.Matrix=i;n.matrix=function(n,t,r,u,f,e){return new i(n,t,r,u,f,e)}}),i.plugin(function(n,i,r,u,f){function y(r){return function(u){var o,a,v;t.stop();u instanceof f&&u.node.childNodes.length==1&&(u.node.firstChild.tagName=="radialGradient"||u.node.firstChild.tagName=="linearGradient"||u.node.firstChild.tagName=="pattern")&&(u=u.node.firstChild,s(this).appendChild(u),u=h(u));u instanceof i?u.type=="radialGradient"||u.type=="linearGradient"||u.type=="pattern"?(u.node.id||e(u.node,{id:u.id}),o=c(u.node.id)):o=u.attr(r):(o=n.color(u),o.error?(a=n(s(this).ownerSVGElement).gradient(u),a?(a.node.id||e(a.node,{id:a.id}),o=c(a.node.id)):o=u):o=l(o));v={};v[r]=o;e(this.node,v);this.node.style[r]=g}}function w(n){t.stop();n==+n&&(n+="px");this.node.style.fontSize=n}function b(n){for(var t,i=[],u=n.childNodes,r=0,f=u.length;r<f;r++)t=u[r],t.nodeType==3&&i.push(t.nodeValue),t.tagName=="tspan"&&(t.childNodes.length==1&&t.firstChild.nodeType==3?i.push(t.firstChild.nodeValue):i.push(b(t)));return i}function k(){return t.stop(),this.node.style.fontSize}var a=n._.make,h=n._.wrap,o=n.is,s=n._.getSomeDefs,d=/^url\(#?([^)]+)\)$/,e=n._.$,c=n.url,l=String,v=n._.separator,g="",p;t.on("snap.util.attr.mask",function(n){if(n instanceof i||n instanceof f){if(t.stop(),n instanceof f&&n.node.childNodes.length==1&&(n=n.node.firstChild,s(this).appendChild(n),n=h(n)),n.type=="mask")var r=n;else r=a("mask",s(this)),r.node.appendChild(n.node);r.node.id||e(r.node,{id:r.id});e(this.node,{mask:c(r.id)})}});(function(n){t.on("snap.util.attr.clip",n);t.on("snap.util.attr.clip-path",n);t.on("snap.util.attr.clipPath",n)})(function(n){if(n instanceof i||n instanceof f){if(t.stop(),n.type=="clipPath")var r=n;else r=a("clipPath",s(this)),r.node.appendChild(n.node),r.node.id||e(r.node,{id:r.id});e(this.node,{"clip-path":c(r.node.id||r.id)})}});t.on("snap.util.attr.fill",y("fill"));t.on("snap.util.attr.stroke",y("stroke"));p=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(n){var i;if(n=l(n),i=n.match(p),!i)return null;var u=i[1],t=i[2],r=i[3];return t=t.split(/\s*,\s*/).map(function(n){return+n==n?+n:n}),t.length==1&&t[0]==0&&(t=[]),r=r.split("-"),r=r.map(function(n){n=n.split(":");var t={color:n[0]};return n[1]&&(t.offset=parseFloat(n[1])),t}),{type:u,params:t,stops:r}});t.on("snap.util.attr.d",function(i){t.stop();o(i,"array")&&o(i[0],"array")&&(i=n.path.toString.call(i));i=l(i);i.match(/[ruo]/i)&&(i=n.path.toAbsolute(i));e(this.node,{d:i})})(-1);t.on("snap.util.attr.#text",function(n){t.stop();n=l(n);for(var i=u.doc.createTextNode(n);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(i)})(-1);t.on("snap.util.attr.path",function(n){t.stop();this.attr({d:n})})(-1);t.on("snap.util.attr.class",function(n){t.stop();this.node.className.baseVal=n})(-1);t.on("snap.util.attr.viewBox",function(n){var i;i=o(n,"object")&&"x"in n?[n.x,n.y,n.width,n.height].join(" "):o(n,"array")?n.join(" "):n;e(this.node,{viewBox:i});t.stop()})(-1);t.on("snap.util.attr.transform",function(n){this.transform(n);t.stop()})(-1);t.on("snap.util.attr.r",function(n){this.type=="rect"&&(t.stop(),e(this.node,{rx:n,ry:n}))})(-1);t.on("snap.util.attr.textpath",function(n){var u,r,f,l,c;if(t.stop(),this.type=="text"){if(!n&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);r.remove();delete this.textPath;return}if(o(n,"string")?(l=s(this),c=h(l.parentNode).path(n),l.appendChild(c.node),u=c.id,c.attr({id:u})):(n=h(n),n instanceof i&&(u=n.attr("id"),u||(u=n.id,n.attr({id:u})))),u)if(r=this.textPath,f=this.node,r)r.attr({"xlink:href":"#"+u});else{for(r=e("textPath",{"xlink:href":"#"+u,startOffset:"50%"});f.firstChild;)r.appendChild(f.firstChild);f.appendChild(r);this.textPath=h(r)}}})(-1);t.on("snap.util.attr.text",function(n){var r;if(this.type=="text"){for(var i=this.node,f=function(n){var t=e("tspan"),i;if(o(n,"array"))for(i=0;i<n.length;i++)t.appendChild(f(n[i]));else t.appendChild(u.doc.createTextNode(n));return t.normalize&&t.normalize(),t};i.firstChild;)i.removeChild(i.firstChild);for(r=f(n);r.firstChild;)i.appendChild(r.firstChild)}t.stop()})(-1);t.on("snap.util.attr.fontSize",w)(-1);t.on("snap.util.attr.font-size",w)(-1);t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1);t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function i(i){return function(){t.stop();var r=u.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+i);return r=="none"?r:n(u.doc.getElementById(r.match(d)[1]))}}function r(n){return function(i){var r,u;if(t.stop(),r="marker"+n.charAt(0).toUpperCase()+n.substring(1),i==""||!i){this.node.style[r]="none";return}if(i.type=="marker"){u=i.node.id;u||e(i.node,{id:i.id});this.node.style[r]=c(u);return}}}t.on("snap.util.getattr.marker-end",i("end"))(-1);t.on("snap.util.getattr.markerEnd",i("end"))(-1);t.on("snap.util.getattr.marker-start",i("start"))(-1);t.on("snap.util.getattr.markerStart",i("start"))(-1);t.on("snap.util.getattr.marker-mid",i("mid"))(-1);t.on("snap.util.getattr.markerMid",i("mid"))(-1);t.on("snap.util.attr.marker-end",r("end"))(-1);t.on("snap.util.attr.markerEnd",r("end"))(-1);t.on("snap.util.attr.marker-start",r("start"))(-1);t.on("snap.util.attr.markerStart",r("start"))(-1);t.on("snap.util.attr.marker-mid",r("mid"))(-1);t.on("snap.util.attr.markerMid",r("mid"))(-1)}();t.on("snap.util.getattr.r",function(){if(this.type=="rect"&&e(this.node,"rx")==e(this.node,"ry"))return t.stop(),e(this.node,"rx")})(-1);t.on("snap.util.getattr.text",function(){if(this.type=="text"||this.type=="tspan"){t.stop();var n=b(this.node);return n.length==1?n[0]:n}})(-1);t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);t.on("snap.util.getattr.viewBox",function(){t.stop();var i=e(this.node,"viewBox");if(i)return i=i.split(v),n._.box(+i[0],+i[1],+i[2],+i[3])})(-1);t.on("snap.util.getattr.points",function(){var n=e(this.node,"points");if(t.stop(),n)return n.split(v)})(-1);t.on("snap.util.getattr.path",function(){var n=e(this.node,"d");return t.stop(),n})(-1);t.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);t.on("snap.util.getattr.fontSize",k)(-1);t.on("snap.util.getattr.font-size",k)(-1)}),i.plugin(function(n,t){var i=/\S+/g,u=String,r=t.prototype;r.addClass=function(n){var e=u(n||"").match(i)||[],o=this.node,s=o.className.baseVal,t=s.match(i)||[],h,c,r,f;if(e.length){for(h=0;r=e[h++];)c=t.indexOf(r),~c||t.push(r);f=t.join(" ");s!=f&&(o.className.baseVal=f)}return this};r.removeClass=function(n){var c=u(n||"").match(i)||[],e=this.node,o=e.className.baseVal,t=o.match(i)||[],s,r,h,f;if(t.length){for(s=0;h=c[s++];)r=t.indexOf(h),~r&&t.splice(r,1);f=t.join(" ");o!=f&&(e.className.baseVal=f)}return this};r.hasClass=function(n){var t=this.node,r=t.className.baseVal,u=r.match(i)||[];return!!~u.indexOf(n)};r.toggleClass=function(n,t){if(t!=null)return t?this.addClass(n):this.removeClass(n);for(var c=(n||"").match(i)||[],o=this.node,s=o.className.baseVal,r=s.match(i)||[],u,f,e,h=0;f=c[h++];)u=r.indexOf(f),~u?r.splice(u,1):r.push(f);return e=r.join(" "),s!=e&&(o.className.baseVal=e),this}}),i.plugin(function(){function f(n){return n}function e(n){return function(t){return+t.toFixed(3)+n}}var i={"+":function(n,t){return n+t},"-":function(n,t){return n-t},"/":function(n,t){return n/t},"*":function(n,t){return n*t}},n=String,r=/[a-z]+$/i,u=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;t.on("snap.util.attr",function(f){var e=n(f).match(u);if(e){var h=t.nt(),o=h.substring(h.lastIndexOf(".")+1),s=this.attr(o),c={};t.stop();var l=e[3]||"",a=s.match(r),v=i[e[1]];if(a&&a==l?f=v(parseFloat(s),+e[2]):(s=this.asPX(o),f=v(this.asPX(o),this.asPX(o,e[2]+l))),isNaN(s)||isNaN(f))return;c[o]=f;this.attr(c)}})(-10);t.on("snap.util.equal",function(o,s){var h=n(this.attr(o)||""),y=this,c=n(s).match(u);if(c){t.stop();var a=c[3]||"",l=h.match(r),v=i[c[1]];return l&&l==a?{from:parseFloat(h),to:v(parseFloat(h),+c[2]),f:e(l)}:(h=this.asPX(o),{from:h,to:v(h,this.asPX(o,c[2]+a)),f:f})}})(-10)}),i.plugin(function(i,r,u,f){var e=u.prototype,o=i.is,s;e.rect=function(n,t,i,r,u,f){var e;return f==null&&(f=u),o(n,"object")&&n=="[object Object]"?e=n:n!=null&&(e={x:n,y:t,width:i,height:r},u!=null&&(e.rx=u,e.ry=f)),this.el("rect",e)};e.circle=function(n,t,i){var r;return o(n,"object")&&n=="[object Object]"?r=n:n!=null&&(r={cx:n,cy:t,r:i}),this.el("circle",r)};s=function(){function n(){this.parentNode.removeChild(this)}return function(t,i){var r=f.doc.createElement("img"),u=f.doc.body;r.style.cssText="position:absolute;left:-9999em;top:-9999em";r.onload=function(){i.call(r);r.onload=r.onerror=null;u.removeChild(r)};r.onerror=n;u.appendChild(r);r.src=t}}();e.image=function(n,t,r,u,f){var h=this.el("image"),e;return o(n,"object")&&"src"in n?h.attr(n):n!=null&&(e={"xlink:href":n,preserveAspectRatio:"none"},t!=null&&r!=null&&(e.x=t,e.y=r),u!=null&&f!=null?(e.width=u,e.height=f):s(n,function(){i._.$(h.node,{width:this.offsetWidth,height:this.offsetHeight})}),i._.$(h.node,e)),h};e.ellipse=function(n,t,i,r){var u;return o(n,"object")&&n=="[object Object]"?u=n:n!=null&&(u={cx:n,cy:t,rx:i,ry:r}),this.el("ellipse",u)};e.path=function(n){var t;return o(n,"object")&&!o(n,"array")?t=n:n&&(t={d:n}),this.el("path",t)};e.group=e.g=function(n){var t=this.el("g");return arguments.length==1&&n&&!n.type?t.attr(n):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t};e.svg=function(n,t,i,r,u,f,e,s){var h={};return o(n,"object")&&t==null?h=n:(n!=null&&(h.x=n),t!=null&&(h.y=t),i!=null&&(h.width=i),r!=null&&(h.height=r),u!=null&&f!=null&&e!=null&&s!=null&&(h.viewBox=[u,f,e,s])),this.el("svg",h)};e.mask=function(n){var t=this.el("mask");return arguments.length==1&&n&&!n.type?t.attr(n):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t};e.ptrn=function(n,t,i,r,u,f,e,s){if(o(n,"object"))var h=n;else h={patternUnits:"userSpaceOnUse"},n&&(h.x=n),t&&(h.y=t),i!=null&&(h.width=i),r!=null&&(h.height=r),h.viewBox=u!=null&&f!=null&&e!=null&&s!=null?[u,f,e,s]:[n||0,t||0,i||0,r||0];return this.el("pattern",h)};e.use=function(n){return n!=null?(n instanceof r&&(n.attr("id")||n.attr({id:i._.id(n)}),n=n.attr("id")),String(n).charAt()=="#"&&(n=n.substring(1)),this.el("use",{"xlink:href":"#"+n})):r.prototype.use.call(this)};e.symbol=function(n,t,i,r){var u={};return n!=null&&t!=null&&i!=null&&r!=null&&(u.viewBox=[n,t,i,r]),this.el("symbol",u)};e.text=function(n,t,i){var r={};return o(n,"object")?r=n:n!=null&&(r={x:n,y:t,text:i||""}),this.el("text",r)};e.line=function(n,t,i,r){var u={};return o(n,"object")?u=n:n!=null&&(u={x1:n,x2:i,y1:t,y2:r}),this.el("line",u)};e.polyline=function(n){arguments.length>1&&(n=Array.prototype.slice.call(arguments,0));var t={};return o(n,"object")&&!o(n,"array")?t=n:n!=null&&(t={points:n}),this.el("polyline",t)};e.polygon=function(n){arguments.length>1&&(n=Array.prototype.slice.call(arguments,0));var t={};return o(n,"object")&&!o(n,"array")?t=n:n!=null&&(t={points:n}),this.el("polygon",t)},function(){function u(){return this.selectAll("stop")}function f(n,t){var f=r("stop"),u={offset:+t+"%"};return n=i.color(n),u["stop-color"]=n.hex,n.opacity<1&&(u["stop-opacity"]=n.opacity),r(f,u),this.node.appendChild(f),this}function o(){if(this.type=="linearGradient"){var t=r(this.node,"x1")||0,f=r(this.node,"x2")||1,u=r(this.node,"y1")||0,e=r(this.node,"y2")||0;return i._.box(t,u,math.abs(f-t),math.abs(e-u))}var o=this.node.cx||.5,s=this.node.cy||.5,n=this.node.r||0;return i._.box(o-n,s-n,n*2,n*2)}function c(n,i){function y(n,t){for(var r=(t-a)/(n-l),i=l;i<n;i++)e[i].offset=+(+a+r*(i-l)).toFixed(2);l=n;a=t}var f=t("snap.util.grad.parse",null,i).firstDefined(),c,u,v;if(!f)return null;f.params.unshift(n);c=f.type.toLowerCase()=="l"?s.apply(0,f.params):h.apply(0,f.params);f.type!=f.type.toLowerCase()&&r(c.node,{gradientUnits:"userSpaceOnUse"});var e=f.stops,o=e.length,a=0,l=0;for(o--,u=0;u<o;u++)"offset"in e[u]&&y(u,e[u].offset);for(e[o].offset=e[o].offset||100,y(o,e[o].offset),u=0;u<=o;u++)v=e[u],c.addStop(v.color,v.offset);return c}function s(n,t,e,s,h){var c=i._.make("linearGradient",n);return c.stops=u,c.addStop=f,c.getBBox=o,t!=null&&r(c.node,{x1:t,y1:e,x2:s,y2:h}),c}function h(n,t,e,s,h,c){var l=i._.make("radialGradient",n);return l.stops=u,l.addStop=f,l.getBBox=o,t!=null&&r(l.node,{cx:t,cy:e,r:s}),h!=null&&c!=null&&r(l.node,{fx:h,fy:c}),l}var r=i._.$;e.gradient=function(n){return c(this.defs,n)};e.gradientLinear=function(n,t,i,r){return s(this.defs,n,t,i,r)};e.gradientRadial=function(n,t,i,r,u){return h(this.defs,n,t,i,r,u)};e.toString=function(){var r=this.node.ownerDocument,n=r.createDocumentFragment(),t=r.createElement("div"),u=this.node.cloneNode(!0),f;return n.appendChild(t),t.appendChild(u),i._.$(u,{xmlns:"http://www.w3.org/2000/svg"}),f=t.innerHTML,n.removeChild(n.firstChild),f};e.toDataURL=function(){if(n&&n.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))};e.clear=function(){for(var n=this.node.firstChild,t;n;)t=n.nextSibling,n.tagName!="defs"?n.parentNode.removeChild(n):e.clear.call({node:n}),n=t}}()}),i.plugin(function(n,t){function c(n){var t=c.ps=c.ps||{};return t[n]?t[n].sleep=100:t[n]={sleep:100},setTimeout(function(){for(var i in t)t[kt](i)&&i!=n&&(t[i].sleep--,t[i].sleep||delete t[i])}),t[n]}function h(n,t,r,u){return n==null&&(n=t=r=u=0),t==null&&(t=n.y,r=n.width,u=n.height,n=n.x),{x:n,y:t,width:r,w:r,height:u,h:u,x2:n+r,y2:t+u,cx:n+r/2,cy:t+u/2,r1:i.min(r,u)/2,r2:i.max(r,u)/2,r0:i.sqrt(r*r+u*u)/2,path:k(n,t,r,u),vb:[n,t,r,u].join(" ")}}function a(){return this.join(",").replace(dt,"$1")}function l(n){var t=tt(n);return t.toString=a,t}function it(n,t,i,r,u,f,e,o,s){return s==null?v(n,t,i,r,u,f,e,o):w(n,t,i,r,u,f,e,o,ni(n,t,i,r,u,f,e,o,s))}function rt(i,r){function u(n){return+(+n).toFixed(3)}return n._.cacher(function(n,f,e){var b,k;n instanceof t&&(n=n.attr("d"));n=p(n);var h,c,o,v,l="",y={},s,a=0;for(b=0,k=n.length;b<k;b++){if(o=n[b],o[0]=="M")h=+o[1],c=+o[2];else{if(v=it(h,c,o[1],o[2],o[3],o[4],o[5],o[6]),a+v>f){if(r&&!y.start){if(s=it(h,c,o[1],o[2],o[3],o[4],o[5],o[6],f-a),l+=["C"+u(s.start.x),u(s.start.y),u(s.m.x),u(s.m.y),u(s.x),u(s.y)],e)return l;y.start=l;l=["M"+u(s.x),u(s.y)+"C"+u(s.n.x),u(s.n.y),u(s.end.x),u(s.end.y),u(o[5]),u(o[6])].join();a+=v;h=+o[5];c=+o[6];continue}if(!i&&!r)return it(h,c,o[1],o[2],o[3],o[4],o[5],o[6],f-a)}a+=v;h=+o[5];c=+o[6]}l+=o.shift()+o}return y.end=l,i?a:r?y:w(h,c,o[0],o[1],o[2],o[3],o[4],o[5],1)},null,n._.clone)}function w(n,t,r,u,e,o,h,c,l){var a=1-l,y=s(a,3),p=s(a,2),v=l*l,w=v*l,nt=y*n+p*3*l*r+a*3*l*l*e+w*h,tt=y*t+p*3*l*u+a*3*l*l*o+w*c,b=n+2*l*(r-n)+v*(e-2*r+n),k=t+2*l*(u-t)+v*(o-2*u+t),d=r+2*l*(e-r)+v*(h-2*e+r),g=u+2*l*(o-u)+v*(c-2*o+u),it=a*n+l*r,rt=a*t+l*u,ut=a*e+l*h,ft=a*o+l*c,et=90-i.atan2(b-d,k-g)*180/f;return{x:nt,y:tt,m:{x:b,y:k},n:{x:d,y:g},start:{x:it,y:rt},end:{x:ut,y:ft},alpha:et}}function ft(t,i,r,u,f,e,o,s){n.is(t,"array")||(t=[t,i,r,u,f,e,o,s]);var c=wt.apply(null,t);return h(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)}function e(n,t,i){return t>=n.x&&t<=n.x+n.width&&i>=n.y&&i<=n.y+n.height}function lt(n,t){return n=h(n),t=h(t),e(t,n.x,n.y)||e(t,n.x2,n.y)||e(t,n.x,n.y2)||e(t,n.x2,n.y2)||e(n,t.x,t.y)||e(n,t.x2,t.y)||e(n,t.x,t.y2)||e(n,t.x2,t.y2)||(n.x<t.x2&&n.x>t.x||t.x<n.x2&&t.x>n.x)&&(n.y<t.y2&&n.y>t.y||t.y<n.y2&&t.y>n.y)}function at(n,t,i,r,u){var f=-3*t+9*i-9*r+3*u,e=n*f+6*t-12*i+6*r;return n*e-3*t+3*i}function v(n,t,r,u,f,e,o,s,h){var c;h==null&&(h=1);h=h>1?1:h<0?0:h;var l=h/2,w=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],b=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],a=0;for(c=0;c<12;c++){var v=l*w[c]+l,y=at(v,n,r,f,o),p=at(v,t,u,e,s),k=y*y+p*p;a+=b[c]*i.sqrt(k)}return l*a}function ni(n,t,i,r,u,f,e,s,h){if(!(h<0)&&!(v(n,t,i,r,u,f,e,s)<h)){for(var y=1,a=y/2,c=y-a,l=v(n,t,i,r,u,f,e,s,c);o(l-h)>.01;)a/=2,c+=(l<h?1:-1)*a,l=v(n,t,i,r,u,f,e,s,c);return c}}function ti(n,t,i,f,e,o,s,h){if(!(r(n,i)<u(e,s))&&!(u(n,i)>r(e,s))&&!(r(t,f)<u(o,h))&&!(u(t,f)>r(o,h))){var p=(n*f-t*i)*(e-s)-(n-i)*(e*h-o*s),w=(n*f-t*i)*(o-h)-(t-f)*(e*h-o*s),a=(n-i)*(o-h)-(t-f)*(e-s);if(a){var v=p/a,y=w/a,c=+v.toFixed(2),l=+y.toFixed(2);if(!(c<+u(n,i).toFixed(2))&&!(c>+r(n,i).toFixed(2))&&!(c<+u(e,s).toFixed(2))&&!(c>+r(e,s).toFixed(2))&&!(l<+u(t,f).toFixed(2))&&!(l>+r(t,f).toFixed(2))&&!(l<+u(o,h).toFixed(2))&&!(l>+r(o,h).toFixed(2)))return{x:v,y:y}}}}function et(n,t,i){var rt=ft(n),ut=ft(t),r,s,h,k,d;if(!lt(rt,ut))return i?0:[];var et=v.apply(0,n),ot=v.apply(0,t),a=~~(et/8),y=~~(ot/8),g=[],nt=[],it={},tt=i?0:[];for(r=0;r<a+1;r++)s=w.apply(0,n.concat(r/a)),g.push({x:s.x,y:s.y,t:r/a});for(r=0;r<y+1;r++)s=w.apply(0,t.concat(r/y)),nt.push({x:s.x,y:s.y,t:r/y});for(r=0;r<a;r++)for(h=0;h<y;h++){var f=g[r],c=g[r+1],e=nt[h],l=nt[h+1],p=o(c.x-f.x)<.001?"y":"x",b=o(l.x-e.x)<.001?"y":"x",u=ti(f.x,f.y,c.x,c.y,e.x,e.y,l.x,l.y);if(u){if(it[u.x.toFixed(4)]==u.y.toFixed(4))continue;it[u.x.toFixed(4)]=u.y.toFixed(4);k=f.t+o((u[p]-f[p])/(c[p]-f[p]))*(c.t-f.t);d=e.t+o((u[b]-e[b])/(l[b]-e[b]))*(l.t-e.t);k>=0&&k<=1&&d>=0&&d<=1&&(i?tt++:tt.push({x:u.x,y:u.y,t1:k,t2:d}))}}return tt}function ii(n,t){return ot(n,t)}function ri(n,t){return ot(n,t,1)}function ot(n,t,i){var f,e,o,s,b,k,d,g,h,c,v,y,nt,l,w,tt,a,r,u,it;for(n=p(n),t=p(t),v=i?0:[],y=0,nt=n.length;y<nt;y++)if(l=n[y],l[0]=="M")f=b=l[1],e=k=l[2];else for(l[0]=="C"?(h=[f,e].concat(l.slice(1)),f=h[6],e=h[7]):(h=[f,e,f,e,b,k,b,k],f=b,e=k),w=0,tt=t.length;w<tt;w++)if(a=t[w],a[0]=="M")o=d=a[1],s=g=a[2];else if(a[0]=="C"?(c=[o,s].concat(a.slice(1)),o=c[6],s=c[7]):(c=[o,s,o,s,d,g,d,g],o=d,s=g),r=et(h,c,i),i)v+=r;else{for(u=0,it=r.length;u<it;u++)r[u].segment1=y,r[u].segment2=w,r[u].bez1=h,r[u].bez2=c;v=v.concat(r)}return v}function ui(n,t,i){var r=vt(n);return e(r,t,i)&&ot(n,[["M",t,i],["H",r.x2+10]],1)%2==1}function vt(n){var a=c(n),l,v,e;if(a.bbox)return tt(a.bbox);if(!n)return h();n=p(n);var o=0,s=0,i=[],f=[],t;for(l=0,v=n.length;l<v;l++)t=n[l],t[0]=="M"?(o=t[1],s=t[2],i.push(o),f.push(s)):(e=wt(o,s,t[1],t[2],t[3],t[4],t[5],t[6]),i=i.concat(e.min.x,e.max.x),f=f.concat(e.min.y,e.max.y),o=t[5],s=t[6]);var y=u.apply(0,i),w=u.apply(0,f),k=r.apply(0,i),d=r.apply(0,f),b=h(y,w,k-y,d-w);return a.bbox=tt(b),b}function k(n,t,i,r,u){if(u)return[["M",+n+ +u,t],["l",i-u*2,0],["a",u,u,0,0,1,u,u],["l",0,r-u*2],["a",u,u,0,0,1,-u,u],["l",u*2-i,0],["a",u,u,0,0,1,-u,-u],["l",0,u*2-r],["a",u,u,0,0,1,u,-u],["z"]];var f=[["M",n,t],["l",i,0],["l",0,r],["l",-i,0],["z"]];return f.toString=a,f}function y(n,t,i,r,u){if(u==null&&r==null&&(r=i),n=+n,t=+t,i=+i,r=+r,u!=null)var f=Math.PI/180,o=n+i*Math.cos(-r*f),s=n+i*Math.cos(-u*f),h=t+i*Math.sin(-r*f),c=t+i*Math.sin(-u*f),e=[["M",o,h],["A",i,i,0,+(u-r>180),0,s,c]];else e=[["M",n,t],["m",0,-r],["a",i,r,0,1,1,0,2*r],["a",i,r,0,1,1,0,-2*r],["z"]];return e.toString=a,e}function ei(t){var w=c(t),b=String.prototype.toLowerCase,u,d,f,i,s,g,h,nt,v;if(w.rel)return l(w.rel);n.is(t,"array")&&n.is(t&&t[0],"array")||(t=n.parsePathString(t));var r=[],o=0,e=0,y=0,p=0,k=0;for(t[0][0]=="M"&&(o=t[0][1],e=t[0][2],y=o,p=e,k++,r.push(["M",o,e])),u=k,d=t.length;u<d;u++){if(f=r[u]=[],i=t[u],i[0]!=b.call(i[0])){f[0]=b.call(i[0]);switch(f[0]){case"a":f[1]=i[1];f[2]=i[2];f[3]=i[3];f[4]=i[4];f[5]=i[5];f[6]=+(i[6]-o).toFixed(3);f[7]=+(i[7]-e).toFixed(3);break;case"v":f[1]=+(i[1]-e).toFixed(3);break;case"m":y=i[1];p=i[2];default:for(s=1,g=i.length;s<g;s++)f[s]=+(i[s]-(s%2?o:e)).toFixed(3)}}else for(f=r[u]=[],i[0]=="m"&&(y=i[1]+o,p=i[2]+e),h=0,nt=i.length;h<nt;h++)r[u][h]=i[h];v=r[u].length;switch(r[u][0]){case"z":o=y;e=p;break;case"h":o+=+r[u][v-1];break;case"v":e+=+r[u][v-1];break;default:o+=+r[u][v-2];e+=+r[u][v-1]}}return r.toString=a,w.rel=l(r),r}function st(t){var d=c(t),g,r,i,b,tt,o,s,k,v,it;if(d.abs)return l(d.abs);if(ht(t,"array")&&ht(t&&t[0],"array")||(t=n.parsePathString(t)),!t||!t.length)return[["M",0,0]];var u=[],f=0,e=0,p=0,w=0,nt=0,h;for(t[0][0]=="M"&&(f=+t[0][1],e=+t[0][2],p=f,w=e,nt++,u[0]=["M",f,e]),g=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z",b=nt,tt=t.length;b<tt;b++){if(u.push(r=[]),i=t[b],h=i[0],h!=h.toUpperCase()){r[0]=h.toUpperCase();switch(r[0]){case"A":r[1]=i[1];r[2]=i[2];r[3]=i[3];r[4]=i[4];r[5]=i[5];r[6]=+i[6]+f;r[7]=+i[7]+e;break;case"V":r[1]=+i[1]+e;break;case"H":r[1]=+i[1]+f;break;case"R":for(o=[f,e].concat(i.slice(1)),s=2,k=o.length;s<k;s++)o[s]=+o[s]+f,o[++s]=+o[s]+e;u.pop();u=u.concat(bt(o,g));break;case"O":u.pop();o=y(f,e,i[1],i[2]);o.push(o[0]);u=u.concat(o);break;case"U":u.pop();u=u.concat(y(f,e,i[1],i[2],i[3]));r=["U"].concat(u[u.length-1].slice(-2));break;case"M":p=+i[1]+f;w=+i[2]+e;default:for(s=1,k=i.length;s<k;s++)r[s]=+i[s]+(s%2?f:e)}}else if(h=="R")o=[f,e].concat(i.slice(1)),u.pop(),u=u.concat(bt(o,g)),r=["R"].concat(i.slice(-2));else if(h=="O")u.pop(),o=y(f,e,i[1],i[2]),o.push(o[0]),u=u.concat(o);else if(h=="U")u.pop(),u=u.concat(y(f,e,i[1],i[2],i[3])),r=["U"].concat(u[u.length-1].slice(-2));else for(v=0,it=i.length;v<it;v++)r[v]=i[v];if(h=h.toUpperCase(),h!="O")switch(r[0]){case"Z":f=+p;e=+w;break;case"H":f=r[1];break;case"V":e=r[1];break;case"M":p=r[r.length-2];w=r[r.length-1];default:f=r[r.length-2];e=r[r.length-1]}}return u.toString=a,d.abs=l(u),u}function g(n,t,i,r){return[n,t,i,r,i,r]}function yt(n,t,i,r,u,f){var e=1/3,o=2/3;return[e*n+o*i,e*t+o*r,e*u+o*i,e*f+o*r,u,f]}function pt(t,r,u,e,s,h,c,l,a,v){var ct=f*120/180,ut=f/180*(+s||0),w=[],g,ft=n._.cacher(function(n,t,r){var u=n*i.cos(r)-t*i.sin(r),f=n*i.sin(r)+t*i.cos(r);return{x:u,y:f}}),et,ht,b,dt;if(v)p=v[0],y=v[1],it=v[2],rt=v[3];else{g=ft(t,r,-ut);t=g.x;r=g.y;g=ft(l,a,-ut);l=g.x;a=g.y;var ei=i.cos(f/180*s),oi=i.sin(f/180*s),k=(t-l)/2,d=(r-a)/2,tt=k*k/(u*u)+d*d/(e*e);tt>1&&(tt=i.sqrt(tt),u=tt*u,e=tt*e);var ot=u*u,st=e*e,lt=(h==c?-1:1)*i.sqrt(o((ot*st-ot*d*d-st*k*k)/(ot*d*d+st*k*k))),it=lt*u*d/e+(t+l)/2,rt=lt*-e*k/u+(r+a)/2,p=i.asin(((r-rt)/e).toFixed(9)),y=i.asin(((a-rt)/e).toFixed(9));p=t<it?f-p:p;y=l<it?f-y:y;p<0&&(p=f*2+p);y<0&&(y=f*2+y);c&&p>y&&(p=p-f*2);!c&&y>p&&(y=y-f*2)}if(et=y-p,o(et)>ct){var gt=y,ni=l,ti=a;y=p+ct*(c&&y>p?1:-1);l=it+u*i.cos(y);a=rt+e*i.sin(y);w=pt(l,a,u,e,s,0,c,ni,ti,[y,gt,it,rt])}et=y-p;var ii=i.cos(p),ri=i.sin(p),ui=i.cos(y),fi=i.sin(y),at=i.tan(et/4),vt=4/3*u*at,yt=4/3*e*at,wt=[t,r],nt=[t+vt*ri,r-yt*ii],bt=[l+vt*fi,a-yt*ui],kt=[l,a];if(nt[0]=2*wt[0]-nt[0],nt[1]=2*wt[1]-nt[1],v)return[nt,bt,kt].concat(w);for(w=[nt,bt,kt].concat(w).join().split(","),ht=[],b=0,dt=w.length;b<dt;b++)ht[b]=b%2?ft(w[b-1],w[b],ut).y:ft(w[b],w[b+1],ut).x;return ht}function wt(n,t,f,e,s,h,c,l){for(var b,k,v,d=[],y=[[],[]],w,p,g,a,nt,tt,it,rt,ut=0;ut<2;++ut){if(ut==0?(p=6*n-12*f+6*s,w=-3*n+9*f-9*s+3*c,g=3*f-3*n):(p=6*t-12*e+6*h,w=-3*t+9*e-9*h+3*l,g=3*e-3*t),o(w)<1e-12){if(o(p)<1e-12)continue;a=-g/p;0<a&&a<1&&d.push(a);continue}(it=p*p-4*g*w,rt=i.sqrt(it),it<0)||(nt=(-p+rt)/(2*w),0<nt&&nt<1&&d.push(nt),tt=(-p-rt)/(2*w),0<tt&&tt<1&&d.push(tt))}for(b=d.length,k=b;b--;)a=d[b],v=1-a,y[0][b]=v*v*v*n+3*v*v*a*f+3*v*a*a*s+a*a*a*c,y[1][b]=v*v*v*t+3*v*v*a*e+3*v*a*a*h+a*a*a*l;return y[0][k]=n,y[1][k]=t,y[0][k+1]=c,y[1][k+1]=l,y[0].length=y[1].length=k+2,{min:{x:u.apply(0,y[0]),y:u.apply(0,y[1])},max:{x:r.apply(0,y[0]),y:r.apply(0,y[1])}}}function p(n,t){var nt=!t&&c(n),i,w;if(!t&&nt.curve)return l(nt.curve);var f=st(n),u=t&&st(t),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},tt=function(n,t,i){var r,u;if(!n)return["C",t.x,t.y,t.x,t.y,t.x,t.y];n[0]in{T:1,Q:1}||(t.qx=t.qy=null);switch(n[0]){case"M":t.X=n[1];t.Y=n[2];break;case"A":n=["C"].concat(pt.apply(0,[t.x,t.y].concat(n.slice(1))));break;case"S":i=="C"||i=="S"?(r=t.x*2-t.bx,u=t.y*2-t.by):(r=t.x,u=t.y);n=["C",r,u].concat(n.slice(1));break;case"T":i=="Q"||i=="T"?(t.qx=t.x*2-t.qx,t.qy=t.y*2-t.qy):(t.qx=t.x,t.qy=t.y);n=["C"].concat(yt(t.x,t.y,t.qx,t.qy,n[1],n[2]));break;case"Q":t.qx=n[1];t.qy=n[2];n=["C"].concat(yt(t.x,t.y,n[1],n[2],n[3],n[4]));break;case"L":n=["C"].concat(g(t.x,t.y,n[1],n[2]));break;case"H":n=["C"].concat(g(t.x,t.y,n[1],t.y));break;case"V":n=["C"].concat(g(t.x,t.y,t.x,n[1]));break;case"Z":n=["C"].concat(g(t.x,t.y,t.X,t.Y))}return n},it=function(n,t){if(n[t].length>7){n[t].shift();for(var i=n[t];i.length;)h[t]="A",u&&(a[t]="A"),n.splice(t++,0,["C"].concat(i.splice(0,6)));n.splice(t,1);w=r(f.length,u&&u.length||0)}},rt=function(n,t,i,e,o){n&&t&&n[o][0]=="M"&&t[o][0]!="M"&&(t.splice(o,0,["M",e.x,e.y]),i.bx=0,i.by=0,i.x=n[o][1],i.y=n[o][2],w=r(f.length,u&&u.length||0))},h=[],a=[],s="",p="";for(i=0,w=r(f.length,u&&u.length||0);i<w;i++){f[i]&&(s=f[i][0]);s!="C"&&(h[i]=s,i&&(p=h[i-1]));f[i]=tt(f[i],e,p);h[i]!="A"&&s=="C"&&(h[i]="C");it(f,i);u&&(u[i]&&(s=u[i][0]),s!="C"&&(a[i]=s,i&&(p=a[i-1])),u[i]=tt(u[i],o,p),a[i]!="A"&&s=="C"&&(a[i]="C"),it(u,i));rt(f,u,e,o,i);rt(u,f,o,e,i);var v=f[i],y=u&&u[i],k=v.length,d=u&&y.length;e.x=v[k-2];e.y=v[k-1];e.bx=b(v[k-4])||e.x;e.by=b(v[k-3])||e.y;o.bx=u&&(b(y[d-4])||o.x);o.by=u&&(b(y[d-3])||o.y);o.x=u&&y[d-2];o.y=u&&y[d-1]}return u||(nt.curve=l(f)),u?[f,u]:f}function oi(n,t){if(!t)return n;var f,e,u,i,o,s,r;for(n=p(n),u=0,o=n.length;u<o;u++)for(r=n[u],i=1,s=r.length;i<s;i+=2)f=t.x(r[i],r[i+1]),e=t.y(r[i],r[i+1]),r[i]=f,r[i+1]=e;return n}function bt(n,t){for(var i,f=[],r=0,u=n.length;u-2*!t>r;r+=2)i=[{x:+n[r-2],y:+n[r-1]},{x:+n[r],y:+n[r+1]},{x:+n[r+2],y:+n[r+3]},{x:+n[r+4],y:+n[r+5]}],t?r?u-4==r?i[3]={x:+n[0],y:+n[1]}:u-2==r&&(i[2]={x:+n[0],y:+n[1]},i[3]={x:+n[2],y:+n[3]}):i[0]={x:+n[u-2],y:+n[u-1]}:u-4==r?i[3]=i[2]:r||(i[0]={x:+n[r],y:+n[r+1]}),f.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y]);return f}var nt=t.prototype,ht=n.is,tt=n._.clone,kt="hasOwnProperty",dt=/,?([a-z]),?/gi,b=parseFloat,i=Math,f=i.PI,u=i.min,r=i.max,s=i.pow,o=i.abs,gt=rt(1),ct=rt(),ut=rt(0,1),d=n._unit2px,fi={path:function(n){return n.attr("path")},circle:function(n){var t=d(n);return y(t.cx,t.cy,t.r)},ellipse:function(n){var t=d(n);return y(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(n){var t=d(n);return k(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(n){var t=d(n);return k(t.x||0,t.y||0,t.width,t.height)},line:function(n){return"M"+[n.attr("x1")||0,n.attr("y1")||0,n.attr("x2"),n.attr("y2")]},polyline:function(n){return"M"+n.attr("points")},polygon:function(n){return"M"+n.attr("points")+"z"},deflt:function(n){var t=n.node.getBBox();return k(t.x,t.y,t.width,t.height)}};n.path=c;n.path.getTotalLength=gt;n.path.getPointAtLength=ct;n.path.getSubpath=function(n,t,i){if(this.getTotalLength(n)-i<1e-6)return ut(n,t).end;var r=ut(n,i,1);return t?ut(r,t).end:r};nt.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};nt.getPointAtLength=function(n){return ct(this.attr("d"),n)};nt.getSubpath=function(t,i){return n.path.getSubpath(this.attr("d"),t,i)};n._.box=h;n.path.findDotsAtSegment=w;n.path.bezierBBox=ft;n.path.isPointInsideBBox=e;n.closest=function(t,i,r,u){for(var f=100,p=h(t-f/2,i-f/2,f,f),s=[],b=r[0].hasOwnProperty("x")?function(n){return{x:r[n].x,y:r[n].y}}:function(n){return{x:r[n],y:u[n]}},v=0,o,c,l,y,w,a;f<=1e6&&!v;){for(o=0,c=r.length;o<c;o++)if(l=b(o),e(p,l.x,l.y)){v++;s.push(l);break}v||(f*=2,p=h(t-f/2,i-f/2,f,f))}if(f!=1e6){for(y=Infinity,o=0,c=s.length;o<c;o++)a=n.len(t,i,s[o].x,s[o].y),y>a&&(y=a,s[o].len=a,w=s[o]);return w}};n.path.isBBoxIntersect=lt;n.path.intersection=ii;n.path.intersectionNumber=ri;n.path.isPointInside=ui;n.path.getBBox=vt;n.path.get=fi;n.path.toRelative=ei;n.path.toAbsolute=st;n.path.toCubic=p;n.path.map=oi;n.path.toString=a;n.path.clone=l}),i.plugin(function(n){var f=Math.max,e=Math.min,u=function(n){if(this.items=[],this.bindings={},this.length=0,this.type="set",n)for(var t=0,i=n.length;t<i;t++)n[t]&&(this[this.items.length]=this.items[this.items.length]=n[t],this.length++)},i=u.prototype;i.push=function(){for(var n,t,i=0,r=arguments.length;i<r;i++)n=arguments[i],n&&(t=this.items.length,this[t]=this.items[t]=n,this.length++);return this};i.pop=function(){return this.length&&delete this[this.length--],this.items.pop()};i.forEach=function(n,t){for(var i=0,r=this.items.length;i<r;i++)if(n.call(t,this.items[i],i)===!1)return this;return this};i.animate=function(i,u,f,e){var o,h;typeof f!="function"||f.length||(e=f,f=r.linear);i instanceof n._.Animation&&(e=i.callback,f=i.easing,u=f.dur,i=i.attr);o=arguments;n.is(i,"array")&&n.is(o[o.length-1],"array")&&(h=!0);var s,c=function(){s?this.b=s:s=this.b},l=0,a=this,v=e&&function(){++l==a.length&&e.call(this)};return this.forEach(function(n,r){t.once("snap.animcreated."+n.id,c);h?o[r]&&n.animate.apply(n,o[r]):n.animate(i,u,f,v)})};i.remove=function(){while(this.length)this.pop().remove();return this};i.bind=function(n,t,i){var r={},u;return typeof t=="function"?this.bindings[n]=t:(u=i||n,this.bindings[n]=function(n){r[u]=n;t.attr(r)}),this};i.attr=function(n){var r={},t,i,u;for(t in n)this.bindings[t]?this.bindings[t](n[t]):r[t]=n[t];for(i=0,u=this.items.length;i<u;i++)this.items[i].attr(r);return this};i.clear=function(){while(this.length)this.pop()};i.splice=function(n,t){var r;n=n<0?f(this.length+n,0):n;t=f(0,e(this.length-n,t));for(var o=[],h=[],s=[],i=2;i<arguments.length;i++)s.push(arguments[i]);for(i=0;i<t;i++)h.push(this[n+i]);for(;i<this.length-n;i++)o.push(this[n+i]);for(r=s.length,i=0;i<r+o.length;i++)this.items[n+i]=this[n+i]=i<r?s[i]:o[i-r];for(i=this.items.length=this.length-=t-r;this[i];)delete this[i++];return new u(h)};i.exclude=function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]==n)return this.splice(t,1),!0;return!1};i.insertAfter=function(n){for(var t=this.items.length;t--;)this.items[t].insertAfter(n);return this};i.getBBox=function(){for(var i,n=[],t=[],r=[],u=[],o=this.items.length;o--;)this.items[o].removed||(i=this.items[o].getBBox(),n.push(i.x),t.push(i.y),r.push(i.x+i.width),u.push(i.y+i.height));return n=e.apply(0,n),t=e.apply(0,t),r=f.apply(0,r),u=f.apply(0,u),{x:n,y:t,x2:r,y2:u,width:r-n,height:u-t,cx:n+(r-n)/2,cy:t+(u-t)/2}};i.clone=function(n){n=new u;for(var t=0,i=this.items.length;t<i;t++)n.push(this.items[t].clone());return n};i.toString=function(){return"Snap‘s set"};i.type="set";n.Set=u;n.set=function(){var n=new u;return arguments.length&&n.push.apply(n,Array.prototype.slice.call(arguments,0)),n}}),i.plugin(function(n,i){function o(n){var t=n[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return n.length==4?[t,0,n[2],n[3]]:[t,0];case"s":return n.length==5?[t,1,1,n[3],n[4]]:n.length==3?[t,1,1]:[t,1]}}function l(t,i,f){i=r(i).replace(/\.{3}|\u2026/g,t);t=n.parseTransformString(t)||[];i=n.parseTransformString(i)||[];for(var p=Math.max(t.length,i.length),a=[],v=[],s=0,c,y,e,l;s<p;s++){if(e=t[s]||o(i[s]),l=i[s]||o(e),e[0]!=l[0]||e[0].toLowerCase()=="r"&&(e[2]!=l[2]||e[3]!=l[3])||e[0].toLowerCase()=="s"&&(e[3]!=l[3]||e[4]!=l[4])){t=n._.transform2matrix(t,f());i=n._.transform2matrix(i,f());a=[["m",t.a,t.b,t.c,t.d,t.e,t.f]];v=[["m",i.a,i.b,i.c,i.d,i.e,i.f]];break}for(a[s]=[],v[s]=[],c=0,y=Math.max(e.length,l.length);c<y;c++)c in e&&(a[s][c]=e[c]),c in l&&(v[s][c]=l[c])}return{from:u(a),to:u(v),f:h(a)}}function s(n){return n}function a(n){return function(t){return+t.toFixed(3)+n}}function v(n){return n.join(" ")}function y(t){return n.rgb(t[0],t[1],t[2])}function h(n){for(var s=0,i,e,r,u,o=[],t=0,f=n.length;t<f;t++){for(r="[",u=['"'+n[t][0]+'"'],i=1,e=n[t].length;i<e;i++)u[i]="val["+s+++"]";r+=u+"]";o[t]=r}return Function("val","return Snap.path.toString.call(["+o+"])")}function u(n){for(var i,u,r=[],t=0,f=n.length;t<f;t++)for(i=1,u=n[t].length;i<u;i++)r.push(n[t][i]);return r}function c(n){return isFinite(parseFloat(n))}function p(t,i){return!n.is(t,"array")||!n.is(i,"array")?!1:t.toString()==i.toString()}var f={},e=/[a-z]+$/i,r=String;f.stroke=f.fill="colour";i.prototype.equal=function(n,i){return t("snap.util.equal",this,n,i).firstDefined()};t.on("snap.util.equal",function(t,i){var o,w,b=r(this.attr(t)||""),g=this,k,d;return c(b)&&c(i)?{from:parseFloat(b),to:parseFloat(i),f:s}:f[t]=="colour"?(o=n.color(b),w=n.color(i),{from:[o.r,o.g,o.b,o.opacity],to:[w.r,w.g,w.b,w.opacity],f:y}):t=="viewBox"?(o=this.attr(t).vb.split(" ").map(Number),w=i.split(" ").map(Number),{from:o,to:w,f:v}):t=="transform"||t=="gradientTransform"||t=="patternTransform"?(i instanceof n.Matrix&&(i=i.toTransformString()),n._.rgTransform.test(i)||(i=n._.svgTransform2string(i)),l(b,i,function(){return g.getBBox(1)})):t=="d"||t=="path"?(o=n.path.toCubic(b,i),{from:u(o[0]),to:u(o[1]),f:h(o[0])}):t=="points"?(o=r(b).split(n._.separator),w=r(i).split(n._.separator),{from:o,to:w,f:function(n){return n}}):(k=b.match(e),d=r(i).match(e),k&&p(k,d)?{from:parseFloat(b),to:parseFloat(i),f:a(k)}:{from:this.asPX(t),to:this.asPX(t,i),f:s})})}),i.plugin(function(n,i,r,u){for(var e,o=i.prototype,p="hasOwnProperty",h=("createTouch"in u.doc),v=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},s=function(n,t){var i=n=="y"?"scrollTop":"scrollLeft",r=t&&t.node?t.node.ownerDocument:u.doc;return r[i in r.documentElement?"documentElement":"body"][i]},d=function(){this.returnValue=!1},w=function(){return this.originalEvent.preventDefault()},g=function(){this.cancelBubble=!0},b=function(){return this.originalEvent.stopPropagation()},k=function(n,t,i,r){var u=h&&c[t]?c[t]:t,f=function(u){var v=s("y",r),y=s("x",r),f,e,o,l,a;if(h&&c[p](t))for(f=0,e=u.targetTouches&&u.targetTouches.length;f<e;f++)if(u.targetTouches[f].target==n||n.contains(u.targetTouches[f].target)){o=u;u=u.targetTouches[f];u.originalEvent=o;u.preventDefault=w;u.stopPropagation=b;break}return l=u.clientX+y,a=u.clientY+v,i.call(r,u,l,a)};return t!==u&&n.addEventListener(t,f,!1),n.addEventListener(u,f,!1),function(){return t!==u&&n.removeEventListener(t,f,!1),n.removeEventListener(u,f,!1),!0}},f=[],l=function(n){for(var u=n.clientX,e=n.clientY,a=s("y"),v=s("x"),i,l=f.length,o,r;l--;){if(i=f[l],h){for(o=n.touches&&n.touches.length;o--;)if(r=n.touches[o],r.identifier==i.el._drag.id||i.el.node.contains(r.target)){u=r.clientX;e=r.clientY;(n.originalEvent?n.originalEvent:n).preventDefault();break}}else n.preventDefault();var c=i.el.node,y=c.nextSibling,p=c.parentNode,w=c.style.display;u+=v;e+=a;t("snap.drag.move."+i.el.id,i.move_scope||i.el,u-i.el._drag.x,e-i.el._drag.y,u,e,n)}},a=function(i){n.unmousemove(l).unmouseup(a);for(var u=f.length,r;u--;)r=f[u],r.el._drag={},t("snap.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,i),t.off("snap.drag.*."+r.el.id);f=[]},y=v.length;y--;)(function(t){n[t]=o[t]=function(i,r){if(n.is(i,"function"))this.events=this.events||[],this.events.push({name:t,f:i,unbind:k(this.node||document,t,i,r||this)});else for(var u=0,f=this.events.length;u<f;u++)if(this.events[u].name==t)try{this.events[u].f.call(this)}catch(e){}return this};n["un"+t]=o["un"+t]=function(n){for(var i=this.events||[],r=i.length;r--;)if(i[r].name==t&&(i[r].f==n||!n))return i[r].unbind(),i.splice(r,1),i.length||delete this.events,this;return this}})(v[y]);o.hover=function(n,t,i,r){return this.mouseover(n,i).mouseout(t,r||i)};o.unhover=function(n,t){return this.unmouseover(n).unmouseout(t)};e=[];o.drag=function(i,r,u,o,s,h){function y(e,v,y){(e.originalEvent||e).preventDefault();c._drag.x=v;c._drag.y=y;c._drag.id=e.identifier;f.length||n.mousemove(l).mouseup(a);f.push({el:c,move_scope:o,start_scope:s,end_scope:h});r&&t.on("snap.drag.start."+c.id,r);i&&t.on("snap.drag.move."+c.id,i);u&&t.on("snap.drag.end."+c.id,u);t("snap.drag.start."+c.id,s||o||c,v,y,e)}function p(n,i,r){t("snap.draginit."+c.id,c,n,i,r)}var c=this,v;if(!arguments.length)return c.drag(function(n,t){this.attr({transform:v+(v?"T":"t")+[n,t]})},function(){v=this.transform().local});t.on("snap.draginit."+c.id,y);return c._drag={},e.push({el:c,start:y,init:p}),c.mousedown(p),c};o.undrag=function(){for(var i=e.length;i--;)e[i].el==this&&(this.unmousedown(e[i].init),e.splice(i,1),t.unbind("snap.drag.*."+this.id),t.unbind("snap.draginit."+this.id));return e.length||n.unmousemove(l).unmouseup(a),this}}),i.plugin(function(n,i,r){var s=i.prototype,e=r.prototype,o=/^\s*url\((.+)\)/,f=String,u=n._.$;n.filter={};e.filter=function(t){var r=this;r.type!="svg"&&(r=r.paper);var o=n.parse(f(t)),s=n._.id(),h=r.node.offsetWidth,c=r.node.offsetHeight,e=u("filter");return u(e,{id:s,x:"-20%",y:"-20%",width:"140%",height:"140%"}),e.appendChild(o.node),r.defs.appendChild(e),new i(e)};t.on("snap.util.getattr.filter",function(){var i,r;return t.stop(),i=u(this.node,"filter"),i?(r=f(i).match(o),r&&n.select(r[1])):void 0});t.on("snap.util.attr.filter",function(r){if(r instanceof i&&r.type=="filter"){t.stop();var f=r.node.id;f||(u(r.node,{id:r.id}),f=r.id);u(this.node,{filter:n.url(f)})}r&&r!="none"||(t.stop(),this.node.removeAttribute("filter"))});n.filter.blur=function(t,i){t==null&&(t=2);var r=i==null?t:[t,i];return n.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})};n.filter.blur.toString=function(){return this()};n.filter.shadow=function(t,i,r,u,f){return typeof r=="string"&&(u=r,f=u,r=4),typeof u!="string"&&(f=u,u="#000"),u=u||"#000",r==null&&(r=4),f==null&&(f=1),t==null&&(t=0,i=2),i==null&&(i=t),u=n.color(u),n.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/><\/feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/><\/feMerge>',{color:u,dx:t,dy:i,blur:r,opacity:f})};n.filter.shadow.toString=function(){return this()};n.filter.grayscale=function(t){return t==null&&(t=1),n.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})};n.filter.grayscale.toString=function(){return this()};n.filter.sepia=function(t){return t==null&&(t=1),n.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})};n.filter.sepia.toString=function(){return this()};n.filter.saturate=function(t){return t==null&&(t=1),n.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})};n.filter.saturate.toString=function(){return this()};n.filter.hueRotate=function(t){return t=t||0,n.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})};n.filter.hueRotate.toString=function(){return this()};n.filter.invert=function(t){return t==null&&(t=1),n.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/><\/feComponentTransfer>',{amount:t,amount2:1-t})};n.filter.invert.toString=function(){return this()};n.filter.brightness=function(t){return t==null&&(t=1),n.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/><\/feComponentTransfer>',{amount:t})};n.filter.brightness.toString=function(){return this()};n.filter.contrast=function(t){return t==null&&(t=1),n.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/><\/feComponentTransfer>',{amount:t,amount2:.5-t/2})};n.filter.contrast.toString=function(){return this()}}),i.plugin(function(n,t){var i=n._.box,r=n.is,u=/^[^a-z]*([tbmlrc])/i,f=function(){return"T"+this.dx+","+this.dy};t.prototype.getAlign=function(n,t){t==null&&r(n,"string")&&(t=n,n=null);n=n||this.paper;var o=n.getBBox?n.getBBox():i(n),s=this.getBBox(),e={};t=t&&t.match(u);t=t?t[1].toLowerCase():"c";switch(t){case"t":e.dx=0;e.dy=o.y-s.y;break;case"b":e.dx=0;e.dy=o.y2-s.y2;break;case"m":e.dx=0;e.dy=o.cy-s.cy;break;case"l":e.dx=o.x-s.x;e.dy=0;break;case"r":e.dx=o.x2-s.x2;e.dy=0;break;default:e.dx=o.cx-s.cx;e.dy=0}return e.toString=f,e};t.prototype.align=function(n,t){return this.transform("..."+this.getAlign(n,t))}}),i});
/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.2
 *
 * Copyright 2015 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */
(function(){"use strict";var c=this,g=c.Chart,t=function(t){var f=this,r,u;this.canvas=t.canvas;this.ctx=t;var i=function(n,t){return n["offset"+t]?n["offset"+t]:document.defaultView.getComputedStyle(n).getPropertyValue(t)},r=this.width=i(t.canvas,"Width"),u=this.height=i(t.canvas,"Height");return t.canvas.width=r,t.canvas.height=u,r=this.width=t.canvas.width,u=this.height=t.canvas.height,this.aspectRatio=this.width/this.height,n.retinaScale(this),this};t.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:10,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}};t.types={};var n=t.helpers={},i=n.each=function(n,t,i){var f=Array.prototype.slice.call(arguments,3),r,u;if(n)if(n.length===+n.length)for(r=0;r<n.length;r++)t.apply(i,[n[r],r].concat(f));else for(u in n)t.apply(i,[n[u],u].concat(f))},l=n.clone=function(n){var t={};return i(n,function(i,r){n.hasOwnProperty(r)&&(t[r]=i)}),t},r=n.extend=function(n){return i(Array.prototype.slice.call(arguments,1),function(t){i(t,function(i,r){t.hasOwnProperty(r)&&(n[r]=i)})}),n},nt=n.merge=function(){var n=Array.prototype.slice.call(arguments,0);return n.unshift({}),r.apply(null,n)},tt=n.indexOf=function(n,t){if(Array.prototype.indexOf)return n.indexOf(t);for(var i=0;i<n.length;i++)if(n[i]===t)return i;return-1},yt=n.where=function(t,i){var r=[];return n.each(t,function(n){i(n)&&r.push(n)}),r},pt=n.findNextWhere=function(n,t,i){var r,u;for(i||(i=-1),r=i+1;r<n.length;r++)if(u=n[r],t(u))return u},wt=n.findPreviousWhere=function(n,t,i){var r,u;for(i||(i=n.length),r=i-1;r>=0;r--)if(u=n[r],t(u))return u},p=n.inherits=function(n){var i=this,t=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return i.apply(this,arguments)},u=function(){this.constructor=t};return u.prototype=i.prototype,t.prototype=new u,t.extend=p,n&&r(t.prototype,n),t.__super__=i.prototype,t},a=n.noop=function(){},it=n.uid=function(){var n=0;return function(){return"chart-"+n++}}(),rt=n.warn=function(n){window.console&&typeof window.console.warn=="function"&&console.warn(n)},ut=n.amd=typeof define=="function"&&define.amd,u=n.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},h=n.max=function(n){return Math.max.apply(Math,n)},o=n.min=function(n){return Math.min.apply(Math,n)},bt=n.cap=function(n,t,i){if(u(t)){if(n>t)return t}else if(u(i)&&n<i)return i;return n},w=n.getDecimalPlaces=function(n){return n%1!=0&&u(n)?n.toString().split(".")[1].length:0},v=n.radians=function(n){return n*(Math.PI/180)},kt=n.getAngleFromPoint=function(n,t){var i=t.x-n.x,r=t.y-n.y,f=Math.sqrt(i*i+r*r),u=Math.PI*2+Math.atan2(r,i);return i<0&&r<0&&(u+=Math.PI*2),{angle:u,distance:f}},b=n.aliasPixel=function(n){return n%2==0?0:.5},dt=n.splineCurve=function(n,t,i,r){var u=Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),f=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),e=r*u/(u+f),o=r*f/(u+f);return{inner:{x:t.x-e*(i.x-n.x),y:t.y-e*(i.y-n.y)},outer:{x:t.x+o*(i.x-n.x),y:t.y+o*(i.y-n.y)}}},ft=n.calculateOrderOfMagnitude=function(n){return Math.floor(Math.log(n)/Math.LN10)},gt=n.calculateScaleRange=function(n,t,i,r,u){var w=2,v=Math.floor(t/(i*1.5)),y=w>=v,c=h(n),l=o(n);c===l&&(c+=.5,l>=.5&&!r?l-=.5:c+=.5);for(var b=Math.abs(c-l),s=ft(b),k=Math.ceil(c/(1*Math.pow(10,s)))*Math.pow(10,s),p=r?0:Math.floor(l/(1*Math.pow(10,s)))*Math.pow(10,s),a=k-p,f=Math.pow(10,s),e=Math.round(a/f);(e>v||e*2<v)&&!y;)if(e>v)f*=2,e=Math.round(a/f),e%1!=0&&(y=!0);else if(u&&s>=0)if(f/2%1==0)f/=2,e=Math.round(a/f);else break;else f/=2,e=Math.round(a/f);return y&&(e=w,f=a/e),{steps:e,stepValue:f,min:p,max:p+e*f}},f=n.template=function(n,t){function r(n,t){var r=/\W/.test(n)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+n.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[n]=i[n];return t?r(t):r}if(n instanceof Function)return n(t);var i={};return r(n,t)},ni=n.generateLabels=function(n,t,r,u){var e=new Array(t);return labelTemplateString&&i(e,function(t,i){e[i]=f(n,{value:r+u*(i+1)})}),e},s=n.easingEffects={linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return-1*n*(n-2)},easeInOutQuad:function(n){return(n/=1/2)<1?1/2*n*n:-1/2*(--n*(n-2)-1)},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return 1*((n=n/1-1)*n*n+1)},easeInOutCubic:function(n){return(n/=1/2)<1?1/2*n*n*n:1/2*((n-=2)*n*n+2)},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return-1*((n=n/1-1)*n*n*n-1)},easeInOutQuart:function(n){return(n/=1/2)<1?1/2*n*n*n*n:-1/2*((n-=2)*n*n*n-2)},easeInQuint:function(n){return 1*(n/=1)*n*n*n*n},easeOutQuint:function(n){return 1*((n=n/1-1)*n*n*n*n+1)},easeInOutQuint:function(n){return(n/=1/2)<1?1/2*n*n*n*n*n:1/2*((n-=2)*n*n*n*n+2)},easeInSine:function(n){return-1*Math.cos(n/1*(Math.PI/2))+1},easeOutSine:function(n){return 1*Math.sin(n/1*(Math.PI/2))},easeInOutSine:function(n){return-1/2*(Math.cos(Math.PI*n/1)-1)},easeInExpo:function(n){return n===0?1:1*Math.pow(2,10*(n/1-1))},easeOutExpo:function(n){return n===1?1:1*(-Math.pow(2,-10*n)+1)},easeInOutExpo:function(n){return n===0?0:n===1?1:(n/=1/2)<1?1/2*Math.pow(2,10*(n-1)):1/2*(-Math.pow(2,-10*--n)+2)},easeInCirc:function(n){return n>=1?n:-1*(Math.sqrt(1-(n/=1)*n)-1)},easeOutCirc:function(n){return 1*Math.sqrt(1-(n=n/1-1)*n)},easeInOutCirc:function(n){return(n/=1/2)<1?-1/2*(Math.sqrt(1-n*n)-1):1/2*(Math.sqrt(1-(n-=2)*n)+1)},easeInElastic:function(n){var r=1.70158,t=0,i=1;return n===0?0:(n/=1)==1?1:(t||(t=1*.3),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t)))},easeOutElastic:function(n){var r=1.70158,t=0,i=1;return n===0?0:(n/=1)==1?1:(t||(t=1*.3),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*n)*Math.sin((n*1-r)*2*Math.PI/t)+1)},easeInOutElastic:function(n){var r=1.70158,t=0,i=1;return n===0?0:(n/=1/2)==2?1:(t||(t=1*.3*1.5),i<Math.abs(1)?(i=1,r=t/4):r=t/(2*Math.PI)*Math.asin(1/i),n<1)?-.5*i*Math.pow(2,10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t):i*Math.pow(2,-10*(n-=1))*Math.sin((n*1-r)*2*Math.PI/t)*.5+1},easeInBack:function(n){var t=1.70158;return 1*(n/=1)*n*((t+1)*n-t)},easeOutBack:function(n){var t=1.70158;return 1*((n=n/1-1)*n*((t+1)*n+t)+1)},easeInOutBack:function(n){var t=1.70158;return(n/=1/2)<1?1/2*n*n*(((t*=1.525)+1)*n-t):1/2*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:function(n){return 1-s.easeOutBounce(1-n)},easeOutBounce:function(n){return(n/=1)<1/2.75?1*7.5625*n*n:n<2/2.75?1*(7.5625*(n-=1.5/2.75)*n+.75):n<2.5/2.75?1*(7.5625*(n-=2.25/2.75)*n+.9375):1*(7.5625*(n-=2.625/2.75)*n+.984375)},easeInOutBounce:function(n){return n<1/2?s.easeInBounce(n*2)*.5:s.easeOutBounce(n*2-1)*.5+1*.5}},k=n.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){return window.setTimeout(n,1e3/60)}}(),et=n.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(n){return window.clearTimeout(n,1e3/60)}}(),ti=n.animationLoop=function(n,t,i,r,u,f){var e=0,h=s[i]||s.linear,o=function(){e++;var i=e/t,s=h(i);n.call(f,s,i,e);r.call(f,s,i);e<t?f.animationFrame=k(o):u.apply(f)};k(o)},ii=n.getRelativePosition=function(n){var r,u,t=n.originalEvent||n,f=n.currentTarget||n.srcElement,i=f.getBoundingClientRect();return t.touches?(r=t.touches[0].clientX-i.left,u=t.touches[0].clientY-i.top):(r=t.clientX-i.left,u=t.clientY-i.top),{x:r,y:u}},ot=n.addEvent=function(n,t,i){n.addEventListener?n.addEventListener(t,i):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i},st=n.removeEvent=function(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent?n.detachEvent("on"+t,i):n["on"+t]=a},ri=n.bindEvents=function(n,t,r){n.events||(n.events={});i(t,function(t){n.events[t]=function(){r.apply(n,arguments)};ot(n.chart.canvas,t,n.events[t])})},ht=n.unbindEvents=function(n,t){i(t,function(t,i){st(n.chart.canvas,i,t)})},ct=n.getMaximumWidth=function(n){var t=n.parentNode;return t.clientWidth},lt=n.getMaximumHeight=function(n){var t=n.parentNode;return t.clientHeight},ui=n.getMaximumSize=n.getMaximumWidth,at=n.retinaScale=function(n){var t=n.ctx,i=n.canvas.width,r=n.canvas.height;window.devicePixelRatio&&(t.canvas.style.width=i+"px",t.canvas.style.height=r+"px",t.canvas.height=r*window.devicePixelRatio,t.canvas.width=i*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio))},vt=n.clear=function(n){n.ctx.clearRect(0,0,n.width,n.height)},e=n.fontString=function(n,t,i){return t+" "+n+"px "+i},y=n.longestText=function(n,t,r){n.font=t;var u=0;return i(r,function(t){var i=n.measureText(t).width;u=i>u?i:u}),u},d=n.drawRoundedRectangle=function(n,t,i,r,u,f){n.beginPath();n.moveTo(t+f,i);n.lineTo(t+r-f,i);n.quadraticCurveTo(t+r,i,t+r,i+f);n.lineTo(t+r,i+u-f);n.quadraticCurveTo(t+r,i+u,t+r-f,i+u);n.lineTo(t+f,i+u);n.quadraticCurveTo(t,i+u,t,i+u-f);n.lineTo(t,i+f);n.quadraticCurveTo(t,i,t+f,i);n.closePath()};t.instances={};t.Type=function(n,i,r){this.options=i;this.chart=r;this.id=it();t.instances[this.id]=this;i.responsive&&this.resize();this.initialize.call(this,n)};r(t.Type.prototype,{initialize:function(){return this},clear:function(){return vt(this.chart),this},stop:function(){return et(this.animationFrame),this},resize:function(n){this.stop();var t=this.chart.canvas,i=ct(this.chart.canvas),r=this.options.maintainAspectRatio?i/this.chart.aspectRatio:lt(this.chart.canvas);return t.width=this.chart.width=i,t.height=this.chart.height=r,at(this.chart),typeof n=="function"&&n.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:a,render:function(t){return t&&this.reflow(),this.options.animation&&!t?n.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return f(this.options.legendTemplate,this)},destroy:function(){this.clear();ht(this,this.events);var n=this.chart.canvas;n.width=this.chart.width;n.height=this.chart.height;n.style.removeProperty?(n.style.removeProperty("width"),n.style.removeProperty("height")):(n.style.removeAttribute("width"),n.style.removeAttribute("height"));delete t.instances[this.id]},showTooltip:function(r,u){var c,l,e,s;if(typeof this.activeElements=="undefined"&&(this.activeElements=[]),c=function(n){var t=!1;return n.length!==this.activeElements.length?t=!0:(i(n,function(n,i){n!==this.activeElements[i]&&(t=!0)},this),t)}.call(this,r),c||u)this.activeElements=r;else return;if(this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),r.length>0)if(this.datasets&&this.datasets.length>1){for(s=this.datasets.length-1;s>=0;s--)if(l=this.datasets[s].points||this.datasets[s].bars||this.datasets[s].segments,e=tt(l,r[0]),e!==-1)break;var a=[],v=[],y=function(){var f=[],t,i=[],r=[],s,c,u,l;return n.each(this.datasets,function(n){t=n.points||n.bars||n.segments;t[e]&&t[e].hasValue()&&f.push(t[e])}),n.each(f,function(t){i.push(t.x);r.push(t.y);a.push(n.template(this.options.multiTooltipTemplate,t));v.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),l=o(r),c=h(r),u=o(i),s=h(i),{x:u>this.chart.width/2?u:s,y:(l+c)/2}}.call(this,e);new t.MultiTooltip({x:y.x,y:y.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:a,legendColors:v,legendColorBackground:this.options.multiTooltipKeyBackground,title:r[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else i(r,function(n){var i=n.tooltipPosition();new t.Tooltip({x:Math.round(i.x),y:Math.round(i.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:f(this.options.tooltipTemplate,n),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}});t.Type.extend=function(n){var i=this,u=function(){return i.apply(this,arguments)},f,e;return u.prototype=l(i.prototype),r(u.prototype,n),u.extend=t.Type.extend,n.name||i.prototype.name?(f=n.name||i.prototype.name,e=t.defaults[i.prototype.name]?l(t.defaults[i.prototype.name]):{},t.defaults[f]=r(e,n.defaults),t.types[f]=u,t.prototype[f]=function(n,i){var r=nt(t.defaults.global,t.defaults[f],i||{});return new u(n,r,this)}):rt("Name not provided for this chart, so it hasn't been registered"),i};t.Element=function(n){r(this,n);this.initialize.apply(this,arguments);this.save()};r(t.Element.prototype,{initialize:function(){},restore:function(n){return n?i(n,function(n){this[n]=this._saved[n]},this):r(this,this._saved),this},save:function(){return this._saved=l(this),delete this._saved._saved,this},update:function(n){return i(n,function(n,t){this._saved[t]=this[t];this[t]=n},this),this},transition:function(n,t){return i(n,function(n,i){this[i]=(n-this._saved[i])*t+this._saved[i]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return u(this.value)}});t.Element.extend=p;t.Point=t.Element.extend({display:!0,inRange:function(n,t){var i=this.hitDetectionRadius+this.radius;return Math.pow(n-this.x,2)+Math.pow(t-this.y,2)<Math.pow(i,2)},draw:function(){if(this.display){var n=this.ctx;n.beginPath();n.arc(this.x,this.y,this.radius,0,Math.PI*2);n.closePath();n.strokeStyle=this.strokeColor;n.lineWidth=this.strokeWidth;n.fillStyle=this.fillColor;n.fill();n.stroke()}}});t.Arc=t.Element.extend({inRange:function(t,i){var r=n.getAngleFromPoint(this,{x:t,y:i}),u=r.angle>=this.startAngle&&r.angle<=this.endAngle,f=r.distance>=this.innerRadius&&r.distance<=this.outerRadius;return u&&f},tooltipPosition:function(){var n=this.startAngle+(this.endAngle-this.startAngle)/2,t=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(n)*t,y:this.y+Math.sin(n)*t}},draw:function(n){var i=n||1,t=this.ctx;t.beginPath();t.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle);t.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0);t.closePath();t.strokeStyle=this.strokeColor;t.lineWidth=this.strokeWidth;t.fillStyle=this.fillColor;t.fill();t.lineJoin="bevel";this.showStroke&&t.stroke()}});t.Rectangle=t.Element.extend({draw:function(){var n=this.ctx,f=this.width/2,t=this.x-f,i=this.x+f,r=this.base-(this.base-this.y),u=this.strokeWidth/2;this.showStroke&&(t+=u,i-=u,r+=u);n.beginPath();n.fillStyle=this.fillColor;n.strokeStyle=this.strokeColor;n.lineWidth=this.strokeWidth;n.moveTo(t,this.base);n.lineTo(t,r);n.lineTo(i,r);n.lineTo(i,this.base);n.fill();this.showStroke&&n.stroke()},height:function(){return this.base-this.y},inRange:function(n,t){return n>=this.x-this.width/2&&n<=this.x+this.width/2&&t>=this.y&&t<=this.base}});t.Tooltip=t.Element.extend({draw:function(){var n=this.chart.ctx,r,u;n.font=e(this.fontSize,this.fontStyle,this.fontFamily);this.xAlign="center";this.yAlign="above";var t=this.caretPadding=2,i=n.measureText(this.text).width+2*this.xPadding,f=this.fontSize+2*this.yPadding,o=f+this.caretHeight+t;if(this.x+i/2>this.chart.width?this.xAlign="left":this.x-i/2<0&&(this.xAlign="right"),this.y-o<0&&(this.yAlign="below"),r=this.x-i/2,u=this.y-o,n.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":n.beginPath();n.moveTo(this.x,this.y-t);n.lineTo(this.x+this.caretHeight,this.y-(t+this.caretHeight));n.lineTo(this.x-this.caretHeight,this.y-(t+this.caretHeight));n.closePath();n.fill();break;case"below":u=this.y+t+this.caretHeight;n.beginPath();n.moveTo(this.x,this.y+t);n.lineTo(this.x+this.caretHeight,this.y+t+this.caretHeight);n.lineTo(this.x-this.caretHeight,this.y+t+this.caretHeight);n.closePath();n.fill()}switch(this.xAlign){case"left":r=this.x-i+(this.cornerRadius+this.caretHeight);break;case"right":r=this.x-(this.cornerRadius+this.caretHeight)}d(n,r,u,i,f,this.cornerRadius);n.fill();n.fillStyle=this.textColor;n.textAlign="center";n.textBaseline="middle";n.fillText(this.text,r+i/2,u+f/2)}}});t.MultiTooltip=t.Element.extend({initialize:function(){var n;this.font=e(this.fontSize,this.fontStyle,this.fontFamily);this.titleFont=e(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+this.yPadding*2+this.titleFontSize*1.5;this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,i=y(this.ctx,this.font,this.labels)+this.fontSize+3,r=h([i,t]);this.width=r+this.xPadding*2;n=this.height/2;this.y-n<0?this.y=n:this.y+n>this.chart.height&&(this.y=this.chart.height-n);this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(n){var t=this.y-this.height/2+this.yPadding,i=n-1;return n===0?t+this.titleFontSize/2:t+(this.fontSize*1.5*i+this.fontSize/2)+this.titleFontSize*1.5},draw:function(){if(this.custom)this.custom(this);else{d(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor;t.fill();t.closePath();t.textAlign="left";t.textBaseline="middle";t.fillStyle=this.titleTextColor;t.font=this.titleFont;t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0));t.font=this.font;n.each(this.labels,function(n,i){t.fillStyle=this.textColor;t.fillText(n,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(i+1));t.fillStyle=this.legendColorBackground;t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize);t.fillStyle=this.legendColors[i].fill;t.fillRect(this.x+this.xPadding,this.getLineHeight(i+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}});t.Scale=t.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){var t,n;for(this.yLabels=[],t=w(this.stepValue),n=0;n<=this.steps;n++)this.yLabels.push(f(this.templateString,{value:(this.min+n*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?y(this.ctx,this.font,this.yLabels):0},addXLabel:function(n){this.xLabels.push(n);this.valuesCount++;this.fit()},removeXLabel:function(){this.xLabels.shift();this.valuesCount--;this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0;this.endPoint=this.display?this.height-this.fontSize*1.5-5:this.height;this.startPoint+=this.padding;this.endPoint-=this.padding;var n=this.endPoint-this.startPoint,t;for(this.calculateYRange(n),this.buildYLabels(),this.calculateXLabelRotation();n>this.endPoint-this.startPoint;)n=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(n),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){var n,r,u,e,t,i,f;if(this.ctx.font=this.font,n=this.ctx.measureText(this.xLabels[0]).width,r=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width,this.xScalePaddingRight=r/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){for(t=y(this.ctx,this.font,this.xLabels),this.xLabelWidth=t,f=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>f&&this.xLabelRotation===0||this.xLabelWidth>f&&this.xLabelRotation<=90&&this.xLabelRotation>0;)i=Math.cos(v(this.xLabelRotation)),u=i*n,e=i*r,u+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=u+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=i*t;this.xLabelRotation>0&&(this.endPoint-=Math.sin(v(this.xLabelRotation))*t+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:a,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(n){var t=this.drawingArea()/(this.min-this.max);return this.endPoint-t*(n-this.min)},calculateX:function(n){var u=this.xLabelRotation>0,r=this.width-(this.xScalePaddingLeft+this.xScalePaddingRight),t=r/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),i=t*n+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=t/2),Math.round(i)},update:function(t){n.extend(this,t);this.fit()},draw:function(){var t=this.ctx,u=(this.endPoint-this.startPoint)/this.steps,r=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,i(this.yLabels,function(i,f){var s=this.endPoint-u*f,e=Math.round(s),o=this.showHorizontalLines;t.textAlign="right";t.textBaseline="middle";this.showLabels&&t.fillText(i,r-10,s);f!==0||o||(o=!0);o&&t.beginPath();f>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor);e+=n.aliasPixel(t.lineWidth);o&&(t.moveTo(r,e),t.lineTo(this.width,e),t.stroke(),t.closePath());t.lineWidth=this.lineWidth;t.strokeStyle=this.lineColor;t.beginPath();t.moveTo(r-5,e);t.lineTo(r,e);t.stroke();t.closePath()},this),i(this.xLabels,function(n,i){var e=this.calculateX(i)+b(this.lineWidth),r=this.calculateX(i-(this.offsetGridLines?.5:0))+b(this.lineWidth),f=this.xLabelRotation>0,u=this.showVerticalLines;i!==0||u||(u=!0);u&&t.beginPath();i>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor);u&&(t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath());t.lineWidth=this.lineWidth;t.strokeStyle=this.lineColor;t.beginPath();t.moveTo(r,this.endPoint);t.lineTo(r,this.endPoint+5);t.stroke();t.closePath();t.save();t.translate(e,f?this.endPoint+12:this.endPoint+8);t.rotate(v(this.xLabelRotation)*-1);t.font=this.font;t.textAlign=f?"right":"center";t.textBaseline=f?"middle":"top";t.fillText(n,0,0);t.restore()},this))}});t.RadialScale=t.Element.extend({initialize:function(){this.size=o([this.height,this.width]);this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(n){var t=this.drawingArea/(this.max-this.min);return(n-this.min)*t},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize();this.buildYLabels()},buildYLabels:function(){var t,n;for(this.yLabels=[],t=w(this.stepValue),n=0;n<=this.steps;n++)this.yLabels.push(f(this.templateString,{value:(this.min+n*this.stepValue).toFixed(t)}))},getCircumference:function(){return Math.PI*2/this.valuesCount},setScaleSize:function(){var y=o([this.height/2-this.pointLabelFontSize-5,this.width/2]),t,n,i,h,c=this.width,a,p,l=0,v,w,b,k,r,s;for(this.ctx.font=e(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),n=0;n<this.valuesCount;n++)t=this.getPointPosition(n,y),i=this.ctx.measureText(f(this.templateString,{value:this.labels[n]})).width+5,n===0||n===this.valuesCount/2?(h=i/2,t.x+h>c&&(c=t.x+h,a=n),t.x-h<l&&(l=t.x-h,v=n)):n<this.valuesCount/2?t.x+i>c&&(c=t.x+i,a=n):n>this.valuesCount/2&&t.x-i<l&&(l=t.x-i,v=n);b=l;k=Math.ceil(c-this.width);p=this.getIndexAngle(a);w=this.getIndexAngle(v);r=k/Math.sin(p+Math.PI/2);s=b/Math.sin(w+Math.PI/2);r=u(r)?r:0;s=u(s)?s:0;this.drawingArea=y-(s+r)/2;this.setCenterPoint(s,r)},setCenterPoint:function(n,t){var i=this.width-t-this.drawingArea,r=n+this.drawingArea;this.xCenter=(r+i)/2;this.yCenter=this.height/2},getIndexAngle:function(n){var t=Math.PI*2/this.valuesCount;return n*t-Math.PI/2},getPointPosition:function(n,t){var i=this.getIndexAngle(n);return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter}},draw:function(){var n,t,u,f;if(this.display&&(n=this.ctx,i(this.yLabels,function(t,i){var f,o,r,u,s;if(i>0){if(f=i*(this.drawingArea/this.steps),o=this.yCenter-f,this.lineWidth>0)if(n.strokeStyle=this.lineColor,n.lineWidth=this.lineWidth,this.lineArc)n.beginPath(),n.arc(this.xCenter,this.yCenter,f,0,Math.PI*2),n.closePath(),n.stroke();else{for(n.beginPath(),u=0;u<this.valuesCount;u++)r=this.getPointPosition(u,this.calculateCenterOffset(this.min+i*this.stepValue)),u===0?n.moveTo(r.x,r.y):n.lineTo(r.x,r.y);n.closePath();n.stroke()}this.showLabels&&(n.font=e(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop&&(s=n.measureText(t).width,n.fillStyle=this.backdropColor,n.fillRect(this.xCenter-s/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,s+this.backdropPaddingX*2,this.fontSize+this.backdropPaddingY*2)),n.textAlign="center",n.textBaseline="middle",n.fillStyle=this.fontColor,n.fillText(t,this.xCenter,o))}},this),!this.lineArc))for(n.lineWidth=this.angleLineWidth,n.strokeStyle=this.angleLineColor,t=this.valuesCount-1;t>=0;t--){this.angleLineWidth>0&&(u=this.getPointPosition(t,this.calculateCenterOffset(this.max)),n.beginPath(),n.moveTo(this.xCenter,this.yCenter),n.lineTo(u.x,u.y),n.stroke(),n.closePath());f=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);n.font=e(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);n.fillStyle=this.pointLabelFontColor;var s=this.labels.length,o=this.labels.length/2,r=o/2,h=t<r||t>s-r,c=t===r||t===s-r;n.textAlign=t===0?"center":t===o?"center":t<o?"left":"right";n.textBaseline=c?"middle":h?"bottom":"top";n.fillText(this.labels[t],f.x,f.y)}}});n.addEvent(window,"resize",function(){var n;return function(){clearTimeout(n);n=setTimeout(function(){i(t.instances,function(n){n.options.responsive&&n.resize(n.render,!0)})},50)}}());ut?define(function(){return t}):typeof module=="object"&&module.exports&&(module.exports=t);c.Chart=t;t.noConflict=function(){return c.Chart=g,t}}).call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Bar",defaults:{scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){var r=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(n,t,i){var f=this.calculateBaseWidth(),e=this.calculateX(i)-f/2,u=this.calculateBarWidth(n);return e+u*t+t*r.barDatasetSpacing+u/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*r.barValueSpacing},calculateBarWidth:function(n){var t=this.calculateBaseWidth()-(n-1)*r.barDatasetSpacing;return t/n}});this.datasets=[];this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getBarsAtEvent(t):[];this.eachBars(function(n){n.restore(["fillColor","strokeColor"])});n.each(i,function(n){n.fillColor=n.highlightFill;n.strokeColor=n.highlightStroke});this.showTooltip(i)});this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx});n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(r);n.each(t.data,function(n,u){r.bars.push(new this.BarClass({value:n,label:i.labels[u],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))},this)},this);this.buildScale(i.labels);this.BarClass.prototype.base=this.scale.endPoint;this.eachBars(function(t,i,r){n.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,r,i),y:this.scale.endPoint});t.save()},this);this.render()},update:function(){this.scale.update();n.each(this.activeElements,function(n){n.restore(["fillColor","strokeColor"])});this.eachBars(function(n){n.save()});this.render()},eachBars:function(t){n.each(this.datasets,function(i,r){n.each(i.bars,t,this,r)},this)},getBarsAtEvent:function(t){for(var u=[],f=n.getRelativePosition(t),e=function(n){u.push(n.bars[i])},i,r=0;r<this.datasets.length;r++)for(i=0;i<this.datasets[r].bars.length;i++)if(this.datasets[r].bars[i].inRange(f.x,f.y))return n.each(this.datasets,e),u;return u},buildScale:function(t){var r=this,u=function(){var n=[];return r.eachBars(function(t){n.push(t.value)}),n},i={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=n.calculateScaleRange(u(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,i)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(i,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new this.ScaleClass(i)},addData:function(t,i){n.each(t,function(n,t){this.datasets[t].bars.push(new this.BarClass({value:n,label:i,x:this.scale.calculateBarX(this.datasets.length,t,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[t].strokeColor,fillColor:this.datasets[t].fillColor}))},this);this.scale.addXLabel(i);this.update()},removeData:function(){this.scale.removeXLabel();n.each(this.datasets,function(n){n.bars.shift()},this);this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1,r;this.clear();r=this.chart.ctx;this.scale.draw(i);n.each(this.datasets,function(t,r){n.each(t.bars,function(n,t){n.hasValue()&&(n.base=this.scale.endPoint,n.transition({x:this.scale.calculateBarX(this.datasets.length,r,t),y:this.scale.calculateY(n.value),width:this.scale.calculateBarWidth(this.datasets.length)},i).draw())},this)},this)}})}.call(this),function(){"use strict";var r=this,t=r.Chart,n=t.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><\/span><%if(segments[i].label){%><%=segments[i].label%><%}%><\/li><%}%><\/ul>'};t.Type.extend({name:"Doughnut",defaults:i,initialize:function(i){this.segments=[];this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2});this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(n){n.restore(["fillColor"])});n.each(i,function(n){n.fillColor=n.highlightColor});this.showTooltip(i)});this.calculateTotal(i);n.each(i,function(n,t){this.addData(n,t,!0)},this);this.render()},getSegmentsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.segments,function(n){n.inRange(r.x,r.y)&&i.push(n)},this),i},addData:function(n,t,i){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({value:n.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:n.color,highlightColor:n.highlight||n.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:Math.PI*1.5,circumference:this.options.animateRotate?0:this.calculateCircumference(n.value),label:n.label}));i||(this.reflow(),this.update())},calculateCircumference:function(n){return Math.PI*2*(Math.abs(n)/this.total)},calculateTotal:function(t){this.total=0;n.each(t,function(n){this.total+=Math.abs(n.value)},this)},update:function(){this.calculateTotal(this.segments);n.each(this.activeElements,function(n){n.restore(["fillColor"])});n.each(this.segments,function(n){n.save()});this.render()},removeData:function(t){var i=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1);this.reflow();this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2;n.each(this.segments,function(n){n.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t?t:1;this.clear();n.each(this.segments,function(n,t){n.transition({circumference:this.calculateCircumference(n.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i);n.endAngle=n.startAngle+n.circumference;n.draw();t===0&&(n.startAngle=Math.PI*1.5);t<this.segments.length-1&&(this.segments[t+1].startAngle=n.endAngle)},this)}});t.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Line",defaults:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(n){return Math.pow(n-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}});this.datasets=[];this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getPointsAtEvent(t):[];this.eachPoints(function(n){n.restore(["fillColor","strokeColor"])});n.each(i,function(n){n.fillColor=n.highlightFill;n.strokeColor=n.highlightStroke});this.showTooltip(i)});n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r);n.each(t.data,function(n,u){r.points.push(new this.PointClass({value:n,label:i.labels[u],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this);this.buildScale(i.labels);this.eachPoints(function(t,i){n.extend(t,{x:this.scale.calculateX(i),y:this.scale.endPoint});t.save()},this)},this);this.render()},update:function(){this.scale.update();n.each(this.activeElements,function(n){n.restore(["fillColor","strokeColor"])});this.eachPoints(function(n){n.save()});this.render()},eachPoints:function(t){n.each(this.datasets,function(i){n.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(n){n.inRange(r.x,r.y)&&i.push(n)})},this),i},buildScale:function(i){var u=this,f=function(){var n=[];return u.eachPoints(function(t){n.push(t.value)}),n},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:i.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=n.calculateScaleRange(f(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,i)},xLabels:i,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(r,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth});this.scale=new t.Scale(r)},addData:function(t,i){n.each(t,function(n,t){this.datasets[t].points.push(new this.PointClass({value:n,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[t].pointStrokeColor,fillColor:this.datasets[t].pointColor}))},this);this.scale.addXLabel(i);this.update()},removeData:function(){this.scale.removeXLabel();n.each(this.datasets,function(n){n.points.shift()},this);this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var u=t||1;this.clear();var i=this.chart.ctx,r=function(n){return n.value!==null},e=function(t,i,u){return n.findNextWhere(i,r,u)||t},f=function(t,i,u){return n.findPreviousWhere(i,r,u)||t};this.scale.draw(u);n.each(this.datasets,function(t){var o=n.where(t.points,r);n.each(t.points,function(n,t){n.hasValue()&&n.transition({y:this.scale.calculateY(n.value),x:this.scale.calculateX(t)},u)},this);this.options.bezierCurve&&n.each(o,function(t,i){var r=i>0&&i<o.length-1?this.options.bezierCurveTension:0;t.controlPoints=n.splineCurve(f(t,o,i),t,e(t,o,i),r);t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint);t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this);i.lineWidth=this.options.datasetStrokeWidth;i.strokeStyle=t.strokeColor;i.beginPath();n.each(o,function(n,t){if(t===0)i.moveTo(n.x,n.y);else if(this.options.bezierCurve){var r=f(n,o,t);i.bezierCurveTo(r.controlPoints.outer.x,r.controlPoints.outer.y,n.controlPoints.inner.x,n.controlPoints.inner.y,n.x,n.y)}else i.lineTo(n.x,n.y)},this);i.stroke();this.options.datasetFill&&o.length>0&&(i.lineTo(o[o.length-1].x,this.scale.endPoint),i.lineTo(o[0].x,this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill());n.each(o,function(n){n.draw()})},this)}})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"PolarArea",defaults:{scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"><\/span><%if(segments[i].label){%><%=segments[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.segments=[];this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2});this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:i.length});this.updateScaleRange(i);this.scale.update();n.each(i,function(n,t){this.addData(n,t,!0)},this);this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(n){n.restore(["fillColor"])});n.each(i,function(n){n.fillColor=n.highlightColor});this.showTooltip(i)});this.render()},getSegmentsAtEvent:function(t){var i=[],r=n.getRelativePosition(t);return n.each(this.segments,function(n){n.inRange(r.x,r.y)&&i.push(n)},this),i},addData:function(n,t,i){var r=t||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({fillColor:n.color,highlightColor:n.highlight||n.color,label:n.label,value:n.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(n.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:Math.PI*1.5}));i||(this.reflow(),this.update())},removeData:function(t){var i=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1);this.reflow();this.update()},calculateTotal:function(t){this.total=0;n.each(t,function(n){this.total+=n.value},this);this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var i=[],r;n.each(t,function(n){i.push(n.value)});r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(i,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments);n.each(this.segments,function(n){n.save()});this.reflow();this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2});this.updateScaleRange(this.segments);this.scale.update();n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2});n.each(this.segments,function(n){n.update({outerRadius:this.scale.calculateCenterOffset(n.value)})},this)},draw:function(t){var i=t||1;this.clear();n.each(this.segments,function(n,t){n.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(n.value)},i);n.endAngle=n.startAngle+n.circumference;t===0&&(n.startAngle=Math.PI*1.5);t<this.segments.length-1&&(this.segments[t+1].startAngle=n.endAngle);n.draw()},this);this.scale.draw()}})}.call(this),function(){"use strict";var i=this,t=i.Chart,n=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"><\/span><%if(datasets[i].label){%><%=datasets[i].label%><%}%><\/li><%}%><\/ul>'},initialize:function(i){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx});this.datasets=[];this.buildScale(i);this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var i=t.type!=="mouseout"?this.getPointsAtEvent(t):[];this.eachPoints(function(n){n.restore(["fillColor","strokeColor"])});n.each(i,function(n){n.fillColor=n.highlightFill;n.strokeColor=n.highlightStroke});this.showTooltip(i)});n.each(i.datasets,function(t){var r={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(r);n.each(t.data,function(n,u){var f;this.scale.animation||(f=this.scale.getPointPosition(u,this.scale.calculateCenterOffset(n)));r.points.push(new this.PointClass({value:n,label:i.labels[u],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:f.x,y:this.options.animation?this.scale.yCenter:f.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this)},this);this.render()},eachPoints:function(t){n.each(this.datasets,function(i){n.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var f=n.getRelativePosition(t),r=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},f),e=Math.PI*2/this.scale.valuesCount,i=Math.round((r.angle-Math.PI*1.5)/e),u=[];return(i>=this.scale.valuesCount||i<0)&&(i=0),r.distance<=this.scale.drawingArea&&n.each(this.datasets,function(n){u.push(n.points[i])}),u},buildScale:function(n){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:n.labels,valuesCount:n.datasets[0].data.length});this.scale.setScaleSize();this.updateScaleRange(n.datasets);this.scale.buildYLabels()},updateScaleRange:function(t){var i=function(){var i=[];return n.each(t,function(t){t.data?i=i.concat(t.data):n.each(t.points,function(n){i.push(n.value)})}),i}(),r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(i,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r)},addData:function(t,i){this.scale.valuesCount++;n.each(t,function(n,t){var r=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(n));this.datasets[t].points.push(new this.PointClass({value:n,label:i,x:r.x,y:r.y,strokeColor:this.datasets[t].pointStrokeColor,fillColor:this.datasets[t].pointColor}))},this);this.scale.labels.push(i);this.reflow();this.update()},removeData:function(){this.scale.valuesCount--;this.scale.labels.shift();n.each(this.datasets,function(n){n.points.shift()},this);this.reflow();this.update()},update:function(){this.eachPoints(function(n){n.save()});this.reflow();this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2});this.updateScaleRange(this.datasets);this.scale.setScaleSize();this.scale.buildYLabels()},draw:function(t){var r=t||1,i=this.chart.ctx;this.clear();this.scale.draw();n.each(this.datasets,function(t){n.each(t.points,function(n,t){n.hasValue()&&n.transition(this.scale.getPointPosition(t,this.scale.calculateCenterOffset(n.value)),r)},this);i.lineWidth=this.options.datasetStrokeWidth;i.strokeStyle=t.strokeColor;i.beginPath();n.each(t.points,function(n,t){t===0?i.moveTo(n.x,n.y):i.lineTo(n.x,n.y)},this);i.closePath();i.stroke();i.fillStyle=t.fillColor;i.fill();n.each(t.points,function(n){n.hasValue()&&n.draw()})},this)}})}.call(this);GridSampler={};GridSampler.checkAndNudgePoints=function(n,t){for(var u,f,e=qrcode.width,o=qrcode.height,r=!0,i=0;i<t.length&&r;i+=2){if(u=Math.floor(t[i]),f=Math.floor(t[i+1]),u<-1||u>e||f<-1||f>o)throw"Error.checkAndNudgePoints ";r=!1;u==-1?(t[i]=0,r=!0):u==e&&(t[i]=e-1,r=!0);f==-1?(t[i+1]=0,r=!0):f==o&&(t[i+1]=o-1,r=!0)}for(r=!0,i=t.length-2;i>=0&&r;i-=2){if(u=Math.floor(t[i]),f=Math.floor(t[i+1]),u<-1||u>e||f<-1||f>o)throw"Error.checkAndNudgePoints ";r=!1;u==-1?(t[i]=0,r=!0):u==e&&(t[i]=e-1,r=!0);f==-1?(t[i+1]=0,r=!0):f==o&&(t[i+1]=o-1,r=!0)}};GridSampler.sampleGrid3=function(n,t,i){for(var s,c,r,f,o,h=new BitMatrix(t),u=new Array(t<<1),e=0;e<t;e++){for(s=u.length,c=e+.5,r=0;r<s;r+=2)u[r]=(r>>1)+.5,u[r+1]=c;i.transformPoints1(u);GridSampler.checkAndNudgePoints(n,u);try{for(r=0;r<s;r+=2)f=Math.floor(u[r])*4+Math.floor(u[r+1])*qrcode.width*4,o=n[Math.floor(u[r])+qrcode.width*Math.floor(u[r+1])],qrcode.imagedata.data[f]=o?255:0,qrcode.imagedata.data[f+1]=o?255:0,qrcode.imagedata.data[f+2]=0,qrcode.imagedata.data[f+3]=255,o&&h.set_Renamed(r>>1,e)}catch(l){throw"Error.checkAndNudgePoints";}}return h};GridSampler.sampleGridx=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b){var k=PerspectiveTransform.quadrilateralToQuadrilateral(i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b);return GridSampler.sampleGrid3(n,t,k)};Version.VERSION_DECODE_INFO=[31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017];Version.VERSIONS=buildVersions();Version.getVersionForNumber=function(n){if(n<1||n>40)throw"ArgumentException";return Version.VERSIONS[n-1]};Version.getProvisionalVersionForDimension=function(n){if(n%4!=1)throw"Error getProvisionalVersionForDimension";try{return Version.getVersionForNumber(n-17>>2)}catch(t){throw"Error getVersionForNumber";}};Version.decodeVersionInformation=function(n){for(var r,u,i=4294967295,f=0,t=0;t<Version.VERSION_DECODE_INFO.length;t++){if(r=Version.VERSION_DECODE_INFO[t],r==n)return this.getVersionForNumber(t+7);u=FormatInformation.numBitsDiffering(n,r);u<i&&(f=t+7,i=u)}return i<=3?this.getVersionForNumber(f):null};PerspectiveTransform.quadrilateralToQuadrilateral=function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var w=this.quadrilateralToSquare(n,t,i,r,u,f,e,o),b=this.squareToQuadrilateral(s,h,c,l,a,v,y,p);return b.times(w)};PerspectiveTransform.squareToQuadrilateral=function(n,t,i,r,u,f,e,o){return dy2=o-f,dy3=t-r+f-o,dy2==0&&dy3==0?new PerspectiveTransform(i-n,u-i,n,r-t,f-r,t,0,0,1):(dx1=i-u,dx2=e-u,dx3=n-i+u-e,dy1=r-f,denominator=dx1*dy2-dx2*dy1,a13=(dx3*dy2-dx2*dy3)/denominator,a23=(dx1*dy3-dx3*dy1)/denominator,new PerspectiveTransform(i-n+a13*i,e-n+a23*e,n,r-t+a13*r,o-t+a23*o,t,a13,a23,1))};PerspectiveTransform.quadrilateralToSquare=function(n,t,i,r,u,f,e,o){return this.squareToQuadrilateral(n,t,i,r,u,f,e,o).buildAdjoint()};var FORMAT_INFO_MASK_QR=21522,FORMAT_INFO_DECODE_LOOKUP=[[21522,0],[20773,1],[24188,2],[23371,3],[17913,4],[16590,5],[20375,6],[19104,7],[30660,8],[29427,9],[32170,10],[30877,11],[26159,12],[25368,13],[27713,14],[26998,15],[5769,16],[5054,17],[7399,18],[6608,19],[1890,20],[597,21],[3340,22],[2107,23],[13663,24],[12392,25],[16177,26],[14854,27],[9396,28],[8579,29],[11994,30],[11245,31]],BITS_SET_IN_HALF_BYTE=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4];FormatInformation.numBitsDiffering=function(n,t){return n^=t,BITS_SET_IN_HALF_BYTE[n&15]+BITS_SET_IN_HALF_BYTE[URShift(n,4)&15]+BITS_SET_IN_HALF_BYTE[URShift(n,8)&15]+BITS_SET_IN_HALF_BYTE[URShift(n,12)&15]+BITS_SET_IN_HALF_BYTE[URShift(n,16)&15]+BITS_SET_IN_HALF_BYTE[URShift(n,20)&15]+BITS_SET_IN_HALF_BYTE[URShift(n,24)&15]+BITS_SET_IN_HALF_BYTE[URShift(n,28)&15]};FormatInformation.decodeFormatInformation=function(n){var t=FormatInformation.doDecodeFormatInformation(n);return t!=null?t:FormatInformation.doDecodeFormatInformation(n^FORMAT_INFO_MASK_QR)};FormatInformation.doDecodeFormatInformation=function(n){for(var t,u,f,i=4294967295,e=0,r=0;r<FORMAT_INFO_DECODE_LOOKUP.length;r++){if(t=FORMAT_INFO_DECODE_LOOKUP[r],u=t[0],u==n)return new FormatInformation(t[1]);f=this.numBitsDiffering(n,u);f<i&&(e=t[1],i=f)}return i<=3?new FormatInformation(e):null};ErrorCorrectionLevel.forBits=function(n){if(n<0||n>=FOR_BITS.length)throw"ArgumentException";return FOR_BITS[n]};var L=new ErrorCorrectionLevel(0,1,"L"),M=new ErrorCorrectionLevel(1,0,"M"),Q=new ErrorCorrectionLevel(2,3,"Q"),H=new ErrorCorrectionLevel(3,2,"H"),FOR_BITS=[M,L,H,Q];DataBlock.getDataBlocks=function(n,t,i){var f,o,a,v,w,y,e,b,h,c,k,u,r,d;if(n.length!=t.TotalCodewords)throw"ArgumentException";var l=t.getECBlocksForLevel(i),p=0,s=l.getECBlocks();for(u=0;u<s.length;u++)p+=s[u].Count;for(f=new Array(p),o=0,r=0;r<s.length;r++)for(a=s[r],u=0;u<a.Count;u++)v=a.DataCodewords,w=l.ECCodewordsPerBlock+v,f[o++]=new DataBlock(v,new Array(w));for(y=f[0].codewords.length,e=f.length-1;e>=0;){if(b=f[e].codewords.length,b==y)break;e--}for(e++,h=y-l.ECCodewordsPerBlock,c=0,u=0;u<h;u++)for(r=0;r<o;r++)f[r].codewords[u]=n[c++];for(r=e;r<o;r++)f[r].codewords[h]=n[c++];for(k=f[0].codewords.length,u=h;u<k;u++)for(r=0;r<o;r++)d=r<e?u:u+1,f[r].codewords[d]=n[c++];return f};DataMask={};DataMask.forReference=function(n){if(n<0||n>7)throw"System.ArgumentException";return DataMask.DATA_MASKS[n]};DataMask.DATA_MASKS=[new DataMask000,new DataMask001,new DataMask010,new DataMask011,new DataMask100,new DataMask101,new DataMask110,new DataMask111];GF256.QR_CODE_FIELD=new GF256(285);GF256.DATA_MATRIX_FIELD=new GF256(301);GF256.addOrSubtract=function(n,t){return n^t};Decoder={};Decoder.rsDecoder=new ReedSolomonDecoder(GF256.QR_CODE_FIELD);Decoder.correctErrors=function(n,t){for(var f,u=n.length,r=new Array(u),i=0;i<u;i++)r[i]=n[i]&255;f=n.length-t;try{Decoder.rsDecoder.decode(r,f)}catch(e){throw e;}for(i=0;i<t;i++)n[i]=r[i]};Decoder.decode=function(n){for(var f,h,r,u=new BitMatrixParser(n),e=u.readVersion(),o=u.readFormatInformation().ErrorCorrectionLevel,v=u.readCodewords(),i=DataBlock.getDataBlocks(v,e,o),s=0,t=0;t<i.length;t++)s+=i[t].NumDataCodewords;for(f=new Array(s),h=0,r=0;r<i.length;r++){var c=i[r],l=c.Codewords,a=c.NumDataCodewords;for(Decoder.correctErrors(l,a),t=0;t<a;t++)f[h++]=l[t]}return new QRCodeDataBlockReader(f,e.VersionNumber,o.Bits)};qrcode={};qrcode.imagedata=null;qrcode.width=0;qrcode.height=0;qrcode.qrCodeSymbol=null;qrcode.debug=!1;qrcode.maxImgSize=1048576;qrcode.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]];qrcode.callback=null;qrcode.decode=function(n){var i,r,t;if(arguments.length==0)return i=document.getElementById("qr-canvas"),r=i.getContext("2d"),qrcode.width=i.width,qrcode.height=i.height,qrcode.imagedata=r.getImageData(0,0,qrcode.width,qrcode.height),qrcode.result=qrcode.process(r),qrcode.callback!=null&&qrcode.callback(qrcode.result),qrcode.result;t=new Image;t.onload=function(){var n=document.createElement("canvas"),i=n.getContext("2d"),r=t.height,f=t.width,u;t.width*t.height>qrcode.maxImgSize&&(u=t.width/t.height,r=Math.sqrt(qrcode.maxImgSize/u),f=u*r);n.width=f;n.height=r;i.drawImage(t,0,0,n.width,n.height);qrcode.width=n.width;qrcode.height=n.height;try{qrcode.imagedata=i.getImageData(0,0,n.width,n.height)}catch(e){qrcode.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!";qrcode.callback!=null&&qrcode.callback(qrcode.result);return}try{qrcode.result=qrcode.process(i)}catch(e){console.log(e);qrcode.result="error decoding QR Code"}qrcode.callback!=null&&qrcode.callback(qrcode.result)};t.src=n};qrcode.isUrl=function(n){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(n)};qrcode.decode_url=function(n){var t="",i;try{t=escape(n)}catch(r){console.log(r);t=n}i="";try{i=decodeURIComponent(t)}catch(r){console.log(r);i=t}return i};qrcode.decode_utf8=function(n){return qrcode.isUrl(n)?qrcode.decode_url(n):n};qrcode.process=function(n){var a=(new Date).getTime(),u=qrcode.grayScaleToBitmap(qrcode.grayscale()),t,i,f,s,h,r,e,l,y;if(qrcode.debug){for(t=0;t<qrcode.height;t++)for(i=0;i<qrcode.width;i++)f=i*4+t*qrcode.width*4,qrcode.imagedata.data[f]=u[i+t*qrcode.width]?0:0,qrcode.imagedata.data[f+1]=u[i+t*qrcode.width]?0:0,qrcode.imagedata.data[f+2]=u[i+t*qrcode.width]?255:0;n.putImageData(qrcode.imagedata,0,0)}s=new Detector(u);h=s.detect();qrcode.debug&&n.putImageData(qrcode.imagedata,0,0);var v=Decoder.decode(h.bits),o=v.DataByte,c="";for(r=0;r<o.length;r++)for(e=0;e<o[r].length;e++)c+=String.fromCharCode(o[r][e]);return l=(new Date).getTime(),y=l-a,qrcode.decode_utf8(c)};qrcode.getPixel=function(n,t){if(qrcode.width<n)throw"point error";if(qrcode.height<t)throw"point error";return point=n*4+t*qrcode.width*4,p=(qrcode.imagedata.data[point]*33+qrcode.imagedata.data[point+1]*34+qrcode.imagedata.data[point+2]*33)/100};qrcode.binarize=function(n){for(var t,u,r=new Array(qrcode.width*qrcode.height),i=0;i<qrcode.height;i++)for(t=0;t<qrcode.width;t++)u=qrcode.getPixel(t,i),r[t+i*qrcode.width]=u<=n?!0:!1;return r};qrcode.getMiddleBrightnessPerArea=function(n){for(var o,s,h,f,c,l,t,i,r=4,a=Math.floor(qrcode.width/r),v=Math.floor(qrcode.height/r),u=new Array(r),e=0;e<r;e++)for(u[e]=new Array(r),o=0;o<r;o++)u[e][o]=[0,0];for(t=0;t<r;t++)for(i=0;i<r;i++)for(u[i][t][0]=255,s=0;s<v;s++)for(h=0;h<a;h++)f=n[a*i+h+(v*t+s)*qrcode.width],f<u[i][t][0]&&(u[i][t][0]=f),f>u[i][t][1]&&(u[i][t][1]=f);for(c=new Array(r),l=0;l<r;l++)c[l]=new Array(r);for(t=0;t<r;t++)for(i=0;i<r;i++)c[i][t]=Math.floor((u[i][t][0]+u[i][t][1])/2);return c};qrcode.grayScaleToBitmap=function(n){for(var t,r,u,s=qrcode.getMiddleBrightnessPerArea(n),f=s.length,e=Math.floor(qrcode.width/f),o=Math.floor(qrcode.height/f),h=new Array(qrcode.height*qrcode.width),i=0;i<f;i++)for(t=0;t<f;t++)for(r=0;r<o;r++)for(u=0;u<e;u++)h[e*t+u+(o*i+r)*qrcode.width]=n[e*t+u+(o*i+r)*qrcode.width]<s[t][i]?!0:!1;return h};qrcode.grayscale=function(){for(var n,r,i=new Array(qrcode.width*qrcode.height),t=0;t<qrcode.height;t++)for(n=0;n<qrcode.width;n++)r=qrcode.getPixel(n,t),i[n+t*qrcode.width]=r;return i};Array.prototype.remove=function(n,t){var i=this.slice((t||n)+1||this.length);return this.length=n<0?this.length+n:n,this.push.apply(this,i)};var MIN_SKIP=3,MAX_MODULES=57,INTEGER_MATH_SHIFT=8,CENTER_QUORUM=2;qrcode.orderBestPatterns=function(n){function u(n,t){return xDiff=n.X-t.X,yDiff=n.Y-t.Y,Math.sqrt(xDiff*xDiff+yDiff*yDiff)}function h(n,t,i){var r=t.x,u=t.y;return(i.x-r)*(n.y-u)-(i.y-u)*(n.x-r)}var o=u(n[0],n[1]),f=u(n[1],n[2]),e=u(n[0],n[2]),t,r,i,s;f>=o&&f>=e?(r=n[0],t=n[1],i=n[2]):e>=f&&e>=o?(r=n[1],t=n[0],i=n[2]):(r=n[2],t=n[0],i=n[1]);h(t,r,i)<0&&(s=t,t=i,i=s);n[0]=t;n[1]=r;n[2]=i};
/*!
 * jQuery JavaScript Library v2.1.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-18T15:11Z
 */
(function(n,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)})(typeof window!="undefined"?window:this,function(n,t){function ri(n){var t=n.length,r=i.type(n);return r==="function"||i.isWindow(n)?!1:n.nodeType===1&&t?!0:r==="array"||t===0||typeof t=="number"&&t>0&&t-1 in n}function ui(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if(typeof t=="string"){if(ef.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return ft.call(t,n)>=0!==r})}function ur(n,t){while((n=n[t])&&n.nodeType!==1);return n}function of(n){var t=fi[n]={};return i.each(n.match(c)||[],function(n,i){t[i]=!0}),t}function ht(){u.removeEventListener("DOMContentLoaded",ht,!1);n.removeEventListener("load",ht,!1);i.ready()}function v(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=i.expando+v.uid++}function fr(n,t,r){var u;if(r===undefined&&n.nodeType===1)if(u="data-"+t.replace(hf,"-$1").toLowerCase(),r=n.getAttribute(u),typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:sf.test(r)?i.parseJSON(r):r}catch(f){}e.set(n,t,r)}else r=undefined;return r}function lt(){return!0}function k(){return!1}function hr(){try{return u.activeElement}catch(n){}}function vr(n,t){return i.nodeName(n,"table")&&i.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function bf(n){return n.type=(n.getAttribute("type")!==null)+"/"+n.type,n}function kf(n){var t=pf.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function ei(n,t){for(var i=0,u=n.length;i<u;i++)r.set(n[i],"globalEval",!t||r.get(t[i],"globalEval"))}function yr(n,t){var f,c,o,s,h,l,a,u;if(t.nodeType===1){if(r.hasData(n)&&(s=r.access(n),h=r.set(t,s),u=s.events,u)){delete h.handle;h.events={};for(o in u)for(f=0,c=u[o].length;f<c;f++)i.event.add(t,o,u[o][f])}e.hasData(n)&&(l=e.access(n),a=i.extend({},l),e.set(t,a))}}function o(n,t){var r=n.getElementsByTagName?n.getElementsByTagName(t||"*"):n.querySelectorAll?n.querySelectorAll(t||"*"):[];return t===undefined||t&&i.nodeName(n,t)?i.merge([n],r):r}function df(n,t){var i=t.nodeName.toLowerCase();i==="input"&&er.test(n.type)?t.checked=n.checked:(i==="input"||i==="textarea")&&(t.defaultValue=n.defaultValue)}function pr(t,r){var f,u=i(r.createElement(t)).appendTo(r.body),e=n.getDefaultComputedStyle&&(f=n.getDefaultComputedStyle(u[0]))?f.display:i.css(u[0],"display");return u.detach(),e}function si(n){var r=u,t=oi[n];return t||(t=pr(n,r),t!=="none"&&t||(at=(at||i("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),r=at[0].contentDocument,r.write(),r.close(),t=pr(n,r),at.detach()),oi[n]=t),t}function it(n,t,r){var e,o,s,u,f=n.style;return r=r||vt(n),r&&(u=r.getPropertyValue(t)||r[t]),r&&(u!==""||i.contains(n.ownerDocument,n)||(u=i.style(n,t)),hi.test(u)&&wr.test(t)&&(e=f.width,o=f.minWidth,s=f.maxWidth,f.minWidth=f.maxWidth=f.width=u,u=r.width,f.width=e,f.minWidth=o,f.maxWidth=s)),u!==undefined?u+"":u}function br(n,t){return{get:function(){if(n()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function gr(n,t){if(t in n)return t;for(var r=t[0].toUpperCase()+t.slice(1),u=t,i=dr.length;i--;)if(t=dr[i]+r,t in n)return t;return u}function nu(n,t,i){var r=ne.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function tu(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:t==="width"?1:0,o=0;e<4;e+=2)r==="margin"&&(o+=i.css(n,r+p[e],!0,f)),u?(r==="content"&&(o-=i.css(n,"padding"+p[e],!0,f)),r!=="margin"&&(o-=i.css(n,"border"+p[e]+"Width",!0,f))):(o+=i.css(n,"padding"+p[e],!0,f),r!=="padding"&&(o+=i.css(n,"border"+p[e]+"Width",!0,f)));return o}function iu(n,t,r){var o=!0,u=t==="width"?n.offsetWidth:n.offsetHeight,e=vt(n),s=i.css(n,"boxSizing",!1,e)==="border-box";if(u<=0||u==null){if(u=it(n,t,e),(u<0||u==null)&&(u=n.style[t]),hi.test(u))return u;o=s&&(f.boxSizingReliable()||u===n.style[t]);u=parseFloat(u)||0}return u+tu(n,t,r||(s?"border":"content"),o,e)+"px"}function ru(n,t){for(var e,u,s,o=[],f=0,h=n.length;f<h;f++)(u=n[f],u.style)&&(o[f]=r.get(u,"olddisplay"),e=u.style.display,t?(o[f]||e!=="none"||(u.style.display=""),u.style.display===""&&tt(u)&&(o[f]=r.access(u,"olddisplay",si(u.nodeName)))):(s=tt(u),e==="none"&&s||r.set(u,"olddisplay",s?e:i.css(u,"display"))));for(f=0;f<h;f++)(u=n[f],u.style)&&(t&&u.style.display!=="none"&&u.style.display!==""||(u.style.display=t?o[f]||"":"none"));return n}function s(n,t,i,r,u){return new s.prototype.init(n,t,i,r,u)}function fu(){return setTimeout(function(){d=undefined}),d=i.now()}function wt(n,t){var r,u=0,i={height:n};for(t=t?1:0;u<4;u+=2-t)r=p[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function eu(n,t,i){for(var u,f=(rt[t]||[]).concat(rt["*"]),r=0,e=f.length;r<e;r++)if(u=f[r].call(i,t,n))return u}function fe(n,t,u){var f,a,p,v,o,w,h,b,l=this,y={},s=n.style,c=n.nodeType&&tt(n),e=r.get(n,"fxshow");u.queue||(o=i._queueHooks(n,"fx"),o.unqueued==null&&(o.unqueued=0,w=o.empty.fire,o.empty.fire=function(){o.unqueued||w()}),o.unqueued++,l.always(function(){l.always(function(){o.unqueued--;i.queue(n,"fx").length||o.empty.fire()})}));n.nodeType===1&&("height"in t||"width"in t)&&(u.overflow=[s.overflow,s.overflowX,s.overflowY],h=i.css(n,"display"),b=h==="none"?r.get(n,"olddisplay")||si(n.nodeName):h,b==="inline"&&i.css(n,"float")==="none"&&(s.display="inline-block"));u.overflow&&(s.overflow="hidden",l.always(function(){s.overflow=u.overflow[0];s.overflowX=u.overflow[1];s.overflowY=u.overflow[2]}));for(f in t)if(a=t[f],re.exec(a)){if(delete t[f],p=p||a==="toggle",a===(c?"hide":"show"))if(a==="show"&&e&&e[f]!==undefined)c=!0;else continue;y[f]=e&&e[f]||i.style(n,f)}else h=undefined;if(i.isEmptyObject(y))(h==="none"?si(n.nodeName):h)==="inline"&&(s.display=h);else{e?"hidden"in e&&(c=e.hidden):e=r.access(n,"fxshow",{});p&&(e.hidden=!c);c?i(n).show():l.done(function(){i(n).hide()});l.done(function(){var t;r.remove(n,"fxshow");for(t in y)i.style(n,t,y[t])});for(f in y)v=eu(c?e[f]:0,f,l),f in e||(e[f]=v.start,c&&(v.end=v.start,v.start=f==="width"||f==="height"?1:0))}}function ee(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function ou(n,t,r){var e,o,s=0,l=pt.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var s=d||fu(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,e=u.tweens.length;r<e;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),i<1&&e?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:d||fu(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;i<r;i++)u.tweens[i].run(1);return t?f.resolveWith(n,[u,t]):f.rejectWith(n,[u,t]),this}}),h=u.props;for(ee(h,u.opts.specialEasing);s<l;s++)if(e=pt[s].call(u,n,h,u.opts),e)return e;return i.map(h,eu,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function pu(n){return function(t,r){typeof t!="string"&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(c)||[];if(i.isFunction(r))while(u=e[f++])u[0]==="+"?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function wu(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);if(typeof s!="string"||o||f[s]){if(o)return!(h=s)}else return t.dataTypes.unshift(s),e(s),!1}),h}var f={},o=n===ci;return e(t.dataTypes[0])||!f["*"]&&e("*")}function ai(n,t){var r,u,f=i.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function ae(n,t,i){for(var e,u,f,o,s=n.contents,r=n.dataTypes;r[0]==="*";)r.shift(),e===undefined&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(u in s)if(s[u]&&s[u].test(e)){r.unshift(u);break}if(r[0]in i)f=r[0];else{for(u in i){if(!r[0]||n.converters[u+" "+r[0]]){f=u;break}o||(o=u)}f=f||o}if(f)return f!==r[0]&&r.unshift(f),i[f]}function ve(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift(),u)if(u==="*")u=e;else if(e!=="*"&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]],f)){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function vi(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||pe.test(n)?u(n,i):vi(n+"["+(typeof i=="object"?t:"")+"]",i,r,u)});else if(r||i.type(t)!=="object")u(n,t);else for(f in t)vi(n+"["+f+"]",t[f],r,u)}function ku(n){return i.isWindow(n)?n:n.nodeType===9&&n.defaultView}var w=[],a=w.slice,bi=w.concat,ti=w.push,ft=w.indexOf,et={},nf=et.toString,ii=et.hasOwnProperty,f={},u=n.document,ki="2.1.3",i=function(n,t){return new i.fn.init(n,t)},tf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rf=/^-ms-/,uf=/-([\da-z])/gi,ff=function(n,t){return t.toUpperCase()},y,ot,nr,tr,ir,rr,c,fi,st,l,b,at,oi,oe,su,g,hu,bt,cu,kt,dt,yi,ni,pi,wi,du,gu;i.fn=i.prototype={jquery:ki,constructor:i,selector:"",length:0,toArray:function(){return a.call(this)},get:function(n){return n!=null?n<0?this[n+this.length]:this[n]:a.call(this)},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n,t){return i.each(this,n,t)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(n<0?i:0);return this.pushStack(t>=0&&t<i?[this[t]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:ti,sort:w.sort,splice:w.splice};i.extend=i.fn.extend=function(){var e,f,r,t,o,s,n=arguments[0]||{},u=1,c=arguments.length,h=!1;for(typeof n=="boolean"&&(h=n,n=arguments[u]||{},u++),typeof n=="object"||i.isFunction(n)||(n={}),u===c&&(n=this,u--);u<c;u++)if((e=arguments[u])!=null)for(f in e)(r=n[f],t=e[f],n!==t)&&(h&&t&&(i.isPlainObject(t)||(o=i.isArray(t)))?(o?(o=!1,s=r&&i.isArray(r)?r:[]):s=r&&i.isPlainObject(r)?r:{},n[f]=i.extend(h,s,t)):t!==undefined&&(n[f]=t));return n};i.extend({expando:"jQuery"+(ki+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isFunction:function(n){return i.type(n)==="function"},isArray:Array.isArray,isWindow:function(n){return n!=null&&n===n.window},isNumeric:function(n){return!i.isArray(n)&&n-parseFloat(n)+1>=0},isPlainObject:function(n){return i.type(n)!=="object"||n.nodeType||i.isWindow(n)?!1:n.constructor&&!ii.call(n.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(n){for(var t in n)return!1;return!0},type:function(n){return n==null?n+"":typeof n=="object"||typeof n=="function"?et[nf.call(n)]||"object":typeof n},globalEval:function(n){var t,r=eval;n=i.trim(n);n&&(n.indexOf("use strict")===1?(t=u.createElement("script"),t.text=n,u.head.appendChild(t).parentNode.removeChild(t)):r(n))},camelCase:function(n){return n.replace(rf,"ms-").replace(uf,ff)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t,i){var u,r=0,f=n.length,e=ri(n);if(i){if(e){for(;r<f;r++)if(u=t.apply(n[r],i),u===!1)break}else for(r in n)if(u=t.apply(n[r],i),u===!1)break}else if(e){for(;r<f;r++)if(u=t.call(n[r],r,n[r]),u===!1)break}else for(r in n)if(u=t.call(n[r],r,n[r]),u===!1)break;return n},trim:function(n){return n==null?"":(n+"").replace(tf,"")},makeArray:function(n,t){var r=t||[];return n!=null&&(ri(Object(n))?i.merge(r,typeof n=="string"?[n]:n):ti.call(r,n)),r},inArray:function(n,t,i){return t==null?-1:ft.call(t,n,i)},merge:function(n,t){for(var u=+t.length,i=0,r=n.length;i<u;i++)n[r++]=t[i];return n.length=r,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;r<e;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var u,r=0,e=n.length,o=ri(n),f=[];if(o)for(;r<e;r++)u=t(n[r],r,i),u!=null&&f.push(u);else for(r in n)u=t(n[r],r,i),u!=null&&f.push(u);return bi.apply([],f)},guid:1,proxy:function(n,t){var u,f,r;return(typeof t=="string"&&(u=n[t],t=n,n=u),!i.isFunction(n))?undefined:(f=a.call(arguments,2),r=function(){return n.apply(t||this,f.concat(a.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r)},now:Date.now,support:f});i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,t){et["[object "+t+"]"]=t.toLowerCase()});y=function(n){function r(n,t,i,r){var p,s,a,c,w,y,d,v,nt,g;if((t?t.ownerDocument||t:h)!==o&&k(t),t=t||o,i=i||[],c=t.nodeType,typeof n!="string"||!n||c!==1&&c!==9&&c!==11)return i;if(!r&&l){if(c!==11&&(p=hr.exec(n)))if(a=p[1]){if(c===9)if(s=t.getElementById(a),s&&s.parentNode){if(s.id===a)return i.push(s),i}else return i;else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(a))&&et(t,s)&&s.id===a)return i.push(s),i}else{if(p[2])return b.apply(i,t.getElementsByTagName(n)),i;if((a=p[3])&&u.getElementsByClassName)return b.apply(i,t.getElementsByClassName(a)),i}if(u.qsa&&(!e||!e.test(n))){if(v=d=f,nt=t,g=c!==1&&n,c===1&&t.nodeName.toLowerCase()!=="object"){for(y=ft(n),(d=t.getAttribute("id"))?v=d.replace(cr,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",w=y.length;w--;)y[w]=v+vt(y[w]);nt=dt.test(n)&&ti(t.parentNode)||t;g=y.join(",")}if(g)try{return b.apply(i,nt.querySelectorAll(g)),i}catch(tt){}finally{d||t.removeAttribute("id")}}}return oi(n.replace(lt,"$1"),t,i,r)}function gt(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function c(n){return n[f]=!0,n}function v(n){var t=o.createElement("div");try{return!!n(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ni(n,i){for(var u=n.split("|"),r=n.length;r--;)t.attrHandle[u[r]]=i}function wi(n,t){var i=t&&n,r=i&&n.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||li)-(~n.sourceIndex||li);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function lr(n){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===n}}function ar(n){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===n}}function tt(n){return c(function(t){return t=+t,c(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ti(n){return n&&typeof n.getElementsByTagName!="undefined"&&n}function bi(){}function vt(n){for(var t=0,r=n.length,i="";t<r;t++)i+=n[t].value;return i}function ii(n,t,i){var r=t.dir,u=i&&r==="parentNode",e=ki++;return t.first?function(t,i,f){while(t=t[r])if(t.nodeType===1||u)return n(t,i,f)}:function(t,i,o){var s,h,c=[a,e];if(o){while(t=t[r])if((t.nodeType===1||u)&&n(t,i,o))return!0}else while(t=t[r])if(t.nodeType===1||u){if(h=t[f]||(t[f]={}),(s=h[r])&&s[0]===a&&s[1]===e)return c[2]=s[2];if(h[r]=c,c[2]=n(t,i,o))return!0}}}function ri(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function vr(n,t,i){for(var u=0,f=t.length;u<f;u++)r(n,t[u],i);return i}function yt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=t!=null;f<s;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function ui(n,t,i,r,u,e){return r&&!r[f]&&(r=ui(r)),u&&!u[f]&&(u=ui(u,e)),c(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,k=f||vr(t||"*",o.nodeType?[o]:o,[]),v=n&&(f||!t)?yt(k,p,n,o,s):k,h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=yt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?nt(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=yt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):b.apply(e,h)})}function fi(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=ii(function(n){return n===o},c,!0),a=ii(function(n){return nt(o,n)>-1},c,!0),e=[function(n,t,i){var r=!h&&(i||t!==ht)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];i<s;i++)if(u=t.relative[n[i].type])e=[ii(ri(e),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[f]){for(r=++i;r<s;r++)if(t.relative[n[r].type])break;return ui(i>1&&ri(e),i>1&&vt(n.slice(0,i-1).concat({value:n[i-2].type===" "?"*":""})).replace(lt,"$1"),u,i<r&&fi(n.slice(i,r)),r<s&&fi(n=n.slice(r)),r<s&&vt(n))}e.push(u)}return ri(e)}function yr(n,i){var u=i.length>0,f=n.length>0,e=function(e,s,h,c,l){var y,d,w,k=0,v="0",g=e&&[],p=[],nt=ht,tt=e||f&&t.find.TAG("*",l),it=a+=nt==null?1:Math.random()||.1,rt=tt.length;for(l&&(ht=s!==o&&s);v!==rt&&(y=tt[v])!=null;v++){if(f&&y){for(d=0;w=n[d++];)if(w(y,s,h)){c.push(y);break}l&&(a=it)}u&&((y=!w&&y)&&k--,e&&g.push(y))}if(k+=v,u&&v!==k){for(d=0;w=i[d++];)w(g,p,s,h);if(e){if(k>0)while(v--)g[v]||p[v]||(p[v]=gi.call(c));p=yt(p)}b.apply(c,p);l&&!e&&p.length>0&&k+i.length>1&&r.uniqueSort(c)}return l&&(a=it,ht=nt),g};return u?c(e):e}var it,u,t,st,ei,ft,pt,oi,ht,w,rt,k,o,s,l,e,d,ct,et,f="sizzle"+1*new Date,h=n.document,a=0,ki=0,si=gt(),hi=gt(),ci=gt(),wt=function(n,t){return n===t&&(rt=!0),0},li=-2147483648,di={}.hasOwnProperty,g=[],gi=g.pop,nr=g.push,b=g.push,ai=g.slice,nt=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},bt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",i="[\\x20\\t\\r\\n\\f]",ut="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",vi=ut.replace("w","w#"),yi="\\["+i+"*("+ut+")(?:"+i+"*([*^$|!~]?=)"+i+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+vi+"))|)"+i+"*\\]",kt=":("+ut+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+yi+")*)|.*)\\)|)",tr=new RegExp(i+"+","g"),lt=new RegExp("^"+i+"+|((?:^|[^\\\\])(?:\\\\.)*)"+i+"+$","g"),ir=new RegExp("^"+i+"*,"+i+"*"),rr=new RegExp("^"+i+"*([>+~]|"+i+")"+i+"*"),ur=new RegExp("="+i+"*([^\\]'\"]*?)"+i+"*\\]","g"),fr=new RegExp(kt),er=new RegExp("^"+vi+"$"),at={ID:new RegExp("^#("+ut+")"),CLASS:new RegExp("^\\.("+ut+")"),TAG:new RegExp("^("+ut.replace("w","w*")+")"),ATTR:new RegExp("^"+yi),PSEUDO:new RegExp("^"+kt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+i+"*(even|odd|(([+-]|)(\\d*)n|)"+i+"*(?:([+-]|)"+i+"*(\\d+)|))"+i+"*\\)|)","i"),bool:new RegExp("^(?:"+bt+")$","i"),needsContext:new RegExp("^"+i+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+i+"*((?:-\\d)?\\d*)"+i+"*\\)|)(?=[^-]|$)","i")},or=/^(?:input|select|textarea|button)$/i,sr=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,hr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,dt=/[+~]/,cr=/'|\\/g,y=new RegExp("\\\\([\\da-f]{1,6}"+i+"?|("+i+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},pi=function(){k()};try{b.apply(g=ai.call(h.childNodes),h.childNodes);g[h.childNodes.length].nodeType}catch(pr){b={apply:g.length?function(n,t){nr.apply(n,ai.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}u=r.support={};ei=r.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?t.nodeName!=="HTML":!1};k=r.setDocument=function(n){var a,c,r=n?n.ownerDocument||n:h;return r===o||r.nodeType!==9||!r.documentElement?o:(o=r,s=r.documentElement,c=r.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",pi,!1):c.attachEvent&&c.attachEvent("onunload",pi)),l=!ei(r),u.attributes=v(function(n){return n.className="i",!n.getAttribute("className")}),u.getElementsByTagName=v(function(n){return n.appendChild(r.createComment("")),!n.getElementsByTagName("*").length}),u.getElementsByClassName=ot.test(r.getElementsByClassName),u.getById=v(function(n){return s.appendChild(n).id=f,!r.getElementsByName||!r.getElementsByName(f).length}),u.getById?(t.find.ID=function(n,t){if(typeof t.getElementById!="undefined"&&l){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}}):(delete t.find.ID,t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i=typeof n.getAttributeNode!="undefined"&&n.getAttributeNode("id");return i&&i.value===t}}),t.find.TAG=u.getElementsByTagName?function(n,t){return typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName(n):u.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if(n==="*"){while(i=u[f++])i.nodeType===1&&r.push(i);return r}return u},t.find.CLASS=u.getElementsByClassName&&function(n,t){if(l)return t.getElementsByClassName(n)},d=[],e=[],(u.qsa=ot.test(r.querySelectorAll))&&(v(function(n){s.appendChild(n).innerHTML="<a id='"+f+"'><\/a><select id='"+f+"-\f]' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&e.push("[*^$]="+i+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||e.push("\\["+i+"*(?:value|"+bt+")");n.querySelectorAll("[id~="+f+"-]").length||e.push("~=");n.querySelectorAll(":checked").length||e.push(":checked");n.querySelectorAll("a#"+f+"+*").length||e.push(".#.+[+~]")}),v(function(n){var t=r.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&e.push("name"+i+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length||e.push(":enabled",":disabled");n.querySelectorAll("*,:x");e.push(",.*:")})),(u.matchesSelector=ot.test(ct=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&v(function(n){u.disconnectedMatch=ct.call(n,"div");ct.call(n,"[s!='']:x");d.push("!=",kt)}),e=e.length&&new RegExp(e.join("|")),d=d.length&&new RegExp(d.join("|")),a=ot.test(s.compareDocumentPosition),et=a||ot.test(s.contains)?function(n,t){var r=n.nodeType===9?n.documentElement:n,i=t&&t.parentNode;return n===i||!!(i&&i.nodeType===1&&(r.contains?r.contains(i):n.compareDocumentPosition&&n.compareDocumentPosition(i)&16))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},wt=a?function(n,t){if(n===t)return rt=!0,0;var i=!n.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,i&1||!u.sortDetached&&t.compareDocumentPosition(n)===i)?n===r||n.ownerDocument===h&&et(h,n)?-1:t===r||t.ownerDocument===h&&et(h,t)?1:w?nt(w,n)-nt(w,t):0:i&4?-1:1}:function(n,t){if(n===t)return rt=!0,0;var i,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(o&&s){if(o===s)return wi(n,t)}else return n===r?-1:t===r?1:o?-1:s?1:w?nt(w,n)-nt(w,t):0;for(i=n;i=i.parentNode;)f.unshift(i);for(i=t;i=i.parentNode;)e.unshift(i);while(f[u]===e[u])u++;return u?wi(f[u],e[u]):f[u]===h?-1:e[u]===h?1:0},r)};r.matches=function(n,t){return r(n,null,null,t)};r.matchesSelector=function(n,t){if((n.ownerDocument||n)!==o&&k(n),t=t.replace(ur,"='$1']"),u.matchesSelector&&l&&(!d||!d.test(t))&&(!e||!e.test(t)))try{var i=ct.call(n,t);if(i||u.disconnectedMatch||n.document&&n.document.nodeType!==11)return i}catch(f){}return r(t,o,null,[n]).length>0};r.contains=function(n,t){return(n.ownerDocument||n)!==o&&k(n),et(n,t)};r.attr=function(n,i){(n.ownerDocument||n)!==o&&k(n);var f=t.attrHandle[i.toLowerCase()],r=f&&di.call(t.attrHandle,i.toLowerCase())?f(n,i,!l):undefined;return r!==undefined?r:u.attributes||!l?n.getAttribute(i):(r=n.getAttributeNode(i))&&r.specified?r.value:null};r.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};r.uniqueSort=function(n){var r,f=[],t=0,i=0;if(rt=!u.detectDuplicates,w=!u.sortStable&&n.slice(0),n.sort(wt),rt){while(r=n[i++])r===n[i]&&(t=f.push(i));while(t--)n.splice(f[t],1)}return w=null,n};st=r.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(t===1||t===9||t===11){if(typeof n.textContent=="string")return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(t===3||t===4)return n.nodeValue}else while(r=n[u++])i+=st(r);return i};t=r.selectors={cacheLength:50,createPseudo:c,match:at,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),n[2]==="~="&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),n[1].slice(0,3)==="nth"?(n[3]||r.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*(n[3]==="even"||n[3]==="odd")),n[5]=+(n[7]+n[8]||n[3]==="odd")):n[3]&&r.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return at.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&fr.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return n==="*"?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=si[n+" "];return t||(t=new RegExp("(^|"+i+")"+n+"("+i+"|$)"))&&si(n,function(n){return t.test(typeof n.className=="string"&&n.className||typeof n.getAttribute!="undefined"&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(u){var f=r.attr(u,n);return f==null?t==="!=":t?(f+="",t==="="?f===i:t==="!="?f!==i:t==="^="?i&&f.indexOf(i)===0:t==="*="?i&&f.indexOf(i)>-1:t==="$="?i&&f.slice(-i.length)===i:t==="~="?(" "+f.replace(tr," ")+" ").indexOf(i)>-1:t==="|="?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s=n.slice(0,3)!=="nth",o=n.slice(-4)!=="last",e=t==="of-type";return r===1&&u===0?function(n){return!!n.parentNode}:function(t,i,h){var v,k,c,l,y,w,b=s!==o?"nextSibling":"previousSibling",p=t.parentNode,g=e&&t.nodeName.toLowerCase(),d=!h&&!e;if(p){if(s){while(b){for(c=t;c=c[b];)if(e?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;w=b=n==="only"&&!w&&"nextSibling"}return!0}if(w=[o?p.firstChild:p.lastChild],o&&d){for(k=p[f]||(p[f]={}),v=k[n]||[],y=v[0]===a&&v[1],l=v[0]===a&&v[2],c=y&&p.childNodes[y];c=++y&&c&&c[b]||(l=y=0)||w.pop();)if(c.nodeType===1&&++l&&c===t){k[n]=[a,y,l];break}}else if(d&&(v=(t[f]||(t[f]={}))[n])&&v[0]===a)l=v[1];else while(c=++y&&c&&c[b]||(l=y=0)||w.pop())if((e?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++l&&(d&&((c[f]||(c[f]={}))[n]=[a,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var e,u=t.pseudos[n]||t.setFilters[n.toLowerCase()]||r.error("unsupported pseudo: "+n);return u[f]?u(i):u.length>1?(e=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?c(function(n,t){for(var r,f=u(n,i),e=f.length;e--;)r=nt(n,f[e]),n[r]=!(t[r]=f[e])}):function(n){return u(n,0,e)}):u}},pseudos:{not:c(function(n){var t=[],r=[],i=pt(n.replace(lt,"$1"));return i[f]?c(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:c(function(n){return function(t){return r(n,t).length>0}}),contains:c(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:c(function(n){return er.test(n||"")||r.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=l?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||i.indexOf(n+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===s},focus:function(n){return n===o.activeElement&&(!o.hasFocus||o.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&!!n.checked||t==="option"&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return sr.test(n.nodeName)},input:function(n){return or.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&n.type==="button"||t==="button"},text:function(n){var t;return n.nodeName.toLowerCase()==="input"&&n.type==="text"&&((t=n.getAttribute("type"))==null||t.toLowerCase()==="text")},first:tt(function(){return[0]}),last:tt(function(n,t){return[t-1]}),eq:tt(function(n,t,i){return[i<0?i+t:i]}),even:tt(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:tt(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:tt(function(n,t,i){for(var r=i<0?i+t:i;--r>=0;)n.push(r);return n}),gt:tt(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(it in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[it]=lr(it);for(it in{submit:!0,reset:!0})t.pseudos[it]=ar(it);return bi.prototype=t.filters=t.pseudos,t.setFilters=new bi,ft=r.tokenize=function(n,i){var e,f,s,o,u,h,c,l=hi[n+" "];if(l)return i?0:l.slice(0);for(u=n,h=[],c=t.preFilter;u;){(!e||(f=ir.exec(u)))&&(f&&(u=u.slice(f[0].length)||u),h.push(s=[]));e=!1;(f=rr.exec(u))&&(e=f.shift(),s.push({value:e,type:f[0].replace(lt," ")}),u=u.slice(e.length));for(o in t.filter)(f=at[o].exec(u))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),u=u.slice(e.length));if(!e)break}return i?u.length:u?r.error(n):hi(n,h).slice(0)},pt=r.compile=function(n,t){var r,u=[],e=[],i=ci[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=fi(t[r]),i[f]?u.push(i):e.push(i);i=ci(n,yr(e,u));i.selector=n}return i},oi=r.select=function(n,i,r,f){var s,e,o,a,v,c=typeof n=="function"&&n,h=!f&&ft(n=c.selector||n);if(r=r||[],h.length===1){if(e=h[0]=h[0].slice(0),e.length>2&&(o=e[0]).type==="ID"&&u.getById&&i.nodeType===9&&l&&t.relative[e[1].type]){if(i=(t.find.ID(o.matches[0].replace(y,p),i)||[])[0],i)c&&(i=i.parentNode);else return r;n=n.slice(e.shift().value.length)}for(s=at.needsContext.test(n)?0:e.length;s--;){if(o=e[s],t.relative[a=o.type])break;if((v=t.find[a])&&(f=v(o.matches[0].replace(y,p),dt.test(e[0].type)&&ti(i.parentNode)||i))){if(e.splice(s,1),n=f.length&&vt(e),!n)return b.apply(r,f),r;break}}}return(c||pt(n,h))(f,i,!l,r,dt.test(n)&&ti(i.parentNode)||i),r},u.sortStable=f.split("").sort(wt).join("")===f,u.detectDuplicates=!!rt,k(),u.sortDetached=v(function(n){return n.compareDocumentPosition(o.createElement("div"))&1}),v(function(n){return n.innerHTML="<a href='#'><\/a>",n.firstChild.getAttribute("href")==="#"})||ni("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,t.toLowerCase()==="type"?1:2)}),u.attributes&&v(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),n.firstChild.getAttribute("value")===""})||ni("value",function(n,t,i){if(!i&&n.nodeName.toLowerCase()==="input")return n.defaultValue}),v(function(n){return n.getAttribute("disabled")==null})||ni(bt,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),r}(n);i.find=y;i.expr=y.selectors;i.expr[":"]=i.expr.pseudos;i.unique=y.uniqueSort;i.text=y.getText;i.isXMLDoc=y.isXML;i.contains=y.contains;var di=i.expr.match.needsContext,gi=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ef=/^.[^:#\[\.,]*$/;i.filter=function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),t.length===1&&u.nodeType===1?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return n.nodeType===1}))};i.fn.extend({find:function(n){var t,u=this.length,r=[],f=this;if(typeof n!="string")return this.pushStack(i(n).filter(function(){for(t=0;t<u;t++)if(i.contains(f[t],this))return!0}));for(t=0;t<u;t++)i.find(n,f[t],r);return r=this.pushStack(u>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},filter:function(n){return this.pushStack(ui(this,n||[],!1))},not:function(n){return this.pushStack(ui(this,n||[],!0))},is:function(n){return!!ui(this,typeof n=="string"&&di.test(n)?i(n):n||[],!1).length}});nr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;tr=i.fn.init=function(n,t){var r,f;if(!n)return this;if(typeof n=="string"){if(r=n[0]==="<"&&n[n.length-1]===">"&&n.length>=3?[null,n,null]:nr.exec(n),r&&(r[1]||!t)){if(r[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:u,!0)),gi.test(r[1])&&i.isPlainObject(t))for(r in t)i.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return f=u.getElementById(r[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=u,this.selector=n,this}return!t||t.jquery?(t||ot).find(n):this.constructor(t).find(n)}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?typeof ot.ready!="undefined"?ot.ready(n):n(i):(n.selector!==undefined&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))};tr.prototype=i.fn;ot=i(u);ir=/^(?:parents|prev(?:Until|All))/;rr={children:!0,contents:!0,next:!0,prev:!0};i.extend({dir:function(n,t,r){for(var u=[],f=r!==undefined;(n=n[t])&&n.nodeType!==9;)if(n.nodeType===1){if(f&&i(n).is(r))break;u.push(n)}return u},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)n.nodeType===1&&n!==t&&i.push(n);return i}});i.fn.extend({has:function(n){var t=i(n,this),r=t.length;return this.filter(function(){for(var n=0;n<r;n++)if(i.contains(this,t[n]))return!0})},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=di.test(n)||typeof n!="string"?i(n,t||this.context):0;f<o;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:r.nodeType===1&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.unique(u):u)},index:function(n){return n?typeof n=="string"?ft.call(i(n),this[0]):ft.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.unique(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&t.nodeType!==11?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return ur(n,"nextSibling")},prev:function(n){return ur(n,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return n.contentDocument||i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return n.slice(-5)!=="Until"&&(u=r),u&&typeof u=="string"&&(f=i.filter(u,f)),this.length>1&&(rr[n]||i.unique(f),ir.test(n)&&f.reverse()),this.pushStack(f)}});c=/\S+/g;fi={};i.Callbacks=function(n){n=typeof n=="string"?fi[n]||of(n):i.extend({},n);var u,h,o,c,f,e,t=[],r=!n.once&&[],l=function(i){for(u=n.memory&&i,h=!0,e=c||0,c=0,f=t.length,o=!0;t&&e<f;e++)if(t[e].apply(i[0],i[1])===!1&&n.stopOnFalse){u=!1;break}o=!1;t&&(r?r.length&&l(r.shift()):u?t=[]:s.disable())},s={add:function(){if(t){var r=t.length;(function e(r){i.each(r,function(r,u){var f=i.type(u);f==="function"?n.unique&&s.has(u)||t.push(u):u&&u.length&&f!=="string"&&e(u)})})(arguments);o?f=t.length:u&&(c=r,l(u))}return this},remove:function(){return t&&i.each(arguments,function(n,r){for(var u;(u=i.inArray(r,t,u))>-1;)t.splice(u,1),o&&(u<=f&&f--,u<=e&&e--)}),this},has:function(n){return n?i.inArray(n,t)>-1:!!(t&&t.length)},empty:function(){return t=[],f=0,this},disable:function(){return t=r=u=undefined,this},disabled:function(){return!t},lock:function(){return r=undefined,u||s.disable(),this},locked:function(){return!r},fireWith:function(n,i){return t&&(!h||r)&&(i=i||[],i=[n,i.slice?i.slice():i],o?r.push(i):l(i)),this},fire:function(){return s.fireWith(this,arguments),this},fired:function(){return!!h}};return s};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().done(f.resolve).fail(f.reject).progress(f.notify):f[e[0]+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return n!=null?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[n^1][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=a.call(arguments),r=u.length,e=r!==1||n&&i.isFunction(n.promise)?r:0,f=e===1?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?a.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=new Array(r),c=new Array(r),s=new Array(r);t<r;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().done(h(t,s,u)).fail(f.reject).progress(h(t,c,o)):--e;return e||f.resolveWith(s,u),f.promise()}});i.fn.ready=function(n){return i.ready.promise().done(n),this};i.extend({isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){(n===!0?--i.readyWait:i.isReady)||(i.isReady=!0,n!==!0&&--i.readyWait>0)||(st.resolveWith(u,[i]),i.fn.triggerHandler&&(i(u).triggerHandler("ready"),i(u).off("ready")))}});i.ready.promise=function(t){return st||(st=i.Deferred(),u.readyState==="complete"?setTimeout(i.ready):(u.addEventListener("DOMContentLoaded",ht,!1),n.addEventListener("load",ht,!1))),st.promise(t)};i.ready.promise();l=i.access=function(n,t,r,u,f,e,o){var s=0,c=n.length,h=r==null;if(i.type(r)==="object"){f=!0;for(s in r)i.access(n,t,s,r[s],!0,e,o)}else if(u!==undefined&&(f=!0,i.isFunction(u)||(o=!0),h&&(o?(t.call(n,u),t=null):(h=t,t=function(n,t,r){return h.call(i(n),r)})),t))for(;s<c;s++)t(n[s],r,o?u:u.call(n[s],s,t(n[s],r)));return f?n:h?t.call(n):c?t(n[0],r):e};i.acceptData=function(n){return n.nodeType===1||n.nodeType===9||!+n.nodeType};v.uid=1;v.accepts=i.acceptData;v.prototype={key:function(n){if(!v.accepts(n))return 0;var r={},t=n[this.expando];if(!t){t=v.uid++;try{r[this.expando]={value:t};Object.defineProperties(n,r)}catch(u){r[this.expando]=t;i.extend(n,r)}}return this.cache[t]||(this.cache[t]={}),t},set:function(n,t,r){var f,e=this.key(n),u=this.cache[e];if(typeof t=="string")u[t]=r;else if(i.isEmptyObject(u))i.extend(this.cache[e],t);else for(f in t)u[f]=t[f];return u},get:function(n,t){var i=this.cache[this.key(n)];return t===undefined?i:i[t]},access:function(n,t,r){var u;return t===undefined||t&&typeof t=="string"&&r===undefined?(u=this.get(n,t),u!==undefined?u:this.get(n,i.camelCase(t))):(this.set(n,t,r),r!==undefined?r:t)},remove:function(n,t){var u,r,f,o=this.key(n),e=this.cache[o];if(t===undefined)this.cache[o]={};else for(i.isArray(t)?r=t.concat(t.map(i.camelCase)):(f=i.camelCase(t),t in e?r=[t,f]:(r=f,r=r in e?[r]:r.match(c)||[])),u=r.length;u--;)delete e[r[u]]},hasData:function(n){return!i.isEmptyObject(this.cache[n[this.expando]]||{})},discard:function(n){n[this.expando]&&delete this.cache[n[this.expando]]}};var r=new v,e=new v,sf=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,hf=/([A-Z])/g;i.extend({hasData:function(n){return e.hasData(n)||r.hasData(n)},data:function(n,t,i){return e.access(n,t,i)},removeData:function(n,t){e.remove(n,t)},_data:function(n,t,i){return r.access(n,t,i)},_removeData:function(n,t){r.remove(n,t)}});i.fn.extend({data:function(n,t){var o,f,s,u=this[0],h=u&&u.attributes;if(n===undefined){if(this.length&&(s=e.get(u),u.nodeType===1&&!r.get(u,"hasDataAttrs"))){for(o=h.length;o--;)h[o]&&(f=h[o].name,f.indexOf("data-")===0&&(f=i.camelCase(f.slice(5)),fr(u,f,s[f])));r.set(u,"hasDataAttrs",!0)}return s}return typeof n=="object"?this.each(function(){e.set(this,n)}):l(this,function(t){var r,f=i.camelCase(n);if(u&&t===undefined)return(r=e.get(u,n),r!==undefined)?r:(r=e.get(u,f),r!==undefined)?r:(r=fr(u,f,undefined),r!==undefined)?r:void 0;this.each(function(){var i=e.get(this,f);e.set(this,f,t);n.indexOf("-")!==-1&&i!==undefined&&e.set(this,n,t)})},null,t,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){e.remove(this,n)})}});i.extend({queue:function(n,t,u){var f;if(n)return t=(t||"fx")+"queue",f=r.get(n,t),u&&(!f||i.isArray(u)?f=r.access(n,t,i.makeArray(u)):f.push(u)),f||[]},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};u==="inprogress"&&(u=r.shift(),e--);u&&(t==="fx"&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var u=t+"queueHooks";return r.get(n,u)||r.access(n,u,{empty:i.Callbacks("once memory").add(function(){r.remove(n,[t+"queue",u])})})}});i.fn.extend({queue:function(n,t){var r=2;return(typeof n!="string"&&(t=n,n="fx",r--),arguments.length<r)?i.queue(this[0],n):t===undefined?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);n==="fx"&&r[0]!=="inprogress"&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for(typeof n!="string"&&(t=n,n=undefined),n=n||"fx";s--;)u=r.get(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(t)}});var ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,p=["Top","Right","Bottom","Left"],tt=function(n,t){return n=t||n,i.css(n,"display")==="none"||!i.contains(n.ownerDocument,n)},er=/^(?:checkbox|radio)$/i;(function(){var i=u.createDocumentFragment(),n=i.appendChild(u.createElement("div")),t=u.createElement("input");t.setAttribute("type","radio");t.setAttribute("checked","checked");t.setAttribute("name","t");n.appendChild(t);f.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked;n.innerHTML="<textarea>x<\/textarea>";f.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue})();b=typeof undefined;f.focusinBubbles="onfocusin"in n;var cf=/^key/,lf=/^(?:mouse|pointer|contextmenu)|click/,or=/^(?:focusinfocus|focusoutblur)$/,sr=/^([^.]*)(?:\.(.+)|)$/;i.event={global:{},add:function(n,t,u,f,e){var v,y,w,p,k,h,s,l,o,d,g,a=r.get(n);if(a)for(u.handler&&(v=u,u=v.handler,e=v.selector),u.guid||(u.guid=i.guid++),(p=a.events)||(p=a.events={}),(y=a.handle)||(y=a.handle=function(t){return typeof i!==b&&i.event.triggered!==t.type?i.event.dispatch.apply(n,arguments):undefined}),t=(t||"").match(c)||[""],k=t.length;k--;)(w=sr.exec(t[k])||[],o=g=w[1],d=(w[2]||"").split(".").sort(),o)&&(s=i.event.special[o]||{},o=(e?s.delegateType:s.bindType)||o,s=i.event.special[o]||{},h=i.extend({type:o,origType:g,data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:d.join(".")},v),(l=p[o])||(l=p[o]=[],l.delegateCount=0,s.setup&&s.setup.call(n,f,d,y)!==!1||n.addEventListener&&n.addEventListener(o,y,!1)),s.add&&(s.add.call(n,h),h.handler.guid||(h.handler.guid=u.guid)),e?l.splice(l.delegateCount++,0,h):l.push(h),i.event.global[o]=!0)},remove:function(n,t,u,f,e){var p,k,h,v,w,s,l,a,o,b,d,y=r.hasData(n)&&r.get(n);if(y&&(v=y.events)){for(t=(t||"").match(c)||[""],w=t.length;w--;){if(h=sr.exec(t[w])||[],o=d=h[1],b=(h[2]||"").split(".").sort(),!o){for(o in v)i.event.remove(n,o+t[w],u,f,!0);continue}for(l=i.event.special[o]||{},o=(f?l.delegateType:l.bindType)||o,a=v[o]||[],h=h[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=p=a.length;p--;)s=a[p],(e||d===s.origType)&&(!u||u.guid===s.guid)&&(!h||h.test(s.namespace))&&(!f||f===s.selector||f==="**"&&s.selector)&&(a.splice(p,1),s.selector&&a.delegateCount--,l.remove&&l.remove.call(n,s));k&&!a.length&&(l.teardown&&l.teardown.call(n,b,y.handle)!==!1||i.removeEvent(n,o,y.handle),delete v[o])}i.isEmptyObject(v)&&(delete y.handle,r.remove(n,"events"))}},trigger:function(t,f,e,o){var w,s,c,b,a,v,l,p=[e||u],h=ii.call(t,"type")?t.type:t,y=ii.call(t,"namespace")?t.namespace.split("."):[];if((s=c=e=e||u,e.nodeType!==3&&e.nodeType!==8)&&!or.test(h+i.event.triggered)&&(h.indexOf(".")>=0&&(y=h.split("."),h=y.shift(),y.sort()),a=h.indexOf(":")<0&&"on"+h,t=t[i.expando]?t:new i.Event(h,typeof t=="object"&&t),t.isTrigger=o?2:3,t.namespace=y.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=e),f=f==null?[t]:i.makeArray(f,[t]),l=i.event.special[h]||{},o||!l.trigger||l.trigger.apply(e,f)!==!1)){if(!o&&!l.noBubble&&!i.isWindow(e)){for(b=l.delegateType||h,or.test(b+h)||(s=s.parentNode);s;s=s.parentNode)p.push(s),c=s;c===(e.ownerDocument||u)&&p.push(c.defaultView||c.parentWindow||n)}for(w=0;(s=p[w++])&&!t.isPropagationStopped();)t.type=w>1?b:l.bindType||h,v=(r.get(s,"events")||{})[t.type]&&r.get(s,"handle"),v&&v.apply(s,f),v=a&&s[a],v&&v.apply&&i.acceptData(s)&&(t.result=v.apply(s,f),t.result===!1&&t.preventDefault());return t.type=h,o||t.isDefaultPrevented()||(!l._default||l._default.apply(p.pop(),f)===!1)&&i.acceptData(e)&&a&&i.isFunction(e[h])&&!i.isWindow(e)&&(c=e[a],c&&(e[a]=null),i.event.triggered=h,e[h](),i.event.triggered=undefined,c&&(e[a]=c)),t.result}},dispatch:function(n){n=i.event.fix(n);var o,s,e,u,t,h=[],c=a.call(arguments),l=(r.get(this,"events")||{})[n.type]||[],f=i.event.special[n.type]||{};if(c[0]=n,n.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,n)!==!1){for(h=i.event.handlers.call(this,n,l),o=0;(u=h[o++])&&!n.isPropagationStopped();)for(n.currentTarget=u.elem,s=0;(t=u.handlers[s++])&&!n.isImmediatePropagationStopped();)(!n.namespace_re||n.namespace_re.test(t.namespace))&&(n.handleObj=t,n.data=t.data,e=((i.event.special[t.origType]||{}).handle||t.handler).apply(u.elem,c),e!==undefined&&(n.result=e)===!1&&(n.preventDefault(),n.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,n),n.result}},handlers:function(n,t){var e,u,f,o,h=[],s=t.delegateCount,r=n.target;if(s&&r.nodeType&&(!n.button||n.type!=="click"))for(;r!==this;r=r.parentNode||this)if(r.disabled!==!0||n.type!=="click"){for(u=[],e=0;e<s;e++)o=t[e],f=o.selector+" ",u[f]===undefined&&(u[f]=o.needsContext?i(f,this).index(r)>=0:i.find(f,this,null,[r]).length),u[f]&&u.push(o);u.length&&h.push({elem:r,handlers:u})}return s<t.length&&h.push({elem:this,handlers:t.slice(s)}),h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return n.which==null&&(n.which=t.charCode!=null?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,t){var e,i,r,f=t.button;return n.pageX==null&&t.clientX!=null&&(e=n.target.ownerDocument||u,i=e.documentElement,r=e.body,n.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),n.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),n.which||f===undefined||(n.which=f&1?1:f&2?3:f&4?2:0),n}},fix:function(n){if(n[i.expando])return n;var f,e,o,r=n.type,s=n,t=this.fixHooks[r];for(t||(this.fixHooks[r]=t=lf.test(r)?this.mouseHooks:cf.test(r)?this.keyHooks:{}),o=t.props?this.props.concat(t.props):this.props,n=new i.Event(s),f=o.length;f--;)e=o[f],n[e]=s[e];return n.target||(n.target=u),n.target.nodeType===3&&(n.target=n.target.parentNode),t.filter?t.filter(n,s):n},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==hr()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===hr()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&i.nodeName(this,"input"))return this.click(),!1},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){n.result!==undefined&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f);f.isDefaultPrevented()&&r.preventDefault()}};i.removeEvent=function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)};i.Event=function(n,t){if(!(this instanceof i.Event))return new i.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.defaultPrevented===undefined&&n.returnValue===!1?lt:k):this.type=n;t&&i.extend(this,t);this.timeStamp=n&&n.timeStamp||i.now();this[i.expando]=!0};i.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=lt;n&&n.preventDefault&&n.preventDefault()},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=lt;n&&n.stopPropagation&&n.stopPropagation()},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=lt;n&&n.stopImmediatePropagation&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return r&&(r===f||i.contains(f,r))||(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});f.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){var i=this.ownerDocument||this,f=r.access(i,t);f||i.addEventListener(n,u,!0);r.access(i,t,(f||0)+1)},teardown:function(){var i=this.ownerDocument||this,f=r.access(i,t)-1;f?r.access(i,t,f):(i.removeEventListener(n,u,!0),r.remove(i,t))}}});i.fn.extend({on:function(n,t,r,u,f){var e,o;if(typeof n=="object"){typeof t!="string"&&(r=r||t,t=undefined);for(o in n)this.on(o,t,r,n[o],f);return this}if(r==null&&u==null?(u=t,r=t=undefined):u==null&&(typeof t=="string"?(u=r,r=undefined):(u=r,r=t,t=undefined)),u===!1)u=k;else if(!u)return this;return f===1&&(e=u,u=function(n){return i().off(n),e.apply(this,arguments)},u.guid=e.guid||(e.guid=i.guid++)),this.each(function(){i.event.add(this,n,u,r,t)})},one:function(n,t,i,r){return this.on(n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if(typeof n=="object"){for(f in n)this.off(f,t,n[f]);return this}return(t===!1||typeof t=="function")&&(r=t,t=undefined),r===!1&&(r=k),this.each(function(){i.event.remove(this,n,r,t)})},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});var cr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,lr=/<([\w:]+)/,af=/<|&#?\w+;/,vf=/<(?:script|style|link)/i,yf=/checked\s*(?:[^=]|=\s*.checked.)/i,ar=/^$|\/(?:java|ecma)script/i,pf=/^true\/(.*)/,wf=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,h={option:[1,"<select multiple='multiple'>","<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};h.optgroup=h.option;h.tbody=h.tfoot=h.colgroup=h.caption=h.thead;h.th=h.td;i.extend({clone:function(n,t,r){var u,c,s,e,h=n.cloneNode(!0),l=i.contains(n.ownerDocument,n);if(!f.noCloneChecked&&(n.nodeType===1||n.nodeType===11)&&!i.isXMLDoc(n))for(e=o(h),s=o(n),u=0,c=s.length;u<c;u++)df(s[u],e[u]);if(t)if(r)for(s=s||o(n),e=e||o(h),u=0,c=s.length;u<c;u++)yr(s[u],e[u]);else yr(n,h);return e=o(h,"script"),e.length>0&&ei(e,!l&&o(n,"script")),h},buildFragment:function(n,t,r,u){for(var f,e,y,l,p,a,s=t.createDocumentFragment(),v=[],c=0,w=n.length;c<w;c++)if(f=n[c],f||f===0)if(i.type(f)==="object")i.merge(v,f.nodeType?[f]:f);else if(af.test(f)){for(e=e||s.appendChild(t.createElement("div")),y=(lr.exec(f)||["",""])[1].toLowerCase(),l=h[y]||h._default,e.innerHTML=l[1]+f.replace(cr,"<$1><\/$2>")+l[2],a=l[0];a--;)e=e.lastChild;i.merge(v,e.childNodes);e=s.firstChild;e.textContent=""}else v.push(t.createTextNode(f));for(s.textContent="",c=0;f=v[c++];)if((!u||i.inArray(f,u)===-1)&&(p=i.contains(f.ownerDocument,f),e=o(s.appendChild(f),"script"),p&&ei(e),r))for(a=0;f=e[a++];)ar.test(f.type||"")&&r.push(f);return s},cleanData:function(n){for(var f,t,o,u,h=i.event.special,s=0;(t=n[s])!==undefined;s++){if(i.acceptData(t)&&(u=t[r.expando],u&&(f=r.cache[u]))){if(f.events)for(o in f.events)h[o]?i.event.remove(t,o):i.removeEvent(t,o,f.handle);r.cache[u]&&delete r.cache[u]}delete e.cache[t[e.expando]]}}});i.fn.extend({text:function(n){return l(this,function(n){return n===undefined?i.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=n)})},null,n,arguments.length)},append:function(){return this.domManip(arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=vr(this,n);t.appendChild(n)}})},prepend:function(){return this.domManip(arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=vr(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},remove:function(n,t){for(var r,f=n?i.filter(n,this):this,u=0;(r=f[u])!=null;u++)t||r.nodeType!==1||i.cleanData(o(r)),r.parentNode&&(t&&i.contains(r.ownerDocument,r)&&ei(o(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var n,t=0;(n=this[t])!=null;t++)n.nodeType===1&&(i.cleanData(o(n,!1)),n.textContent="");return this},clone:function(n,t){return n=n==null?!1:n,t=t==null?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return l(this,function(n){var t=this[0]||{},r=0,u=this.length;if(n===undefined&&t.nodeType===1)return t.innerHTML;if(typeof n=="string"&&!vf.test(n)&&!h[(lr.exec(n)||["",""])[1].toLowerCase()]){n=n.replace(cr,"<$1><\/$2>");try{for(;r<u;r++)t=this[r]||{},t.nodeType===1&&(i.cleanData(o(t,!1)),t.innerHTML=n);t=0}catch(f){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=arguments[0];return this.domManip(arguments,function(t){n=this.parentNode;i.cleanData(o(this));n&&n.replaceChild(t,this)}),n&&(n.length||n.nodeType)?this:this.remove()},detach:function(n){return this.remove(n,!0)},domManip:function(n,t){n=bi.apply([],n);var h,v,s,c,u,y,e=0,l=this.length,w=this,b=l-1,a=n[0],p=i.isFunction(a);if(p||l>1&&typeof a=="string"&&!f.checkClone&&yf.test(a))return this.each(function(i){var r=w.eq(i);p&&(n[0]=a.call(this,i,r.html()));r.domManip(n,t)});if(l&&(h=i.buildFragment(n,this[0].ownerDocument,!1,this),v=h.firstChild,h.childNodes.length===1&&(h=v),v)){for(s=i.map(o(h,"script"),bf),c=s.length;e<l;e++)u=h,e!==b&&(u=i.clone(u,!0,!0),c&&i.merge(s,o(u,"script"))),t.call(this[e],u,e);if(c)for(y=s[s.length-1].ownerDocument,i.map(s,kf),e=0;e<c;e++)u=s[e],ar.test(u.type||"")&&!r.access(u,"globalEval")&&i.contains(y,u)&&(u.src?i._evalUrl&&i._evalUrl(u.src):i.globalEval(u.textContent.replace(wf,"")))}return this}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,f=[],e=i(n),o=e.length-1,r=0;r<=o;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),ti.apply(f,u.get());return this.pushStack(f)}});oi={};var wr=/^margin/,hi=new RegExp("^("+ct+")(?!px)[a-z%]+$","i"),vt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):n.getComputedStyle(t,null)};(function(){function h(){t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";t.innerHTML="";e.appendChild(r);var i=n.getComputedStyle(t,null);s=i.top!=="1%";o=i.width==="4px";e.removeChild(r)}var s,o,e=u.documentElement,r=u.createElement("div"),t=u.createElement("div");t.style&&(t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle=t.style.backgroundClip==="content-box",r.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",r.appendChild(t),n.getComputedStyle&&i.extend(f,{pixelPosition:function(){return h(),s},boxSizingReliable:function(){return o==null&&h(),o},reliableMarginRight:function(){var f,i=t.appendChild(u.createElement("div"));return i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",e.appendChild(r),f=!parseFloat(n.getComputedStyle(i,null).marginRight),e.removeChild(r),t.removeChild(i),f}}))})();i.swap=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f};var gf=/^(none|table(?!-c[ea]).+)/,ne=new RegExp("^("+ct+")(.*)$","i"),te=new RegExp("^([+-])=("+ct+")","i"),ie={position:"absolute",visibility:"hidden",display:"block"},kr={letterSpacing:"0",fontWeight:"400"},dr=["Webkit","O","Moz","ms"];i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=it(n,"opacity");return i===""?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(n,t,r,u){if(n&&n.nodeType!==3&&n.nodeType!==8&&n.style){var o,h,e,s=i.camelCase(t),c=n.style;if(t=i.cssProps[s]||(i.cssProps[s]=gr(c,s)),e=i.cssHooks[t]||i.cssHooks[s],r!==undefined){if(h=typeof r,h==="string"&&(o=te.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(i.css(n,t)),h="number"),r==null||r!==r)return;h!=="number"||i.cssNumber[s]||(r+="px");f.clearCloneStyle||r!==""||t.indexOf("background")!==0||(c[t]="inherit");e&&"set"in e&&(r=e.set(n,r,u))===undefined||(c[t]=r)}else return e&&"get"in e&&(o=e.get(n,!1,u))!==undefined?o:c[t]}},css:function(n,t,r,u){var f,s,e,o=i.camelCase(t);return(t=i.cssProps[o]||(i.cssProps[o]=gr(n.style,o)),e=i.cssHooks[t]||i.cssHooks[o],e&&"get"in e&&(f=e.get(n,!0,r)),f===undefined&&(f=it(n,t,u)),f==="normal"&&t in kr&&(f=kr[t]),r===""||r)?(s=parseFloat(f),r===!0||i.isNumeric(s)?s||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return gf.test(i.css(n,"display"))&&n.offsetWidth===0?i.swap(n,ie,function(){return iu(n,t,u)}):iu(n,t,u)},set:function(n,r,u){var f=u&&vt(n);return nu(n,r,u?tu(n,t,u,i.css(n,"boxSizing",!1,f)==="border-box",f):0)}}});i.cssHooks.marginRight=br(f.reliableMarginRight,function(n,t){if(t)return i.swap(n,{display:"inline-block"},it,[n,"marginRight"])});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u=typeof i=="string"?i.split(" "):[i];r<4;r++)f[n+p[r]+t]=u[r]||u[r-2]||u[0];return f}};wr.test(n)||(i.cssHooks[n+t].set=nu)});i.fn.extend({css:function(n,t){return l(this,function(n,t,r){var f,e,o={},u=0;if(i.isArray(t)){for(f=vt(n),e=t.length;u<e;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return r!==undefined?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)},show:function(){return ru(this,!0)},hide:function(){return ru(this)},toggle:function(n){return typeof n=="boolean"?n?this.show():this.hide():this.each(function(){tt(this)?i(this).show():i(this).hide()})}});i.Tween=s;s.prototype={constructor:s,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||"swing";this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=s.propHooks[this.prop];return n&&n.get?n.get(this):s.propHooks._default.get(this)},run:function(n){var t,r=s.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):s.propHooks._default.set(this),this}};s.prototype.init.prototype=s.prototype;s.propHooks={_default:{get:function(n){var t;return n.elem[n.prop]!=null&&(!n.elem.style||n.elem.style[n.prop]==null)?n.elem[n.prop]:(t=i.css(n.elem,n.prop,""),!t||t==="auto"?0:t)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.style&&(n.elem.style[i.cssProps[n.prop]]!=null||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}};s.propHooks.scrollTop=s.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}};i.fx=s.prototype.init;i.fx.step={};var d,yt,re=/^(?:toggle|show|hide)$/,uu=new RegExp("^(?:([+-])=|)("+ct+")([a-z%]*)$","i"),ue=/queueHooks$/,pt=[fe],rt={"*":[function(n,t){var f=this.createTween(n,t),s=f.cur(),u=uu.exec(t),e=u&&u[3]||(i.cssNumber[n]?"":"px"),r=(i.cssNumber[n]||e!=="px"&&+s)&&uu.exec(i.css(f.elem,n)),o=1,h=20;if(r&&r[3]!==e){e=e||r[3];u=u||[];r=+s||1;do o=o||".5",r=r/o,i.style(f.elem,n,r+e);while(o!==(o=f.cur()/s)&&o!==1&&--h)}return u&&(r=f.start=+r||+s||0,f.unit=e,f.end=u[1]?r+(u[1]+1)*u[2]:+u[2]),f}]};i.Animation=i.extend(ou,{tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.split(" ");for(var r,u=0,f=n.length;u<f;u++)r=n[u],rt[r]=rt[r]||[],rt[r].unshift(t)},prefilter:function(n,t){t?pt.unshift(n):pt.push(n)}});i.speed=function(n,t,r){var u=n&&typeof n=="object"?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:typeof u.duration=="number"?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(u.queue==null||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(tt).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,u,f){var s=i.isEmptyObject(n),o=i.speed(t,u,f),e=function(){var t=ou(this,i.extend({},n),o);(s||r.get(this,"finish"))&&t.stop(!0)};return e.finish=e,s||o.queue===!1?this.each(e):this.queue(o.queue,e)},stop:function(n,t,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return typeof n!="string"&&(u=t,t=n,n=undefined),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var s=!0,t=n!=null&&n+"queueHooks",o=i.timers,e=r.get(this);if(t)e[t]&&e[t].stop&&f(e[t]);else for(t in e)e[t]&&e[t].stop&&ue.test(t)&&f(e[t]);for(t=o.length;t--;)o[t].elem===this&&(n==null||o[t].queue===n)&&(o[t].anim.stop(u),s=!1,o.splice(t,1));(s||!u)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,e=r.get(this),u=e[n+"queue"],o=e[n+"queueHooks"],f=i.timers,s=u?u.length:0;for(e.finish=!0,i.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),t=f.length;t--;)f[t].elem===this&&f[t].queue===n&&(f[t].anim.stop(!0),f.splice(t,1));for(t=0;t<s;t++)u[t]&&u[t].finish&&u[t].finish.call(this);delete e.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return n==null||typeof n=="boolean"?r.apply(this,arguments):this.animate(wt(t,!0),n,i,u)}});i.each({slideDown:wt("show"),slideUp:wt("hide"),slideToggle:wt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=0,t=i.timers;for(d=i.now();n<t.length;n++)r=t[n],r()||t[n]!==r||t.splice(n--,1);t.length||i.fx.stop();d=undefined};i.fx.timer=function(n){i.timers.push(n);n()?i.fx.start():i.timers.pop()};i.fx.interval=13;i.fx.start=function(){yt||(yt=setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){clearInterval(yt);yt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},function(){var n=u.createElement("input"),t=u.createElement("select"),i=t.appendChild(u.createElement("option"));n.type="checkbox";f.checkOn=n.value!=="";f.optSelected=i.selected;t.disabled=!0;f.optDisabled=!i.disabled;n=u.createElement("input");n.value="t";n.type="radio";f.radioValue=n.value==="t"}();g=i.expr.attrHandle;i.fn.extend({attr:function(n,t){return l(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(n&&e!==3&&e!==8&&e!==2){if(typeof n.getAttribute===b)return i.prop(n,t,r);if(e===1&&i.isXMLDoc(n)||(t=t.toLowerCase(),u=i.attrHooks[t]||(i.expr.match.bool.test(t)?su:oe)),r!==undefined)if(r===null)i.removeAttr(n,t);else return u&&"set"in u&&(f=u.set(n,r,t))!==undefined?f:(n.setAttribute(t,r+""),r);else return u&&"get"in u&&(f=u.get(n,t))!==null?f:(f=i.find.attr(n,t),f==null?undefined:f)}},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(c);if(f&&n.nodeType===1)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)&&(n[u]=!1),n.removeAttribute(r)},attrHooks:{type:{set:function(n,t){if(!f.radioValue&&t==="radio"&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}}}});su={set:function(n,t,r){return t===!1?i.removeAttr(n,r):n.setAttribute(r,r),r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=g[t]||i.find.attr;g[t]=function(n,t,i){var u,f;return i||(f=g[t],g[t]=u,u=r(n,t,i)!=null?t.toLowerCase():null,g[t]=f),u}});hu=/^(?:input|select|textarea|button)$/i;i.fn.extend({prop:function(n,t){return l(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return this.each(function(){delete this[i.propFix[n]||n]})}});i.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(n,t,r){var f,u,o,e=n.nodeType;if(n&&e!==3&&e!==8&&e!==2)return o=e!==1||!i.isXMLDoc(n),o&&(t=i.propFix[t]||t,u=i.propHooks[t]),r!==undefined?u&&"set"in u&&(f=u.set(n,r,t))!==undefined?f:n[t]=r:u&&"get"in u&&(f=u.get(n,t))!==null?f:n[t]},propHooks:{tabIndex:{get:function(n){return n.hasAttribute("tabindex")||hu.test(n.nodeName)||n.href?n.tabIndex:-1}}}});f.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});bt=/[\t\r\n\f]/g;i.fn.extend({addClass:function(n){var o,t,r,u,s,f,h=typeof n=="string"&&n,e=0,l=this.length;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(h)for(o=(n||"").match(c)||[];e<l;e++)if(t=this[e],r=t.nodeType===1&&(t.className?(" "+t.className+" ").replace(bt," "):" "),r){for(s=0;u=o[s++];)r.indexOf(" "+u+" ")<0&&(r+=u+" ");f=i.trim(r);t.className!==f&&(t.className=f)}return this},removeClass:function(n){var o,t,r,u,s,f,h=arguments.length===0||typeof n=="string"&&n,e=0,l=this.length;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(h)for(o=(n||"").match(c)||[];e<l;e++)if(t=this[e],r=t.nodeType===1&&(t.className?(" "+t.className+" ").replace(bt," "):""),r){for(s=0;u=o[s++];)while(r.indexOf(" "+u+" ")>=0)r=r.replace(" "+u+" "," ");f=n?i.trim(r):"";t.className!==f&&(t.className=f)}return this},toggleClass:function(n,t){var u=typeof n;return typeof t=="boolean"&&u==="string"?t?this.addClass(n):this.removeClass(n):i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}):this.each(function(){if(u==="string")for(var t,e=0,f=i(this),o=n.match(c)||[];t=o[e++];)f.hasClass(t)?f.removeClass(t):f.addClass(t);else(u===b||u==="boolean")&&(this.className&&r.set(this,"__className__",this.className),this.className=this.className||n===!1?"":r.get(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;t<r;t++)if(this[t].nodeType===1&&(" "+this[t].className+" ").replace(bt," ").indexOf(i)>=0)return!0;return!1}});cu=/\r/g;i.fn.extend({val:function(n){var t,r,f,u=this[0];return arguments.length?(f=i.isFunction(n),this.each(function(r){var u;this.nodeType===1&&(u=f?n.call(this,r,i(this).val()):n,u==null?u="":typeof u=="number"?u+="":i.isArray(u)&&(u=i.map(u,function(n){return n==null?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,u,"value")!==undefined||(this.value=u))})):u?(t=i.valHooks[u.type]||i.valHooks[u.nodeName.toLowerCase()],t&&"get"in t&&(r=t.get(u,"value"))!==undefined)?r:(r=u.value,typeof r=="string"?r.replace(cu,""):r==null?"":r):void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return t!=null?t:i.trim(i.text(n))}},select:{get:function(n){for(var o,t,s=n.options,r=n.selectedIndex,u=n.type==="select-one"||r<0,h=u?null:[],c=u?r+1:s.length,e=r<0?c:u?r:0;e<c;e++)if(t=s[e],(t.selected||e===r)&&(f.optDisabled?!t.disabled:t.getAttribute("disabled")===null)&&(!t.parentNode.disabled||!i.nodeName(t.parentNode,"optgroup"))){if(o=i(t).val(),u)return o;h.push(o)}return h},set:function(n,t){for(var u,r,f=n.options,e=i.makeArray(t),o=f.length;o--;)r=f[o],(r.selected=i.inArray(r.value,e)>=0)&&(u=!0);return u||(n.selectedIndex=-1),e}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(i.isArray(t))return n.checked=i.inArray(i(n).val(),t)>=0}};f.checkOn||(i.valHooks[this].get=function(n){return n.getAttribute("value")===null?"on":n.value})});i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return arguments.length===1?this.off(n,"**"):this.off(t,n||"**",i)}});kt=i.now();dt=/\?/;i.parseJSON=function(n){return JSON.parse(n+"")};i.parseXML=function(n){var t,r;if(!n||typeof n!="string")return null;try{r=new DOMParser;t=r.parseFromString(n,"text/xml")}catch(u){t=undefined}return(!t||t.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),t};var se=/#.*$/,lu=/([?&])_=[^&]*/,he=/^(.*?):[ \t]*([^\r\n]*)$/mg,ce=/^(?:GET|HEAD)$/,le=/^\/\//,au=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,vu={},ci={},yu="*/".concat("*"),li=n.location.href,nt=au.exec(li.toLowerCase())||[];i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:li,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(nt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yu,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?ai(ai(n,i.ajaxSettings),t):ai(i.ajaxSettings,n)},ajaxPrefilter:pu(vu),ajaxTransport:pu(ci),ajax:function(n,t){function p(n,t,h,c){var v,it,tt,p,nt,l=t;e!==2&&(e=2,b&&clearTimeout(b),s=undefined,w=c||"",u.readyState=n>0?4:0,v=n>=200&&n<300||n===304,h&&(p=ae(r,u,h)),p=ve(r,p,u,v),v?(r.ifModified&&(nt=u.getResponseHeader("Last-Modified"),nt&&(i.lastModified[f]=nt),nt=u.getResponseHeader("etag"),nt&&(i.etag[f]=nt)),n===204||r.type==="HEAD"?l="nocontent":n===304?l="notmodified":(l=p.state,it=p.data,tt=p.error,v=!tt)):(tt=l,(n||!l)&&(l="error",n<0&&(n=0))),u.status=n,u.statusText=(t||l)+"",v?d.resolveWith(o,[it,l,u]):d.rejectWith(o,[u,l,tt]),u.statusCode(y),y=undefined,a&&k.trigger(v?"ajaxSuccess":"ajaxError",[u,r,v?it:tt]),g.fireWith(o,[u,l]),a&&(k.trigger("ajaxComplete",[u,r]),--i.active||i.event.trigger("ajaxStop")))}typeof n=="object"&&(t=n,n=undefined);t=t||{};var s,f,w,v,b,h,a,l,r=i.ajaxSetup({},t),o=r.context||r,k=r.context&&(o.nodeType||o.jquery)?i(o):i.event,d=i.Deferred(),g=i.Callbacks("once memory"),y=r.statusCode||{},tt={},it={},e=0,rt="canceled",u={readyState:0,getResponseHeader:function(n){var t;if(e===2){if(!v)for(v={};t=he.exec(w);)v[t[1].toLowerCase()]=t[2];t=v[n.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return e===2?w:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return e||(n=it[i]=it[i]||n,tt[n]=t),this},overrideMimeType:function(n){return e||(r.mimeType=n),this},statusCode:function(n){var t;if(n)if(e<2)for(t in n)y[t]=[y[t],n[t]];else u.always(n[u.status]);return this},abort:function(n){var t=n||rt;return s&&s.abort(t),p(0,t),this}};if(d.promise(u).complete=g.add,u.success=u.done,u.error=u.fail,r.url=((n||r.url||li)+"").replace(se,"").replace(le,nt[1]+"//"),r.type=t.method||t.type||r.method||r.type,r.dataTypes=i.trim(r.dataType||"*").toLowerCase().match(c)||[""],r.crossDomain==null&&(h=au.exec(r.url.toLowerCase()),r.crossDomain=!!(h&&(h[1]!==nt[1]||h[2]!==nt[2]||(h[3]||(h[1]==="http:"?"80":"443"))!==(nt[3]||(nt[1]==="http:"?"80":"443"))))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=i.param(r.data,r.traditional)),wu(vu,r,t,u),e===2)return u;a=i.event&&r.global;a&&i.active++==0&&i.event.trigger("ajaxStart");r.type=r.type.toUpperCase();r.hasContent=!ce.test(r.type);f=r.url;r.hasContent||(r.data&&(f=r.url+=(dt.test(f)?"&":"?")+r.data,delete r.data),r.cache===!1&&(r.url=lu.test(f)?f.replace(lu,"$1_="+kt++):f+(dt.test(f)?"&":"?")+"_="+kt++));r.ifModified&&(i.lastModified[f]&&u.setRequestHeader("If-Modified-Since",i.lastModified[f]),i.etag[f]&&u.setRequestHeader("If-None-Match",i.etag[f]));(r.data&&r.hasContent&&r.contentType!==!1||t.contentType)&&u.setRequestHeader("Content-Type",r.contentType);u.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+yu+"; q=0.01":""):r.accepts["*"]);for(l in r.headers)u.setRequestHeader(l,r.headers[l]);if(r.beforeSend&&(r.beforeSend.call(o,u,r)===!1||e===2))return u.abort();rt="abort";for(l in{success:1,error:1,complete:1})u[l](r[l]);if(s=wu(ci,r,t,u),s){u.readyState=1;a&&k.trigger("ajaxSend",[u,r]);r.async&&r.timeout>0&&(b=setTimeout(function(){u.abort("timeout")},r.timeout));try{e=1;s.send(tt,p)}catch(ut){if(e<2)p(-1,ut);else throw ut;}}else p(-1,"No Transport");return u},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,undefined,t,"script")}});i.each(["get","post"],function(n,t){i[t]=function(n,r,u,f){return i.isFunction(r)&&(f=f||u,u=r,r=undefined),i.ajax({url:n,type:t,dataType:f,data:r,success:u})}});i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};i.fn.extend({wrapAll:function(n){var t;return i.isFunction(n)?this.each(function(t){i(this).wrapAll(n.call(this,t))}):(this[0]&&(t=i(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this)},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});i.expr.filters.hidden=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0};i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)};var ye=/%20/g,pe=/\[\]$/,bu=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,be=/^(?:input|select|textarea|keygen)/i;i.param=function(n,t){var r,u=[],f=function(n,t){t=i.isFunction(t)?t():t==null?"":t;u[u.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(t===undefined&&(t=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){f(this.name,this.value)});else for(r in n)vi(r,n[r],t,f);return u.join("&").replace(ye,"+")};i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&be.test(this.nodeName)&&!we.test(n)&&(this.checked||!er.test(n))}).map(function(n,t){var r=i(this).val();return r==null?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(bu,"\r\n")}}):{name:t.name,value:r.replace(bu,"\r\n")}}).get()}});i.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(n){}};var ke=0,gt={},de={0:200,1223:204},ut=i.ajaxSettings.xhr();return n.attachEvent&&n.attachEvent("onunload",function(){for(var n in gt)gt[n]()}),f.cors=!!ut&&"withCredentials"in ut,f.ajax=ut=!!ut,i.ajaxTransport(function(n){var t;if(f.cors||ut&&!n.crossDomain)return{send:function(i,r){var f,u=n.xhr(),e=++ke;if(u.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType);n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(f in i)u.setRequestHeader(f,i[f]);t=function(n){return function(){t&&(delete gt[e],t=u.onload=u.onerror=null,n==="abort"?u.abort():n==="error"?r(u.status,u.statusText):r(de[u.status]||u.status,u.statusText,typeof u.responseText=="string"?{text:u.responseText}:undefined,u.getAllResponseHeaders()))}};u.onload=t();u.onerror=t("error");t=gt[e]=t("abort");try{u.send(n.hasContent&&n.data||null)}catch(o){if(t)throw o;}},abort:function(){t&&t()}}}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){n.cache===undefined&&(n.cache=!1);n.crossDomain&&(n.type="GET")}),i.ajaxTransport("script",function(n){if(n.crossDomain){var r,t;return{send:function(f,e){r=i("<script>").prop({async:!0,charset:n.scriptCharset,src:n.url}).on("load error",t=function(n){r.remove();t=null;n&&e(n.type==="error"?404:200,n.type)});u.head.appendChild(r[0])},abort:function(){t&&t()}}}}),yi=[],ni=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=yi.pop()||i.expando+"_"+kt++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,u){var f,o,e,s=t.jsonp!==!1&&(ni.test(t.url)?"url":typeof t.data=="string"&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ni.test(t.data)&&"data");if(s||t.dataTypes[0]==="jsonp")return f=t.jsonpCallback=i.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(ni,"$1"+f):t.jsonp!==!1&&(t.url+=(dt.test(t.url)?"&":"?")+t.jsonp+"="+f),t.converters["script json"]=function(){return e||i.error(f+" was not called"),e[0]},t.dataTypes[0]="json",o=n[f],n[f]=function(){e=arguments},u.always(function(){n[f]=o;t[f]&&(t.jsonpCallback=r.jsonpCallback,yi.push(f));e&&i.isFunction(o)&&o(e[0]);e=o=undefined}),"script"}),i.parseHTML=function(n,t,r){if(!n||typeof n!="string")return null;typeof t=="boolean"&&(r=t,t=!1);t=t||u;var f=gi.exec(n),e=!r&&[];return f?[t.createElement(f[1])]:(f=i.buildFragment([n],t,e),e&&e.length&&i(e).remove(),i.merge([],f.childNodes))},pi=i.fn.load,i.fn.load=function(n,t,r){if(typeof n!="string"&&pi)return pi.apply(this,arguments);var u,o,s,f=this,e=n.indexOf(" ");return e>=0&&(u=i.trim(n.slice(e)),n=n.slice(0,e)),i.isFunction(t)?(r=t,t=undefined):t&&typeof t=="object"&&(o="POST"),f.length>0&&i.ajax({url:n,type:o,dataType:"html",data:t}).done(function(n){s=arguments;f.html(u?i("<div>").append(i.parseHTML(n)).find(u):n)}).complete(r&&function(n,t){f.each(r,s||[n.responseText,t,n])}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},wi=n.document.documentElement,i.offset={setOffset:function(n,t,r){var e,o,s,h,u,c,v,l=i.css(n,"position"),a=i(n),f={};l==="static"&&(n.style.position="relative");u=a.offset();s=i.css(n,"top");c=i.css(n,"left");v=(l==="absolute"||l==="fixed")&&(s+c).indexOf("auto")>-1;v?(e=a.position(),h=e.top,o=e.left):(h=parseFloat(s)||0,o=parseFloat(c)||0);i.isFunction(t)&&(t=t.call(n,r,u));t.top!=null&&(f.top=t.top-u.top+h);t.left!=null&&(f.left=t.left-u.left+o);"using"in t?t.using.call(n,f):a.css(f)}},i.fn.extend({offset:function(n){if(arguments.length)return n===undefined?this:this.each(function(t){i.offset.setOffset(this,n,t)});var r,f,t=this[0],u={top:0,left:0},e=t&&t.ownerDocument;if(e)return(r=e.documentElement,!i.contains(r,t))?u:(typeof t.getBoundingClientRect!==b&&(u=t.getBoundingClientRect()),f=ku(e),{top:u.top+f.pageYOffset-r.clientTop,left:u.left+f.pageXOffset-r.clientLeft})},position:function(){if(this[0]){var n,r,u=this[0],t={top:0,left:0};return i.css(u,"position")==="fixed"?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||wi;n&&!i.nodeName(n,"html")&&i.css(n,"position")==="static";)n=n.offsetParent;return n||wi})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var u="pageYOffset"===r;i.fn[t]=function(i){return l(this,function(t,i,f){var e=ku(t);if(f===undefined)return e?e[r]:t[i];e?e.scrollTo(u?n.pageXOffset:f,u?f:n.pageYOffset):t[i]=f},t,i,arguments.length,null)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=br(f.pixelPosition,function(n,r){if(r)return r=it(n,t),hi.test(r)?i(n).position()[t]+"px":r})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(u,f){var e=arguments.length&&(r||typeof u!="boolean"),o=r||(u===!0||f===!0?"margin":"border");return l(this,function(t,r,u){var f;return i.isWindow(t)?t.document.documentElement["client"+n]:t.nodeType===9?(f=t.documentElement,Math.max(t.body["scroll"+n],f["scroll"+n],t.body["offset"+n],f["offset"+n],f["client"+n])):u===undefined?i.css(t,r,o):i.style(t,r,u,o)},t,e?u:undefined,e,null)}})}),i.fn.size=function(){return this.length},i.fn.andSelf=i.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return i}),du=n.jQuery,gu=n.$,i.noConflict=function(t){return n.$===i&&(n.$=gu),t&&n.jQuery===i&&(n.jQuery=du),i},typeof t===b&&(n.jQuery=n.$=i),i});
/*! jQuery UI - v1.11.2 - 2014-10-16
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, position.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, draggable.js, droppable.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js, menu.js, progressbar.js, resizable.js, selectable.js, selectmenu.js, slider.js, sortable.js, spinner.js, tabs.js, tooltip.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){
/*!
 * jQuery UI Core 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
function h(t,i){var r,u,f,e=t.nodeName.toLowerCase();return"area"===e?(r=t.parentNode,u=r.name,!t.href||!u||r.nodeName.toLowerCase()!=="map")?!1:(f=n("img[usemap='#"+u+"']")[0],!!f&&c(f)):(/input|select|textarea|button|object/.test(e)?!t.disabled:"a"===e?t.href||i:i)&&c(t)}function c(t){return n.expr.filters.visible(t)&&!n(t).parents().addBack().filter(function(){return n.css(this,"visibility")==="hidden"}).length}function ft(n){for(var t,i;n.length&&n[0]!==document;){if(t=n.css("position"),(t==="absolute"||t==="relative"||t==="fixed")&&(i=parseInt(n.css("zIndex"),10),!isNaN(i)&&i!==0))return i;n=n.parent()}return 0}function p(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._datepickerShowing=!1;this._inDialog=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};n.extend(this._defaults,this.regional[""]);this.regional.en=n.extend(!0,{},this.regional[""]);this.regional["en-US"]=n.extend(!0,{},this.regional.en);this.dpDiv=w(n("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>"))}function w(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){n(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!==-1&&n(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!==-1&&n(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",b)}function b(){n.datepicker._isDisabledDatepicker(r.inline?r.dpDiv.parent()[0]:r.input[0])||(n(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&n(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&n(this).addClass("ui-datepicker-next-hover"))}function u(t,i){n.extend(t,i);for(var r in i)i[r]==null&&(t[r]=i[r]);return t}function t(n){return function(){var t=this.element.val();n.apply(this,arguments);this._refresh();t!==this.element.val()&&this._trigger("change")}}var l,f,k,i,d,g,nt,tt,it,ut,r,et,ot,st,ht,ct,o,s,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,ci,li,ai,vi;n.ui=n.ui||{};n.extend(n.ui,{version:"1.11.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});n.fn.extend({scrollParent:function(t){var i=this.css("position"),u=i==="absolute",f=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=n(this);return u&&t.css("position")==="static"?!1:f.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return i==="fixed"||!r.length?n(this[0].ownerDocument||document):r},uniqueId:function(){var n=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&n(this).removeAttr("id")})}});n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return h(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var i=n.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&h(t,!r)}});n("<a>").outerWidth(1).jquery||n.each(["Width","Height"],function(t,i){function f(t,i,r,u){return n.each(e,function(){i-=parseFloat(n.css(t,"padding"+this))||0;r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0);u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var e=i==="Width"?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),u={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+i]=function(t){return t===undefined?u["inner"+i].call(this):this.each(function(){n(this).css(r,f(this,t)+"px")})};n.fn["outer"+i]=function(t,e){return typeof t!="number"?u["outer"+i].call(this,t):this.each(function(){n(this).css(r,f(this,t,!0,e)+"px")})}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))});n("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(n.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,n.camelCase(i)):t.call(this)}}(n.fn.removeData));n.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());n.fn.extend({focus:function(t){return function(i,r){return typeof i=="number"?this.each(function(){var t=this;setTimeout(function(){n(t).focus();r&&r.call(t)},i)}):t.apply(this,arguments)}}(n.fn.focus),disableSelection:function(){var n="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(n+".ui-disableSelection",function(n){n.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length)for(var i=n(this[0]),r,u;i.length&&i[0]!==document;){if(r=i.css("position"),(r==="absolute"||r==="relative"||r==="fixed")&&(u=parseInt(i.css("zIndex"),10),!isNaN(u)&&u!==0))return u;i=i.parent()}return 0}});n.ui.plugin={add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i,r){var u,f=n.plugins[t];if(f&&(r||n.element[0].parentNode&&n.element[0].parentNode.nodeType!==11))for(u=0;u<f.length;u++)n.options[f[u][0]]&&f[u][1].apply(n.element,i)}};
/*!
 * jQuery UI Widget 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
l=0;f=Array.prototype.slice;n.cleanData=function(t){return function(i){for(var r,u,f=0;(u=i[f])!=null;f++)try{r=n._data(u,"events");r&&r.remove&&n(u).triggerHandler("remove")}catch(e){}t(i)}}(n.cleanData);n.widget=function(t,i,r){var s,f,u,o,h={},e=t.split(".")[0];return t=t.split(".")[1],s=e+"-"+t,r||(r=i,i=n.Widget),n.expr[":"][s.toLowerCase()]=function(t){return!!n.data(t,s)},n[e]=n[e]||{},f=n[e][t],u=n[e][t]=function(n,t){if(!this._createWidget)return new u(n,t);arguments.length&&this._createWidget(n,t)},n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]}),o=new i,o.options=n.widget.extend({},o.options),n.each(r,function(t,r){if(!n.isFunction(r)){h[t]=r;return}h[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},u=function(n){return i.prototype[t].apply(this,n)};return function(){var i=this._super,f=this._superApply,t;return this._super=n,this._superApply=u,t=r.apply(this,arguments),this._super=i,this._superApply=f,t}}()}),u.prototype=n.widget.extend(o,{widgetEventPrefix:f?o.widgetEventPrefix||t:t},h,{constructor:u,namespace:e,widgetName:t,widgetFullName:s}),f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u),n.widget.bridge(t,u),u};n.widget.extend=function(t){for(var e=f.call(arguments,1),u=0,o=e.length,i,r;u<o;u++)for(i in e[u])r=e[u][i],e[u].hasOwnProperty(i)&&r!==undefined&&(t[i]=n.isPlainObject(r)?n.isPlainObject(t[i])?n.widget.extend({},t[i],r):n.widget.extend({},r):r);return t};n.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;n.fn[t]=function(u){var s=typeof u=="string",o=f.call(arguments,1),e=this;return u=!s&&o.length?n.widget.extend.apply(null,[u].concat(o)):u,s?this.each(function(){var i,f=n.data(this,r);return u==="instance"?(e=f,!1):f?!n.isFunction(f[u])||u.charAt(0)==="_"?n.error("no such method '"+u+"' for "+t+" widget instance"):(i=f[u].apply(f,o),i!==f&&i!==undefined?(e=i&&i.jquery?e.pushStack(i.get()):i,!1):void 0):n.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+u+"'")}):this.each(function(){var t=n.data(this,r);t?(t.option(u||{}),t._init&&t._init()):n.data(this,r,new i(u,this))}),e}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0];this.element=n(i);this.uuid=l++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=n();this.hoverable=n();this.focusable=n();i!==this&&(n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(t,i){var e=t,r,u,f;if(arguments.length===0)return n.widget.extend({},this.options);if(typeof t=="string")if(e={},r=t.split("."),t=r.shift(),r.length){for(u=e[t]=n.widget.extend({},this.options[t]),f=0;f<r.length-1;f++)u[r[f]]=u[r[f]]||{},u=u[r[f]];if(t=r.pop(),arguments.length===1)return u[t]===undefined?null:u[t];u[t]=i}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];e[t]=i}return this._setOptions(e),this},_setOptions:function(n){for(var t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,r){var f,u=this;typeof t!="boolean"&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return(typeof e=="string"?u[e]:e).apply(u,arguments)}typeof e!="string"&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^([\w:-]*)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.delegate(c,h,o):i.bind(h,o)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.unbind(i).undelegate(i);this.bindings=n(this.bindings.not(t).get());this.focusable=n(this.focusable.not(t).get());this.hoverable=n(this.hoverable.not(t).get())},_delay:function(n,t){function r(){return(typeof n=="string"?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent,f)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){typeof u=="string"&&(u={effect:u});var o,e=u?u===!0||typeof u=="number"?i:u.effect||i:t;u=u||{};typeof u=="number"&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}});k=n.widget;
/*!
 * jQuery UI Mouse 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */
i=!1;n(document).mouseup(function(){i=!1});d=n.widget("ui.mouse",{version:"1.11.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(t);this._mouseDownEvent=t;var r=this,u=t.which===1,f=typeof this.options.cancel=="string"&&t.target.nodeName?n(t.target).closest(this.options.cancel).length:!1;return!u||f||!this._mouseCapture(t)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted))?(t.preventDefault(),!0):(!0===n.data(t.target,this.widgetName+".preventClickEvent")&&n.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return r._mouseMove(n)},this._mouseUpDelegate=function(n){return r._mouseUp(n)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0)}},_mouseMove:function(t){return this._mouseMoved&&(n.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button||!t.which)?this._mouseUp(t):((t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted)?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),i=!1,!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});
/*!
 * jQuery UI Position 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(){function a(n,t,i){return[parseFloat(n[0])*(l.test(n[0])?t/100:1),parseFloat(n[1])*(l.test(n[1])?i/100:1)]}function r(t,i){return parseInt(n.css(t,i),10)||0}function y(t){var i=t[0];return i.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}n.ui=n.ui||{};var u,f,i=Math.max,t=Math.abs,e=Math.round,o=/left|center|right/,s=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,l=/%$/,v=n.fn.position;n.position={scrollbarWidth:function(){if(u!==undefined)return u;var r,i,t=n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),f=t.children()[0];return n("body").append(t),r=f.offsetWidth,t.css("overflow","scroll"),i=f.offsetWidth,r===i&&(i=t[0].clientWidth),t.remove(),u=r-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),u=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,f=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]),u=!!i[0]&&i[0].nodeType===9;return{element:i,isWindow:r,isDocument:u,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r||u?i.width():i.outerWidth(),height:r||u?i.height():i.outerHeight()}}};n.fn.position=function(u){if(!u||!u.of)return v.apply(this,arguments);u=n.extend({},u);var k,l,p,b,w,g,nt=n(u.of),it=n.position.getWithinInfo(u.within),rt=n.position.getScrollInfo(it),d=(u.collision||"flip").split(" "),tt={};return g=y(nt),nt[0].preventDefault&&(u.at="left top"),l=g.width,p=g.height,b=g.offset,w=n.extend({},b),n.each(["my","at"],function(){var n=(u[this]||"").split(" "),t,i;n.length===1&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]);n[0]=o.test(n[0])?n[0]:"center";n[1]=s.test(n[1])?n[1]:"center";t=h.exec(n[0]);i=h.exec(n[1]);tt[this]=[t?t[0]:0,i?i[0]:0];u[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),d.length===1&&(d[1]=d[0]),u.at[0]==="right"?w.left+=l:u.at[0]==="center"&&(w.left+=l/2),u.at[1]==="bottom"?w.top+=p:u.at[1]==="center"&&(w.top+=p/2),k=a(tt.at,l,p),w.left+=k[0],w.top+=k[1],this.each(function(){var y,g,s=n(this),h=s.outerWidth(),c=s.outerHeight(),ut=r(this,"marginLeft"),ft=r(this,"marginTop"),et=h+ut+r(this,"marginRight")+rt.width,ot=c+ft+r(this,"marginBottom")+rt.height,o=n.extend({},w),v=a(tt.my,s.outerWidth(),s.outerHeight());u.my[0]==="right"?o.left-=h:u.my[0]==="center"&&(o.left-=h/2);u.my[1]==="bottom"?o.top-=c:u.my[1]==="center"&&(o.top-=c/2);o.left+=v[0];o.top+=v[1];f||(o.left=e(o.left),o.top=e(o.top));y={marginLeft:ut,marginTop:ft};n.each(["left","top"],function(t,i){n.ui.position[d[t]]&&n.ui.position[d[t]][i](o,{targetWidth:l,targetHeight:p,elemWidth:h,elemHeight:c,collisionPosition:y,collisionWidth:et,collisionHeight:ot,offset:[k[0]+v[0],k[1]+v[1]],my:u.my,at:u.at,within:it,elem:s})});u.using&&(g=function(n){var r=b.left-o.left,a=r+l-h,f=b.top-o.top,v=f+p-c,e={target:{element:nt,left:b.left,top:b.top,width:l,height:p},element:{element:s,left:o.left,top:o.top,width:h,height:c},horizontal:a<0?"left":r>0?"right":"center",vertical:v<0?"top":f>0?"bottom":"middle"};l<h&&t(r+a)<l&&(e.horizontal="center");p<c&&t(f+v)<p&&(e.vertical="middle");e.important=i(t(r),t(a))>i(t(f),t(v))?"horizontal":"vertical";u.using.call(this,n,e)});s.offset(n.extend(o,{using:g}))})};n.ui.position={fit:{left:function(n,t){var e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,r=u-s,f=s+t.collisionWidth-o-u,h;t.collisionWidth>o?r>0&&f<=0?(h=n.left+r+t.collisionWidth-o-u,n.left+=r-h):n.left=f>0&&r<=0?u:r>f?u+o-t.collisionWidth:u:r>0?n.left+=r:f>0?n.left-=f:n.left=i(n.left-s,n.left)},top:function(n,t){var o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,r=u-s,f=s+t.collisionHeight-e-u,h;t.collisionHeight>e?r>0&&f<=0?(h=n.top+r+t.collisionHeight-e-u,n.top+=r-h):n.top=f>0&&r<=0?u:r>f?u+e-t.collisionHeight:u:r>0?n.top+=r:f>0?n.top-=f:n.top=i(n.top-s,n.top)}},flip:{left:function(n,i){var r=i.within,y=r.offset.left+r.scrollLeft,c=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-i.collisionPosition.marginLeft,a=l-o,v=l+i.collisionWidth-c-o,u=i.my[0]==="left"?-i.elemWidth:i.my[0]==="right"?i.elemWidth:0,f=i.at[0]==="left"?i.targetWidth:i.at[0]==="right"?-i.targetWidth:0,e=-2*i.offset[0],s,h;a<0?(s=n.left+u+f+e+i.collisionWidth-c-y,(s<0||s<t(a))&&(n.left+=u+f+e)):v>0&&(h=n.left-i.collisionPosition.marginLeft+u+f+e-o,(h>0||t(h)<v)&&(n.left+=u+f+e))},top:function(n,i){var r=i.within,y=r.offset.top+r.scrollTop,a=r.height,o=r.isWindow?r.scrollTop:r.offset.top,v=n.top-i.collisionPosition.marginTop,s=v-o,h=v+i.collisionHeight-a-o,p=i.my[1]==="top",u=p?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,f=i.at[1]==="top"?i.targetHeight:i.at[1]==="bottom"?-i.targetHeight:0,e=-2*i.offset[1],c,l;s<0?(l=n.top+u+f+e+i.collisionHeight-a-y,n.top+u+f+e>s&&(l<0||l<t(s))&&(n.top+=u+f+e)):h>0&&(c=n.top-i.collisionPosition.marginTop+u+f+e-o,n.top+u+f+e>h&&(c>0||t(c)<h)&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,u,e,o=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(o?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};o&&n.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in r)t.style[e]=r[e];t.appendChild(s);i=o||document.documentElement;i.insertBefore(t,i.firstChild);s.style.cssText="position: absolute; left: 10.7432222px;";u=n(s).offset().left;f=u>10&&u<11;t.innerHTML="";i.removeChild(t)}()})();g=n.ui.position;
/*!
 * jQuery UI Accordion 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/accordion/
 */
nt=n.widget("ui.accordion",{version:"1.11.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=n();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");t.collapsible||t.active!==!1&&t.active!=null||(t.active=0);this._processPanels();t.active<0&&(t.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():n()}},_createIcons:function(){var t=this.options.icons;t&&(n("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var n;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();this._destroyIcons();n=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();this.options.heightStyle!=="content"&&n.css("height","")},_setOption:function(n,t){if(n==="active"){this._activate(t);return}n==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t));this._super(n,t);n!=="collapsible"||t||this.options.active!==!1||this._activate(0);n==="icons"&&(this._destroyIcons(),t&&this._createIcons());n==="disabled"&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=n.ui.keyCode,u=this.headers.length,f=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(f+1)%u];break;case i.LEFT:case i.UP:r=this.headers[(f-1+u)%u];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[u-1]}r&&(n(t.target).attr("tabIndex",-1),n(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===n.ui.keyCode.UP&&t.ctrlKey&&n(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels();(t.active!==!1||t.collapsible!==!0)&&this.headers.length?t.active===!1?this._activate(0):this.active.length&&!n.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=n()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active):(t.active=!1,this.active=n());this._destroyIcons();this._refresh()},_processPanels:function(){var t=this.headers,n=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();n&&(this._off(t.not(this.headers)),this._off(n.not(this.panels)))},_refresh:function(){var t,i=this.options,r=i.heightStyle,u=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var t=n(this),r=t.uniqueId().attr("id"),i=t.next(),u=i.uniqueId().attr("id");t.attr("aria-controls",u);i.attr("aria-labelledby",r)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(i.event);r==="fill"?(t=u.height(),this.element.siblings(":visible").each(function(){var i=n(this),r=i.css("position");r!=="absolute"&&r!=="fixed"&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=n(this).outerHeight(!0)}),this.headers.next().each(function(){n(this).height(Math.max(0,t-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):r==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,n(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:n.noop}))},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):n()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,i);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,u=this.active,r=n(t.currentTarget),f=r[0]===u[0],e=f&&i.collapsible,s=e?n():r.next(),h=u.next(),o={oldHeader:u,oldPanel:h,newHeader:e?n():r,newPanel:s};(t.preventDefault(),(!f||i.collapsible)&&this._trigger("beforeActivate",t,o)!==!1)&&(i.active=e?!1:this.headers.index(r),this.active=f?n():r,this._toggle(o),u.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&u.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),f||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var r=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=r;this.prevHide=i;this.options.animate?this._animate(r,i,t):(i.hide(),r.show(),this._toggleComplete(t));i.attr({"aria-hidden":"true"});i.prev().attr("aria-selected","false");r.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):r.length&&this.headers.filter(function(){return n(this).attr("tabIndex")===0}).attr("tabIndex",-1);r.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(n,t,i){var h,r,u,c=this,o=0,l=n.length&&(!t.length||n.index()<t.index()),e=this.options.animate||{},f=l&&e.down||e,s=function(){c._toggleComplete(i)};if(typeof f=="number"&&(u=f),typeof f=="string"&&(r=f),r=r||f.easing||e.easing,u=u||f.duration||e.duration,!t.length)return n.animate(this.showProps,u,r,s);if(!n.length)return t.animate(this.hideProps,u,r,s);h=n.show().outerHeight();t.animate(this.hideProps,{duration:u,easing:r,step:function(n,t){t.now=Math.round(n)}});n.hide().animate(this.showProps,{duration:u,easing:r,complete:s,step:function(n,i){i.now=Math.round(n);i.prop!=="height"?o+=i.now:c.options.heightStyle!=="content"&&(i.now=Math.round(h-t.outerHeight()-o),o=0)}})},_toggleComplete:function(n){var t=n.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");t.length&&(t.parent()[0].className=t.parent()[0].className);this._trigger("activate",null,n)}});
/*!
 * jQuery UI Menu 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/menu/
 */
tt=n.widget("ui.menu",{version:"1.11.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item":function(n){n.preventDefault()},"click .ui-menu-item":function(t){var i=n(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=n(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(n,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(n,i)},blur:function(t){this._delay(function(){n.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(n){this._closeOnDocumentClick(n)&&this.collapseAll(n);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=n(this);t.data("ui-menu-submenu-carat")&&t.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,u,r,f,e=!0;switch(t.keyCode){case n.ui.keyCode.PAGE_UP:this.previousPage(t);break;case n.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case n.ui.keyCode.HOME:this._move("first","first",t);break;case n.ui.keyCode.END:this._move("last","last",t);break;case n.ui.keyCode.UP:this.previous(t);break;case n.ui.keyCode.DOWN:this.next(t);break;case n.ui.keyCode.LEFT:this.collapse(t);break;case n.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case n.ui.keyCode.ENTER:case n.ui.keyCode.SPACE:this._activate(t);break;case n.ui.keyCode.ESCAPE:this.collapse(t);break;default:e=!1;u=this.previousFilter||"";r=String.fromCharCode(t.keyCode);f=!1;clearTimeout(this.filterTimer);r===u?f=!0:r=u+r;i=this._filterMenuItems(r);i=f&&i.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):i;i.length||(r=String.fromCharCode(t.keyCode),i=this._filterMenuItems(r));i.length?(this.focus(t,i),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}e&&t.preventDefault()},_activate:function(n){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(n):this.select(n))},refresh:function(){var i,t,u=this,f=this.options.icons.submenu,r=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=n(this),i=t.parent(),r=n("<span>").addClass("ui-menu-icon ui-icon "+f).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(r);t.attr("aria-labelledby",i.attr("id"))});i=r.add(this.element);t=i.find(this.options.items);t.not(".ui-menu-item").each(function(){var t=n(this);u._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")});t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});t.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!n.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(n,t){n==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu);n==="disabled"&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t);this._super(n,t)},focus:function(n,t){var i,r;this.blur(n,n&&n.type==="focus");this._scrollIntoView(t);this.active=t.first();r=this.active.addClass("ui-state-focus").removeClass("ui-state-active");this.options.role&&this.element.attr("aria-activedescendant",r.attr("id"));this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");n&&n.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay);i=t.children(".ui-menu");i.length&&n&&/^mouse/.test(n.type)&&this._startOpening(i);this.activeMenu=t.parent();this._trigger("focus",n,{item:t})},_scrollIntoView:function(t){var e,o,i,r,u,f;this._hasScroll()&&(e=parseFloat(n.css(this.activeMenu[0],"borderTopWidth"))||0,o=parseFloat(n.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-o,r=this.activeMenu.scrollTop(),u=this.activeMenu.height(),f=t.outerHeight(),i<0?this.activeMenu.scrollTop(r+i):i+f>u&&this.activeMenu.scrollTop(r+i-u+f))},blur:function(n,t){(t||clearTimeout(this.timer),this.active)&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",n,{item:this.active}))},_startOpening:function(n){(clearTimeout(this.timer),n.attr("aria-hidden")==="true")&&(this.timer=this._delay(function(){this._close();this._open(n)},this.delay))},_open:function(t){var i=n.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer);this.timer=this._delay(function(){var r=i?this.element:n(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element);this._close(r);this.blur(t);this.activeMenu=r},this.delay)},_close:function(n){n||(n=this.active?this.active.parent():this.element);n.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!n(t.target).closest(".ui-menu").length},_isDivider:function(n){return!/[^\-\u2014\u2013\s]/.test(n.text())},collapse:function(n){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(n,t))},expand:function(n){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(n,t)}))},next:function(n){this._move("next","first",n)},previous:function(n){this._move("prev","last",n)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(n,t,i){var r;this.active&&(r=n==="first"||n==="last"?this.active[n==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[n+"All"](".ui-menu-item").eq(0));r&&r.length&&this.active||(r=this.activeMenu.find(this.options.items)[t]());this.focus(i,r)},nextPage:function(t){var i,r,u;if(!this.active){this.next(t);return}this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=n(this),i.offset().top-r-u<0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))},previousPage:function(t){var i,r,u;if(!this.active){this.next(t);return}this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=n(this),i.offset().top-r+u>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||n(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0);this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),r=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return r.test(n.trim(n(this).text()))})}});
/*!
 * jQuery UI Autocomplete 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/autocomplete/
 */
n.widget("ui.autocomplete",{version:"1.11.2",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,r,u=this.element[0].nodeName.toLowerCase(),f=u==="textarea",e=u==="input";this.isMultiLine=f?!0:e?!1:this.element.prop("isContentEditable");this.valueMethod=this.element[f||e?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(u){if(this.element.prop("readOnly")){t=!0;r=!0;i=!0;return}t=!1;r=!1;i=!1;var f=n.ui.keyCode;switch(u.keyCode){case f.PAGE_UP:t=!0;this._move("previousPage",u);break;case f.PAGE_DOWN:t=!0;this._move("nextPage",u);break;case f.UP:t=!0;this._keyEvent("previous",u);break;case f.DOWN:t=!0;this._keyEvent("next",u);break;case f.ENTER:this.menu.active&&(t=!0,u.preventDefault(),this.menu.select(u));break;case f.TAB:this.menu.active&&this.menu.select(u);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(u),u.preventDefault());break;default:i=!0;this._searchTimeout(u)}},keypress:function(r){if(t){t=!1;(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault();return}if(!i){var u=n.ui.keyCode;switch(r.keyCode){case u.PAGE_UP:this._move("previousPage",r);break;case u.PAGE_DOWN:this._move("nextPage",r);break;case u.UP:this._keyEvent("previous",r);break;case u.DOWN:this._keyEvent("next",r)}}},input:function(n){if(r){r=!1;n.preventDefault();return}this._searchTimeout(n)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(n){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(n);this._change(n)}});this._initSource();this.menu=n("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._on(this.menu.element,{mousedown:function(t){t.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];n(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target===t.element[0]||r.target===i||n.contains(i,r.target)||t.close()})})},menufocus:function(t,i){var r,u;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){n(t.target).trigger(t.originalEvent)});return}u=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:u})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(u.value);r=i.item.attr("aria-label")||u.value;r&&n.trim(r).length&&(this.liveRegion.children().hide(),n("<div>").text(r).appendTo(this.liveRegion))},menuselect:function(n,t){var i=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r;this.selectedItem=i}));!1!==this._trigger("select",n,{item:i})&&this._value(i.value);this.term=this._value();this.close(n);this.selectedItem=i}});this.liveRegion=n("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(n,t){this._super(n,t);n==="source"&&this._initSource();n==="appendTo"&&this.menu.element.appendTo(this._appendTo());n==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?n(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var i,r,t=this;n.isArray(this.options.source)?(i=this.options.source,this.source=function(t,r){r(n.ui.autocomplete.filter(i,t.term))}):typeof this.options.source=="string"?(r=this.options.source,this.source=function(i,u){t.xhr&&t.xhr.abort();t.xhr=n.ajax({url:r,data:i,dataType:"json",success:function(n){u(n)},error:function(){u([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching);this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),r=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;t&&(!t||i||r)||(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(n,t){return(n=n!=null?n:this._value(),this.term=this._value(),n.length<this.options.minLength)?this.close(t):this._trigger("search",t)===!1?void 0:this._search(n)},_search:function(n){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:n},this._response())},_response:function(){var t=++this.requestIndex;return n.proxy(function(n){t===this.requestIndex&&this.__response(n);this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(n){n&&(n=this._normalize(n));this._trigger("response",null,{content:n});!this.options.disabled&&n&&n.length&&!this.cancelSearch?(this._suggest(n),this._trigger("open")):this._close()},close:function(n){this.cancelSearch=!0;this._close(n)},_close:function(n){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",n))},_change:function(n){this.previous!==this._value()&&this._trigger("change",n,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:n.map(t,function(t){return typeof t=="string"?{label:t,value:t}:n.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t);this.isNewMenu=!0;this.menu.refresh();i.show();this._resizeMenu();i.position(n.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var n=this.menu.element;n.outerWidth(Math.max(n.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var r=this;n.each(i,function(n,i){r._renderItemData(t,i)})},_renderItemData:function(n,t){return this._renderItem(n,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return n("<li>").text(i.label).appendTo(t)},_move:function(n,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(n)||this.menu.isLastItem()&&/^next/.test(n)){this.isMultiLine||this._value(this.term);this.menu.blur();return}this.menu[n](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(n,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(n,t),t.preventDefault())}});n.extend(n.ui.autocomplete,{escapeRegex:function(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var r=new RegExp(n.ui.autocomplete.escapeRegex(i),"i");return n.grep(t,function(n){return r.test(n.label||n.value||n)})}});n.widget("ui.autocomplete",n.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(n){return n+(n>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;(this._superApply(arguments),this.options.disabled||this.cancelSearch)||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),n("<div>").text(i).appendTo(this.liveRegion))}});it=n.ui.autocomplete;
/*!
 * jQuery UI Button 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 */
var e,a="ui-button ui-widget ui-state-default ui-corner-all",v="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",rt=function(){var t=n(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},y=function(t){var i=t.name,r=t.form,u=n([]);return i&&(i=i.replace(/'/g,"\\'"),u=r?n(r).find("[name='"+i+"'][type=radio]"):n("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),u};n.widget("ui.button",{version:"1.11.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,rt);typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var i=this,t=this.options,r=this.type==="checkbox"||this.type==="radio",u=r?"":"ui-state-active";t.label===null&&(t.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){t.disabled||this===e&&n(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){t.disabled||n(this).removeClass(u)}).bind("click"+this.eventNamespace,function(n){t.disabled&&(n.preventDefault(),n.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});r&&this.element.bind("change"+this.eventNamespace,function(){i.refresh()});this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(t.disabled)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(t.disabled)return!1;n(this).addClass("ui-state-active");i.buttonElement.attr("aria-pressed","true");var r=i.element[0];y(r).not(r).map(function(){return n(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(t.disabled)return!1;n(this).addClass("ui-state-active");e=this;i.document.one("mouseup",function(){e=null})}).bind("mouseup"+this.eventNamespace,function(){if(t.disabled)return!1;n(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(i){if(t.disabled)return!1;(i.keyCode===n.ui.keyCode.SPACE||i.keyCode===n.ui.keyCode.ENTER)&&n(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){n(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===n.ui.keyCode.SPACE&&n(this).click()}));this._setOption("disabled",t.disabled);this._resetButton()},_determineButtonType:function(){var n,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button";this.type==="checkbox"||this.type==="radio"?(n=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=n.find(t),this.buttonElement.length||(n=n.length?n.siblings():this.element.siblings(),this.buttonElement=n.filter(t),this.buttonElement.length||(this.buttonElement=n.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(a+" ui-state-active "+v).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(n,t){if(this._super(n,t),n==="disabled"){this.widget().toggleClass("ui-state-disabled",!!t);this.element.prop("disabled",!!t);t&&(this.type==="checkbox"||this.type==="radio"?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active"));return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t);this.type==="radio"?y(this.element[0]).each(function(){n(this).is(":checked")?n(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):n(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var i=this.buttonElement.removeClass(v),f=n("<span><\/span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(i.empty()).text(),t=this.options.icons,u=t.primary&&t.secondary,r=[];t.primary||t.secondary?(this.options.text&&r.push("ui-button-text-icon"+(u?"s":t.primary?"-primary":"-secondary")),t.primary&&i.prepend("<span class='ui-button-icon-primary ui-icon "+t.primary+"'><\/span>"),t.secondary&&i.append("<span class='ui-button-icon-secondary ui-icon "+t.secondary+"'><\/span>"),this.options.text||(r.push(u?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||i.attr("title",n.trim(f)))):r.push("ui-button-text-only");i.addClass(r.join(" "))}});n.widget("ui.buttonset",{version:"1.11.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(n,t){n==="disabled"&&this.buttons.button("option",n,t);this._super(n,t)},refresh:function(){var i=this.element.css("direction")==="rtl",t=this.element.find(this.options.items),r=t.filter(":ui-button");t.not(":ui-button").button();r.button("refresh");this.buttons=t.map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(i?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(i?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});ut=n.ui.button;
/*!
 * jQuery UI Datepicker 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/datepicker/
 */
n.extend(n.ui,{datepicker:{version:"1.11.2"}});n.extend(p.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(n){return u(this._defaults,n||{}),this},_attachDatepicker:function(t,i){var r,f,u;r=t.nodeName.toLowerCase();f=r==="div"||r==="span";t.id||(this.uuid+=1,t.id="dp"+this.uuid);u=this._newInst(n(t),f);u.settings=n.extend({},i||{});r==="input"?this._connectDatepicker(t,u):f&&this._inlineDatepicker(t,u)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?w(n("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>")):this.dpDiv}},_connectDatepicker:function(t,i){var r=n(t);(i.append=n([]),i.trigger=n([]),r.hasClass(this.markerClassName))||(this._attachments(r,i),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),n.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var u,r,f,e=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove();e&&(i.append=n("<span class='"+this._appendClass+"'>"+e+"<\/span>"),t[o?"before":"after"](i.append));t.unbind("focus",this._showDatepicker);i.trigger&&i.trigger.remove();u=this._get(i,"showOn");(u==="focus"||u==="both")&&t.focus(this._showDatepicker);(u==="button"||u==="both")&&(r=this._get(i,"buttonText"),f=this._get(i,"buttonImage"),i.trigger=n(this._get(i,"buttonImageOnly")?n("<img/>").addClass(this._triggerClass).attr({src:f,alt:r,title:r}):n("<button type='button'><\/button>").addClass(this._triggerClass).html(f?n("<img/>").attr({src:f,alt:r,title:r}):r)),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return n.datepicker._datepickerShowing&&n.datepicker._lastInput===t[0]?n.datepicker._hideDatepicker():n.datepicker._datepickerShowing&&n.datepicker._lastInput!==t[0]?(n.datepicker._hideDatepicker(),n.datepicker._showDatepicker(t[0])):n.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(n){if(this._get(n,"autoSize")&&!n.inline){var r,u,f,t,i=new Date(2009,11,20),e=this._get(n,"dateFormat");e.match(/[DM]/)&&(r=function(n){for(u=0,f=0,t=0;t<n.length;t++)n[t].length>u&&(u=n[t].length,f=t);return f},i.setMonth(r(this._get(n,e.match(/MM/)?"monthNames":"monthNamesShort"))),i.setDate(r(this._get(n,e.match(/DD/)?"dayNames":"dayNamesShort"))+20-i.getDay()));n.input.attr("size",this._formatDate(n,i).length)}},_inlineDatepicker:function(t,i){var r=n(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(i.dpDiv),n.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,r,f,e){var s,h,c,l,a,o=this._dialogInst;return o||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=n("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),n("body").append(this._dialogInput),o=this._dialogInst=this._newInst(this._dialogInput,!1),o.settings={},n.data(this._dialogInput[0],"datepicker",o)),u(o.settings,f||{}),i=i&&i.constructor===Date?this._formatDate(o,i):i,this._dialogInput.val(i),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,this._pos||(h=document.documentElement.clientWidth,c=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+l,c/2-150+a]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),n.blockUI&&n.blockUI(this.dpDiv),n.data(this._dialogInput[0],"datepicker",o),this},_destroyDatepicker:function(t){var i,r=n(t),u=n.data(t,"datepicker");r.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),n.removeData(t,"datepicker"),i==="input"?(u.append.remove(),u.trigger.remove(),r.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(i==="div"||i==="span")&&r.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),i==="input"?(t.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(i==="div"||i==="span")&&(r=u.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}))},_disableDatepicker:function(t){var i,r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),i==="input"?(t.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(i==="div"||i==="span")&&(r=u.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(n){if(!n)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===n)return!0;return!1},_getInst:function(t){try{return n.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(t,i,r){var e,h,o,s,f=this._getInst(t);if(arguments.length===2&&typeof i=="string")return i==="defaults"?n.extend({},n.datepicker._defaults):f?i==="all"?n.extend({},f.settings):this._get(f,i):null;e=i||{};typeof i=="string"&&(e={},e[i]=r);f&&(this._curInst===f&&this._hideDatepicker(),h=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(f,"min"),s=this._getMinMaxDate(f,"max"),u(f.settings,e),o!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(f.settings.minDate=this._formatDate(f,o)),s!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(f.settings.maxDate=this._formatDate(f,s)),"disabled"in e&&(e.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(n(t),f),this._autoSize(f),this._setDate(f,h),this._updateAlternate(f),this._updateDatepicker(f))},_changeDatepicker:function(n,t,i){this._optionDatepicker(n,t,i)},_refreshDatepicker:function(n){var t=this._getInst(n);t&&this._updateDatepicker(t)},_setDateDatepicker:function(n,t){var i=this._getInst(n);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(n,t){var i=this._getInst(n);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var u,e,f,i=n.datepicker._getInst(t.target),r=!0,o=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,n.datepicker._datepickerShowing)switch(t.keyCode){case 9:n.datepicker._hideDatepicker();r=!1;break;case 13:return f=n("td."+n.datepicker._dayOverClass+":not(."+n.datepicker._currentClass+")",i.dpDiv),f[0]&&n.datepicker._selectDay(t.target,i.selectedMonth,i.selectedYear,f[0]),u=n.datepicker._get(i,"onSelect"),u?(e=n.datepicker._formatDate(i),u.apply(i.input?i.input[0]:null,[e,i])):n.datepicker._hideDatepicker(),!1;case 27:n.datepicker._hideDatepicker();break;case 33:n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 34:n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&n.datepicker._clearDate(t.target);r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&n.datepicker._gotoToday(t.target);r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?1:-1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,-7,"D");r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?-1:1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,7,"D");r=t.ctrlKey||t.metaKey;break;default:r=!1}else t.keyCode===36&&t.ctrlKey?n.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,r,u=n.datepicker._getInst(t.target);if(n.datepicker._get(u,"constrainInput"))return i=n.datepicker._possibleChars(n.datepicker._get(u,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!i||i.indexOf(r)>-1},_doKeyUp:function(t){var r,i=n.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{r=n.datepicker.parseDate(n.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,n.datepicker._getFormatConfig(i));r&&(n.datepicker._setDateFromField(i),n.datepicker._updateAlternate(i),n.datepicker._updateDatepicker(i))}catch(u){}return!0},_showDatepicker:function(t){if(t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=n("input",t.parentNode)[0]),!n.datepicker._isDisabledDatepicker(t)&&n.datepicker._lastInput!==t){var i,o,s,r,f,e,h;(i=n.datepicker._getInst(t),n.datepicker._curInst&&n.datepicker._curInst!==i&&(n.datepicker._curInst.dpDiv.stop(!0,!0),i&&n.datepicker._datepickerShowing&&n.datepicker._hideDatepicker(n.datepicker._curInst.input[0])),o=n.datepicker._get(i,"beforeShow"),s=o?o.apply(t,[t,i]):{},s!==!1)&&(u(i.settings,s),i.lastVal=null,n.datepicker._lastInput=t,n.datepicker._setDateFromField(i),n.datepicker._inDialog&&(t.value=""),n.datepicker._pos||(n.datepicker._pos=n.datepicker._findPos(t),n.datepicker._pos[1]+=t.offsetHeight),r=!1,n(t).parents().each(function(){return r|=n(this).css("position")==="fixed",!r}),f={left:n.datepicker._pos[0],top:n.datepicker._pos[1]},n.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.datepicker._updateDatepicker(i),f=n.datepicker._checkOffset(i,f,r),i.dpDiv.css({position:n.datepicker._inDialog&&n.blockUI?"static":r?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),i.inline||(e=n.datepicker._get(i,"showAnim"),h=n.datepicker._get(i,"duration"),i.dpDiv.css("z-index",ft(n(t))+1),n.datepicker._datepickerShowing=!0,n.effects&&n.effects.effect[e]?i.dpDiv.show(e,n.datepicker._get(i,"showOptions"),h):i.dpDiv[e||"show"](e?h:null),n.datepicker._shouldFocusInput(i)&&i.input.focus(),n.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4;r=t;t.dpDiv.empty().append(this._generateHTML(t));this._attachHandlers(t);var i,u=this._getNumberOfMonths(t),f=u[1],e=t.dpDiv.find("."+this._dayOverClass+" a");e.length>0&&b.apply(e.get(0));t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");f>1&&t.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",17*f+"em");t.dpDiv[(u[0]!==1||u[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");t===n.datepicker._curInst&&n.datepicker._datepickerShowing&&n.datepicker._shouldFocusInput(t)&&t.input.focus();t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml);i=t.yearshtml=null},0))},_shouldFocusInput:function(n){return n.input&&n.input.is(":visible")&&!n.input.is(":disabled")&&!n.input.is(":focus")},_checkOffset:function(t,i,r){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,e=document.documentElement.clientWidth+(r?0:n(document).scrollLeft()),s=document.documentElement.clientHeight+(r?0:n(document).scrollTop());return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left===t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top===t.input.offset().top+o?n(document).scrollTop():0,i.left-=Math.min(i.left,i.left+u>e&&e>u?Math.abs(i.left+u-e):0),i.top-=Math.min(i.top,i.top+f>s&&s>f?Math.abs(f+o):0),i},_findPos:function(t){for(var i,r=this._getInst(t),u=this._get(r,"isRTL");t&&(t.type==="hidden"||t.nodeType!==1||n.expr.filters.hidden(t));)t=t[u?"previousSibling":"nextSibling"];return i=n(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var r,f,u,e,i=this._curInst;i&&(!t||i===n.data(t,"datepicker"))&&this._datepickerShowing&&(r=this._get(i,"showAnim"),f=this._get(i,"duration"),u=function(){n.datepicker._tidyDialog(i)},n.effects&&(n.effects.effect[r]||n.effects[r])?i.dpDiv.hide(r,n.datepicker._get(i,"showOptions"),f,u):i.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?f:null,u),r||u(),this._datepickerShowing=!1,e=this._get(i,"onClose"),e&&e.apply(i.input?i.input[0]:null,[i.input?i.input.val():"",i]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(n.datepicker._curInst){var i=n(t.target),r=n.datepicker._getInst(i[0]);(i[0].id===n.datepicker._mainDivId||i.parents("#"+n.datepicker._mainDivId).length!==0||i.hasClass(n.datepicker.markerClassName)||i.closest("."+n.datepicker._triggerClass).length||!n.datepicker._datepickerShowing||n.datepicker._inDialog&&n.blockUI)&&(!i.hasClass(n.datepicker.markerClassName)||n.datepicker._curInst===r)||n.datepicker._hideDatepicker()}},_adjustDate:function(t,i,r){var f=n(t),u=this._getInst(f[0]);this._isDisabledDatepicker(f[0])||(this._adjustInstDate(u,i+(r==="M"?this._get(u,"showCurrentAtPos"):0),r),this._updateDatepicker(u))},_gotoToday:function(t){var r,u=n(t),i=this._getInst(u[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear());this._notifyChange(i);this._adjustDate(u)},_selectMonthYear:function(t,i,r){var f=n(t),u=this._getInst(f[0]);u["selected"+(r==="M"?"Month":"Year")]=u["draw"+(r==="M"?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(u);this._adjustDate(f)},_selectDay:function(t,i,r,u){var f,e=n(t);n(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||(f=this._getInst(e[0]),f.selectedDay=f.currentDay=n("a",u).html(),f.selectedMonth=f.currentMonth=i,f.selectedYear=f.currentYear=r,this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(t){var i=n(t);this._selectDate(i,"")},_selectDate:function(t,i){var u,f=n(t),r=this._getInst(f[0]);i=i!=null?i:this._formatDate(r);r.input&&r.input.val(i);this._updateAlternate(r);u=this._get(r,"onSelect");u?u.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change");r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,r,u,f=this._get(t,"altField");f&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),u=this.formatDate(i,r,this._getFormatConfig(t)),n(f).each(function(){n(this).val(u)}))},noWeekends:function(n){var t=n.getDay();return[t>0&&t<6,""]},iso8601Week:function(n){var i,t=new Date(n.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),i=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(t,i,r){if(t==null||i==null)throw"Invalid arguments";if(i=typeof i=="object"?i.toString():i+"",i==="")return null;for(var a,v,f=0,y=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,d=typeof y!="string"?y:(new Date).getFullYear()%100+parseInt(y,10),g=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,nt=(r?r.dayNames:null)||this._defaults.dayNames,tt=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,it=(r?r.monthNames:null)||this._defaults.monthNames,e=-1,s=-1,h=-1,p=-1,w=!1,u,l=function(n){var i=o+1<t.length&&t.charAt(o+1)===n;return i&&o++,i},c=function(n){var u=l(n),r=n==="@"?14:n==="!"?20:n==="y"&&u?4:n==="o"?3:2,e=n==="y"?r:1,o=new RegExp("^\\d{"+e+","+r+"}"),t=i.substring(f).match(o);if(!t)throw"Missing number at position "+f;return f+=t[0].length,parseInt(t[0],10)},k=function(t,r,u){var e=-1,o=n.map(l(t)?u:r,function(n,t){return[[t,n]]}).sort(function(n,t){return-(n[1].length-t[1].length)});if(n.each(o,function(n,t){var r=t[1];if(i.substr(f,r.length).toLowerCase()===r.toLowerCase())return e=t[0],f+=r.length,!1}),e!==-1)return e+1;throw"Unknown name at position "+f;},b=function(){if(i.charAt(f)!==t.charAt(o))throw"Unexpected literal at position "+f;f++},o=0;o<t.length;o++)if(w)t.charAt(o)!=="'"||l("'")?b():w=!1;else switch(t.charAt(o)){case"d":h=c("d");break;case"D":k("D",g,nt);break;case"o":p=c("o");break;case"m":s=c("m");break;case"M":s=k("M",tt,it);break;case"y":e=c("y");break;case"@":u=new Date(c("@"));e=u.getFullYear();s=u.getMonth()+1;h=u.getDate();break;case"!":u=new Date((c("!")-this._ticksTo1970)/1e4);e=u.getFullYear();s=u.getMonth()+1;h=u.getDate();break;case"'":l("'")?b():w=!0;break;default:b()}if(f<i.length&&(v=i.substr(f),!/^\s+/.test(v)))throw"Extra/unparsed characters found in date: "+v;if(e===-1?e=(new Date).getFullYear():e<100&&(e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e<=d?0:-100)),p>-1){s=1;h=p;do{if(a=this._getDaysInMonth(e,s-1),h<=a)break;s++;h-=a}while(1)}if(u=this._daylightSavingAdjust(new Date(e,s-1,h)),u.getFullYear()!==e||u.getMonth()+1!==s||u.getDate()!==h)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*864e9,formatDate:function(n,t,i){if(!t)return"";var u,h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,c=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,f=function(t){var i=u+1<n.length&&n.charAt(u+1)===t;return i&&u++,i},e=function(n,t,i){var r=""+t;if(f(n))while(r.length<i)r="0"+r;return r},s=function(n,t,i,r){return f(n)?r[t]:i[t]},r="",o=!1;if(t)for(u=0;u<n.length;u++)if(o)n.charAt(u)!=="'"||f("'")?r+=n.charAt(u):o=!1;else switch(n.charAt(u)){case"d":r+=e("d",t.getDate(),2);break;case"D":r+=s("D",t.getDay(),h,c);break;case"o":r+=e("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":r+=e("m",t.getMonth()+1,2);break;case"M":r+=s("M",t.getMonth(),l,a);break;case"y":r+=f("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":r+=t.getTime();break;case"!":r+=t.getTime()*1e4+this._ticksTo1970;break;case"'":f("'")?r+="'":o=!0;break;default:r+=n.charAt(u)}return r},_possibleChars:function(n){for(var i="",r=!1,u=function(i){var r=t+1<n.length&&n.charAt(t+1)===i;return r&&t++,r},t=0;t<n.length;t++)if(r)n.charAt(t)!=="'"||u("'")?i+=n.charAt(t):r=!1;else switch(n.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":u("'")?i+="'":r=!0;break;default:i+=n.charAt(t)}return i},_get:function(n,t){return n.settings[t]!==undefined?n.settings[t]:this._defaults[t]},_setDateFromField:function(n,t){if(n.input.val()!==n.lastVal){var f=this._get(n,"dateFormat"),r=n.lastVal=n.input?n.input.val():null,u=this._getDefaultDate(n),i=u,e=this._getFormatConfig(n);try{i=this.parseDate(f,r,e)||u}catch(o){r=t?"":r}n.selectedDay=i.getDate();n.drawMonth=n.selectedMonth=i.getMonth();n.drawYear=n.selectedYear=i.getFullYear();n.currentDay=r?i.getDate():0;n.currentMonth=r?i.getMonth():0;n.currentYear=r?i.getFullYear():0;this._adjustInstDate(n)}},_getDefaultDate:function(n){return this._restrictMinMax(n,this._determineDate(n,this._get(n,"defaultDate"),new Date))},_determineDate:function(t,i,r){var f=function(n){var t=new Date;return t.setDate(t.getDate()+n),t},e=function(i){try{return n.datepicker.parseDate(n.datepicker._get(t,"dateFormat"),i,n.datepicker._getFormatConfig(t))}catch(h){}for(var o=(i.toLowerCase().match(/^c/)?n.datepicker._getDate(t):null)||new Date,f=o.getFullYear(),e=o.getMonth(),r=o.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=s.exec(i);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=parseInt(u[1],10)*7;break;case"m":case"M":e+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e));break;case"y":case"Y":f+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e))}u=s.exec(i)}return new Date(f,e,r)},u=i==null||i===""?r:typeof i=="string"?e(i):typeof i=="number"?isNaN(i)?r:f(i):new Date(i.getTime());return u=u&&u.toString()==="Invalid Date"?r:u,u&&(u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0)),this._daylightSavingAdjust(u)},_daylightSavingAdjust:function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},_setDate:function(n,t,i){var u=!t,f=n.selectedMonth,e=n.selectedYear,r=this._restrictMinMax(n,this._determineDate(n,t,new Date));n.selectedDay=n.currentDay=r.getDate();n.drawMonth=n.selectedMonth=n.currentMonth=r.getMonth();n.drawYear=n.selectedYear=n.currentYear=r.getFullYear();f===n.selectedMonth&&e===n.selectedYear||i||this._notifyChange(n);this._adjustInstDate(n);n.input&&n.input.val(u?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&n.input.val()===""?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_attachHandlers:function(t){var r=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){n.datepicker._adjustDate(i,-r,"M")},next:function(){n.datepicker._adjustDate(i,+r,"M")},hide:function(){n.datepicker._hideDatepicker()},today:function(){n.datepicker._gotoToday(i)},selectDay:function(){return n.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return n.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return n.datepicker._selectMonthYear(i,this,"Y"),!1}};n(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(n){var b,s,rt,h,ut,k,ft,et,ri,c,ot,ui,fi,ei,oi,st,g,si,ht,nt,f,y,ct,p,lt,l,u,at,vt,yt,pt,tt,wt,i,bt,kt,d,a,it,dt=new Date,gt=this._daylightSavingAdjust(new Date(dt.getFullYear(),dt.getMonth(),dt.getDate())),e=this._get(n,"isRTL"),li=this._get(n,"showButtonPanel"),hi=this._get(n,"hideIfNoPrevNext"),ni=this._get(n,"navigationAsDateFormat"),o=this._getNumberOfMonths(n),ai=this._get(n,"showCurrentAtPos"),ci=this._get(n,"stepMonths"),ti=o[0]!==1||o[1]!==1,ii=this._daylightSavingAdjust(n.currentDay?new Date(n.currentYear,n.currentMonth,n.currentDay):new Date(9999,9,9)),w=this._getMinMaxDate(n,"min"),v=this._getMinMaxDate(n,"max"),t=n.drawMonth-ai,r=n.drawYear;if(t<0&&(t+=12,r--),v)for(b=this._daylightSavingAdjust(new Date(v.getFullYear(),v.getMonth()-o[0]*o[1]+1,v.getDate())),b=w&&b<w?w:b;this._daylightSavingAdjust(new Date(r,t,1))>b;)t--,t<0&&(t=11,r--);for(n.drawMonth=t,n.drawYear=r,s=this._get(n,"prevText"),s=ni?this.formatDate(s,this._daylightSavingAdjust(new Date(r,t-ci,1)),this._getFormatConfig(n)):s,rt=this._canAdjustMonth(n,-1,r,t)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(e?"e":"w")+"'>"+s+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(e?"e":"w")+"'>"+s+"<\/span><\/a>",h=this._get(n,"nextText"),h=ni?this.formatDate(h,this._daylightSavingAdjust(new Date(r,t+ci,1)),this._getFormatConfig(n)):h,ut=this._canAdjustMonth(n,1,r,t)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(e?"w":"e")+"'>"+h+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(e?"w":"e")+"'>"+h+"<\/span><\/a>",k=this._get(n,"currentText"),ft=this._get(n,"gotoCurrent")&&n.currentDay?ii:gt,k=ni?this.formatDate(k,ft,this._getFormatConfig(n)):k,et=n.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(n,"closeText")+"<\/button>",ri=li?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(e?et:"")+(this._isInRange(n,ft)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+k+"<\/button>":"")+(e?"":et)+"<\/div>":"",c=parseInt(this._get(n,"firstDay"),10),c=isNaN(c)?0:c,ot=this._get(n,"showWeek"),ui=this._get(n,"dayNames"),fi=this._get(n,"dayNamesMin"),ei=this._get(n,"monthNames"),oi=this._get(n,"monthNamesShort"),st=this._get(n,"beforeShowDay"),g=this._get(n,"showOtherMonths"),si=this._get(n,"selectOtherMonths"),ht=this._getDefaultDate(n),nt="",f,y=0;y<o[0];y++){for(ct="",this.maxRows=4,p=0;p<o[1];p++){if(lt=this._daylightSavingAdjust(new Date(r,t,n.selectedDay)),l=" ui-corner-all",u="",ti){if(u+="<div class='ui-datepicker-group",o[1]>1)switch(p){case 0:u+=" ui-datepicker-group-first";l=" ui-corner-"+(e?"right":"left");break;case o[1]-1:u+=" ui-datepicker-group-last";l=" ui-corner-"+(e?"left":"right");break;default:u+=" ui-datepicker-group-middle";l=""}u+="'>"}for(u+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+l+"'>"+(/all|left/.test(l)&&y===0?e?ut:rt:"")+(/all|right/.test(l)&&y===0?e?rt:ut:"")+this._generateMonthYearHeader(n,t,r,w,v,y>0||p>0,ei,oi)+"<\/div><table class='ui-datepicker-calendar'><thead><tr>",at=ot?"<th class='ui-datepicker-week-col'>"+this._get(n,"weekHeader")+"<\/th>":"",f=0;f<7;f++)vt=(f+c)%7,at+="<th scope='col'"+((f+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+ui[vt]+"'>"+fi[vt]+"<\/span><\/th>";for(u+=at+"<\/tr><\/thead><tbody>",yt=this._getDaysInMonth(r,t),r===n.selectedYear&&t===n.selectedMonth&&(n.selectedDay=Math.min(n.selectedDay,yt)),pt=(this._getFirstDayOfMonth(r,t)-c+7)%7,tt=Math.ceil((pt+yt)/7),wt=ti?this.maxRows>tt?this.maxRows:tt:tt,this.maxRows=wt,i=this._daylightSavingAdjust(new Date(r,t,1-pt)),bt=0;bt<wt;bt++){for(u+="<tr>",kt=ot?"<td class='ui-datepicker-week-col'>"+this._get(n,"calculateWeek")(i)+"<\/td>":"",f=0;f<7;f++)d=st?st.apply(n.input?n.input[0]:null,[i]):[!0,""],a=i.getMonth()!==t,it=a&&!si||!d[0]||w&&i<w||v&&i>v,kt+="<td class='"+((f+c+6)%7>=5?" ui-datepicker-week-end":"")+(a?" ui-datepicker-other-month":"")+(i.getTime()===lt.getTime()&&t===n.selectedMonth&&n._keyEvent||ht.getTime()===i.getTime()&&ht.getTime()===lt.getTime()?" "+this._dayOverClass:"")+(it?" "+this._unselectableClass+" ui-state-disabled":"")+(a&&!g?"":" "+d[1]+(i.getTime()===ii.getTime()?" "+this._currentClass:"")+(i.getTime()===gt.getTime()?" ui-datepicker-today":""))+"'"+((!a||g)&&d[2]?" title='"+d[2].replace(/'/g,"&#39;")+"'":"")+(it?"":" data-handler='selectDay' data-event='click' data-month='"+i.getMonth()+"' data-year='"+i.getFullYear()+"'")+">"+(a&&!g?"&#xa0;":it?"<span class='ui-state-default'>"+i.getDate()+"<\/span>":"<a class='ui-state-default"+(i.getTime()===gt.getTime()?" ui-state-highlight":"")+(i.getTime()===ii.getTime()?" ui-state-active":"")+(a?" ui-priority-secondary":"")+"' href='#'>"+i.getDate()+"<\/a>")+"<\/td>",i.setDate(i.getDate()+1),i=this._daylightSavingAdjust(i);u+=kt+"<\/tr>"}t++;t>11&&(t=0,r++);u+="<\/tbody><\/table>"+(ti?"<\/div>"+(o[0]>0&&p===o[1]-1?"<div class='ui-datepicker-row-break'><\/div>":""):"");ct+=u}nt+=ct}return nt+=ri,n._keyEvent=!1,nt},_generateMonthYearHeader:function(n,t,i,r,u,f,e,o){var k,d,h,v,y,p,s,a,w=this._get(n,"changeMonth"),b=this._get(n,"changeYear"),g=this._get(n,"showMonthAfterYear"),c="<div class='ui-datepicker-title'>",l="";if(f||!w)l+="<span class='ui-datepicker-month'>"+e[t]+"<\/span>";else{for(k=r&&r.getFullYear()===i,d=u&&u.getFullYear()===i,l+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;h<12;h++)(!k||h>=r.getMonth())&&(!d||h<=u.getMonth())&&(l+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+o[h]+"<\/option>");l+="<\/select>"}if(g||(c+=l+(f||!(w&&b)?"&#xa0;":"")),!n.yearshtml)if(n.yearshtml="",f||!b)c+="<span class='ui-datepicker-year'>"+i+"<\/span>";else{for(v=this._get(n,"yearRange").split(":"),y=(new Date).getFullYear(),p=function(n){var t=n.match(/c[+\-].*/)?i+parseInt(n.substring(1),10):n.match(/[+\-].*/)?y+parseInt(n,10):parseInt(n,10);return isNaN(t)?y:t},s=p(v[0]),a=Math.max(s,p(v[1]||"")),s=r?Math.max(s,r.getFullYear()):s,a=u?Math.min(a,u.getFullYear()):a,n.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";s<=a;s++)n.yearshtml+="<option value='"+s+"'"+(s===i?" selected='selected'":"")+">"+s+"<\/option>";n.yearshtml+="<\/select>";c+=n.yearshtml;n.yearshtml=null}return c+=this._get(n,"yearSuffix"),g&&(c+=(f||!(w&&b)?"&#xa0;":"")+l),c+"<\/div>"},_adjustInstDate:function(n,t,i){var u=n.drawYear+(i==="Y"?t:0),f=n.drawMonth+(i==="M"?t:0),e=Math.min(n.selectedDay,this._getDaysInMonth(u,f))+(i==="D"?t:0),r=this._restrictMinMax(n,this._daylightSavingAdjust(new Date(u,f,e)));n.selectedDay=r.getDate();n.drawMonth=n.selectedMonth=r.getMonth();n.drawYear=n.selectedYear=r.getFullYear();(i==="M"||i==="Y")&&this._notifyChange(n)},_restrictMinMax:function(n,t){var i=this._getMinMaxDate(n,"min"),r=this._getMinMaxDate(n,"max"),u=i&&t<i?i:t;return r&&u>r?r:u},_notifyChange:function(n){var t=this._get(n,"onChangeMonthYear");t&&t.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){var t=this._get(n,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(n,t){return this._determineDate(n,this._get(n,t+"Date"),null)},_getDaysInMonth:function(n,t){return 32-this._daylightSavingAdjust(new Date(n,t,32)).getDate()},_getFirstDayOfMonth:function(n,t){return new Date(n,t,1).getDay()},_canAdjustMonth:function(n,t,i,r){var f=this._getNumberOfMonths(n),u=this._daylightSavingAdjust(new Date(i,r+(t<0?t:f[0]*f[1]),1));return t<0&&u.setDate(this._getDaysInMonth(u.getFullYear(),u.getMonth())),this._isInRange(n,u)},_isInRange:function(n,t){var i,f,e=this._getMinMaxDate(n,"min"),o=this._getMinMaxDate(n,"max"),r=null,u=null,s=this._get(n,"yearRange");return s&&(i=s.split(":"),f=(new Date).getFullYear(),r=parseInt(i[0],10),u=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=f),i[1].match(/[+\-].*/)&&(u+=f)),(!e||t.getTime()>=e.getTime())&&(!o||t.getTime()<=o.getTime())&&(!r||t.getFullYear()>=r)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(n){var t=this._get(n,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(n,"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,t,i,r){t||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear);var u=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));return this.formatDate(this._get(n,"dateFormat"),u,this._getFormatConfig(n))}});n.fn.datepicker=function(t){if(!this.length)return this;n.datepicker.initialized||(n(document).mousedown(n.datepicker._checkExternalClick),n.datepicker.initialized=!0);n("#"+n.datepicker._mainDivId).length===0&&n("body").append(n.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return typeof t=="string"&&(t==="isDisabled"||t==="getDate"||t==="widget")?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):this.each(function(){typeof t=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this].concat(i)):n.datepicker._attachDatepicker(this,t)})};n.datepicker=new p;n.datepicker.initialized=!1;n.datepicker.uuid=(new Date).getTime();n.datepicker.version="1.11.2";et=n.datepicker;
/*!
 * jQuery UI Draggable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
n.widget("ui.draggable",n.ui.mouse,{version:"1.11.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative();this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(n,t){this._super(n,t);n==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return(this._blurActiveElement(t),this.helper||i.disabled||n(t.target).closest(".ui-resizable-handle").length>0)?!1:(this.handle=this._getHandle(t),!this.handle)?!1:(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=n(this);return n("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&i.activeElement.nodeName.toLowerCase()!=="body"&&n(i.activeElement).blur()}catch(r){}},_mouseStart:function(t){var i=this.options;return(this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return n(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1)?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(n){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:n.pageX-this.offset.left,top:n.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var r=this,i=!1;return n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!i||this.options.revert==="valid"&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!n(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var r=this.options,u=n.isFunction(r.helper),i=u?n(r.helper.apply(this.element[0],[t])):r.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(r.appendTo==="parent"?this.element[0].parentNode:r.appendTo),u&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(n){return/(html|body)/i.test(n.tagName)||n===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==i&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var n=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:n.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f,t,i,r=this.options,u=this.document[0];if(this.relativeContainer=null,!r.containment){this.containment=null;return}if(r.containment==="window"){this.containment=[n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,n(window).scrollLeft()+n(window).width()-this.helperProportions.width-this.margins.left,n(window).scrollTop()+(n(window).height()||u.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment==="document"){this.containment=[0,0,n(u).width()-this.helperProportions.width-this.margins.left,(n(u).height()||u.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment.constructor===Array){this.containment=r.containment;return}(r.containment==="parent"&&(r.containment=this.helper[0].parentNode),t=n(r.containment),i=t[0],i)&&(f=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(f?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)},_convertPositionTo:function(n,t){t||(t=this.position);var i=n==="absolute"?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.offset.scroll.top:r?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.offset.scroll.left:r?0:this.offset.scroll.left)*i}},_generatePosition:function(n,t){var i,s,u,f,r=this.options,h=this._isRootNode(this.scrollParent[0]),e=n.pageX,o=n.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,n.pageX-this.offset.click.left<i[0]&&(e=i[0]+this.offset.click.left),n.pageY-this.offset.click.top<i[1]&&(o=i[1]+this.offset.click.top),n.pageX-this.offset.click.left>i[2]&&(e=i[2]+this.offset.click.left),n.pageY-this.offset.click.top>i[3]&&(o=i[3]+this.offset.click.top)),r.grid&&(u=r.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,o=i?u-this.offset.click.top>=i[1]||u-this.offset.click.top>i[3]?u:u-this.offset.click.top>=i[1]?u-r.grid[1]:u+r.grid[1]:u,f=r.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,e=i?f-this.offset.click.left>=i[0]||f-this.offset.click.left>i[2]?f:f-this.offset.click.left>=i[0]?f-r.grid[0]:f+r.grid[0]:f),r.axis==="y"&&(e=this.originalPageX),r.axis==="x"&&(o=this.originalPageY)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){this.options.axis!=="y"&&this.helper.css("right")!=="auto"&&(this.helper.width(this.helper.width()),this.helper.css("right","auto"));this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,r){var u=n.extend({},i,{item:r.element});r.sortables=[];n(r.options.connectToSortable).each(function(){var i=n(this).sortable("instance");i&&!i.options.disabled&&(r.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,u))})},stop:function(t,i,r){var u=n.extend({},i,{item:r.element});r.cancelHelperRemoval=!1;n.each(r.sortables,function(){var n=this;n.isOver?(n.isOver=0,r.cancelHelperRemoval=!0,n.cancelHelperRemoval=!1,n._storedCSS={position:n.placeholder.css("position"),top:n.placeholder.css("top"),left:n.placeholder.css("left")},n._mouseStop(t),n.options.helper=n.options._helper):(n.cancelHelperRemoval=!0,n._trigger("deactivate",t,u))})},drag:function(t,i,r){n.each(r.sortables,function(){var f=!1,u=this;u.positionAbs=r.positionAbs;u.helperProportions=r.helperProportions;u.offset.click=r.offset.click;u._intersectsWith(u.containerCache)&&(f=!0,n.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==u&&this._intersectsWith(this.containerCache)&&n.contains(u.element[0],this.element[0])&&(f=!1),f}));f?(u.isOver||(u.isOver=1,u.currentItem=i.helper.appendTo(u.element).data("ui-sortable-item",!0),u.options._helper=u.options.helper,u.options.helper=function(){return i.helper[0]},t.target=u.currentItem[0],u._mouseCapture(t,!0),u._mouseStart(t,!0,!0),u.offset.click.top=r.offset.click.top,u.offset.click.left=r.offset.click.left,u.offset.parent.left-=r.offset.parent.left-u.offset.parent.left,u.offset.parent.top-=r.offset.parent.top-u.offset.parent.top,r._trigger("toSortable",t),r.dropped=u.element,n.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,u.fromOutside=r),u.currentItem&&(u._mouseDrag(t),i.position=u.position)):u.isOver&&(u.isOver=0,u.cancelHelperRemoval=!0,u.options._revert=u.options.revert,u.options.revert=!1,u._trigger("out",t,u._uiHash(u)),u._mouseStop(t,!0),u.options.revert=u.options._revert,u.options.helper=u.options._helper,u.placeholder&&u.placeholder.remove(),r._refreshOffsets(t),i.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,n.each(r.sortables,function(){this.refreshPositions()}))})}});n.ui.plugin.add("draggable","cursor",{start:function(t,i,r){var u=n("body"),f=r.options;u.css("cursor")&&(f._cursor=u.css("cursor"));u.css("cursor",f.cursor)},stop:function(t,i,r){var u=r.options;u._cursor&&n("body").css("cursor",u._cursor)}});n.ui.plugin.add("draggable","opacity",{start:function(t,i,r){var u=n(i.helper),f=r.options;u.css("opacity")&&(f._opacity=u.css("opacity"));u.css("opacity",f.opacity)},stop:function(t,i,r){var u=r.options;u._opacity&&n(i.helper).css("opacity",u._opacity)}});n.ui.plugin.add("draggable","scroll",{start:function(n,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1));i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,r){var u=r.options,o=!1,e=r.scrollParentNotHidden[0],f=r.document[0];e!==f&&e.tagName!=="HTML"?(u.axis&&u.axis==="x"||(r.overflowOffset.top+e.offsetHeight-t.pageY<u.scrollSensitivity?e.scrollTop=o=e.scrollTop+u.scrollSpeed:t.pageY-r.overflowOffset.top<u.scrollSensitivity&&(e.scrollTop=o=e.scrollTop-u.scrollSpeed)),u.axis&&u.axis==="y"||(r.overflowOffset.left+e.offsetWidth-t.pageX<u.scrollSensitivity?e.scrollLeft=o=e.scrollLeft+u.scrollSpeed:t.pageX-r.overflowOffset.left<u.scrollSensitivity&&(e.scrollLeft=o=e.scrollLeft-u.scrollSpeed))):(u.axis&&u.axis==="x"||(t.pageY-n(f).scrollTop()<u.scrollSensitivity?o=n(f).scrollTop(n(f).scrollTop()-u.scrollSpeed):n(window).height()-(t.pageY-n(f).scrollTop())<u.scrollSensitivity&&(o=n(f).scrollTop(n(f).scrollTop()+u.scrollSpeed))),u.axis&&u.axis==="y"||(t.pageX-n(f).scrollLeft()<u.scrollSensitivity?o=n(f).scrollLeft(n(f).scrollLeft()-u.scrollSpeed):n(window).width()-(t.pageX-n(f).scrollLeft())<u.scrollSensitivity&&(o=n(f).scrollLeft(n(f).scrollLeft()+u.scrollSpeed))));o!==!1&&n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}});n.ui.plugin.add("draggable","snap",{start:function(t,i,r){var u=r.options;r.snapElements=[];n(u.snap.constructor!==String?u.snap.items||":data(ui-draggable)":u.snap).each(function(){var t=n(this),i=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,r){for(var e,o,s,h,c,a,l,v,w,b=r.options,f=b.snapTolerance,y=i.offset.left,k=y+r.helperProportions.width,p=i.offset.top,d=p+r.helperProportions.height,u=r.snapElements.length-1;u>=0;u--){if(c=r.snapElements[u].left-r.margins.left,a=c+r.snapElements[u].width,l=r.snapElements[u].top-r.margins.top,v=l+r.snapElements[u].height,k<c-f||y>a+f||d<l-f||p>v+f||!n.contains(r.snapElements[u].item.ownerDocument,r.snapElements[u].item)){r.snapElements[u].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item}));r.snapElements[u].snapping=!1;continue}b.snapMode!=="inner"&&(e=Math.abs(l-d)<=f,o=Math.abs(v-p)<=f,s=Math.abs(c-k)<=f,h=Math.abs(a-y)<=f,e&&(i.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),o&&(i.position.top=r._convertPositionTo("relative",{top:v,left:0}).top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a}).left));w=e||o||s||h;b.snapMode!=="outer"&&(e=Math.abs(l-p)<=f,o=Math.abs(v-d)<=f,s=Math.abs(c-y)<=f,h=Math.abs(a-k)<=f,e&&(i.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),o&&(i.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c}).left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left));!r.snapElements[u].snapping&&(e||o||s||h||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item}));r.snapElements[u].snapping=e||o||s||h||w}}});n.ui.plugin.add("draggable","stack",{start:function(t,i,r){var f,e=r.options,u=n.makeArray(n(e.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)});u.length&&(f=parseInt(n(u[0]).css("zIndex"),10)||0,n(u).each(function(t){n(this).css("zIndex",f+t)}),this.css("zIndex",f+u.length))}});n.ui.plugin.add("draggable","zIndex",{start:function(t,i,r){var u=n(i.helper),f=r.options;u.css("zIndex")&&(f._zIndex=u.css("zIndex"));u.css("zIndex",f.zIndex)},stop:function(t,i,r){var u=r.options;u._zIndex&&n(i.helper).css("zIndex",u._zIndex)}});ot=n.ui.draggable;
/*!
 * jQuery UI Resizable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */
n.widget("ui.resizable",n.ui.mouse,{version:"1.11.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(n){return parseInt(n,10)||0},_isNumber:function(n){return!isNaN(parseInt(n,10))},_hasScroll:function(t,i){if(n(t).css("overflow")==="hidden")return!1;var r=i&&i==="left"?"scrollLeft":"scrollTop",u=!1;return t[r]>0?!0:(t[r]=1,u=t[r]>0,t[r]=0,u)},_create:function(){var e,f,r,i,o,u=this,t=this.options;if(this.element.addClass("ui-resizable"),n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'><\/div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=t.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for(this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},f=0;f<e.length;f++)r=n.trim(e[f]),o="ui-resizable-"+r,i=n("<div class='ui-resizable-handle "+o+"'><\/div>"),i.css({zIndex:t.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i);this._renderAxis=function(t){var i,r,u,f;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=this.element.children(this.handles[i]).first().show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=n(this.handles[i],this.element),f=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),u=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(u,f),this._proportionallyResize()),!n(this.handles[i]).length};this._renderAxis(this.element);this._handles=n(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){u.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),u.axis=i&&i[1]?i[1]:"se")});t.autoHide&&(this._handles.hide(),n(this.element).addClass("ui-resizable-autohide").mouseenter(function(){t.disabled||(n(this).removeClass("ui-resizable-autohide"),u._handles.show())}).mouseleave(function(){t.disabled||u.resizing||(n(this).addClass("ui-resizable-autohide"),u._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var r,i,u=!1;for(r in this.handles)i=n(this.handles[r])[0],(i===t.target||n.contains(i,t.target))&&(u=!0);return!this.options.disabled&&u},_mouseStart:function(t){var u,f,e,r=this.options,i=this.element;return this.resizing=!0,this._renderProxy(),u=this._num(this.helper.css("left")),f=this._num(this.helper.css("top")),r.containment&&(u+=n(r.containment).scrollLeft()||0,f+=n(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:u,top:f},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalPosition={left:u,top:f},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor",e==="auto"?this.axis+"-resize":e),i.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,r,u=this.originalMousePosition,e=this.axis,o=t.pageX-u.left||0,s=t.pageY-u.top||0,f=this._change[e];return(this._updatePrevProperties(),!f)?!1:(i=f.apply(this,[t,o,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),n.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var r,u,f,e,o,s,h,c=this.options,i=this;return this._helper&&(r=this._proportionallyResizeElements,u=r.length&&/textarea/i.test(r[0].nodeName),f=u&&this._hasScroll(r[0],"left")?0:i.sizeDiff.height,e=u?0:i.sizeDiff.width,o={width:i.helper.width()-e,height:i.helper.height()-f},s=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null,c.animate||this.element.css(n.extend(o,{top:h,left:s})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!c.animate&&this._proportionallyResize()),n("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var n={};return this.position.top!==this.prevPosition.top&&(n.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(n.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(n.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(n.height=this.size.height+"px"),this.helper.css(n),n},_updateVirtualBoundaries:function(n){var r,u,f,e,t,i=this.options;t={minWidth:this._isNumber(i.minWidth)?i.minWidth:0,maxWidth:this._isNumber(i.maxWidth)?i.maxWidth:Infinity,minHeight:this._isNumber(i.minHeight)?i.minHeight:0,maxHeight:this._isNumber(i.maxHeight)?i.maxHeight:Infinity};(this._aspectRatio||n)&&(r=t.minHeight*this.aspectRatio,f=t.minWidth/this.aspectRatio,u=t.maxHeight*this.aspectRatio,e=t.maxWidth/this.aspectRatio,r>t.minWidth&&(t.minWidth=r),f>t.minHeight&&(t.minHeight=f),u<t.maxWidth&&(t.maxWidth=u),e<t.maxHeight&&(t.maxHeight=e));this._vBoundaries=t},_updateCache:function(n){this.offset=this.helper.offset();this._isNumber(n.left)&&(this.position.left=n.left);this._isNumber(n.top)&&(this.position.top=n.top);this._isNumber(n.height)&&(this.size.height=n.height);this._isNumber(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var t=this.position,i=this.size,r=this.axis;return this._isNumber(n.height)?n.width=n.height*this.aspectRatio:this._isNumber(n.width)&&(n.height=n.width/this.aspectRatio),r==="sw"&&(n.left=t.left+(i.width-n.width),n.top=null),r==="nw"&&(n.top=t.top+(i.height-n.height),n.left=t.left+(i.width-n.width)),n},_respectSize:function(n){var t=this._vBoundaries,i=this.axis,r=this._isNumber(n.width)&&t.maxWidth&&t.maxWidth<n.width,u=this._isNumber(n.height)&&t.maxHeight&&t.maxHeight<n.height,f=this._isNumber(n.width)&&t.minWidth&&t.minWidth>n.width,e=this._isNumber(n.height)&&t.minHeight&&t.minHeight>n.height,o=this.originalPosition.left+this.originalSize.width,s=this.position.top+this.size.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return f&&(n.width=t.minWidth),e&&(n.height=t.minHeight),r&&(n.width=t.maxWidth),u&&(n.height=t.maxHeight),f&&h&&(n.left=o-t.minWidth),r&&h&&(n.left=o-t.maxWidth),e&&c&&(n.top=s-t.minHeight),u&&c&&(n.top=s-t.maxHeight),n.width||n.height||n.left||!n.top?n.width||n.height||n.top||!n.left||(n.left=null):n.top=null,n},_getPaddingPlusBorderDimensions:function(n){for(var t=0,i=[],r=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],u=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];t<4;t++)i[t]=parseInt(r[t],10)||0,i[t]+=parseInt(u[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var n,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)n=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(n)),n.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset();this._helper?(this.helper=this.helper||n("<div style='overflow:hidden;'><\/div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){var i=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:i.width-t}},n:function(n,t,i){var r=this.originalSize,u=this.originalPosition;return{top:u.top+i,height:r.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.ui.plugin.call(this,t,[i,this.ui()]);t!=="resize"&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});n.ui.plugin.add("resizable","animate",{stop:function(t){var i=n(this).resizable("instance"),u=i.options,r=i._proportionallyResizeElements,f=r.length&&/textarea/i.test(r[0].nodeName),s=f&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,h=f?0:i.sizeDiff.width,c={width:i.size.width-h,height:i.size.height-s},e=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,o=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(n.extend(c,o&&e?{top:o,left:e}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var u={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&n(r[0]).css({width:u.width,height:u.height});i._updateCache(u);i._propagate("resize",t)}})}});n.ui.plugin.add("resizable","containment",{start:function(){var r,f,e,o,s,h,c,t=n(this).resizable("instance"),l=t.options,a=t.element,u=l.containment,i=u instanceof n?u.get(0):/parent/.test(u)?a.parent().get(0):u;i&&(t.containerElement=n(i),/document/.test(u)||u===document?(t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight}):(r=n(i),f=[],n(["Top","Right","Left","Bottom"]).each(function(n,i){f[n]=t._num(r.css("padding"+i))}),t.containerOffset=r.offset(),t.containerPosition=r.position(),t.containerSize={height:r.innerHeight()-f[3],width:r.innerWidth()-f[1]},e=t.containerOffset,o=t.containerSize.height,s=t.containerSize.width,h=t._hasScroll(i,"left")?i.scrollWidth:s,c=t._hasScroll(i)?i.scrollHeight:o,t.parentData={element:i,left:e.left,top:e.top,width:h,height:c}))},resize:function(t){var o,s,h,c,i=n(this).resizable("instance"),v=i.options,r=i.containerOffset,l=i.position,f=i._aspectRatio||t.shiftKey,e={top:0,left:0},a=i.containerElement,u=!0;a[0]!==document&&/static/.test(a.css("position"))&&(e=r);l.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-e.left),f&&(i.size.height=i.size.width/i.aspectRatio,u=!1),i.position.left=v.helper?r.left:0);l.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),f&&(i.size.width=i.size.height*i.aspectRatio,u=!1),i.position.top=i._helper?r.top:0);h=i.containerElement.get(0)===i.element.parent().get(0);c=/relative|absolute/.test(i.containerElement.css("position"));h&&c?(i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top):(i.offset.left=i.element.offset().left,i.offset.top=i.element.offset().top);o=Math.abs(i.sizeDiff.width+(i._helper?i.offset.left-e.left:i.offset.left-r.left));s=Math.abs(i.sizeDiff.height+(i._helper?i.offset.top-e.top:i.offset.top-r.top));o+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-o,f&&(i.size.height=i.size.width/i.aspectRatio,u=!1));s+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-s,f&&(i.size.width=i.size.height*i.aspectRatio,u=!1));u||(i.position.left=i.prevPosition.left,i.position.top=i.prevPosition.top,i.size.width=i.prevSize.width,i.size.height=i.prevSize.height)},stop:function(){var t=n(this).resizable("instance"),r=t.options,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width,h=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h});t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h})}});n.ui.plugin.add("resizable","alsoResize",{start:function(){var r=n(this).resizable("instance"),t=r.options,i=function(t){n(t).each(function(){var t=n(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof t.alsoResize!="object"||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):n.each(t.alsoResize,function(n){i(n)})},resize:function(t,i){var r=n(this).resizable("instance"),u=r.options,f=r.originalSize,e=r.originalPosition,s={height:r.size.height-f.height||0,width:r.size.width-f.width||0,top:r.position.top-e.top||0,left:r.position.left-e.left||0},o=function(t,r){n(t).each(function(){var t=n(this),f=n(this).data("ui-resizable-alsoresize"),u={},e=r&&r.length?r:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(e,function(n,t){var i=(f[t]||0)+(s[t]||0);i&&i>=0&&(u[t]=i||null)});t.css(u)})};typeof u.alsoResize!="object"||u.alsoResize.nodeType?o(u.alsoResize):n.each(u.alsoResize,function(n,t){o(n,t)})},stop:function(){n(this).removeData("resizable-alsoresize")}});n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).resizable("instance"),i=t.options,r=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:"");t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}});n.ui.plugin.add("resizable","grid",{resize:function(){var h,t=n(this).resizable("instance"),i=t.options,y=t.size,e=t.originalSize,o=t.originalPosition,c=t.axis,l=typeof i.grid=="number"?[i.grid,i.grid]:i.grid,s=l[0]||1,f=l[1]||1,a=Math.round((y.width-e.width)/s)*s,v=Math.round((y.height-e.height)/f)*f,r=e.width+a,u=e.height+v,p=i.maxWidth&&i.maxWidth<r,w=i.maxHeight&&i.maxHeight<u,b=i.minWidth&&i.minWidth>r,k=i.minHeight&&i.minHeight>u;i.grid=l;b&&(r+=s);k&&(u+=f);p&&(r-=s);w&&(u-=f);/^(se|s|e)$/.test(c)?(t.size.width=r,t.size.height=u):/^(ne)$/.test(c)?(t.size.width=r,t.size.height=u,t.position.top=o.top-v):/^(sw)$/.test(c)?(t.size.width=r,t.size.height=u,t.position.left=o.left-a):((u-f<=0||r-s<=0)&&(h=t._getPaddingPlusBorderDimensions(this)),u-f>0?(t.size.height=u,t.position.top=o.top-v):(u=f-h.height,t.size.height=u,t.position.top=o.top+e.height-u),r-s>0?(t.size.width=r,t.position.left=o.left-a):(r=f-h.height,t.size.width=r,t.position.left=o.left+e.width-r))}});st=n.ui.resizable;
/*!
 * jQuery UI Dialog 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 */
ht=n.widget("ui.dialog",{version:"1.11.2",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=n(this).css(t).offset().top;i<0&&n(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&n.fn.draggable&&this._makeDraggable();this.options.resizable&&n.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?n(t):this.document.find(t||"body").eq(0)},_destroy:function(){var n,t=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);n=t.parent.children().eq(t.index);n.length&&n[0]!==this.element[0]?n.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:n.noop,enable:n.noop,close:function(t){var i,r=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement;i&&i.nodeName.toLowerCase()!=="body"&&n(i).blur()}catch(u){}this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var r=!1,f=this.uiDialog.siblings(".ui-front:visible").map(function(){return+n(this).css("z-index")}).get(),u=Math.max.apply(null,f);return u>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",u+1),r=!0),r&&!i&&this._trigger("focus",t),r},open:function(){var t=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0;this.opener=n(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,!0);this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1);this._show(this.uiDialog,this.options.show,function(){t._focusTabbable();t._trigger("focus")});this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var n=this._focusedElement;n||(n=this.element.find("[autofocus]"));n.length||(n=this.element.find(":tabbable"));n.length||(n=this.uiDialogButtonPane.find(":tabbable"));n.length||(n=this.uiDialogTitlebarClose.filter(":tabbable"));n.length||(n=this.uiDialog);n.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||n.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault();i.call(this);this._delay(i)},_createWrapper:function(){this.uiDialog=n("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===n.ui.keyCode.ESCAPE){t.preventDefault();this.close(t);return}if(t.keyCode===n.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),r=i.filter(":first"),u=i.filter(":last");t.target!==u[0]&&t.target!==this.uiDialog[0]||t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(this._delay(function(){u.focus()}),t.preventDefault()):(this._delay(function(){r.focus()}),t.preventDefault())}},mousedown:function(n){this._moveToTop(n)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=n("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(t){n(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}});this.uiDialogTitlebarClose=n("<button type='button'><\/button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(n){n.preventDefault();this.close(n)}});t=n("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(t);this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(n){this.options.title||n.html("&#160;");n.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=n("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=n("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var i=this,t=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),n.isEmptyObject(t)||n.isArray(t)&&!t.length){this.uiDialog.removeClass("ui-dialog-buttons");return}n.each(t,function(t,r){var u,f;r=n.isFunction(r)?{click:r,text:t}:r;r=n.extend({type:"button"},r);u=r.click;r.click=function(){u.apply(i.element[0],arguments)};f={icons:r.icons,text:r.showText};delete r.icons;delete r.showText;n("<button><\/button>",r).button(f).appendTo(i.uiButtonSet)});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function i(n){return{position:n.position,offset:n.offset}}var t=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,u){n(this).addClass("ui-dialog-dragging");t._blockFrames();t._trigger("dragStart",r,i(u))},drag:function(n,r){t._trigger("drag",n,i(r))},stop:function(u,f){var e=f.offset.left-t.document.scrollLeft(),o=f.offset.top-t.document.scrollTop();r.position={my:"left top",at:"left"+(e>=0?"+":"")+e+" top"+(o>=0?"+":"")+o,of:t.window};n(this).removeClass("ui-dialog-dragging");t._unblockFrames();t._trigger("dragStop",u,i(f))}})},_makeResizable:function(){function r(n){return{originalPosition:n.originalPosition,originalSize:n.originalSize,position:n.position,size:n.size}}var t=this,i=this.options,u=i.resizable,f=this.uiDialog.css("position"),e=typeof u=="string"?u:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:e,start:function(i,u){n(this).addClass("ui-dialog-resizing");t._blockFrames();t._trigger("resizeStart",i,r(u))},resize:function(n,i){t._trigger("resize",n,r(i))},stop:function(u,f){var e=t.uiDialog.offset(),o=e.left-t.document.scrollLeft(),s=e.top-t.document.scrollTop();i.height=t.uiDialog.height();i.width=t.uiDialog.width();i.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(s>=0?"+":"")+s,of:t.window};n(this).removeClass("ui-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",u,r(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget();this._focusedElement=n(t.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=n.inArray(this,t);i!==-1&&t.splice(i,1)},_trackingInstances:function(){var n=this.document.data("ui-dialog-instances");return n||(n=[],this.document.data("ui-dialog-instances",n)),n},_minHeight:function(){var n=this.options;return n.height==="auto"?n.minHeight:Math.min(n.minHeight,n.height)},_position:function(){var n=this.uiDialog.is(":visible");n||this.uiDialog.show();this.uiDialog.position(this.options.position);n||this.uiDialog.hide()},_setOptions:function(t){var i=this,r=!1,u={};n.each(t,function(n,t){i._setOption(n,t);n in i.sizeRelatedOptions&&(r=!0);n in i.resizableRelatedOptions&&(u[n]=t)});r&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",u)},_setOption:function(n,t){var u,r,i=this.uiDialog;(n==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t),n!=="disabled")&&(this._super(n,t),n==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),n==="buttons"&&this._createButtons(),n==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),n==="draggable"&&(u=i.is(":data(ui-draggable)"),u&&!t&&i.draggable("destroy"),!u&&t&&this._makeDraggable()),n==="position"&&this._position(),n==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),r||t===!1||this._makeResizable()),n==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,i,r,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});n.minWidth>n.width&&(n.width=n.minWidth);t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight();i=Math.max(0,n.minHeight-t);r=typeof n.maxHeight=="number"?Math.max(0,n.maxHeight-t):"none";n.height==="auto"?this.element.css({minHeight:i,maxHeight:r,height:"auto"}):this.element.height(Math.max(0,n.height-t));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=n(this);return n("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return n(t.target).closest(".ui-dialog").length?!0:!!n(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1});this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(n){t||this._allowInteraction(n)||(n.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=n("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var n=this.document.data("ui-dialog-overlays")-1;n?this.document.data("ui-dialog-overlays",n):this.document.unbind("focusin").removeData("ui-dialog-overlays");this.overlay.remove();this.overlay=null}}});
/*!
 * jQuery UI Droppable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/droppable/
 */
n.widget("ui.droppable",{version:"1.11.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,r=i.accept;this.isover=!1;this.isout=!0;this.accept=n.isFunction(r)?r:function(n){return n.is(r)};this.proportions=function(){if(arguments.length)t=arguments[0];else return t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(i.scope);i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){n.ui.ddmanager.droppables[t]=n.ui.ddmanager.droppables[t]||[];n.ui.ddmanager.droppables[t].push(this)},_splice:function(n){for(var t=0;t<n.length;t++)n[t]===this&&n.splice(t,1)},_destroy:function(){var t=n.ui.ddmanager.droppables[this.options.scope];this._splice(t);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if(t==="accept")this.accept=n.isFunction(i)?i:function(n){return n.is(i)};else if(t==="scope"){var r=n.ui.ddmanager.droppables[this.options.scope];this._splice(r);this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var r=i||n.ui.ddmanager.current,u=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=n(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===r.options.scope&&i.accept.call(i.element[0],r.currentItem||r.element)&&n.ui.intersect(r,n.extend(i,{offset:i.element.offset()}),i.options.tolerance,t))return u=!0,!1}),u)?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(n){return{draggable:n.currentItem||n.element,helper:n.helper,position:n.position,offset:n.positionAbs}}});n.ui.intersect=function(){function n(n,t,i){return n>=t&&n<t+i}return function(t,i,r,u){if(!i.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,h=o+t.helperProportions.width,c=s+t.helperProportions.height,f=i.offset.left,e=i.offset.top,l=f+i.proportions().width,a=e+i.proportions().height;switch(r){case"fit":return f<=o&&h<=l&&e<=s&&c<=a;case"intersect":return f<o+t.helperProportions.width/2&&h-t.helperProportions.width/2<l&&e<s+t.helperProportions.height/2&&c-t.helperProportions.height/2<a;case"pointer":return n(u.pageY,e,i.proportions().height)&&n(u.pageX,f,i.proportions().width);case"touch":return(s>=e&&s<=a||c>=e&&c<=a||s<e&&c>a)&&(o>=f&&o<=l||h>=f&&h<=l||o<f&&h>l);default:return!1}}}();n.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var r,f,u=n.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,e=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();n:for(r=0;r<u.length;r++)if(!u[r].options.disabled&&(!t||u[r].accept.call(u[r].element[0],t.currentItem||t.element))){for(f=0;f<e.length;f++)if(e[f]===u[r].element[0]){u[r].proportions().height=0;continue n}(u[r].visible=u[r].element.css("display")!=="none",u[r].visible)&&(o==="mousedown"&&u[r]._activate.call(u[r],i),u[r].offset=u[r].element.offset(),u[r].proportions({width:u[r].element[0].offsetWidth,height:u[r].element[0].offsetHeight}))}},drop:function(t,i){var r=!1;return n.each((n.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&n.ui.intersect(t,this,this.options.tolerance,i)&&(r=this._drop.call(this,i)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),r},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&n.ui.ddmanager.prepareOffsets(t,i);n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,e,f,o=n.ui.intersect(t,this,this.options.tolerance,i),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;u&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return n(this).droppable("instance").options.scope===e}),f.length&&(r=n(f[0]).droppable("instance"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,i)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,i),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable");t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)}};ct=n.ui.droppable;
/*!
 * jQuery UI Effects 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/effects-core/
 */
o="ui-effects-";s=n;n.effects={effect:{}};
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
(function(n,t){function e(n,t,i){var r=s[t.type]||{};return n==null?i||!t.def?null:t.def:(n=r.floor?~~n:parseFloat(n),isNaN(n))?t.def:r.mod?(n+r.mod)%r.mod:0>n?0:r.max<n?r.max:n}function l(t){var e=i(),o=e._rgba=[];return(t=t.toLowerCase(),r(v,function(n,i){var r,s=i.re.exec(t),h=s&&i.parse(s),f=i.space||"rgba";if(h)return r=e[f](h),e[u[f].cache]=r[u[f].cache],o=e._rgba=r._rgba,!1}),o.length)?(o.join()==="0,0,0,0"&&n.extend(o,f.transparent),e):f[t]}function o(n,t,i){return(i=(i+1)%1,i*6<1)?n+(t-n)*i*6:i*2<1?t:i*3<2?n+(t-n)*(2/3-i)*6:n}var a=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1]*2.55,n[2]*2.55,n[3]*2.55,n[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(n){return[n[1],n[2]/100,n[3]/100,n[4]]}}],i=n.Color=function(t,i,r,u){return new n.Color.fn.parse(t,i,r,u)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=i.support={},c=n("<p>")[0],f,r=n.each;c.style.cssText="background-color:rgba(1,1,1,.5)";h.rgba=c.style.backgroundColor.indexOf("rgba")>-1;r(u,function(n,t){t.cache="_"+n;t.props.alpha={idx:3,type:"percent",def:1}});i.fn=n.extend(i.prototype,{parse:function(o,s,h,c){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=n(o).css(s),s=t);var a=this,v=n.type(o),y=this._rgba=[];return(s!==t&&(o=[o,s,h,c],v="array"),v==="string")?this.parse(l(o)||f._default):v==="array"?(r(u.rgba.props,function(n,t){y[t.idx]=e(o[t.idx],t)}),this):v==="object"?(o instanceof i?r(u,function(n,t){o[t.cache]&&(a[t.cache]=o[t.cache].slice())}):r(u,function(t,i){var u=i.cache;r(i.props,function(n,t){if(!a[u]&&i.to){if(n==="alpha"||o[n]==null)return;a[u]=i.to(a._rgba)}a[u][t.idx]=e(o[n],t,!0)});a[u]&&n.inArray(null,a[u].slice(0,3))<0&&(a[u][3]=1,i.from&&(a._rgba=i.from(a[u])))}),this):void 0},is:function(n){var e=i(n),t=!0,f=this;return r(u,function(n,i){var o,u=e[i.cache];return u&&(o=f[i.cache]||i.to&&i.to(f._rgba)||[],r(i.props,function(n,i){if(u[i.idx]!=null)return t=u[i.idx]===o[i.idx]})),t}),t},_space:function(){var n=[],t=this;return r(u,function(i,r){t[r.cache]&&n.push(i)}),n.pop()},transition:function(n,t){var f=i(n),c=f._space(),o=u[c],l=this.alpha()===0?i("transparent"):this,a=l[o.cache]||o.to(l._rgba),h=a.slice();return f=f[o.cache],r(o.props,function(n,i){var c=i.idx,r=a[c],u=f[c],o=s[i.type]||{};u!==null&&(r===null?h[c]=u:(o.mod&&(u-r>o.mod/2?r+=o.mod:r-u>o.mod/2&&(r-=o.mod)),h[c]=e((u-r)*t+r,i)))}),this[c](h)},blend:function(t){if(this._rgba[3]===1)return this;var r=this._rgba.slice(),u=r.pop(),f=i(t)._rgba;return i(n.map(r,function(n,t){return(1-u)*f[t]+u*n}))},toRgbaString:function(){var i="rgba(",t=n.map(this._rgba,function(n,t){return n==null?t>2?1:0:n});return t[3]===1&&(t.pop(),i="rgb("),i+t.join()+")"},toHslaString:function(){var i="hsla(",t=n.map(this.hsla(),function(n,t){return n==null&&(n=t>2?1:0),t&&t<3&&(n=Math.round(n*100)+"%"),n});return t[3]===1&&(t.pop(),i="hsl("),i+t.join()+")"},toHexString:function(t){var i=this._rgba.slice(),r=i.pop();return t&&i.push(~~(r*255)),"#"+n.map(i,function(n){return n=(n||0).toString(16),n.length===1?"0"+n:n}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});i.fn.parse.prototype=i.fn;u.hsla.to=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var i=n[0]/255,r=n[1]/255,f=n[2]/255,s=n[3],u=Math.max(i,r,f),e=Math.min(i,r,f),t=u-e,o=u+e,h=o*.5,c,l;return c=e===u?0:i===u?60*(r-f)/t+360:r===u?60*(f-i)/t+120:60*(i-r)/t+240,l=t===0?0:h<=.5?t/o:t/(2-o),[Math.round(c)%360,l,h,s==null?1:s]};u.hsla.from=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var r=n[0]/360,u=n[1],t=n[2],e=n[3],i=t<=.5?t*(1+u):t+u-t*u,f=2*t-i;return[Math.round(o(f,i,r+1/3)*255),Math.round(o(f,i,r)*255),Math.round(o(f,i,r-1/3)*255),e]};r(u,function(u,f){var s=f.props,o=f.cache,h=f.to,c=f.from;i.fn[u]=function(u){if(h&&!this[o]&&(this[o]=h(this._rgba)),u===t)return this[o].slice();var l,a=n.type(u),v=a==="array"||a==="object"?u:arguments,f=this[o].slice();return r(s,function(n,t){var i=v[a==="object"?n:t.idx];i==null&&(i=f[t.idx]);f[t.idx]=e(i,t)}),c?(l=i(c(f)),l[o]=f,l):i(f)};r(s,function(t,r){i.fn[t]||(i.fn[t]=function(i){var f=n.type(i),h=t==="alpha"?this._hsla?"hsla":"rgba":u,o=this[h](),s=o[r.idx],e;return f==="undefined"?s:(f==="function"&&(i=i.call(this,s),f=n.type(i)),i==null&&r.empty)?this:(f==="string"&&(e=a.exec(i),e&&(i=s+parseFloat(e[2])*(e[1]==="+"?1:-1))),o[r.idx]=i,this[h](o))})})});i.hook=function(t){var u=t.split(" ");r(u,function(t,r){n.cssHooks[r]={set:function(t,u){var o,f,e="";if(u!=="transparent"&&(n.type(u)!=="string"||(o=l(u)))){if(u=i(o||u),!h.rgba&&u._rgba[3]!==1){for(f=r==="backgroundColor"?t.parentNode:t;(e===""||e==="transparent")&&f&&f.style;)try{e=n.css(f,"backgroundColor");f=f.parentNode}catch(s){}u=u.blend(e&&e!=="transparent"?e:"_default")}u=u.toRgbaString()}try{t.style[r]=u}catch(s){}}};n.fx.step[r]=function(t){t.colorInit||(t.start=i(t.elem,r),t.end=i(t.end),t.colorInit=!0);n.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})};i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");n.cssHooks.borderColor={expand:function(n){var t={};return r(["Top","Right","Bottom","Left"],function(i,r){t["border"+r+"Color"]=n}),t}};f=n.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(s),function(){function t(t){var r,u,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,f={};if(i&&i.length&&i[0]&&i[i[0]])for(u=i.length;u--;)r=i[u],typeof i[r]=="string"&&(f[n.camelCase(r)]=i[r]);else for(r in i)typeof i[r]=="string"&&(f[r]=i[r]);return f}function u(t,i){var e={},u,f;for(u in i)f=i[u],t[u]!==f&&(r[u]||(n.fx.step[u]||!isNaN(parseFloat(f)))&&(e[u]=f));return e}var i=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};n.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){n.fx.step[i]=function(n){(n.end==="none"||n.setAttr)&&(n.pos!==1||n.setAttr)||(s.style(n.elem,i,n.end),n.setAttr=!0)}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))});n.effects.animateClass=function(r,f,e,o){var s=n.speed(f,e,o);return this.queue(function(){var e=n(this),h=e.attr("class")||"",o,f=s.children?e.find("*").addBack():e;f=f.map(function(){var i=n(this);return{el:i,start:t(this)}});o=function(){n.each(i,function(n,t){r[t]&&e[t+"Class"](r[t])})};o();f=f.map(function(){return this.end=t(this.el[0]),this.diff=u(this.start,this.end),this});e.attr("class",h);f=f.map(function(){var i=this,t=n.Deferred(),r=n.extend({},s,{queue:!1,complete:function(){t.resolve(i)}});return this.el.animate(this.diff,r),t.promise()});n.when.apply(n,f.get()).done(function(){o();n.each(arguments,function(){var t=this.el;n.each(this.diff,function(n){t.css(n,"")})});s.complete.call(e[0])})})};n.fn.extend({addClass:function(t){return function(i,r,u,f){return r?n.effects.animateClass.call(this,{add:i},r,u,f):t.apply(this,arguments)}}(n.fn.addClass),removeClass:function(t){return function(i,r,u,f){return arguments.length>1?n.effects.animateClass.call(this,{remove:i},r,u,f):t.apply(this,arguments)}}(n.fn.removeClass),toggleClass:function(t){return function(i,r,u,f,e){return typeof r=="boolean"||r===undefined?u?n.effects.animateClass.call(this,r?{add:i}:{remove:i},u,f,e):t.apply(this,arguments):n.effects.animateClass.call(this,{toggle:i},r,u,f)}}(n.fn.toggleClass),switchClass:function(t,i,r,u,f){return n.effects.animateClass.call(this,{add:i,remove:t},r,u,f)}})}(),function(){function t(t,i,r,u){return n.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},i==null&&(i={}),n.isFunction(i)&&(u=i,r=null,i={}),(typeof i=="number"||n.fx.speeds[i])&&(u=r,r=i,i={}),n.isFunction(r)&&(u=r,r=null),i&&n.extend(t,i),r=r||i.duration,t.duration=n.fx.off?0:typeof r=="number"?r:r in n.fx.speeds?n.fx.speeds[r]:n.fx.speeds._default,t.complete=u||i.complete,t}function i(t){return!t||typeof t=="number"||n.fx.speeds[t]?!0:typeof t=="string"&&!n.effects.effect[t]?!0:n.isFunction(t)?!0:typeof t=="object"&&!t.effect?!0:!1}n.extend(n.effects,{version:"1.11.2",save:function(n,t){for(var i=0;i<t.length;i++)t[i]!==null&&n.data(o+t[i],n[0].style[t[i]])},restore:function(n,t){for(var r,i=0;i<t.length;i++)t[i]!==null&&(r=n.data(o+t[i]),r===undefined&&(r=""),n.css(t[i],r))},setMode:function(n,t){return t==="toggle"&&(t=n.is(":hidden")?"show":"hide"),t},getBaseline:function(n,t){var i,r;switch(n[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=n[0]/t.height}switch(n[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=n[1]/t.width}return{x:r,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},u=n("<div><\/div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(u),(t[0]===r||n.contains(t[0],r))&&n(r).focus(),u=t.parent(),t.css("position")==="static"?(u.css({position:"relative"}),t.css({position:"relative"})):(n.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),n.each(["top","left","bottom","right"],function(n,r){i[r]=t.css(r);isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(f),u.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||n.contains(t[0],i))&&n(i).focus()),t},setTransition:function(t,i,r,u){return u=u||{},n.each(i,function(n,i){var f=t.cssUnit(i);f[0]>0&&(u[i]=f[0]*r+f[1])}),u}});n.fn.extend({effect:function(){function e(t){function o(){n.isFunction(e)&&e.call(r[0]);n.isFunction(t)&&t()}var r=n(this),e=i.complete,u=i.mode;(r.is(":hidden")?u==="hide":u==="show")?(r[u](),o()):f.call(r[0],i,o)}var i=t.apply(this,arguments),r=i.mode,u=i.queue,f=n.effects.effect[i.effect];return n.fx.off||!f?r?this[r](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):u===!1?this.each(e):this.queue(u||"fx",e)},show:function(n){return function(r){if(i(r))return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="show",this.effect.call(this,u)}}(n.fn.show),hide:function(n){return function(r){if(i(r))return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="hide",this.effect.call(this,u)}}(n.fn.hide),toggle:function(n){return function(r){if(i(r)||typeof r=="boolean")return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="toggle",this.effect.call(this,u)}}(n.fn.toggle),cssUnit:function(t){var i=this.css(t),r=[];return n.each(["em","px","%","pt"],function(n,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r}})}(),function(){var t={};n.each(["Quad","Cubic","Quart","Quint","Expo"],function(n,i){t[i]=function(t){return Math.pow(t,n+2)}});n.extend(t,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return n===0||n===1?n:-Math.pow(2,8*(n-1))*Math.sin(((n-1)*80-7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var t,i=4;n<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-n,2)}});n.each(t,function(t,i){n.easing["easeIn"+t]=i;n.easing["easeOut"+t]=function(n){return 1-i(1-n)};n.easing["easeInOut"+t]=function(n){return n<.5?i(n*2)/2:1-i(n*-2+2)/2}})}();lt=n.effects;
/*!
 * jQuery UI Effects Blind 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/blind-effect/
 */
at=n.effects.effect.blind=function(t,i){var r=n(this),s=["position","top","bottom","left","right","height","width"],v=n.effects.setMode(r,t.mode||"hide"),y=t.direction||"up",f=/up|down|vertical/.test(y),h=f?"height":"width",c=f?"top":"left",p=/up|left|vertical|horizontal/.test(y),l={},a=v==="show",u,e,o;r.parent().is(".ui-effects-wrapper")?n.effects.save(r.parent(),s):n.effects.save(r,s);r.show();u=n.effects.createWrapper(r).css({overflow:"hidden"});e=u[h]();o=parseFloat(u.css(c))||0;l[h]=a?e:0;p||(r.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),l[c]=a?o:e+o);a&&(u.css(h,0),p||u.css(c,o+e));u.animate(l,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){v==="hide"&&r.hide();n.effects.restore(r,s);n.effects.removeWrapper(r);i()}})};
/*!
 * jQuery UI Effects Bounce 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/bounce-effect/
 */
vt=n.effects.effect.bounce=function(t,i){var r=n(this),v=["position","top","bottom","left","right","height","width"],k=n.effects.setMode(r,t.mode||"effect"),f=k==="hide",y=k==="show",h=t.direction||"up",u=t.distance,p=t.times||5,d=p*2+(y||f?1:0),c=t.duration/d,l=t.easing,e=h==="up"||h==="down"?"top":"left",w=h==="up"||h==="left",b,o,s,a=r.queue(),g=a.length;for((y||f)&&v.push("opacity"),n.effects.save(r,v),r.show(),n.effects.createWrapper(r),u||(u=r[e==="top"?"outerHeight":"outerWidth"]()/3),y&&(s={opacity:1},s[e]=0,r.css("opacity",0).css(e,w?-u*2:u*2).animate(s,c,l)),f&&(u=u/Math.pow(2,p-1)),s={},s[e]=0,b=0;b<p;b++)o={},o[e]=(w?"-=":"+=")+u,r.animate(o,c,l).animate(s,c,l),u=f?u*2:u/2;f&&(o={opacity:0},o[e]=(w?"-=":"+=")+u,r.animate(o,c,l));r.queue(function(){f&&r.hide();n.effects.restore(r,v);n.effects.removeWrapper(r);i()});g>1&&a.splice.apply(a,[1,0].concat(a.splice(g,d+1)));r.dequeue()};
/*!
 * jQuery UI Effects Clip 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/clip-effect/
 */
yt=n.effects.effect.clip=function(t,i){var r=n(this),h=["position","top","bottom","left","right","height","width"],v=n.effects.setMode(r,t.mode||"hide"),f=v==="show",y=t.direction||"vertical",c=y==="vertical",o=c?"height":"width",l=c?"top":"left",s={},a,u,e;n.effects.save(r,h);r.show();a=n.effects.createWrapper(r).css({overflow:"hidden"});u=r[0].tagName==="IMG"?a:r;e=u[o]();f&&(u.css(o,0),u.css(l,e/2));s[o]=f?e:0;s[l]=f?0:e/2;u.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){f||r.hide();n.effects.restore(r,h);n.effects.removeWrapper(r);i()}})};
/*!
 * jQuery UI Effects Drop 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/drop-effect/
 */
pt=n.effects.effect.drop=function(t,i){var r=n(this),h=["position","top","bottom","left","right","opacity","height","width"],c=n.effects.setMode(r,t.mode||"hide"),e=c==="show",u=t.direction||"left",o=u==="up"||u==="down"?"top":"left",s=u==="up"||u==="left"?"pos":"neg",l={opacity:e?1:0},f;n.effects.save(r,h);r.show();n.effects.createWrapper(r);f=t.distance||r[o==="top"?"outerHeight":"outerWidth"](!0)/2;e&&r.css("opacity",0).css(o,s==="pos"?-f:f);l[o]=(e?s==="pos"?"+=":"-=":s==="pos"?"-=":"+=")+f;r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c==="hide"&&r.hide();n.effects.restore(r,h);n.effects.removeWrapper(r);i()}})};
/*!
 * jQuery UI Effects Explode 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/explode-effect/
 */
wt=n.effects.effect.explode=function(t,i){function k(){l.push(this);l.length===o*c&&d()}function d(){r.css({visibility:"visible"});n(l).remove();u||r.hide();i()}for(var o=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=o,r=n(this),b=n.effects.setMode(r,t.mode||"hide"),u=b==="show",w=r.show().css("visibility","hidden").offset(),s=Math.ceil(r.outerWidth()/c),h=Math.ceil(r.outerHeight()/o),l=[],e,a,v,y,p,f=0;f<o;f++)for(v=w.top+f*h,p=f-(o-1)/2,e=0;e<c;e++)a=w.left+e*s,y=e-(c-1)/2,r.clone().appendTo("body").wrap("<div><\/div>").css({position:"absolute",visibility:"visible",left:-e*s,top:-f*h}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:s,height:h,left:a+(u?y*s:0),top:v+(u?p*h:0),opacity:u?0:1}).animate({left:a+(u?0:y*s),top:v+(u?0:p*h),opacity:u?1:0},t.duration||500,t.easing,k)};
/*!
 * jQuery UI Effects Fade 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fade-effect/
 */
bt=n.effects.effect.fade=function(t,i){var r=n(this),u=n.effects.setMode(r,t.mode||"toggle");r.animate({opacity:u},{queue:!1,duration:t.duration,easing:t.easing,complete:i})};
/*!
 * jQuery UI Effects Fold 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/fold-effect/
 */
kt=n.effects.effect.fold=function(t,i){var r=n(this),s=["position","top","bottom","left","right","height","width"],h=n.effects.setMode(r,t.mode||"hide"),e=h==="show",c=h==="hide",f=t.size||15,l=/([0-9]+)%/.exec(f),a=!!t.horizFirst,v=e!==a,y=v?["width","height"]:["height","width"],p=t.duration/2,u,o,w={},b={};n.effects.save(r,s);r.show();u=n.effects.createWrapper(r).css({overflow:"hidden"});o=v?[u.width(),u.height()]:[u.height(),u.width()];l&&(f=parseInt(l[1],10)/100*o[c?0:1]);e&&u.css(a?{height:0,width:f}:{height:f,width:0});w[y[0]]=e?o[0]:f;b[y[1]]=e?o[1]:0;u.animate(w,p,t.easing).animate(b,p,t.easing,function(){c&&r.hide();n.effects.restore(r,s);n.effects.removeWrapper(r);i()})};
/*!
 * jQuery UI Effects Highlight 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/highlight-effect/
 */
dt=n.effects.effect.highlight=function(t,i){var r=n(this),u=["backgroundImage","backgroundColor","opacity"],f=n.effects.setMode(r,t.mode||"show"),e={backgroundColor:r.css("backgroundColor")};f==="hide"&&(e.opacity=0);n.effects.save(r,u);r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(e,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){f==="hide"&&r.hide();n.effects.restore(r,u);i()}})};
/*!
 * jQuery UI Effects Size 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/size-effect/
 */
gt=n.effects.effect.size=function(t,i){var f,l,u,r=n(this),w=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["width","height","overflow"],v=["fontSize"],e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],o=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=n.effects.setMode(r,t.mode||"effect"),y=t.restore||h!=="effect",c=t.scale||"both",b=t.origin||["middle","center"],k=r.css("position"),s=y?w:["position","top","bottom","left","right","overflow","opacity"],p={height:0,width:0,outerHeight:0,outerWidth:0};h==="show"&&r.show();f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};t.mode==="toggle"&&h==="show"?(r.from=t.to||p,r.to=t.from||f):(r.from=t.from||(h==="show"?p:f),r.to=t.to||(h==="hide"?p:f));u={from:{y:r.from.height/f.height,x:r.from.width/f.width},to:{y:r.to.height/f.height,x:r.to.width/f.width}};(c==="box"||c==="both")&&(u.from.y!==u.to.y&&(s=s.concat(e),r.from=n.effects.setTransition(r,e,u.from.y,r.from),r.to=n.effects.setTransition(r,e,u.to.y,r.to)),u.from.x!==u.to.x&&(s=s.concat(o),r.from=n.effects.setTransition(r,o,u.from.x,r.from),r.to=n.effects.setTransition(r,o,u.to.x,r.to)));(c==="content"||c==="both")&&u.from.y!==u.to.y&&(s=s.concat(v).concat(a),r.from=n.effects.setTransition(r,v,u.from.y,r.from),r.to=n.effects.setTransition(r,v,u.to.y,r.to));n.effects.save(r,s);r.show();n.effects.createWrapper(r);r.css("overflow","hidden").css(r.from);b&&(l=n.effects.getBaseline(b,f),r.from.top=(f.outerHeight-r.outerHeight())*l.y,r.from.left=(f.outerWidth-r.outerWidth())*l.x,r.to.top=(f.outerHeight-r.to.outerHeight)*l.y,r.to.left=(f.outerWidth-r.to.outerWidth)*l.x);r.css(r.from);(c==="content"||c==="both")&&(e=e.concat(["marginTop","marginBottom"]).concat(v),o=o.concat(["marginLeft","marginRight"]),a=w.concat(e).concat(o),r.find("*[width]").each(function(){var i=n(this),r={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};y&&n.effects.save(i,a);i.from={height:r.height*u.from.y,width:r.width*u.from.x,outerHeight:r.outerHeight*u.from.y,outerWidth:r.outerWidth*u.from.x};i.to={height:r.height*u.to.y,width:r.width*u.to.x,outerHeight:r.height*u.to.y,outerWidth:r.width*u.to.x};u.from.y!==u.to.y&&(i.from=n.effects.setTransition(i,e,u.from.y,i.from),i.to=n.effects.setTransition(i,e,u.to.y,i.to));u.from.x!==u.to.x&&(i.from=n.effects.setTransition(i,o,u.from.x,i.from),i.to=n.effects.setTransition(i,o,u.to.x,i.to));i.css(i.from);i.animate(i.to,t.duration,t.easing,function(){y&&n.effects.restore(i,a)})}));r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){r.to.opacity===0&&r.css("opacity",r.from.opacity);h==="hide"&&r.hide();n.effects.restore(r,s);y||(k==="static"?r.css({position:"relative",top:r.to.top,left:r.to.left}):n.each(["top","left"],function(n,t){r.css(t,function(t,i){var f=parseInt(i,10),u=n?r.to.left:r.to.top;return i==="auto"?u+"px":f+u+"px"})}));n.effects.removeWrapper(r);i()}})};
/*!
 * jQuery UI Effects Scale 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/scale-effect/
 */
ni=n.effects.effect.scale=function(t,i){var u=n(this),r=n.extend(!0,{},t),f=n.effects.setMode(u,t.mode||"effect"),s=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:f==="hide"?0:100),h=t.direction||"both",c=t.origin,e={height:u.height(),width:u.width(),outerHeight:u.outerHeight(),outerWidth:u.outerWidth()},o={y:h!=="horizontal"?s/100:1,x:h!=="vertical"?s/100:1};r.effect="size";r.queue=!1;r.complete=i;f!=="effect"&&(r.origin=c||["middle","center"],r.restore=!0);r.from=t.from||(f==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:e);r.to={height:e.height*o.y,width:e.width*o.x,outerHeight:e.outerHeight*o.y,outerWidth:e.outerWidth*o.x};r.fade&&(f==="show"&&(r.from.opacity=0,r.to.opacity=1),f==="hide"&&(r.from.opacity=1,r.to.opacity=0));u.effect(r)};
/*!
 * jQuery UI Effects Puff 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/puff-effect/
 */
ti=n.effects.effect.puff=function(t,i){var r=n(this),e=n.effects.setMode(r,t.mode||"hide"),o=e==="hide",s=parseInt(t.percent,10)||150,f=s/100,u={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};n.extend(t,{effect:"scale",queue:!1,fade:!0,mode:e,complete:i,percent:o?s:100,from:o?u:{height:u.height*f,width:u.width*f,outerHeight:u.outerHeight*f,outerWidth:u.outerWidth*f}});r.effect(t)};
/*!
 * jQuery UI Effects Pulsate 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/pulsate-effect/
 */
ii=n.effects.effect.pulsate=function(t,i){var r=n(this),e=n.effects.setMode(r,t.mode||"show"),h=e==="show",a=e==="hide",v=h||e==="hide",o=(t.times||5)*2+(v?1:0),c=t.duration/o,u=0,f=r.queue(),l=f.length,s;for((h||!r.is(":visible"))&&(r.css("opacity",0).show(),u=1),s=1;s<o;s++)r.animate({opacity:u},c,t.easing),u=1-u;r.animate({opacity:u},c,t.easing);r.queue(function(){a&&r.hide();i()});l>1&&f.splice.apply(f,[1,0].concat(f.splice(l,o+1)));r.dequeue()};
/*!
 * jQuery UI Effects Shake 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/shake-effect/
 */
ri=n.effects.effect.shake=function(t,i){var r=n(this),v=["position","top","bottom","left","right","height","width"],k=n.effects.setMode(r,t.mode||"effect"),f=t.direction||"left",o=t.distance||20,y=t.times||3,p=y*2+1,u=Math.round(t.duration/p),s=f==="up"||f==="down"?"top":"left",h=f==="up"||f==="left",c={},l={},w={},a,e=r.queue(),b=e.length;for(n.effects.save(r,v),r.show(),n.effects.createWrapper(r),c[s]=(h?"-=":"+=")+o,l[s]=(h?"+=":"-=")+o*2,w[s]=(h?"-=":"+=")+o*2,r.animate(c,u,t.easing),a=1;a<y;a++)r.animate(l,u,t.easing).animate(w,u,t.easing);r.animate(l,u,t.easing).animate(c,u/2,t.easing).queue(function(){k==="hide"&&r.hide();n.effects.restore(r,v);n.effects.removeWrapper(r);i()});b>1&&e.splice.apply(e,[1,0].concat(e.splice(b,p+1)));r.dequeue()};
/*!
 * jQuery UI Effects Slide 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slide-effect/
 */
ui=n.effects.effect.slide=function(t,i){var r=n(this),s=["position","top","bottom","left","right","width","height"],h=n.effects.setMode(r,t.mode||"show"),c=h==="show",f=t.direction||"left",e=f==="up"||f==="down"?"top":"left",o=f==="up"||f==="left",u,l={};n.effects.save(r,s);r.show();u=t.distance||r[e==="top"?"outerHeight":"outerWidth"](!0);n.effects.createWrapper(r).css({overflow:"hidden"});c&&r.css(e,o?isNaN(u)?"-"+u:-u:u);l[e]=(c?o?"+=":"-=":o?"-=":"+=")+u;r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){h==="hide"&&r.hide();n.effects.restore(r,s);n.effects.removeWrapper(r);i()}})};
/*!
 * jQuery UI Effects Transfer 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/transfer-effect/
 */
fi=n.effects.effect.transfer=function(t,i){var u=n(this),r=n(t.to),f=r.css("position")==="fixed",e=n("body"),o=f?e.scrollTop():0,s=f?e.scrollLeft():0,h=r.offset(),l={top:h.top-o,left:h.left-s,height:r.innerHeight(),width:r.innerWidth()},c=u.offset(),a=n("<div class='ui-effects-transfer'><\/div>").appendTo(document.body).addClass(t.className).css({top:c.top-o,left:c.left-s,height:u.innerHeight(),width:u.innerWidth(),position:f?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){a.remove();i()})};
/*!
 * jQuery UI Progressbar 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/progressbar/
 */
ei=n.widget("ui.progressbar",{version:"1.11.2",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=n("<div class='ui-progressbar-value ui-widget-header ui-corner-left'><\/div>").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(n){if(n===undefined)return this.options.value;this.options.value=this._constrainedValue(n);this._refreshValue()},_constrainedValue:function(n){return n===undefined&&(n=this.options.value),this.indeterminate=n===!1,typeof n!="number"&&(n=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,n))},_setOptions:function(n){var t=n.value;delete n.value;this._super(n);this.options.value=this._constrainedValue(t);this._refreshValue()},_setOption:function(n,t){n==="max"&&(t=Math.max(this.min,t));n==="disabled"&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t);this._super(n,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=n("<div class='ui-progressbar-overlay'><\/div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null));this.oldValue!==t&&(this.oldValue=t,this._trigger("change"));t===this.options.max&&this._trigger("complete")}});
/*!
 * jQuery UI Selectable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectable/
 */
oi=n.widget("ui.selectable",n.ui.mouse,{version:"1.11.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){t=n(i.options.filter,i.element[0]);t.addClass("ui-selectee");t.each(function(){var t=n(this),i=t.offset();n.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})};this.refresh();this.selectees=t.addClass("ui-selectee");this._mouseInit();this.helper=n("<div class='ui-selectable-helper'><\/div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(t){var i=this,r=this.options;(this.opos=[t.pageX,t.pageY],this.options.disabled)||(this.selectees=n(r.filter,this.element[0]),this._trigger("start",t),n(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=n.data(this,"selectable-item");r.startselected=!0;t.metaKey||t.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,i._trigger("unselecting",t,{unselecting:r.element}))}),n(t.target).parents().addBack().each(function(){var u,r=n.data(this,"selectable-item");if(r)return u=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(u?"ui-unselecting":"ui-selected").addClass(u?"ui-selecting":"ui-unselecting"),r.unselecting=!u,r.selecting=u,r.selected=u,u?i._trigger("selecting",t,{selecting:r.element}):i._trigger("unselecting",t,{unselecting:r.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var e,o=this,s=this.options,i=this.opos[0],r=this.opos[1],u=t.pageX,f=t.pageY;return i>u&&(e=u,u=i,i=e),r>f&&(e=f,f=r,r=e),this.helper.css({left:i,top:r,width:u-i,height:f-r}),this.selectees.each(function(){var e=n.data(this,"selectable-item"),h=!1;e&&e.element!==o.element[0]&&(s.tolerance==="touch"?h=!(e.left>u||e.right<i||e.top>f||e.bottom<r):s.tolerance==="fit"&&(h=e.left>i&&e.right<u&&e.top>r&&e.bottom<f),h?(e.selected&&(e.$element.removeClass("ui-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,o._trigger("selecting",t,{selecting:e.element}))):(e.selecting&&((t.metaKey||t.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),o._trigger("unselecting",t,{unselecting:e.element}))),e.selected&&(t.metaKey||t.ctrlKey||e.startselected||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,o._trigger("unselecting",t,{unselecting:e.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,n(".ui-unselecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-unselecting");r.unselecting=!1;r.startselected=!1;i._trigger("unselected",t,{unselected:r.element})}),n(".ui-selecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected");r.selecting=!1;r.selected=!0;r.startselected=!0;i._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}});
/*!
 * jQuery UI Selectmenu 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/selectmenu
 */
si=n.widget("ui.selectmenu",{version:"1.11.2",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var n=this.element.uniqueId().attr("id");this.ids={element:n,button:n+"-button",menu:n+"-menu"};this._drawButton();this._drawMenu();this.options.disabled&&this.disable()},_drawButton:function(){var t=this,i=this.element.attr("tabindex");this.label=n("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(n){this.button.focus();n.preventDefault()}});this.element.hide();this.button=n("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:i||this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);n("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=n("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){t.menuItems||t._refreshMenu()});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=n("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=n("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(n,i){n.preventDefault();t._setSelection();t._select(i.item.data("ui-selectmenu-item"),n)},focus:function(n,i){var r=i.item.data("ui-selectmenu-item");t.focusIndex!=null&&r.index!==t.focusIndex&&(t._trigger("focus",n,{item:r}),t.isOpen||t._select(r,n));t.focusIndex=r.index;t.button.attr("aria-activedescendant",t.menuItems.eq(r.index).attr("id"))}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var n,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),n=this._getSelectedItem(),this.menuInstance.focus(null,n),this._setAria(n.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(n){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",n))},_position:function(){this.menuWrap.position(n.extend({of:this.button},this.options.position))},close:function(n){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",n))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,i){var u=this,r="";n.each(i,function(i,f){f.optgroup!==r&&(n("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:f.optgroup}).appendTo(t),r=f.optgroup);u._renderItemData(t,f)})},_renderItemData:function(n,t){return this._renderItem(n,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var r=n("<li>");return i.disabled&&r.addClass("ui-state-disabled"),this._setText(r,i.label),r.appendTo(t)},_setText:function(n,t){t?n.text(t):n.html("&#160;")},_move:function(n,t){var i,r,u=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),u+=":not(.ui-state-disabled)");r=n==="first"||n==="last"?i[n==="first"?"prevAll":"nextAll"](u).eq(-1):i[n+"All"](u).eq(0);r.length&&this.menuInstance.focus(t,r)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(n){this[this.isOpen?"close":"open"](n)},_setSelection:function(){var n;this.range&&(window.getSelection?(n=window.getSelection(),n.removeAllRanges(),n.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(n(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var n;window.getSelection?(n=window.getSelection(),n.rangeCount&&(this.range=n.getRangeAt(0))):this.range=document.selection.createRange()},click:function(n){this._setSelection();this._toggle(n)},keydown:function(t){var i=!0;switch(t.keyCode){case n.ui.keyCode.TAB:case n.ui.keyCode.ESCAPE:this.close(t);i=!1;break;case n.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case n.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case n.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case n.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case n.ui.keyCode.LEFT:this._move("prev",t);break;case n.ui.keyCode.RIGHT:this._move("next",t);break;case n.ui.keyCode.HOME:case n.ui.keyCode.PAGE_UP:this._move("first",t);break;case n.ui.keyCode.END:case n.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t);i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(n){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),n)},_select:function(n,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=n.index;this._setText(this.buttonText,n.label);this._setAria(n);this._trigger("select",t,{item:n});n.index!==i&&this._trigger("change",t,{item:n});this.close(t)},_setAria:function(n){var t=this.menuItems.eq(n.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t});this.menu.attr("aria-activedescendant",t)},_setOption:function(n,t){n==="icons"&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button);this._super(n,t);n==="appendTo"&&this.menuWrap.appendTo(this._appendTo());n==="disabled"&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0));n==="width"&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?n(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var n=this.options.width;n||(n=this.element.show().outerWidth(),this.element.hide());this.button.outerWidth(n)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var i=[];t.each(function(t,r){var u=n(r),f=u.parent("optgroup");i.push({element:u,index:t,value:u.attr("value"),label:u.text(),optgroup:f.attr("label")||"",disabled:f.prop("disabled")||u.prop("disabled")})});this.items=i},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}});
/*!
 * jQuery UI Slider 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 */
hi=n.widget("ui.slider",n.ui.mouse,{version:"1.11.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1;this._mouseSliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var r,i,u=this.options,t=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=[];for(i=u.values&&u.values.length||1,t.length>i&&(t.slice(i).remove(),t=t.slice(0,i)),r=t.length;r<i;r++)f.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'><\/span>");this.handles=t.add(n(f.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(t){n(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&t.values.length!==2?t.values=[t.values[0],t.values[0]]:n.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=n("<div><\/div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+(t.range==="min"||t.range==="max"?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(t){var s,f,r,i,u,h,e,c,o=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),s={x:t.pageX,y:t.pageY},f=this._normValueFromMouse(s),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(f-o.values(t));(r>e||r===e&&(t===o._lastChangedValue||o.values(t)===l.min))&&(r=e,i=n(this),u=t)}),h=this._start(t,u),h===!1)?!1:(this._mouseSliding=!0,this._handleIndex=u,i.addClass("ui-state-active").focus(),e=i.offset(),c=!n(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-e.left-i.width()/2,top:t.pageY-e.top-i.height()/2-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,u,f),this._animateOff=!0,!0)},_mouseStart:function(){return!0},_mouseDrag:function(n){var t={x:n.pageX,y:n.pageY},i=this._normValueFromMouse(t);return this._slide(n,this._handleIndex,i),!1},_mouseStop:function(n){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(n,this._handleIndex),this._change(n,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(n){var i,r,t,u,f;return this.orientation==="horizontal"?(i=this.elementSize.width,r=n.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(i=this.elementSize.height,r=n.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=r/i,t>1&&(t=1),t<0&&(t=0),this.orientation==="vertical"&&(t=1-t),u=this._valueMax()-this._valueMin(),f=this._valueMin()+t*u,this._trimAlignValue(f)},_start:function(n,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",n,i)},_slide:function(n,t,i){var r,f,u;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&i>r||t===1&&i<r)&&(i=r),i!==this.values(t)&&(f=this.values(),f[t]=i,u=this._trigger("slide",n,{handle:this.handles[t],value:i,values:f}),r=this.values(t?0:1),u!==!1&&this.values(t,i))):i!==this.value()&&(u=this._trigger("slide",n,{handle:this.handles[t],value:i}),u!==!1&&this.value(i))},_stop:function(n,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._trigger("stop",n,i)},_change:function(n,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._lastChangedValue=t;this._trigger("change",n,i)}},value:function(n){if(arguments.length){this.options.value=this._trimAlignValue(n);this._refreshValue();this._change(null,0);return}return this._value()},values:function(t,i){var u,f,r;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(i);this._refreshValue();this._change(null,t);return}if(arguments.length)if(n.isArray(arguments[0])){for(u=this.options.values,f=arguments[0],r=0;r<u.length;r+=1)u[r]=this._trimAlignValue(f[r]),this._change(null,r);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(t):this.value();else return this._values()},_setOption:function(t,i){var r,u=0;t==="range"&&this.options.range===!0&&(i==="min"?(this.options.value=this._values(0),this.options.values=null):i==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null));n.isArray(this.options.values)&&(u=this.options.values.length);t==="disabled"&&this.element.toggleClass("ui-state-disabled",!!i);this._super(t,i);switch(t){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this.handles.css(i==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;r<u;r+=1)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0;this._calculateNewMax();this._refreshValue();this._animateOff=!1;break;case"range":this._animateOff=!0;this._refresh();this._animateOff=!1}},_value:function(){var n=this.options.value;return this._trimAlignValue(n)},_values:function(n){var r,t,i;if(arguments.length)return r=this.options.values[n],this._trimAlignValue(r);if(this.options.values&&this.options.values.length){for(t=this.options.values.slice(),i=0;i<t.length;i+=1)t[i]=this._trimAlignValue(t[i]);return t}return[]},_trimAlignValue:function(n){if(n<=this._valueMin())return this._valueMin();if(n>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(n-this._valueMin())%t,r=n-i;return Math.abs(i)*2>=t&&(r+=i>0?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var n=(this.options.max-this._valueMin())%this.options.step;this.max=this.options.max-n},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var s,t,c,f,h,e=this.options.range,i=this.options,r=this,u=this._animateOff?!1:i.animate,o={};this.options.values&&this.options.values.length?this.handles.each(function(f){t=(r.values(f)-r._valueMin())/(r._valueMax()-r._valueMin())*100;o[r.orientation==="horizontal"?"left":"bottom"]=t+"%";n(this).stop(1,1)[u?"animate":"css"](o,i.animate);r.options.range===!0&&(r.orientation==="horizontal"?(f===0&&r.range.stop(1,1)[u?"animate":"css"]({left:t+"%"},i.animate),f===1&&r.range[u?"animate":"css"]({width:t-s+"%"},{queue:!1,duration:i.animate})):(f===0&&r.range.stop(1,1)[u?"animate":"css"]({bottom:t+"%"},i.animate),f===1&&r.range[u?"animate":"css"]({height:t-s+"%"},{queue:!1,duration:i.animate})));s=t}):(c=this.value(),f=this._valueMin(),h=this._valueMax(),t=h!==f?(c-f)/(h-f)*100:0,o[this.orientation==="horizontal"?"left":"bottom"]=t+"%",this.handle.stop(1,1)[u?"animate":"css"](o,i.animate),e==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[u?"animate":"css"]({width:t+"%"},i.animate),e==="max"&&this.orientation==="horizontal"&&this.range[u?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:i.animate}),e==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[u?"animate":"css"]({height:t+"%"},i.animate),e==="max"&&this.orientation==="vertical"&&this.range[u?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:i.animate}))},_handleEvents:{keydown:function(t){var e,r,i,u,f=n(t.target).data("ui-slider-handle-index");switch(t.keyCode){case n.ui.keyCode.HOME:case n.ui.keyCode.END:case n.ui.keyCode.PAGE_UP:case n.ui.keyCode.PAGE_DOWN:case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,n(t.target).addClass("ui-state-active"),e=this._start(t,f),e===!1))return}u=this.options.step;r=this.options.values&&this.options.values.length?i=this.values(f):i=this.value();switch(t.keyCode){case n.ui.keyCode.HOME:i=this._valueMin();break;case n.ui.keyCode.END:i=this._valueMax();break;case n.ui.keyCode.PAGE_UP:i=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case n.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:if(r===this._valueMax())return;i=this._trimAlignValue(r+u);break;case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(r===this._valueMin())return;i=this._trimAlignValue(r-u)}this._slide(t,f,i)},keyup:function(t){var i=n(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),n(t.target).removeClass("ui-state-active"))}}});
/*!
 * jQuery UI Sortable 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 */
ci=n.widget("ui.sortable",n.ui.mouse,{version:"1.11.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(n,t,i){return n>=t&&n<t+i},_isFloating:function(n){return/left|right/.test(n.css("float"))||/inline|table-cell/.test(n.css("display"))},_create:function(){var n=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?n.axis==="x"||this._isFloating(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(n,t){this._super(n,t);n==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");n.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var n=this.items.length-1;n>=0;n--)this.items[n].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var r=null,f=!1,u=this;return this.reverting?!1:this.options.disabled||this.options.type==="static"?!1:(this._refreshItems(t),n(t.target).parents().each(function(){if(n.data(this,u.widgetName+"-item")===u)return r=n(this),!1}),n.data(t.target,u.widgetName+"-item")===u&&(r=n(t.target)),!r)?!1:this.options.handle&&!i&&(n(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(f=!0)}),!f)?!1:(this.currentItem=r,this._removeCurrentsFromItems(),!0)},_mouseStart:function(t,i,r){var f,e,u=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),u.containment&&this._setContainment(),u.cursor&&u.cursor!=="auto"&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",u.cursor),this.storedStylesheet=n("<style>*{ cursor: "+u.cursor+" !important; }<\/style>").appendTo(e)),u.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",u.opacity)),u.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",u.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",t,this._uiHash(this));return n.ui.ddmanager&&(n.ui.ddmanager.current=this),n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,u,f,o,i=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-n(document).scrollTop()<i.scrollSensitivity?r=n(document).scrollTop(n(document).scrollTop()-i.scrollSpeed):n(window).height()-(t.pageY-n(document).scrollTop())<i.scrollSensitivity&&(r=n(document).scrollTop(n(document).scrollTop()+i.scrollSpeed)),t.pageX-n(document).scrollLeft()<i.scrollSensitivity?r=n(document).scrollLeft(n(document).scrollLeft()-i.scrollSpeed):n(window).width()-(t.pageX-n(document).scrollLeft())<i.scrollSensitivity&&(r=n(document).scrollLeft(n(document).scrollLeft()+i.scrollSpeed))),r!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&this.options.axis==="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis==="x"||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;e>=0;e--)if((u=this.items[e],f=u.item[0],o=this._intersectsWithPointer(u),o)&&u.instance===this.currentContainer&&f!==this.currentItem[0]&&this.placeholder[o===1?"next":"prev"]()[0]!==f&&!n.contains(this.placeholder[0],f)&&(this.options.type==="semi-dynamic"?!n.contains(this.element[0],f):!0)){if(this.direction=o===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(u))this._rearrange(t,u);else break;this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(n.ui.ddmanager&&!this.options.dropBehaviour&&n.ui.ddmanager.drop(this,t),this.options.revert){var e=this,f=this.placeholder.offset(),r=this.options.axis,u={};r&&r!=="x"||(u.left=f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft));r&&r!=="y"||(u.top=f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop));this.reverting=!0;n(this.helper).animate(u,parseInt(this.options.revert,10)||500,function(){e._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),n.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?n(this.domPosition.prev).after(this.currentItem):n(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n(r).each(function(){var r=(n(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(n(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,r=n.left,f=r+n.width,u=n.top,e=u+n.height,o=this.offset.click.top,s=this.offset.click.left,l=this.options.axis==="x"||i+o>u&&i+o<e,a=this.options.axis==="y"||t+s>r&&t+s<f,v=l&&a;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"]?v:r<t+this.helperProportions.width/2&&h-this.helperProportions.width/2<f&&u<i+this.helperProportions.height/2&&c-this.helperProportions.height/2<e},_intersectsWithPointer:function(n){var r=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,n.top,n.height),u=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,n.left,n.width),f=r&&u,t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return f?this.floating?i&&i==="right"||t==="down"?2:1:t&&(t==="down"?2:1):!1},_intersectsWithSides:function(n){var r=this._isOverAxis(this.positionAbs.top+this.offset.click.top,n.top+n.height/2,n.height),u=this._isOverAxis(this.positionAbs.left+this.offset.click.left,n.left+n.width/2,n.width),t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?i==="right"&&u||i==="left"&&!u:t&&(t==="down"&&r||t==="up"&&!r)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return n!==0&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return n!==0&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var n=this.options;return n.connectWith.constructor===String?[n.connectWith]:n.connectWith},_getItemsAsjQuery:function(t){function h(){s.push(this)}var r,u,e,i,s=[],f=[],o=this._connectWith();if(o&&t)for(r=o.length-1;r>=0;r--)for(e=n(o[r]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&f.push([n.isFunction(i.options.items)?i.options.items.call(i.element):n(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);for(f.push([n.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):n(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=f.length-1;r>=0;r--)f[r][0].each(h);return n(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=n.grep(this.items,function(n){for(var i=0;i<t.length;i++)if(t[i]===n.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[];this.containers=[this];var r,u,e,i,o,s,h,l,a=this.items,f=[[n.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):n(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(r=c.length-1;r>=0;r--)for(e=n(c[r]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&(f.push([n.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):n(i.options.items,i.element),i]),this.containers.push(i));for(r=f.length-1;r>=0;r--)for(o=f[r][1],s=f[r][0],u=0,l=s.length;u<l;u++)h=n(s[u]),h.data(this.widgetName+"-item",o),a.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var r,f,u,i=this.items.length-1;i>=0;i--)(r=this.items[i],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])||(f=this.options.toleranceElement?n(this.options.toleranceElement,r.item):r.item,t||(r.width=f.outerWidth(),r.height=f.outerHeight()),u=f.offset(),r.left=u.left,r.top=u.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)u=this.containers[i].element.offset(),this.containers[i].containerCache.left=u.left,this.containers[i].containerCache.top=u.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var r,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(r=i.placeholder,i.placeholder={element:function(){var u=t.currentItem[0].nodeName.toLowerCase(),i=n("<"+u+">",t.document[0]).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return u==="tr"?t.currentItem.children().each(function(){n("<td>&#160;<\/td>",t.document[0]).attr("colspan",n(this).attr("colspan")||1).appendTo(i)}):u==="img"&&i.attr("src",t.currentItem.attr("src")),r||i.css("visibility","hidden"),i},update:function(n,u){(!r||i.forcePlaceholderSize)&&(u.height()||u.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),u.width()||u.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}});t.placeholder=n(i.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);i.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var u,c,f,a,v,o,l,s,h,e=null,i=null,r=this.containers.length-1;r>=0;r--)if(!n.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(e&&n.contains(this.containers[r].element[0],e.element[0]))continue;e=this.containers[r];i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(e)if(this.containers.length===1)this.containers[i].containerCache.over||(this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1);else{for(c=1e4,f=null,s=e.floating||this._isFloating(this.currentItem),a=s?"left":"top",v=s?"width":"height",h=s?"clientX":"clientY",u=this.items.length-1;u>=0;u--)n.contains(this.containers[i].element[0],this.items[u].item[0])&&this.items[u].item[0]!==this.currentItem[0]&&(o=this.items[u].item.offset()[a],l=!1,t[h]-o>this.items[u][v]/2&&(l=!0),Math.abs(t[h]-o)<c&&(c=Math.abs(t[h]-o),f=this.items[u],this.direction=l?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[i]){this.currentContainer.containerCache.over||(this.containers[i]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1);return}f?this._rearrange(t,f,null,!0):this._rearrange(t,null,this.containers[i].element,!0);this._trigger("change",t,this._uiHash());this.containers[i]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[i];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[i]._trigger("over",t,this._uiHash(this));this.containers[i].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t,this.currentItem])):r.helper==="clone"?this.currentItem.clone():this.currentItem;return i.parents("body").length||n(r.appendTo!=="parent"?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||r.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||r.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,u,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);(i.containment==="document"||i.containment==="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,n(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(n(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(i.containment)||(t=n(i.containment)[0],r=n(i.containment).offset(),u=n(t).css("overflow")!=="hidden",this.containment=[r.left+(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var r=t==="absolute"?1:-1,u=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r}},_generatePosition:function(t){var r,u,i=this.options,f=t.pageX,e=t.pageY,o=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,s=/(html|body)/i.test(o[0].tagName);return this.cssPosition!=="relative"||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(e=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(e=this.containment[3]+this.offset.click.top)),i.grid&&(r=this.originalPageY+Math.round((e-this.originalPageY)/i.grid[1])*i.grid[1],e=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-i.grid[1]:r+i.grid[1]:r,u=this.originalPageX+Math.round((f-this.originalPageX)/i.grid[0])*i.grid[0],f=this.containment?u-this.offset.click.left>=this.containment[0]&&u-this.offset.click.left<=this.containment[2]?u:u-this.offset.click.left>=this.containment[0]?u-i.grid[0]:u+i.grid[0]:u)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:o.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var u=this.counter;this._delay(function(){u===this.counter&&this.refreshPositions(!r)})},_clear:function(n,t){function u(n,t,i){return function(r){i._trigger(n,r,t._uiHash(t))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static")&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(n){this._trigger("receive",n,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(n){this._trigger("update",n,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(n){this._trigger("remove",n,this._uiHash())}),r.push(function(n){return function(t){n._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(n){return function(t){n._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(u("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(u("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",n,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<r.length;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){n.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}});
/*!
 * jQuery UI Spinner 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/spinner/
 */
li=n.widget("ui.spinner",{version:"1.11.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);this.value()!==""&&this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return n.each(["min","max","step"],function(n,r){var u=i.attr(r);u!==undefined&&u.length&&(t[r]=u)}),t},_events:{keydown:function(n){this._start(n)&&this._keydown(n)&&n.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(n){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();this.previous!==this.element.val()&&this._trigger("change",n)},mousewheel:function(n,t){if(t){if(!this.spinning&&!this._start(n))return!1;this._spin((t>0?1:-1)*this.options.step,n);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(n)},100);n.preventDefault()}},"mousedown .ui-spinner-button":function(t){function r(){var n=this.element[0]===this.document[0].activeElement;n||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;(i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur;r.call(this)}),this._start(t)!==!1)&&this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(n(t.currentTarget).hasClass("ui-state-active")){if(this._start(t)===!1)return!1;this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var n=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=n.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(n.height()*.5)&&n.height()>0&&n.height(n.height());this.options.disabled&&this.disable()},_keydown:function(t){var r=this.options,i=n.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,r.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-r.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'><\/span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;<\/span><\/a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;<\/span><\/a>"},_start:function(n){return!this.spinning&&this._trigger("start",n)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(n,t,i){n=n||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,t,i)},n);this._spin(t*this.options.step,i)},_spin:function(n,t){var i=this.value()||0;this.counter||(this.counter=1);i=this._adjustValue(i+n*this._increment(this.counter));this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?n.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var n=this._precisionOf(this.options.step);return this.options.min!==null&&(n=Math.max(n,this._precisionOf(this.options.min))),n},_precisionOf:function(n){var t=n.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_adjustValue:function(n){var r,i,t=this.options;return(r=t.min!==null?t.min:0,i=n-r,i=Math.round(i/t.step)*t.step,n=r+i,n=parseFloat(n.toFixed(this._precision())),t.max!==null&&n>t.max)?t.max:t.min!==null&&n<t.min?t.min:n},_stop:function(n){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",n))},_setOption:function(n,t){if(n==="culture"||n==="numberFormat"){var i=this._parse(this.element.val());this.options[n]=t;this.element.val(this._format(i));return}(n==="max"||n==="min"||n==="step")&&typeof t=="string"&&(t=this._parse(t));n==="icons"&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down));this._super(n,t);n==="disabled"&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:t(function(n){this._super(n)}),_parse:function(n){return typeof n=="string"&&n!==""&&(n=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(n,10,this.options.culture):+n),n===""||isNaN(n)?null:n},_format:function(n){return n===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(n,this.options.numberFormat,this.options.culture):n},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var n=this.value();return n===null?!1:n===this._adjustValue(n)},_value:function(n,t){var i;n!==""&&(i=this._parse(n),i!==null&&(t||(i=this._adjustValue(i)),n=this._format(i)));this.element.val(n);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:t(function(n){this._stepUp(n)}),_stepUp:function(n){this._start()&&(this._spin((n||1)*this.options.step),this._stop())},stepDown:t(function(n){this._stepDown(n)}),_stepDown:function(n){this._start()&&(this._spin((n||1)*-this.options.step),this._stop())},pageUp:t(function(n){this._stepUp((n||1)*this.options.page)}),pageDown:t(function(n){this._stepDown((n||1)*this.options.page)}),value:function(n){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,n)},widget:function(){return this.uiSpinner}});
/*!
 * jQuery UI Tabs 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 */
ai=n.widget("ui.tabs",{version:"1.11.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var n=/#.*$/;return function(t){var i,r;t=t.cloneNode(!1);i=t.href.replace(n,"");r=location.href.replace(n,"");try{i=decodeURIComponent(i)}catch(u){}try{r=decodeURIComponent(r)}catch(u){}return t.hash.length>1&&i===r}}(),_create:function(){var i=this,t=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",t.collapsible);this._processTabs();t.active=this._initialActive();n.isArray(t.disabled)&&(t.disabled=n.unique(t.disabled.concat(n.map(this.tabs.filter(".ui-state-disabled"),function(n){return i.tabs.index(n)}))).sort());this.active=this.options.active!==!1&&this.anchors.length?this._findActive(t.active):n();this._refresh();this.active.length&&this.load(t.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,r=location.hash.substring(1);return t===null&&(r&&this.tabs.each(function(i,u){if(n(u).attr("aria-controls")===r)return t=i,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(t===null||t===-1)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):n()}},_tabKeydown:function(t){var r=n(this.document[0].activeElement).closest("li"),i=this.tabs.index(r),u=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:i++;break;case n.ui.keyCode.UP:case n.ui.keyCode.LEFT:u=!1;i--;break;case n.ui.keyCode.END:i=this.anchors.length-1;break;case n.ui.keyCode.HOME:i=0;break;case n.ui.keyCode.SPACE:t.preventDefault();clearTimeout(this.activating);this._activate(i);return;case n.ui.keyCode.ENTER:t.preventDefault();clearTimeout(this.activating);this._activate(i===this.options.active?!1:i);return;default:return}t.preventDefault();clearTimeout(this.activating);i=this._focusNextTab(i,u);t.ctrlKey||(r.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===n.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===n.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===n.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function u(){return t>r&&(t=0),t<0&&(t=r),t}for(var r=this.tabs.length-1;n.inArray(u(),this.options.disabled)!==-1;)t=i?t+1:t-1;return t},_focusNextTab:function(n,t){return n=this._findNextTab(n,t),this.tabs.eq(n).focus(),n},_setOption:function(n,t){if(n==="active"){this._activate(t);return}if(n==="disabled"){this._setupDisabled(t);return}this._super(n,t);n==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0));n==="event"&&this._setupEvents(t);n==="heightStyle"&&this._setupHeightStyle(t)},_sanitizeSelector:function(n){return n?n.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=n.map(i.filter(".ui-state-disabled"),function(n){return i.index(n)});this._processTabs();t.active!==!1&&this.anchors.length?this.active.length&&!n.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=n()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=n());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,r=this.anchors,u=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){n(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){n(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return n("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=n();this.anchors.each(function(i,r){var f,u,e,s=n(r).uniqueId().attr("id"),o=n(r).closest("li"),h=o.attr("aria-controls");t._isLocal(r)?(f=r.hash,e=f.substring(1),u=t.element.find(t._sanitizeSelector(f))):(e=o.attr("aria-controls")||n({}).uniqueId()[0].id,f="#"+e,u=t.element.find(f),u.length||(u=t._createPanel(e),u.insertAfter(t.panels[i-1]||t.tablist)),u.attr("aria-live","polite"));u.length&&(t.panels=t.panels.add(u));h&&o.data("ui-tabs-aria-controls",h);o.attr({"aria-controls":e,"aria-labelledby":s});u.attr("aria-labelledby",s)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");i&&(this._off(i.not(this.tabs)),this._off(r.not(this.anchors)),this._off(u.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return n("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){n.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i=0,r;r=this.tabs[i];i++)t===!0||n.inArray(i,t)!==-1?n(r).addClass("ui-state-disabled").attr("aria-disabled","true"):n(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(!0,this.anchors,{click:function(n){n.preventDefault()}});this._on(this.anchors,i);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,r=this.element.parent();t==="fill"?(i=r.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=n(this),r=t.css("position");r!=="absolute"&&r!=="fixed"&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=n(this).outerHeight(!0)}),this.panels.each(function(){n(this).height(Math.max(0,i-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):t==="auto"&&(i=0,this.panels.each(function(){i=Math.max(i,n(this).height("").height())}).height(i))},_eventHandler:function(t){var u=this.options,r=this.active,c=n(t.currentTarget),i=c.closest("li"),f=i[0]===r[0],e=f&&u.collapsible,o=e?n():this._getPanelForTab(i),s=r.length?this._getPanelForTab(r):n(),h={oldTab:r,oldPanel:s,newTab:e?n():i,newPanel:o};(t.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||f&&!u.collapsible||this._trigger("beforeActivate",t,h)===!1)||(u.active=e?!1:this.tabs.index(i),this.active=f?n():i,this.xhr&&this.xhr.abort(),s.length||o.length||n.error("jQuery UI Tabs: Mismatching fragment identifier."),o.length&&this.load(this.tabs.index(i),t),this._toggle(t,h))},_toggle:function(t,i){function e(){u.running=!1;u._trigger("activate",t,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active");r.length&&u.options.show?u._show(r,u.options.show,e):(r.show(),e())}var u=this,r=i.newPanel,f=i.oldPanel;this.running=!0;f.length&&this.options.hide?this._hide(f,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");o()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),f.hide(),o());f.attr("aria-hidden","true");i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});r.length&&f.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return n(this).attr("tabIndex")===0}).attr("tabIndex",-1);r.attr("aria-hidden","false");i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var r,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),r=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:r,currentTarget:r,preventDefault:n.noop}))},_findActive:function(t){return t===!1?n():this.tabs.eq(t)},_getIndex:function(n){return typeof n=="string"&&(n=this.anchors.index(this.anchors.filter("[href$='"+n+"']"))),n},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){n.data(this,"ui-tabs-destroy")?n(this).remove():n(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var t=n(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")});this.panels.show();this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(t===undefined?i=!1:(t=this._getIndex(t),i=n.isArray(i)?n.map(i,function(n){return n!==t?n:null}):n.map(this.tabs,function(n,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(t===undefined)i=!0;else{if(t=this._getIndex(t),n.inArray(t,i)!==-1)return;i=n.isArray(i)?n.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var u=this,r=this.tabs.eq(t),e=r.find(".ui-tabs-anchor"),f=this._getPanelForTab(r),o={tab:r,panel:f};this._isLocal(e[0])||(this.xhr=n.ajax(this._ajaxSettings(e,i,o)),this.xhr&&this.xhr.statusText!=="canceled"&&(r.addClass("ui-tabs-loading"),f.attr("aria-busy","true"),this.xhr.success(function(n){setTimeout(function(){f.html(n);u._trigger("load",i,o)},1)}).complete(function(n,t){setTimeout(function(){t==="abort"&&u.panels.stop(!1,!0);r.removeClass("ui-tabs-loading");f.removeAttr("aria-busy");n===u.xhr&&delete u.xhr},1)})))},_ajaxSettings:function(t,i,r){var u=this;return{url:t.attr("href"),beforeSend:function(t,f){return u._trigger("beforeLoad",i,n.extend({jqXHR:t,ajaxSettings:f},r))}}},_getPanelForTab:function(t){var i=n(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}});
/*!
 * jQuery UI Tooltip 1.11.2
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tooltip/
 */
vi=n.widget("ui.tooltip",{version:"1.11.2",options:{content:function(){var t=n(this).attr("title")||"";return n("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(i);t.data("ui-tooltip-id",i).attr("aria-describedby",n.trim(r.join(" ")))},_removeDescribedBy:function(t){var u=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=n.inArray(u,i);r!==-1&&i.splice(r,1);t.removeData("ui-tooltip-id");i=n.trim(i.join(" "));i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable();this.liveRegion=n("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var r=this;if(t==="disabled"){this[i?"_disable":"_enable"]();this.options[t]=i;return}this._super(t,i);t==="content"&&n.each(this.tooltips,function(n,t){r._updateContent(t.element)})},_disable:function(){var t=this;n.each(this.tooltips,function(i,r){var u=n.Event("blur");u.target=u.currentTarget=r.element[0];t.close(u,!0)});this.element.find(this.options.items).addBack().each(function(){var t=n(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=n(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var r=this,i=n(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&i.parents().each(function(){var t=n(this),i;t.data("ui-tooltip-open")&&(i=n.Event("blur"),i.target=i.currentTarget=this,r.close(i,!0));t.attr("title")&&(t.uniqueId(),r.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(i,t))},_updateContent:function(n,t){var i,r=this.options.content,u=this,f=t?t.type:null;if(typeof r=="string")return this._open(t,n,r);i=r.call(n[0],function(i){n.data("ui-tooltip-open")&&u._delay(function(){t&&(t.type=f);this._open(t,n,i)})});i&&this._open(t,n,i)},_open:function(t,i,r){function h(n){(s.of=n,u.is(":hidden"))||u.position(s)}var f,u,e,c,o,s=n.extend({},this.options.position);if(r){if(f=this._find(i),f){f.tooltip.find(".ui-tooltip-content").html(r);return}i.is("[title]")&&(t&&t.type==="mouseover"?i.attr("title",""):i.removeAttr("title"));f=this._tooltip(i);u=f.tooltip;this._addDescribedBy(i,u.attr("id"));u.find(".ui-tooltip-content").html(r);this.liveRegion.children().hide();r.clone?(o=r.clone(),o.removeAttr("id").find("[id]").removeAttr("id")):o=r;n("<div>").html(o).appendTo(this.liveRegion);this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:h}),h(t)):u.position(n.extend({of:i},this.options.position));u.hide();this._show(u,this.options.show);this.options.show&&this.options.show.delay&&(c=this.delayedShow=setInterval(function(){u.is(":visible")&&(h(s.of),clearInterval(c))},n.fx.interval));this._trigger("open",t,{tooltip:u});e={keyup:function(t){if(t.keyCode===n.ui.keyCode.ESCAPE){var r=n.Event(t);r.currentTarget=i[0];this.close(r,!0)}}};i[0]!==this.element[0]&&(e.remove=function(){this._removeTooltip(u)});t&&t.type!=="mouseover"||(e.mouseleave="close");t&&t.type!=="focusin"||(e.focusout="close");this._on(!0,i,e)}},close:function(t){var u,f=this,i=n(t?t.currentTarget:this.element),r=this._find(i);r&&((u=r.tooltip,r.closing)||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),r.hiding=!0,u.stop(!0),this._hide(u,this.options.hide,function(){f._removeTooltip(n(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&n.each(this.parents,function(t,i){n(i.element).attr("title",i.title);delete f.parents[t]}),r.closing=!0,this._trigger("close",t,{tooltip:u}),r.hiding||(r.closing=!1)))},_tooltip:function(t){var i=n("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),r=i.uniqueId().attr("id");return n("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[r]={element:t,tooltip:i}},_find:function(n){var t=n.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(n){n.remove();delete this.tooltips[n.attr("id")]},_destroy:function(){var t=this;n.each(this.tooltips,function(i,r){var f=n.Event("blur"),u=r.element;f.target=f.currentTarget=u[0];t.close(f,!0);n("#"+i).remove();u.data("ui-tooltip-title")&&(u.attr("title")||u.attr("title",u.data("ui-tooltip-title")),u.removeData("ui-tooltip-title"))});this.liveRegion.remove()}})}),function(n){"use strict";var t={pips:function(t){function l(t){var r=n(t).data("value"),f=i.element,u,o;!0===i.options.range?(u=f.slider("values"),o=u[0]===u[1]?r<u[0]?[r,u[1]]:[u[0],r]:Math.abs(u[0]-r)===Math.abs(u[1]-r)?[r,r]:Math.abs(u[0]-r)<Math.abs(u[1]-r)?[r,u[1]]:[u[0],r],f.slider("values",o),e.range(o)):(f.slider("value",r),e.single(r))}function c(n){var e,u,o=n,t="ui-slider-pip",h="",s,c;return"first"===n?o=0:"last"===n&&(o=f),s=i.options.min+i.options.step*o,c=s.toString().replace(".","-"),e=r.labels?r.labels[o]:s,"undefined"==typeof e&&(e=""),"first"===n?(u="0%",t+=" ui-slider-pip-first",t+="label"===r.first?" ui-slider-pip-label":"",t+=!1===r.first?" ui-slider-pip-hide":""):"last"===n?(u="100%",t+=" ui-slider-pip-last",t+="label"===r.last?" ui-slider-pip-label":"",t+=!1===r.last?" ui-slider-pip-hide":""):(u=(100/f*n).toFixed(4)+"%",t+="label"===r.rest?" ui-slider-pip-label":"",t+=!1===r.rest?" ui-slider-pip-hide":""),t+=" ui-slider-pip-"+c,h=i.options.orientation==="horizontal"?"left: "+u:"bottom: "+u,'<span class="'+t+'" style="'+h+'"><span class="ui-slider-line"><\/span><span class="ui-slider-label" data-value="'+s+'">'+r.formatLabel(e)+"<\/span><\/span>"}var i=this,u="",f=(i.options.max-i.options.min)/i.options.step,r={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:f>100?Math.floor(f*.05):1,formatLabel:function(n){return i.options.step==36e5?this.prefix+moment(n).format("MMMYYYY")+this.suffix:this.prefix+n+this.suffix}},e,o,s,h;for(n.extend(r,t),i.options.pipStep=r.step,i.element.addClass("ui-slider-pips").find(".ui-slider-pip").remove(),e={single:function(n){var t=this.resetClasses();t.filter(".ui-slider-pip-"+n).addClass("ui-slider-pip-selected")},range:function(n){var t=this.resetClasses();t.filter(".ui-slider-pip-"+n[0]).addClass("ui-slider-pip-selected-first");t.filter(".ui-slider-pip-"+n[1]).addClass("ui-slider-pip-selected-second")},resetClasses:function(){return i.element.find(".ui-slider-pip").removeClass("ui-slider-pip-selected ui-slider-pip-selected-first ui-slider-pip-selected-second")}},i.options.pipStep=Math.round(i.options.pipStep),u+=c("first"),o=1;o<f;o++)0==o%i.options.pipStep&&(u+=c(o));u+=c("last");i.options.values?(s=["ui-slider-pip-"+i.options.values[0],"ui-slider-pip-"+i.options.values[1]],h=["ui-slider-pip-"+i.options.values[0]+" ui-slider-pip-selected-initial-first","ui-slider-pip-"+i.options.values[1]+" ui-slider-pip-selected-initial-second"],u=u.replace(s[0],h[0]).replace(s[1],h[1])):(s="ui-slider-pip-"+i.options.value,h="ui-slider-pip-"+i.options.value+" ui-slider-pip-selected-initial",u=u.replace(s,h));i.element.append(u);i.element.on("mouseup",".ui-slider-label",function(){l(this)});i.element.on("slide.selectPip slidechange.selectPip",function(n,t){t.values?e.range(t.values):e.single(t.value)})}};n.extend(!0,n.ui.slider.prototype,t)}(jQuery),function(n){"use strict";var t={float:function(t){var i=this,e,u=[],f,r={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",dateFormat:!1,event:"slidechange slide",formatLabel:function(n){return i.options.step==36e5?this.prefix+moment(n).format("MMMYYYY")+this.suffix:this.prefix+n+this.suffix}};n.extend(r,t);i.options.value<i.options.min&&(i.options.value=i.options.min);i.options.value>i.options.max&&(i.options.value=i.options.max);i.options.values&&(i.options.values[0]<i.options.min&&(i.options.values[0]=i.options.min),i.options.values[1]<i.options.min&&(i.options.values[1]=i.options.min),i.options.values[0]>i.options.max&&(i.options.values[0]=i.options.max),i.options.values[1]>i.options.max&&(i.options.values[1]=i.options.max));i.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove();r.handle&&(i.options.values?(r.labels?(u[0]=r.labels[i.options.values[0]-i.options.min],u[1]=r.labels[i.options.values[1]-i.options.min],typeof u[0]=="undefined"&&(u[0]=i.options.values[0]),typeof u[1]=="undefined"&&(u[1]=i.options.values[1])):(u[0]=i.options.values[0],u[1]=i.options.values[1]),e=[n('<span class="ui-slider-tip">'+r.formatLabel(u[0])+"<\/span>"),n('<span class="ui-slider-tip">'+r.formatLabel(u[1])+"<\/span>")]):(r.labels?(f=r.labels[i.options.value-i.options.min],typeof f=="undefined"&&(f=i.options.value)):f=i.options.value,e=n('<span class="ui-slider-tip">'+r.formatLabel(f)+"<\/span>")),i.element.find(".ui-slider-handle").each(function(t,i){n(i).append(e[t])}));r.pips&&i.element.find(".ui-slider-label").each(function(t,i){var u=n(i),f=u.data("value"),e=u.data("value"),o;typeof r.labels[f]!="undefined"&&(e=r.labels[f]);o=n('<span class="ui-slider-tip-label">'+r.formatLabel(e)+"<\/span>").insertAfter(u)});r.event!=="slide"&&r.event!=="slidechange"&&r.event!=="slide slidechange"&&r.event!=="slidechange slide"&&(r.event="slidechange slide");i.element.on(r.event,function(t,u){var f;r.labels?(f=r.labels[u.value-i.options.min],typeof f=="undefined"&&(f=u.value)):f=u.value;n(u.handle).find(".ui-slider-tip").html(r.formatLabel(f))})}};n.extend(!0,n.ui.slider.prototype,t)}(jQuery);!function(n,t,i){function s(){var t=n.L;r.noConflict=function(){return n.L=t,this};n.L=r}var r={version:"0.8-dev"},u,e,f,o;"object"==typeof module&&"object"==typeof module.exports?module.exports=r:"function"==typeof define&&define.amd&&define(r);"undefined"!=typeof n&&s();r.Util={extend:function(n){for(var i,r,t=1,u=arguments.length;u>t;t++){r=arguments[t];for(i in r)n[i]=r[i]}return n},create:Object.create||function(){function n(){}return function(t){return n.prototype=t,new n}}(),bind:function(n,t){var i=Array.prototype.slice,r;return n.bind?n.bind.apply(n,i.call(arguments,1)):(r=i.call(arguments,2),function(){return n.apply(t,r.length?r.concat(i.call(arguments)):arguments)})},stamp:function(n){return n._leaflet_id=n._leaflet_id||++r.Util.lastId,n._leaflet_id},lastId:0,throttle:function(n,t,i){var u,r,f,e;return e=function(){u=!1;r&&(f.apply(i,r),r=!1)},f=function(){u?r=arguments:(n.apply(i,arguments),setTimeout(e,t),u=!0)}},wrapNum:function(n,t,i){var f=t[1],r=t[0],u=f-r;return n===f&&i?n:((n-r)%u+u)%u+r},falseFn:function(){return!1},formatNum:function(n,t){var i=Math.pow(10,t||5);return Math.round(n*i)/i},trim:function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")},splitWords:function(n){return r.Util.trim(n).split(/\s+/)},setOptions:function(n,t){n.hasOwnProperty("options")||(n.options=n.options?r.Util.create(n.options):{});for(var i in t)n.options[i]=t[i];return n.options},getParamString:function(n,t,i){var u=[];for(var r in n)u.push(encodeURIComponent(i?r.toUpperCase():r)+"="+encodeURIComponent(n[r]));return(t&&-1!==t.indexOf("?")?"&":"?")+u.join("&")},template:function(n,t){return n.replace(r.Util.templateRe,function(n,r){var u=t[r];if(u===i)throw new Error("No value provided for variable "+n);return"function"==typeof u&&(u=u(t)),u})},templateRe:/\{ *([\w_]+) *\}/g,isArray:Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function t(t){return n["webkit"+t]||n["moz"+t]||n["ms"+t]}function i(t){var i=+new Date,r=Math.max(0,16-(i-u));return u=i+r,n.setTimeout(t,r)}var u=0,f=n.requestAnimationFrame||t("RequestAnimationFrame")||i,e=n.cancelAnimationFrame||t("CancelAnimationFrame")||t("CancelRequestAnimationFrame")||function(t){n.clearTimeout(t)};r.Util.requestAnimFrame=function(t,u,e){return e&&f===i?void t.call(u):f.call(n,r.bind(t,u))};r.Util.cancelAnimFrame=function(t){t&&e.call(n,t)}}();r.extend=r.Util.extend;r.bind=r.Util.bind;r.stamp=r.Util.stamp;r.setOptions=r.Util.setOptions;r.Class=function(){};r.Class.extend=function(n){var i=function(){this.initialize&&this.initialize.apply(this,arguments);this.callInitHooks()},f=i.__super__=this.prototype,t=r.Util.create(f),u;t.constructor=i;i.prototype=t;for(u in this)this.hasOwnProperty(u)&&"prototype"!==u&&(i[u]=this[u]);return n.statics&&(r.extend(i,n.statics),delete n.statics),n.includes&&(r.Util.extend.apply(null,[t].concat(n.includes)),delete n.includes),t.options&&(n.options=r.Util.extend(r.Util.create(t.options),n.options)),r.extend(t,n),t._initHooks=[],t.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this);this._initHooksCalled=!0;for(var n=0,i=t._initHooks.length;i>n;n++)t._initHooks[n].call(this)}},i};r.Class.include=function(n){r.extend(this.prototype,n)};r.Class.mergeOptions=function(n){r.extend(this.prototype.options,n)};r.Class.addInitHook=function(n){var t=Array.prototype.slice.call(arguments,1),i="function"==typeof n?n:function(){this[n].apply(this,t)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(i)};r.Evented=r.Class.extend({on:function(n,t,i){var f,u,e;if("object"==typeof n)for(f in n)this._on(f,n[f],t);else for(n=r.Util.splitWords(n),u=0,e=n.length;e>u;u++)this._on(n[u],t,i);return this},off:function(n,t,i){var f,u,e;if(n)if("object"==typeof n)for(f in n)this._off(f,n[f],t);else for(n=r.Util.splitWords(n),u=0,e=n.length;e>u;u++)this._off(n[u],t,i);else delete this._events;return this},_on:function(n,t,i){var u=this._events=this._events||{},f=i&&i!==this&&r.stamp(i);if(f){var e=n+"_idx",o=n+"_len",s=u[e]=u[e]||{},h=r.stamp(t)+"_"+f;s[h]||(s[h]={fn:t,ctx:i},u[o]=(u[o]||0)+1)}else u[n]=u[n]||[],u[n].push({fn:t})},_off:function(n,t,i){var f=this._events,c=n+"_idx",l=n+"_len",u,e,a,o,s,h;if(f){if(!t)return delete f[n],delete f[c],void delete f[l];if(h=i&&i!==this&&r.stamp(i),h)s=r.stamp(t)+"_"+h,u=f[c],u&&u[s]&&(o=u[s],delete u[s],f[l]--);else if(u=f[n])for(e=0,a=u.length;a>e;e++)if(u[e].fn===t){o=u[e];u.splice(e,1);break}o&&(o.fn=r.Util.falseFn)}},fire:function(n,t,i){var f,u,e,c,s,h,o;if(!this.listens(n,i))return this;if(f=r.Util.extend({},t,{type:n,target:this}),u=this._events,u){if(o=u[n+"_idx"],u[n])for(s=u[n].slice(),e=0,c=s.length;c>e;e++)s[e].fn.call(this,f);for(h in o)o[h].fn.call(o[h].ctx,f)}return i&&this._propagateEvent(f),this},listens:function(n,t){var i=this._events,r;if(i&&(i[n]||i[n+"_len"]))return!0;if(t)for(r in this._eventParents)if(this._eventParents[r].listens(n,t))return!0;return!1},once:function(n,t,i){var u,f;if("object"==typeof n){for(u in n)this.once(u,n[u],t);return this}f=r.bind(function(){this.off(n,t,i).off(n,f,i)},this);return this.on(n,t,i).on(n,f,i)},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[r.stamp(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[r.stamp(n)],this},_propagateEvent:function(n){for(var t in this._eventParents)this._eventParents[t].fire(n.type,r.extend({layer:n.target},n),!0)}});u=r.Evented.prototype;u.addEventListener=u.on;u.removeEventListener=u.clearAllEventListeners=u.off;u.addOneTimeEventListener=u.once;u.fireEvent=u.fire;u.hasEventListeners=u.listens;r.Mixin={Events:u},function(){var i=navigator.userAgent.toLowerCase(),e=t.documentElement,u="ActiveXObject"in n,o=-1!==i.indexOf("webkit"),h=-1!==i.indexOf("phantom"),c=-1!==i.search("android [23]"),l=-1!==i.indexOf("chrome"),f="undefined"!=typeof orientation,a=navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!n.PointerEvent,v=n.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints||a,y=u&&"transition"in e.style,s="WebKitCSSMatrix"in n&&"m11"in new n.WebKitCSSMatrix&&!c,p="MozPerspective"in e.style,w="OTransition"in e.style,b=!n.L_NO_TOUCH&&!h&&(v||"ontouchstart"in n||n.DocumentTouch&&t instanceof n.DocumentTouch);r.Browser={ie:u,ielt9:u&&!t.addEventListener,webkit:o,gecko:-1!==i.indexOf("gecko")&&!o&&!n.opera&&!u,android:-1!==i.indexOf("android"),android23:c,chrome:l,safari:!l&&-1!==i.indexOf("safari"),ie3d:y,webkit3d:s,gecko3d:p,opera3d:w,any3d:!n.L_DISABLE_3D&&(y||s||p||w)&&!h,mobile:f,mobileWebkit:f&&o,mobileWebkit3d:f&&s,mobileOpera:f&&n.opera,touch:!!b,msPointer:!!a,pointer:!!v,retina:(n.devicePixelRatio||n.screen.deviceXDPI/n.screen.logicalXDPI)>1}}();r.Point=function(n,t,i){this.x=i?Math.round(n):n;this.y=i?Math.round(t):t};r.Point.prototype={clone:function(){return new r.Point(this.x,this.y)},add:function(n){return this.clone()._add(r.point(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(r.point(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(n){n=r.point(n);var t=n.x-this.x,i=n.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(n){return n=r.point(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=r.point(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+r.Util.formatNum(this.x)+", "+r.Util.formatNum(this.y)+")"}};r.point=function(n,t,u){return n instanceof r.Point?n:r.Util.isArray(n)?new r.Point(n[0],n[1]):n===i||null===n?n:new r.Point(n,t,u)};r.Bounds=function(n,t){if(n)for(var r=t?[n,t]:n,i=0,u=r.length;u>i;i++)this.extend(r[i])};r.Bounds.prototype={extend:function(n){return n=r.point(n),this.min||this.max?(this.min.x=Math.min(n.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(n.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)):(this.min=n.clone(),this.max=n.clone()),this},getCenter:function(n){return new r.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return new r.Point(this.min.x,this.max.y)},getTopRight:function(){return new r.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var t,i;return n="number"==typeof n[0]||n instanceof r.Point?r.point(n):r.bounds(n),n instanceof r.Bounds?(t=n.min,i=n.max):t=i=n,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(n){n=r.bounds(n);var t=this.min,i=this.max,u=n.min,f=n.max,e=f.x>=t.x&&u.x<=i.x,o=f.y>=t.y&&u.y<=i.y;return e&&o},isValid:function(){return!(!this.min||!this.max)}};r.bounds=function(n,t){return!n||n instanceof r.Bounds?n:new r.Bounds(n,t)};r.Transformation=function(n,t,i,r){this._a=n;this._b=t;this._c=i;this._d=r};r.Transformation.prototype={transform:function(n,t){return this._transform(n.clone(),t)},_transform:function(n,t){return t=t||1,n.x=t*(this._a*n.x+this._b),n.y=t*(this._c*n.y+this._d),n},untransform:function(n,t){return t=t||1,new r.Point((n.x/t-this._b)/this._a,(n.y/t-this._d)/this._c)}};r.DomUtil={get:function(n){return"string"==typeof n?t.getElementById(n):n},getStyle:function(n,i){var r=n.style[i]||n.currentStyle&&n.currentStyle[i],u;return(!r||"auto"===r)&&t.defaultView&&(u=t.defaultView.getComputedStyle(n,null),r=u?u[i]:null),"auto"===r?null:r},create:function(n,i,r){var u=t.createElement(n);return u.className=i,r&&r.appendChild(u),u},remove:function(n){var t=n.parentNode;t&&t.removeChild(n)},empty:function(n){for(;n.firstChild;)n.removeChild(n.firstChild)},toFront:function(n){n.parentNode.appendChild(n)},toBack:function(n){var t=n.parentNode;t.insertBefore(n,t.firstChild)},hasClass:function(n,t){if(n.classList!==i)return n.classList.contains(t);var u=r.DomUtil.getClass(n);return u.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(u)},addClass:function(n,t){var f;if(n.classList!==i)for(var e=r.Util.splitWords(t),u=0,o=e.length;o>u;u++)n.classList.add(e[u]);else r.DomUtil.hasClass(n,t)||(f=r.DomUtil.getClass(n),r.DomUtil.setClass(n,(f?f+" ":"")+t))},removeClass:function(n,t){n.classList!==i?n.classList.remove(t):r.DomUtil.setClass(n,r.Util.trim((" "+r.DomUtil.getClass(n)+" ").replace(" "+t+" "," ")))},setClass:function(n,t){n.className.baseVal===i?n.className=t:n.className.baseVal=t},getClass:function(n){return n.className.baseVal===i?n.className:n.className.baseVal},setOpacity:function(n,t){if("opacity"in n.style)n.style.opacity=t;else if("filter"in n.style){var i=!1,r="DXImageTransform.Microsoft.Alpha";try{i=n.filters.item(r)}catch(u){if(1===t)return}t=Math.round(100*t);i?(i.Enabled=100!==t,i.Opacity=t):n.style.filter+=" progid:"+r+"(opacity="+t+")"}},testProp:function(n){for(var r=t.documentElement.style,i=0;i<n.length;i++)if(n[i]in r)return n[i];return!1},setTransform:function(n,t,i){var u=t||new r.Point(0,0);n.style[r.DomUtil.TRANSFORM]="translate3d("+u.x+"px,"+u.y+"px,0)"+(i?" scale("+i+")":"")},setPosition:function(n,t,i){n._leaflet_pos=t;r.Browser.any3d&&!i?r.DomUtil.setTransform(n,t):(n.style.left=t.x+"px",n.style.top=t.y+"px")},getPosition:function(n){return n._leaflet_pos}},function(){var u,i;r.DomUtil.TRANSFORM=r.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);u=r.DomUtil.TRANSITION=r.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);(r.DomUtil.TRANSITION_END="webkitTransition"===u||"OTransition"===u?u+"End":"transitionend","onselectstart"in t)?(r.DomUtil.disableTextSelection=function(){r.DomEvent.on(n,"selectstart",r.DomEvent.preventDefault)},r.DomUtil.enableTextSelection=function(){r.DomEvent.off(n,"selectstart",r.DomEvent.preventDefault)}):(i=r.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),r.DomUtil.disableTextSelection=function(){if(i){var n=t.documentElement.style;this._userSelect=n[i];n[i]="none"}},r.DomUtil.enableTextSelection=function(){i&&(t.documentElement.style[i]=this._userSelect,delete this._userSelect)});r.DomUtil.disableImageDrag=function(){r.DomEvent.on(n,"dragstart",r.DomEvent.preventDefault)};r.DomUtil.enableImageDrag=function(){r.DomEvent.off(n,"dragstart",r.DomEvent.preventDefault)}}();r.LatLng=function(n,t,r){if(isNaN(n)||isNaN(t))throw new Error("Invalid LatLng object: ("+n+", "+t+")");this.lat=+n;this.lng=+t;r!==i&&(this.alt=+r)};r.LatLng.prototype={equals:function(n,t){if(!n)return!1;n=r.latLng(n);var u=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return(t===i?1e-9:t)>=u},toString:function(n){return"LatLng("+r.Util.formatNum(this.lat,n)+", "+r.Util.formatNum(this.lng,n)+")"},distanceTo:function(n){return r.CRS.Earth.distance(this,r.latLng(n))},wrap:function(){return r.CRS.Earth.wrapLatLng(this)},toBounds:function(n){var t=180*n/40075017,i=t/Math.cos(Math.PI/180*this.lat);return r.latLngBounds([this.lat-t,this.lng-i],[this.lat+t,this.lng+i])}};r.latLng=function(n,t,u){return n instanceof r.LatLng?n:r.Util.isArray(n)&&"object"!=typeof n[0]?3===n.length?new r.LatLng(n[0],n[1],n[2]):2===n.length?new r.LatLng(n[0],n[1]):null:n===i||null===n?n:"object"==typeof n&&"lat"in n?new r.LatLng(n.lat,"lng"in n?n.lng:n.lon,n.alt):t===i?null:new r.LatLng(n,t,u)};r.LatLngBounds=function(n,t){if(n)for(var r=t?[n,t]:n,i=0,u=r.length;u>i;i++)this.extend(r[i])};r.LatLngBounds.prototype={extend:function(n){var t,i,u=this._southWest,f=this._northEast;if(n instanceof r.LatLng)t=n,i=n;else{if(!(n instanceof r.LatLngBounds))return n?this.extend(r.latLng(n)||r.latLngBounds(n)):this;if(t=n._southWest,i=n._northEast,!t||!i)return this}return u||f?(u.lat=Math.min(t.lat,u.lat),u.lng=Math.min(t.lng,u.lng),f.lat=Math.max(i.lat,f.lat),f.lng=Math.max(i.lng,f.lng)):(this._southWest=new r.LatLng(t.lat,t.lng),this._northEast=new r.LatLng(i.lat,i.lng)),this},pad:function(n){var t=this._southWest,i=this._northEast,u=Math.abs(t.lat-i.lat)*n,f=Math.abs(t.lng-i.lng)*n;return new r.LatLngBounds(new r.LatLng(t.lat-u,t.lng-f),new r.LatLng(i.lat+u,i.lng+f))},getCenter:function(){return new r.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new r.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new r.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){n="number"==typeof n[0]||n instanceof r.LatLng?r.latLng(n):r.latLngBounds(n);var t,i,u=this._southWest,f=this._northEast;return n instanceof r.LatLngBounds?(t=n.getSouthWest(),i=n.getNorthEast()):t=i=n,t.lat>=u.lat&&i.lat<=f.lat&&t.lng>=u.lng&&i.lng<=f.lng},intersects:function(n){n=r.latLngBounds(n);var t=this._southWest,i=this._northEast,u=n.getSouthWest(),f=n.getNorthEast(),e=f.lat>=t.lat&&u.lat<=i.lat,o=f.lng>=t.lng&&u.lng<=i.lng;return e&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n){return n?(n=r.latLngBounds(n),this._southWest.equals(n.getSouthWest())&&this._northEast.equals(n.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}};r.latLngBounds=function(n,t){return!n||n instanceof r.LatLngBounds?n:new r.LatLngBounds(n,t)};r.Projection={};r.Projection.LonLat={project:function(n){return new r.Point(n.lng,n.lat)},unproject:function(n){return new r.LatLng(n.y,n.x)},bounds:r.bounds([-180,-90],[180,90])};r.Projection.SphericalMercator={R:6378137,project:function(n){var t=Math.PI/180,i=1-1e-15,u=Math.max(Math.min(Math.sin(n.lat*t),i),-i);return new r.Point(this.R*n.lng*t,this.R*Math.log((1+u)/(1-u))/2)},unproject:function(n){var t=180/Math.PI;return new r.LatLng((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*t,n.x*t/this.R)},bounds:function(){var n=6378137*Math.PI;return r.bounds([-n,-n],[n,n])}()};r.CRS={latLngToPoint:function(n,t){var i=this.projection.project(n),r=this.scale(t);return this.transformation._transform(i,r)},pointToLatLng:function(n,t){var i=this.scale(t),r=this.transformation.untransform(n,i);return this.projection.unproject(r)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},getProjectedBounds:function(n){if(this.infinite)return null;var t=this.projection.bounds,i=this.scale(n),u=this.transformation.transform(t.min,i),f=this.transformation.transform(t.max,i);return r.bounds(u,f)},wrapLatLng:function(n){var t=this.wrapLng?r.Util.wrapNum(n.lng,this.wrapLng,!0):n.lng,i=this.wrapLat?r.Util.wrapNum(n.lat,this.wrapLat,!0):n.lat;return r.latLng(i,t)}};r.CRS.Simple=r.extend({},r.CRS,{projection:r.Projection.LonLat,transformation:new r.Transformation(1,0,-1,0),scale:function(n){return Math.pow(2,n)},distance:function(n,t){var i=t.lng-n.lng,r=t.lat-n.lat;return Math.sqrt(i*i+r*r)},infinite:!0});r.CRS.Earth=r.extend({},r.CRS,{wrapLng:[-180,180],R:6378137,distance:function(n,t){var i=Math.PI/180,r=n.lat*i,u=t.lat*i,f=Math.sin(r)*Math.sin(u)+Math.cos(r)*Math.cos(u)*Math.cos((t.lng-n.lng)*i);return this.R*Math.acos(Math.min(f,1))}});r.CRS.EPSG3857=r.extend({},r.CRS.Earth,{code:"EPSG:3857",projection:r.Projection.SphericalMercator,transformation:function(){var n=.5/(Math.PI*r.Projection.SphericalMercator.R);return new r.Transformation(n,.5,-n,.5)}()});r.CRS.EPSG900913=r.extend({},r.CRS.EPSG3857,{code:"EPSG:900913"});r.CRS.EPSG4326=r.extend({},r.CRS.Earth,{code:"EPSG:4326",projection:r.Projection.LonLat,transformation:new r.Transformation(1/180,1,-1/180,.5)});r.Map=r.Evented.extend({options:{crs:r.CRS.EPSG3857,fadeAnimation:!0,trackResize:!0,markerZoomAnimation:!0},initialize:function(n,t){t=r.setOptions(this,t);this._initContainer(n);this._initLayout();this._onResize=r.bind(this._onResize,this);this._initEvents();t.maxBounds&&this.setMaxBounds(t.maxBounds);t.zoom!==i&&(this._zoom=this._limitZoom(t.zoom));t.center&&t.zoom!==i&&this.setView(r.latLng(t.center),t.zoom,{reset:!0});this._handlers=[];this._layers={};this._zoomBoundLayers={};this._sizeChanged=!0;this.callInitHooks();this._addLayers(this.options.layers)},setView:function(n,t){return t=t===i?this.getZoom():t,this._resetView(r.latLng(n),this._limitZoom(t)),this},setZoom:function(n,t){return this._loaded?this.setView(this.getCenter(),n,{zoom:t}):(this._zoom=this._limitZoom(n),this)},zoomIn:function(n,t){return this.setZoom(this._zoom+(n||1),t)},zoomOut:function(n,t){return this.setZoom(this._zoom-(n||1),t)},setZoomAround:function(n,t,i){var f=this.getZoomScale(t),u=this.getSize().divideBy(2),e=n instanceof r.Point?n:this.latLngToContainerPoint(n),o=e.subtract(u).multiplyBy(1-1/f),s=this.containerPointToLatLng(u.add(o));return this.setView(s,t,{zoom:i})},fitBounds:function(n,t){t=t||{};n=n.getBounds?n.getBounds():r.latLngBounds(n);var u=r.point(t.paddingTopLeft||t.padding||[0,0]),f=r.point(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(n,!1,u.add(f));i=t.maxZoom?Math.min(t.maxZoom,i):i;var e=f.subtract(u).divideBy(2),o=this.project(n.getSouthWest(),i),s=this.project(n.getNorthEast(),i),h=this.unproject(o.add(s).divideBy(2).add(e),i);return this.setView(h,i,t)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,t){return this.setView(n,this._zoom,{pan:t})},panBy:function(n){return this.fire("movestart"),this._rawPanBy(r.point(n)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(n){return n=r.latLngBounds(n),this.options.maxBounds=n,n?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):this.off("moveend",this._panInsideMaxBounds)},panInsideBounds:function(n,t){var i=this.getCenter(),r=this._limitCenter(i,this._zoom,n);return i.equals(r)?this:this.panTo(r,t)},invalidateSize:function(n){var i;if(!this._loaded)return this;n=r.extend({animate:!1,pan:!0},n===!0?{animate:!0}:n);i=this.getSize();this._sizeChanged=!0;this._initialCenter=null;var u=this.getSize(),f=i.divideBy(2).round(),e=u.divideBy(2).round(),t=f.subtract(e);return t.x||t.y?(n.animate&&n.pan?this.panBy(t):(n.pan&&this._rawPanBy(t),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:u})):this},stop:function(){return r.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},addHandler:function(n,t){if(!t)return this;var i=this[n]=new t(this);return this._handlers.push(i),this.options[n]&&i.enable(),this},remove:function(){this._initEvents("off");try{delete this._container._leaflet}catch(n){this._container._leaflet=i}return r.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload"),this},createPane:function(n,t){var u="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),i=r.DomUtil.create("div",u,t||this._mapPane);return n&&(this._panes[n]=i),i},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),t=this.unproject(n.getBottomLeft()),i=this.unproject(n.getTopRight());return new r.LatLngBounds(t,i)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,t,i){n=r.latLngBounds(n);var f,u=this.getMinZoom()-(t?1:0),s=this.getMaxZoom(),e=this.getSize(),h=n.getNorthWest(),c=n.getSouthEast(),o=!0;i=r.point(i||[0,0]);do u++,f=this.project(c,u).subtract(this.project(h,u)).add(i).floor(),o=t?f.x<e.x||f.y<e.y:e.contains(f);while(o&&s>=u);return o&&t?null:t?u:u-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new r.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var n=this._getTopLeftPoint();return new r.Bounds(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===i?this.getZoom():n)},getPane:function(n){return"string"==typeof n?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,t){var r=this.options.crs;return t=t===i?this._zoom:t,r.scale(n)/r.scale(t)},getScaleZoom:function(n,t){return t=t===i?this._zoom:t,t+Math.log(n)/Math.LN2},project:function(n,t){return t=t===i?this._zoom:t,this.options.crs.latLngToPoint(r.latLng(n),t)},unproject:function(n,t){return t=t===i?this._zoom:t,this.options.crs.pointToLatLng(r.point(n),t)},layerPointToLatLng:function(n){var t=r.point(n).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(n){var t=this.project(r.latLng(n))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(r.latLng(n))},distance:function(n,t){return this.options.crs.distance(r.latLng(n),r.latLng(t))},containerPointToLayerPoint:function(n){return r.point(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return r.point(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var t=this.containerPointToLayerPoint(r.point(n));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(r.latLng(n)))},mouseEventToContainerPoint:function(n){return r.DomEvent.getMousePosition(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var t=this._container=r.DomUtil.get(n);if(!t)throw new Error("Map container not found.");if(t._leaflet)throw new Error("Map container is already initialized.");t._leaflet=!0},_initLayout:function(){var t=this._container,n;this._fadeAnimated=this.options.fadeAnimation&&r.Browser.any3d;r.DomUtil.addClass(t,"leaflet-container"+(r.Browser.touch?" leaflet-touch":"")+(r.Browser.retina?" leaflet-retina":"")+(r.Browser.ielt9?" leaflet-oldie":"")+(r.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));n=r.DomUtil.getStyle(t,"position");"absolute"!==n&&"relative"!==n&&"fixed"!==n&&(t.style.position="relative");this._initPanes();this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._mapPane=this.createPane("mapPane",this._container);this.createPane("tilePane");this.createPane("shadowPane");this.createPane("overlayPane");this.createPane("markerPane");this.createPane("popupPane");this.options.markerZoomAnimation||(r.DomUtil.addClass(n.markerPane,"leaflet-zoom-hide"),r.DomUtil.addClass(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,t,i,u){var f=this._zoom!==t,e;u||(this.fire("movestart"),f&&this.fire("zoomstart"));this._zoom=t;this._initialCenter=n;i||r.DomUtil.setPosition(this._mapPane,new r.Point(0,0));this._pixelOrigin=this._getNewPixelOrigin(n);e=!this._loaded;this._loaded=!0;this.fire("viewreset",{hard:!i});e&&this.fire("load");this.fire("move");(f||u)&&this.fire("zoomend");this.fire("moveend",{hard:!i})},_rawPanBy:function(n){r.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.");},_initEvents:function(t){r.DomEvent&&(t=t||"on",r.DomEvent[t](this._container,"click dblclick mousedown mouseup mouseenter mouseleave mousemove contextmenu",this._handleMouseEvent,this),this.options.trackResize&&r.DomEvent[t](n,"resize",this._onResize,this))},_onResize:function(){r.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=r.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_handleMouseEvent:function(n){this._loaded&&this._fireMouseEvent(this,n,"mouseenter"===n.type?"mouseover":"mouseleave"===n.type?"mouseout":n.type)},_fireMouseEvent:function(n,t,i,u,f){var o,e;if(i=i||t.type,!r.DomEvent._skipped(t)){if("click"===i){if(o=n.options.draggable===!0?n:this,!t._simulated&&(o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()))return void r.DomEvent.stopPropagation(t);n.fire("preclick")}n.listens(i,u)&&("contextmenu"===i&&r.DomEvent.preventDefault(t),("click"===i||"dblclick"===i||"contextmenu"===i)&&r.DomEvent.stopPropagation(t),e={originalEvent:t,containerPoint:this.mouseEventToContainerPoint(t)},e.layerPoint=this.containerPointToLayerPoint(e.containerPoint),e.latlng=f||this.layerPointToLatLng(e.layerPoint),n.fire(i,e,u))}},_clearHandlers:function(){for(var n=0,t=this._handlers.length;t>n;n++)this._handlers[n].disable()},whenReady:function(n,t){return this._loaded?n.call(t||this,{target:this}):this.on("load",n,t),this},_getMapPanePos:function(){return r.DomUtil.getPosition(this._mapPane)||new r.Point(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,t){var i=this.getSize()._divideBy(2);return this.project(n,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,t,i){var r=this._getNewPixelOrigin(i,t);return this.project(n,t)._subtract(r)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,t,i){if(!i)return n;var u=this.project(n,t),f=this.getSize().divideBy(2),e=new r.Bounds(u.subtract(f),u.add(f)),o=this._getBoundsOffset(e,i,t);return this.unproject(u.add(o),t)},_limitOffset:function(n,t){if(!t)return n;var i=this.getPixelBounds(),u=new r.Bounds(i.min.add(n),i.max.add(n));return n.add(this._getBoundsOffset(u,t))},_getBoundsOffset:function(n,t,i){var u=this.project(t.getNorthWest(),i).subtract(n.min),f=this.project(t.getSouthEast(),i).subtract(n.max),e=this._rebound(u.x,-f.x),o=this._rebound(u.y,-f.y);return new r.Point(e,o)},_rebound:function(n,t){return n+t>0?Math.round(n-t)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(t))},_limitZoom:function(n){var t=this.getMinZoom(),i=this.getMaxZoom();return Math.max(t,Math.min(i,n))}});r.map=function(n,t){return new r.Map(n,t)};r.Layer=r.Evented.extend({options:{pane:"overlayPane"},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},_layerAdd:function(n){var t=n.target;t.hasLayer(this)&&(this._map=t,this._zoomAnimated=t._zoomAnimated,this.onAdd(t),this.getAttribution&&this._map.attributionControl&&this._map.attributionControl.addAttribution(this.getAttribution()),this.getEvents&&t.on(this.getEvents(),this),this.fire("add"),t.fire("layeradd",{layer:this}))}});r.Map.include({addLayer:function(n){var t=r.stamp(n);return this._layers[t]?n:(this._layers[t]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var t=r.stamp(n);return this._layers[t]?(this._loaded&&n.onRemove(this),n.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(n.getAttribution()),n.getEvents&&this.off(n.getEvents(),n),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return!!n&&r.stamp(n)in this._layers},eachLayer:function(n,t){for(var i in this._layers)n.call(t,this._layers[i]);return this},_addLayers:function(n){n=n?r.Util.isArray(n)?n:[n]:[];for(var t=0,i=n.length;i>t;t++)this.addLayer(n[t])},_addZoomLimit:function(n){(isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[r.stamp(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var t=r.stamp(n);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,t=-1/0,f=this._getZoomSpan(),u,r;for(u in this._zoomBoundLayers)r=this._zoomBoundLayers[u].options,n=r.minZoom===i?n:Math.min(n,r.minZoom),t=r.maxZoom===i?t:Math.max(t,r.maxZoom);this._layersMaxZoom=t===-1/0?i:t;this._layersMinZoom=1/0===n?i:n;f!==this._getZoomSpan()&&this.fire("zoomlevelschange")}});r.Projection.Mercator={R:6378137,R_MINOR:6356752.3142451793,bounds:r.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(n){var u=Math.PI/180,i=this.R,t=n.lat*u,f=this.R_MINOR/i,e=Math.sqrt(1-f*f),o=e*Math.sin(t),s=Math.tan(Math.PI/4-t/2)/Math.pow((1-o)/(1+o),e/2);return t=-i*Math.log(Math.max(s,1e-10)),new r.Point(n.lng*u*i,t)},unproject:function(n){for(var t,e=180/Math.PI,u=this.R,o=this.R_MINOR/u,s=Math.sqrt(1-o*o),h=Math.exp(-n.y/u),i=Math.PI/2-2*Math.atan(h),c=0,f=.1;15>c&&Math.abs(f)>1e-7;c++)t=s*Math.sin(i),t=Math.pow((1-t)/(1+t),s/2),f=Math.PI/2-2*Math.atan(h*t)-i,i+=f;return new r.LatLng(i*e,n.x*e/u)}};r.CRS.EPSG3395=r.extend({},r.CRS.Earth,{code:"EPSG:3395",projection:r.Projection.Mercator,transformation:function(){var n=.5/(Math.PI*r.Projection.Mercator.R);return new r.Transformation(n,.5,-n,.5)}()});r.GridLayer=r.Layer.extend({options:{pane:"tilePane",tileSize:256,opacity:1,unloadInvisibleTiles:r.Browser.mobile,updateWhenIdle:r.Browser.mobile,updateInterval:200,attribution:null,zIndex:null,bounds:null,minZoom:0},initialize:function(n){n=r.setOptions(this,n)},onAdd:function(){this._initContainer();this._pruneTiles=r.Util.throttle(this._pruneTiles,200,this);this._levels={};this._tiles={};this._loaded={};this._retain={};this._tilesToLoad=0;this._reset();this._update()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){r.DomUtil.remove(this._container);n._removeZoomLimit(this);this._container=null;this._tileZoom=null},bringToFront:function(){return this._map&&(r.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(r.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var n={viewreset:this._reset,moveend:this._update};return this.options.updateWhenIdle||(n.move=r.Util.throttle(this._update,this.options.updateInterval,this)),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return t.createElement("div")},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var r,u=this.getPane().children,t=-n(-1/0,1/0),i=0,f=u.length;f>i;i++)r=u[i].style.zIndex,u[i]!==this._container&&r&&(t=n(t,+r));isFinite(t)&&(this.options.zIndex=t+n(-1,1),this._updateZIndex())},_updateOpacity:function(){var n=this.options.opacity,t;if(r.Browser.ielt9)for(t in this._tiles)r.DomUtil.setOpacity(this._tiles[t],n);else r.DomUtil.setOpacity(this._container,n)},_initContainer:function(){this._container||(this._container=r.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,u,n,i;for(u in this._levels)this._levels[u].el.style.zIndex=-Math.abs(t-u);return n=this._levels[t],i=this._map,n||(n=this._levels[t]={},n.el=r.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=0,n.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),n.zoom=t),this._level=n,n},_pruneTiles:function(){if(this._map){this._retain={};for(var i,n,e,o=this._map.getBounds(),u=this._tileZoom,f=this._getTileRange(o,u),t=f.min.x;t<=f.max.x;t++)for(i=f.min.y;i<=f.max.y;i++)n=t+":"+i+":"+u,this._retain[n]=!0,this._loaded[n]||(e=this._retainParent(t,i,u,u-5)||this._retainChildren(t,i,u,u+2));for(n in this._tiles)this._retain[n]||(this._loaded[n]?this._map._fadeAnimated?setTimeout(r.bind(this._deferRemove,this,n),250):this._removeTile(n):(this._removeTile(n),this._tilesToLoad--))}},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n);this._tilesToLoad=0},_deferRemove:function(n){this._retain[n]||this._removeTile(n)},_retainParent:function(n,t,i,r){var f=Math.floor(n/2),e=Math.floor(t/2),u=i-1,o=f+":"+e+":"+u;return this._loaded[o]?(this._retain[o]=!0,!0):u>r?this._retainParent(f,e,u,r):!1},_retainChildren:function(n,t,i,r){for(var f,e,u=2*n;2*n+2>u;u++)for(f=2*t;2*t+2>f;f++)e=u+":"+f+":"+(i+1),this._loaded[e]?this._retain[e]=!0:r>i+1&&this._retainChildren(u,f,i+1,r)},_reset:function(n){var t=this._map,i=t.getZoom(),r=Math.round(i),u=this._tileZoom!==r;(u||n&&n.hard)&&(this._abortLoading&&this._abortLoading(),this._tileZoom=r,this._updateLevels(),this._resetGrid());this._setZoomTransforms(t.getCenter(),i)},_setZoomTransforms:function(n,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],n,t)},_setZoomTransform:function(n,t,i){var u=this._map.getZoomScale(i,n.zoom),f=n.origin.multiplyBy(u).subtract(this._map._getNewPixelOrigin(t,i)).round();r.DomUtil.setTransform(n.el,f,u)},_resetGrid:function(){var t=this._map,n=t.options.crs,i=this._tileSize=this._getTileSize(),r=this._tileZoom,u=this._map.getPixelWorldBounds(this._tileZoom);u&&(this._globalTileRange=this._pxBoundsToTileRange(u));this._wrapX=n.wrapLng&&[Math.floor(t.project([0,n.wrapLng[0]],r).x/i),Math.ceil(t.project([0,n.wrapLng[1]],r).x/i)];this._wrapY=n.wrapLat&&[Math.floor(t.project([n.wrapLat[0],0],r).y/i),Math.ceil(t.project([n.wrapLat[1],0],r).y/i)]},_getTileSize:function(){return this.options.tileSize},_update:function(){if(this._map){var n=this._map.getBounds();this.options.unloadInvisibleTiles&&this._removeOtherTiles(n);this._addTiles(n)}},_getTileRange:function(n,t){var i=new r.Bounds(this._map.project(n.getNorthWest(),t),this._map.project(n.getSouthEast(),t));return this._pxBoundsToTileRange(i)},_addTiles:function(n){for(var i,u,o=[],f=this._getTileRange(n,this._tileZoom),c=f.getCenter(),s,h,e=f.min.y;e<=f.max.y;e++)for(i=f.min.x;i<=f.max.x;i++)u=new r.Point(i,e),u.z=this._tileZoom,this._tileCoordsToKey(u)in this._tiles||!this._isValidTile(u)||o.push(u);if(o.sort(function(n,t){return n.distanceTo(c)-t.distanceTo(c)}),s=o.length,0!==s){for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=s,h=t.createDocumentFragment(),i=0;s>i;i++)this._addTile(o[i],h);this._level.el.appendChild(h)}this._pruneTiles()},_isValidTile:function(n){var i=this._map.options.crs,t,u;return!i.infinite&&(t=this._globalTileRange,!i.wrapLng&&(n.x<t.min.x||n.x>t.max.x)||!i.wrapLat&&(n.y<t.min.y||n.y>t.max.y))?!1:this.options.bounds?(u=this._tileCoordsToBounds(n),r.latLngBounds(this.options.bounds).intersects(u)):!0},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToBounds:function(n){var t=this._map,i=this._getTileSize(),u=n.multiplyBy(i),f=u.add([i,i]),e=t.wrapLatLng(t.unproject(u,n.z)),o=t.wrapLatLng(t.unproject(f,n.z));return new r.LatLngBounds(e,o)},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var t=n.split(":"),i=new r.Point(+t[0],+t[1]);return i.z=+t[2],i},_removeOtherTiles:function(n){var t,i;for(t in this._tiles)i=this._keyToBounds(t),n.intersects(i)||this._removeTile(t)},_removeTile:function(n){var t=this._tiles[n];t&&(r.DomUtil.remove(t),delete this._tiles[n],delete this._loaded[n],this.fire("tileunload",{tile:t,coords:this._keyToTileCoords(n)}))},_initTile:function(n){r.DomUtil.addClass(n,"leaflet-tile");n.style.width=this._tileSize+"px";n.style.height=this._tileSize+"px";n.onselectstart=r.Util.falseFn;n.onmousemove=r.Util.falseFn;r.Browser.ielt9&&this.options.opacity<1&&r.DomUtil.setOpacity(n,this.options.opacity);r.Browser.android&&!r.Browser.android23&&(n.style.WebkitBackfaceVisibility="hidden")},_addTile:function(n,t){var u=this._getTilePos(n),f=this._tileCoordsToKey(n),i=this.createTile(this._wrapCoords(n),r.bind(this._tileReady,this,n));this._initTile(i);this.createTile.length<2&&setTimeout(r.bind(this._tileReady,this,n,null,i),0);r.DomUtil.setPosition(i,u,!0);this._tiles[f]=i;t.appendChild(i);this.fire("tileloadstart",{tile:i,coords:n})},_tileReady:function(n,t,i){t&&this.fire("tileerror",{error:t,tile:i,coords:n});var u=this._tileCoordsToKey(n);this._tiles[u]&&(this._loaded[u]=!0,this._pruneTiles(),r.DomUtil.addClass(i,"leaflet-tile-loaded"),this.fire("tileload",{tile:i,coords:n}),this._tilesToLoad--,0===this._tilesToLoad&&this.fire("load"))},_getTilePos:function(n){return n.multiplyBy(this._tileSize).subtract(this._level.origin)},_wrapCoords:function(n){var t=new r.Point(this._wrapX?r.Util.wrapNum(n.x,this._wrapX):n.x,this._wrapY?r.Util.wrapNum(n.y,this._wrapY):n.y);return t.z=n.z,t},_pxBoundsToTileRange:function(n){return new r.Bounds(n.min.divideBy(this._tileSize).floor(),n.max.divideBy(this._tileSize).ceil().subtract([1,1]))},_animateZoom:function(n){this._setZoomTransforms(n.center,n.zoom)}});r.gridLayer=function(n){return new r.GridLayer(n)};r.TileLayer=r.GridLayer.extend({options:{maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,maxNativeZoom:null,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(n,t){this._url=n;t=r.setOptions(this,t);t.detectRetina&&r.Browser.retina&&t.maxZoom>0&&(t.tileSize=Math.floor(t.tileSize/2),t.zoomOffset++,t.minZoom=Math.max(0,t.minZoom),t.maxZoom--);"string"==typeof t.subdomains&&(t.subdomains=t.subdomains.split(""));r.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(n,t){return this._url=n,t||this.redraw(),this},createTile:function(n,i){var u=t.createElement("img");return u.onload=r.bind(this._tileOnLoad,this,i,u),u.onerror=r.bind(this._tileOnError,this,i,u),this.options.crossOrigin&&(u.crossOrigin=""),u.alt="",u.src=this.getTileUrl(n),u},getTileUrl:function(n){return r.Util.template(this._url,r.extend({r:this.options.detectRetina&&r.Browser.retina&&this.options.maxZoom>0?"@2x":"",s:this._getSubdomain(n),x:n.x,y:this.options.tms?this._globalTileRange.max.y-n.y:n.y,z:this._getZoomForUrl()},this.options))},_tileOnLoad:function(n,t){n(null,t)},_tileOnError:function(n,t,i){var r=this.options.errorTileUrl;r&&(t.src=r);n(i,t)},_getTileSize:function(){var i=this._map,n=this.options,r=i.getZoom()+n.zoomOffset,t=n.maxNativeZoom;return null!==t&&r>t?Math.round(i.getZoomScale(t,r)*n.tileSize):n.tileSize},_onTileRemove:function(n){n.tile.onload=null;n.tile.src=r.Util.emptyImageUrl},_getZoomForUrl:function(){var n=this.options,t=this._tileZoom;return n.zoomReverse&&(t=n.maxZoom-t),t+=n.zoomOffset,n.maxNativeZoom?Math.min(t,n.maxNativeZoom):t},_getSubdomain:function(n){var t=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var t,n;for(t in this._tiles)n=this._tiles[t],n.onload=r.Util.falseFn,n.onerror=r.Util.falseFn,n.complete||(n.src=r.Util.emptyImageUrl,r.DomUtil.remove(n))}});r.tileLayer=function(n,t){return new r.TileLayer(n,t)};r.TileLayer.WMS=r.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(n,t){var i,u;this._url=n;i=r.extend({},this.defaultWmsParams);for(u in t)u in this.options||(i[u]=t[u]);t=r.setOptions(this,t);i.width=i.height=t.tileSize*(t.detectRetina&&r.Browser.retina?2:1);this.wmsParams=i},onAdd:function(n){this._crs=this.options.crs||n.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code;r.TileLayer.prototype.onAdd.call(this,n)},getTileUrl:function(n){var u=this._tileCoordsToBounds(n),t=this._crs.project(u.getNorthWest()),i=this._crs.project(u.getSouthEast()),e=(this._wmsVersion>=1.3&&this._crs===r.CRS.EPSG4326?[i.y,t.x,t.y,i.x]:[t.x,i.y,i.x,t.y]).join(","),f=r.TileLayer.prototype.getTileUrl.call(this,n);return f+r.Util.getParamString(this.wmsParams,f,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+e},setParams:function(n,t){return r.extend(this.wmsParams,n),t||this.redraw(),this}});r.tileLayer.wms=function(n,t){return new r.TileLayer.WMS(n,t)};r.ImageOverlay=r.Layer.extend({options:{opacity:1,alt:"",interactive:!1},initialize:function(n,t,i){this._url=n;this._bounds=r.latLngBounds(t);r.setOptions(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity());this.getPane().appendChild(this._image);this._initInteraction();this._reset()},onRemove:function(){r.DomUtil.remove(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&r.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&r.DomUtil.toBack(this._image),this},_initInteraction:function(){this.options.interactive&&(r.DomUtil.addClass(this._image,"leaflet-interactive"),r.DomEvent.on(this._image,"click dblclick mousedown mouseup mouseover mousemove mouseout contextmenu",this._fireMouseEvent,this))},_fireMouseEvent:function(n,t){this._map&&this._map._fireMouseEvent(this,n,t,!0)},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},getAttribution:function(){return this.options.attribution},getEvents:function(){var n={viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},getBounds:function(){return this._bounds},_initImage:function(){var n=this._image=r.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));n.onselectstart=r.Util.falseFn;n.onmousemove=r.Util.falseFn;n.onload=r.bind(this.fire,this,"load");n.src=this._url;n.alt=this.options.alt},_animateZoom:function(n){var t=new r.Bounds(this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),n.zoom,n.center),this._map._latLngToNewLayerPoint(this._bounds.getSouthEast(),n.zoom,n.center)),i=t.min.add(t.getSize()._multiplyBy((1-1/n.scale)/2));r.DomUtil.setTransform(this._image,i,n.scale)},_reset:function(){var n=this._image,t=new r.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();r.DomUtil.setPosition(n,t.min);n.style.width=i.x+"px";n.style.height=i.y+"px"},_updateOpacity:function(){r.DomUtil.setOpacity(this._image,this.options.opacity)}});r.imageOverlay=function(n,t,i){return new r.ImageOverlay(n,t,i)};r.Icon=r.Class.extend({initialize:function(n){r.setOptions(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,t){var r=this._getIconUrl(n),i;if(!r){if("icon"===n)throw new Error("iconUrl not set in Icon options (see the docs).");return null}return i=this._createImg(r,t&&"IMG"===t.tagName?t:null),this._setIconStyles(i,n),i},_setIconStyles:function(n,t){var u=this.options,i=r.point(u[t+"Size"]),f=r.point("shadow"===t&&u.shadowAnchor||u.iconAnchor||i&&i.divideBy(2,!0));n.className="leaflet-marker-"+t+" "+(u.className||"");f&&(n.style.marginLeft=-f.x+"px",n.style.marginTop=-f.y+"px");i&&(n.style.width=i.x+"px",n.style.height=i.y+"px")},_createImg:function(n,i){return i=i||t.createElement("img"),i.src=n,i},_getIconUrl:function(n){return r.Browser.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});r.icon=function(n){return new r.Icon(n)};r.Icon.Default=r.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(n){var i=n+"Url",t;if(this.options[i])return this.options[i];if(t=r.Icon.Default.imagePath,!t)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return t+"/marker-"+n+(r.Browser.retina&&"icon"===n?"-2x":"")+".png"}});r.Icon.Default.imagePath=function(){for(var i,r,f=t.getElementsByTagName("script"),e=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/,n=0,u=f.length;u>n;n++)if(i=f[n].src,i.match(e))return r=i.split(e)[0],(r?r+"/":"")+"images"}();r.Marker=r.Layer.extend({options:{pane:"markerPane",icon:new r.Icon.Default,interactive:!0,keyboard:!0,zIndexOffset:0,opacity:1,riseOffset:250},initialize:function(n,t){r.setOptions(this,t);this._latlng=r.latLng(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation;this._initIcon();this.update()},onRemove:function(){this.dragging&&this.dragging.disable();this._removeIcon();this._removeShadow()},getEvents:function(){var n={viewreset:this.update};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},getLatLng:function(){return this._latlng},setLatLng:function(n){var t=this._latlng;return this._latlng=r.latLng(n),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},update:function(){if(this._icon){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),t=n.icon.createIcon(this._icon),e=!1,i,u;t!==this._icon&&(this._icon&&this._removeIcon(),e=!0,n.title&&(t.title=n.title),n.alt&&(t.alt=n.alt));r.DomUtil.addClass(t,f);n.keyboard&&(t.tabIndex="0");this._icon=t;this._initInteraction();r.DomEvent&&n.riseOnHover&&r.DomEvent.on(t,{mouseover:this._bringToFront,mouseout:this._resetZIndex},this);i=n.icon.createShadow(this._shadow);u=!1;i!==this._shadow&&(this._removeShadow(),u=!0);i&&r.DomUtil.addClass(i,f);this._shadow=i;n.opacity<1&&this._updateOpacity();e&&this.getPane().appendChild(this._icon);i&&u&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){r.DomEvent&&this.options.riseOnHover&&r.DomEvent.off(this._icon,{mouseover:this._bringToFront,mouseout:this._resetZIndex},this);r.DomUtil.remove(this._icon);this._icon=null},_removeShadow:function(){this._shadow&&r.DomUtil.remove(this._shadow);this._shadow=null},_setPos:function(n){r.DomUtil.setPosition(this._icon,n);this._shadow&&r.DomUtil.setPosition(this._shadow,n);this._zIndex=n.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(n){this._icon.style.zIndex=this._zIndex+n},_animateZoom:function(n){var t=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(r.DomUtil.addClass(this._icon,"leaflet-interactive"),r.DomEvent&&r.DomEvent.on(this._icon,"click dblclick mousedown mouseup mouseover mousemove mouseout contextmenu keypress",this._fireMouseEvent,this),r.Handler.MarkerDrag)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable());this.dragging=new r.Handler.MarkerDrag(this);n&&this.dragging.enable()}},_fireMouseEvent:function(n,t){"mousedown"===n.type&&r.DomEvent.preventDefault(n);"keypress"===n.type&&13===n.keyCode&&(t="click");this._map&&this._map._fireMouseEvent(this,n,t,!0,this._latlng)},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;r.DomUtil.setOpacity(this._icon,n);this._shadow&&r.DomUtil.setOpacity(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});r.marker=function(n,t){return new r.Marker(n,t)};r.DivIcon=r.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(n){var r=n&&"DIV"===n.tagName?n:t.createElement("div"),i=this.options;return r.innerHTML=i.html!==!1?i.html:"",i.bgPos&&(r.style.backgroundPosition=-i.bgPos.x+"px "+-i.bgPos.y+"px"),this._setIconStyles(r,"icon"),r},createShadow:function(){return null}});r.divIcon=function(n){return new r.DivIcon(n)};r.Map.mergeOptions({closePopupOnClick:!0});r.Popup=r.Layer.extend({options:{pane:"popupPane",minWidth:50,maxWidth:300,offset:[0,7],autoPan:!0,autoPanPadding:[5,5],closeButton:!0,autoClose:!0,zoomAnimation:!0},initialize:function(n,t){r.setOptions(this,n);this._source=t},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&this.options.zoomAnimation;this._container||this._initLayout();n._fadeAnimated&&r.DomUtil.setOpacity(this._container,0);clearTimeout(this._removeTimeout);this.getPane().appendChild(this._container);this.update();n._fadeAnimated&&r.DomUtil.setOpacity(this._container,1);n.fire("popupopen",{popup:this});this._source&&this._source.fire("popupopen",{popup:this},!0)},openOn:function(n){return n.openPopup(this),this},onRemove:function(n){n._fadeAnimated?(r.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(r.bind(r.DomUtil.remove,r.DomUtil,this._container),200)):r.DomUtil.remove(this._container);n.fire("popupclose",{popup:this});this._source&&this._source.fire("popupclose",{popup:this},!0)},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=r.latLng(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={viewreset:this._updatePosition},t=this.options;return this._zoomAnimated&&(n.zoomanim=this._animateZoom),("closeOnClick"in t?t.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this._close),t.keepInView&&(n.moveend=this._adjustPan),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var n="leaflet-popup",u=this._container=r.DomUtil.create("div",n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),t,i;this.options.closeButton&&(t=this._closeButton=r.DomUtil.create("a",n+"-close-button",u),t.href="#close",t.innerHTML="&#215;",r.DomEvent.on(t,"click",this._onCloseButtonClick,this));i=this._wrapper=r.DomUtil.create("div",n+"-content-wrapper",u);this._contentNode=r.DomUtil.create("div",n+"-content",i);r.DomEvent.disableClickPropagation(i).disableScrollPropagation(this._contentNode).on(i,"contextmenu",r.DomEvent.stopPropagation);this._tipContainer=r.DomUtil.create("div",n+"-tip-container",u);this._tip=r.DomUtil.create("div",n+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){var n=this._contentNode;if("string"==typeof this._content)n.innerHTML=this._content;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var i=this._contentNode,n=i.style,t;n.width="";n.whiteSpace="nowrap";t=i.offsetWidth;t=Math.min(t,this.options.maxWidth);t=Math.max(t,this.options.minWidth);n.width=t+1+"px";n.whiteSpace="";n.height="";var e=i.offsetHeight,u=this.options.maxHeight,f="leaflet-popup-scrolled";u&&e>u?(n.height=u+"px",r.DomUtil.addClass(i,f)):r.DomUtil.removeClass(i,f);this._containerWidth=this._container.offsetWidth},_updatePosition:function(){var t,n,i,u;this._map&&(t=this._map.latLngToLayerPoint(this._latlng),n=r.point(this.options.offset),this._zoomAnimated?r.DomUtil.setPosition(this._container,t):n=n.add(t),i=this._containerBottom=-n.y,u=this._containerLeft=-Math.round(this._containerWidth/2)+n.x,this._container.style.bottom=i+"px",this._container.style.left=u+"px")},_animateZoom:function(n){var t=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);r.DomUtil.setPosition(this._container,t)},_adjustPan:function(){if(this.options.autoPan){var o=this._map,s=this._container.offsetHeight,h=this._containerWidth,c=new r.Point(this._containerLeft,-s-this._containerBottom);this._zoomAnimated&&c._add(r.DomUtil.getPosition(this._container));var n=o.layerPointToContainerPoint(c),l=r.point(this.options.autoPanPadding),u=r.point(this.options.autoPanPaddingTopLeft||l),f=r.point(this.options.autoPanPaddingBottomRight||l),e=o.getSize(),t=0,i=0;n.x+h+f.x>e.x&&(t=n.x+h-e.x+f.x);n.x-t-u.x<0&&(t=n.x-u.x);n.y+s+f.y>e.y&&(i=n.y+s-e.y+f.y);n.y-i-u.y<0&&(i=n.y-u.y);(t||i)&&o.fire("autopanstart").panBy([t,i])}},_onCloseButtonClick:function(n){this._close();r.DomEvent.stop(n)}});r.popup=function(n,t){return new r.Popup(n,t)};r.Map.include({openPopup:function(n,t,i){if(!(n instanceof r.Popup)){var u=n;n=new r.Popup(i).setContent(u)}return t&&n.setLatLng(t),this.hasLayer(n)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=n,this.addLayer(n))},closePopup:function(n){return n&&n!==this._popup||(n=this._popup,this._popup=null),n&&this.removeLayer(n),this}});r.Layer.include({bindPopup:function(n,t){return n instanceof r.Popup?(this._popup=n,n._source=this):((!this._popup||t)&&(this._popup=new r.Popup(t,this)),this._popup.setContent(n)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&this._map&&this._map.openPopup(this._popup,n||this._latlng||this.getCenter()),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._map?this.closePopup():this.openPopup()),this},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){this._map.openPopup(this._popup,n.latlng)},_movePopup:function(n){this._popup.setLatLng(n.latlng)}});r.Marker.include({bindPopup:function(n,t){var i=r.point(this.options.icon.options.popupAnchor||[0,0]).add(r.Popup.prototype.options.offset);return t=r.extend({offset:i},t),r.Layer.prototype.bindPopup.call(this,n,t)},_openPopup:r.Layer.prototype.togglePopup});r.LayerGroup=r.Layer.extend({initialize:function(n){this._layers={};var t,i;if(n)for(t=0,i=n.length;i>t;t++)this.addLayer(n[t])},addLayer:function(n){var t=this.getLayerId(n);return this._layers[t]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var t=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(n){return!!n&&(n in this._layers||this.getLayerId(n)in this._layers)},clearLayers:function(){for(var n in this._layers)this.removeLayer(this._layers[n]);return this},invoke:function(n){var i,t,r=Array.prototype.slice.call(arguments,1);for(i in this._layers)t=this._layers[i],t[n]&&t[n].apply(t,r);return this},onAdd:function(n){for(var t in this._layers)n.addLayer(this._layers[t])},onRemove:function(n){for(var t in this._layers)n.removeLayer(this._layers[t])},eachLayer:function(n,t){for(var i in this._layers)n.call(t,this._layers[i]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];for(var t in this._layers)n.push(this._layers[t]);return n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return r.stamp(n)}});r.layerGroup=function(n){return new r.LayerGroup(n)};r.FeatureGroup=r.LayerGroup.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),r.LayerGroup.prototype.addLayer.call(this,n),this._popupContent&&n.bindPopup&&n.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),r.LayerGroup.prototype.removeLayer.call(this,n),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:n})):this},bindPopup:function(n,t){return this._popupContent=n,this._popupOptions=t,this.invoke("bindPopup",n,t)},openPopup:function(n){for(var t in this._layers){this._layers[t].openPopup(n);break}return this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new r.LatLngBounds;return this.eachLayer(function(t){n.extend(t.getBounds?t.getBounds():t.getLatLng())}),n}});r.featureGroup=function(n){return new r.FeatureGroup(n)};r.Renderer=r.Layer.extend({options:{padding:0},initialize:function(n){r.setOptions(this,n);r.stamp(this)},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&r.DomUtil.addClass(this._container,"leaflet-zoom-animated"));this.getPane().appendChild(this._container);this._update()},onRemove:function(){r.DomUtil.remove(this._container)},getEvents:function(){var n={moveend:this._update};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},_animateZoom:function(n){var t=n.origin.subtract(this._map._getCenterLayerPoint()),i=this._bounds.min.add(t.multiplyBy(1-n.scale)).add(n.offset).round();r.DomUtil.setTransform(this._container,i,n.scale)},_update:function(){var n=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-n)).round();this._bounds=new r.Bounds(i,i.add(t.multiplyBy(1+2*n)).round())}});r.Map.include({getRenderer:function(n){var t=n.options.renderer||this.options.renderer||this._renderer;return t||(t=this._renderer=r.SVG&&r.svg()||r.Canvas&&r.canvas()),this.hasLayer(t)||this.addLayer(t),t}});r.Path=r.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",fillOpacity:.2,fillRule:"evenodd",interactive:!0},onAdd:function(){this._renderer=this._map.getRenderer(this);this._renderer._initPath(this);this._project();this._update();this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},getEvents:function(){return{viewreset:this._project,moveend:this._update}},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return r.setOptions(this,n),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},_fireMouseEvent:function(n,t){this._map._fireMouseEvent(this,n,t,!0)},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(r.Browser.touch?10:0)}});r.LineUtil={simplify:function(n,t){if(!t||!n.length)return n.slice();var i=t*t;return n=this._reducePoints(n,i),n=this._simplifyDP(n,i)},pointToSegmentDistance:function(n,t,i){return Math.sqrt(this._sqClosestPointOnSegment(n,t,i,!0))},closestPointOnSegment:function(n,t,i){return this._sqClosestPointOnSegment(n,t,i)},_simplifyDP:function(n,t){var u=n.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,f=new o(u),r,e;for(f[0]=f[u-1]=1,this._simplifyDPStep(n,f,t,0,u-1),e=[],r=0;u>r;r++)f[r]&&e.push(n[r]);return e},_simplifyDPStep:function(n,t,i,r,u){for(var e,o,s=0,f=r+1;u-1>=f;f++)o=this._sqClosestPointOnSegment(n[f],n[r],n[u],!0),o>s&&(e=f,s=o);s>i&&(t[e]=1,this._simplifyDPStep(n,t,i,r,e),this._simplifyDPStep(n,t,i,e,u))},_reducePoints:function(n,t){for(var r=[n[0]],i=1,u=0,f=n.length;f>i;i++)this._sqDist(n[i],n[u])>t&&(r.push(n[i]),u=i);return f-1>u&&r.push(n[f-1]),r},clipSegment:function(n,t,i,r){var o,e,s,u=r?this._lastCode:this._getBitCode(n,i),f=this._getBitCode(t,i);for(this._lastCode=f;;){if(!(u|f))return[n,t];if(u&f)return!1;o=u||f;e=this._getEdgeIntersection(n,t,o,i);s=this._getBitCode(e,i);o===u?(n=e,u=s):(t=e,f=s)}},_getEdgeIntersection:function(n,t,i,u){var f,e,o=t.x-n.x,s=t.y-n.y,h=u.min,c=u.max;return 8&i?(f=n.x+o*(c.y-n.y)/s,e=c.y):4&i?(f=n.x+o*(h.y-n.y)/s,e=h.y):2&i?(f=c.x,e=n.y+s*(c.x-n.x)/o):1&i&&(f=h.x,e=n.y+s*(h.x-n.x)/o),new r.Point(f,e,!0)},_getBitCode:function(n,t){var i=0;return n.x<t.min.x?i|=1:n.x>t.max.x&&(i|=2),n.y<t.min.y?i|=4:n.y>t.max.y&&(i|=8),i},_sqDist:function(n,t){var i=t.x-n.x,r=t.y-n.y;return i*i+r*r},_sqClosestPointOnSegment:function(n,t,i,u){var h,o=t.x,s=t.y,f=i.x-o,e=i.y-s,c=f*f+e*e;return c>0&&(h=((n.x-o)*f+(n.y-s)*e)/c,h>1?(o=i.x,s=i.y):h>0&&(o+=f*h,s+=e*h)),f=n.x-o,e=n.y-s,u?f*f+e*e:new r.Point(o,s)}};r.Polyline=r.Path.extend({options:{smoothFactor:1},initialize:function(n,t){r.setOptions(this,t);this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},addLatLng:function(n){return n=r.latLng(n),this._latlngs.push(n),this._bounds.extend(n),this.redraw()},spliceLatLngs:function(){var n=[].splice.apply(this._latlngs,arguments);return this._setLatLngs(this._latlngs),this.redraw(),n},closestLayerPoint:function(n){for(var h,u,f,e=1/0,t=null,c=r.LineUtil._sqClosestPointOnSegment,o=0,l=this._parts.length;l>o;o++)for(var s=this._parts[o],i=1,a=s.length;a>i;i++)u=s[i-1],f=s[i],h=c(n,u,f,!0),e>h&&(e=h,t=c(n,u,f));return t&&(t.distance=Math.sqrt(e)),t},getCenter:function(){for(var e,u,f,t,o,i=this._rings[0],s=i.length,n=0,r=0;s-1>n;n++)r+=i[n].distanceTo(i[n+1])/2;for(n=0,u=0;s-1>n;n++)if(f=i[n],t=i[n+1],e=f.distanceTo(t),u+=e,u>r)return o=(u-r)/e,this._map.layerPointToLatLng([t.x-o*(t.x-f.x),t.y-o*(t.y-f.y)])},getBounds:function(){return this._bounds},_setLatLngs:function(n){this._bounds=new r.LatLngBounds;this._latlngs=this._convertLatLngs(n)},_convertLatLngs:function(n){for(var i=[],u=this._flat(n),t=0,f=n.length;f>t;t++)u?(i[t]=r.latLng(n[t]),this._bounds.extend(i[t])):i[t]=this._convertLatLngs(n[t]);return i},_flat:function(n){return!r.Util.isArray(n[0])||"object"!=typeof n[0][0]},_project:function(){this._rings=[];this._projectLatlngs(this._latlngs,this._rings);var n=this._clickTolerance(),t=new r.Point(n,-n);this._latlngs.length&&(this._pxBounds=new r.Bounds(this._map.latLngToLayerPoint(this._bounds.getSouthWest())._subtract(t),this._map.latLngToLayerPoint(this._bounds.getNorthEast())._add(t)))},_projectLatlngs:function(n,t){var i,u,e=n[0]instanceof r.LatLng,f=n.length;if(e){for(u=[],i=0;f>i;i++)u[i]=this._map.latLngToLayerPoint(n[i]);t.push(u)}else for(i=0;f>i;i++)this._projectLatlngs(n[i],t)},_clipPoints:function(){if(this.options.noClip)return void(this._parts=this._rings);this._parts=[];var f,n,t,s,o,i,u,e=this._parts,h=this._renderer._bounds;for(f=0,t=0,s=this._rings.length;s>f;f++)for(u=this._rings[f],n=0,o=u.length;o-1>n;n++)i=r.LineUtil.clipSegment(u[n],u[n+1],h,n),i&&(e[t]=e[t]||[],e[t].push(i[0]),(i[1]!==u[n+1]||n===o-2)&&(e[t].push(i[1]),t++))},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,n=0,u=t.length;u>n;n++)t[n]=r.LineUtil.simplify(t[n],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}});r.polyline=function(n,t){return new r.Polyline(n,t)};r.PolyUtil={};r.PolyUtil.clipPolygon=function(n,t){for(var e,a,l,o,s,f,u,v=[1,4,2,8],c=r.LineUtil,i=0,h=n.length;h>i;i++)n[i]._code=c._getBitCode(n[i],t);for(l=0;4>l;l++){for(f=v[l],e=[],i=0,h=n.length,a=h-1;h>i;a=i++)o=n[i],s=n[a],o._code&f?s._code&f||(u=c._getEdgeIntersection(s,o,f,t),u._code=c._getBitCode(u,t),e.push(u)):(s._code&f&&(u=c._getEdgeIntersection(s,o,f,t),u._code=c._getBitCode(u,t),e.push(u)),e.push(o));n=e}return n};r.Polygon=r.Polyline.extend({options:{fill:!0},getCenter:function(){var i,f,e,n,t,r,u,o,s,h=this._rings[0];for(u=o=s=0,i=0,e=h.length,f=e-1;e>i;f=i++)n=h[i],t=h[f],r=n.y*t.x-t.y*n.x,o+=(n.x+t.x)*r,s+=(n.y+t.y)*r,u+=3*r;return this._map.layerPointToLatLng([o/u,s/u])},_convertLatLngs:function(n){var t=r.Polyline.prototype._convertLatLngs.call(this,n),i=t.length;return i>=2&&t[0]instanceof r.LatLng&&t[0].equals(t[i-1])&&t.pop(),t},_clipPoints:function(){var i,t,e;if(this.options.noClip)return void(this._parts=this._rings);var n=this._renderer._bounds,u=this.options.weight,f=new r.Point(u,u);for(n=new r.Bounds(n.min.subtract(f),n.max.add(f)),this._parts=[],t=0,e=this._rings.length;e>t;t++)i=r.PolyUtil.clipPolygon(this._rings[t],n),i.length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)}});r.polygon=function(n,t){return new r.Polygon(n,t)};r.Rectangle=r.Polygon.extend({initialize:function(n,t){r.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(n),t)},setBounds:function(n){this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=r.latLngBounds(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});r.rectangle=function(n,t){return new r.Rectangle(n,t)};r.CircleMarker=r.Path.extend({options:{fill:!0,radius:10},initialize:function(n,t){r.setOptions(this,t);this._latlng=r.latLng(n);this._radius=this.options.radius},setLatLng:function(n){return this._latlng=r.latLng(n),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var t=n&&n.radius||this._radius;return r.Path.prototype.setStyle.call(this,n),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._updateBounds()},_updateBounds:function(){var n=this._radius,u=this._radiusY||n,t=this._clickTolerance(),i=[n+t,u+t];this._pxBounds=new r.Bounds(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}});r.circleMarker=function(n,t){return new r.CircleMarker(n,t)};r.Circle=r.CircleMarker.extend({initialize:function(n,t,i){r.setOptions(this,i);this._latlng=r.latLng(n);this._mRadius=t},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY];return new r.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:r.Path.prototype.setStyle,_project:function(){var f=this._latlng.lng,i=this._latlng.lat,n=this._map,e=n.options.crs,l;if(e.distance===r.CRS.Earth.distance){var t=Math.PI/180,o=this._mRadius/r.CRS.Earth.R/t,h=n.project([i+o,f]),a=n.project([i-o,f]),u=h.add(a).divideBy(2),s=n.unproject(u).lat,c=Math.acos((Math.cos(o*t)-Math.sin(i*t)*Math.sin(s*t))/(Math.cos(i*t)*Math.cos(s*t)))/t;this._point=u.subtract(n.getPixelOrigin());this._radius=isNaN(c)?0:Math.max(Math.round(u.x-n.project([s,f-c]).x),1);this._radiusY=Math.max(Math.round(u.y-h.y),1)}else l=e.unproject(e.project(this._latlng).subtract([this._mRadius,0])),this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(l).x;this._updateBounds()}});r.circle=function(n,t,i){return new r.Circle(n,t,i)};r.SVG=r.Renderer.extend({_initContainer:function(){this._container=r.SVG.create("svg");this._paths={};this._initEvents();this._container.setAttribute("pointer-events","none")},_update:function(){if(!this._map._animatingZoom||!this._bounds){r.Renderer.prototype._update.call(this);var t=this._bounds,n=t.getSize(),i=this._container;r.DomUtil.setPosition(i,t.min);this._svgSize&&this._svgSize.equals(n)||(this._svgSize=n,i.setAttribute("width",n.x),i.setAttribute("height",n.y));r.DomUtil.setPosition(i,t.min);i.setAttribute("viewBox",[t.min.x,t.min.y,n.x,n.y].join(" "))}},_initPath:function(n){var t=n._path=r.SVG.create("path");n.options.className&&r.DomUtil.addClass(t,n.options.className);n.options.interactive&&r.DomUtil.addClass(t,"leaflet-interactive");this._updateStyle(n)},_addPath:function(n){var t=n._path;this._container.appendChild(t);this._paths[r.stamp(t)]=n},_removePath:function(n){var t=n._path;r.DomUtil.remove(t);delete this._paths[r.stamp(t)]},_updatePath:function(n){n._project();n._update()},_updateStyle:function(n){var i=n._path,t=n.options;i&&(t.stroke?(i.setAttribute("stroke",t.color),i.setAttribute("stroke-opacity",t.opacity),i.setAttribute("stroke-width",t.weight),i.setAttribute("stroke-linecap",t.lineCap),i.setAttribute("stroke-linejoin",t.lineJoin),t.dashArray?i.setAttribute("stroke-dasharray",t.dashArray):i.removeAttribute("stroke-dasharray"),t.dashOffset?i.setAttribute("stroke-dashoffset",t.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),t.fill?(i.setAttribute("fill",t.fillColor||t.color),i.setAttribute("fill-opacity",t.fillOpacity),i.setAttribute("fill-rule",t.fillRule||"evenodd")):i.setAttribute("fill","none"),i.setAttribute("pointer-events",t.pointerEvents||(t.interactive?"visiblePainted":"none")))},_updatePoly:function(n,t){this._setPath(n,r.SVG.pointsToPath(n._parts,t))},_updateCircle:function(n){var i=n._point,t=n._radius,u=n._radiusY||t,r="a"+t+","+u+" 0 1,0 ",f=n._empty()?"M0 0":"M"+(i.x-t)+","+i.y+r+2*t+",0 "+r+2*-t+",0 ";this._setPath(n,f)},_setPath:function(n,t){n._path.setAttribute("d",t)},_bringToFront:function(n){r.DomUtil.toFront(n._path)},_bringToBack:function(n){r.DomUtil.toBack(n._path)},_initEvents:function(){r.DomEvent.on(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu",this._fireMouseEvent,this)},_fireMouseEvent:function(n){var t=this._paths[r.stamp(n.target||n.srcElement)];t&&t._fireMouseEvent(n)}});r.extend(r.SVG,{create:function(n){return t.createElementNS("http://www.w3.org/2000/svg",n)},pointsToPath:function(n,t){for(var i,h,f,e,o="",u=0,s=n.length;s>u;u++){for(f=n[u],i=0,h=f.length;h>i;i++)e=f[i],o+=(i?"L":"M")+e.x+" "+e.y;o+=t?r.Browser.svg?"z":"x":""}return o||"M0 0"}});r.Browser.svg=!(!t.createElementNS||!r.SVG.create("svg").createSVGRect);r.svg=function(n){return r.Browser.svg||r.Browser.vml?new r.SVG(n):null};r.Browser.vml=!r.Browser.svg&&function(){var i,n;try{return i=t.createElement("div"),i.innerHTML='<v:shape adj="1"/>',n=i.firstChild,n.style.behavior="url(#default#VML)",n&&"object"==typeof n.adj}catch(r){return!1}}();r.SVG.include(r.Browser.vml?{_initContainer:function(){this._container=r.DomUtil.create("div","leaflet-vml-container");this._paths={};this._initEvents()},_update:function(){this._map._animatingZoom||r.Renderer.prototype._update.call(this)},_initPath:function(n){var t=n._container=r.SVG.create("shape");r.DomUtil.addClass(t,"leaflet-vml-shape "+(this.options.className||""));t.coordsize="1 1";n._path=r.SVG.create("path");t.appendChild(n._path);this._updateStyle(n)},_addPath:function(n){var t=n._container;this._container.appendChild(t);this._paths[r.stamp(t)]=n},_removePath:function(n){var t=n._container;r.DomUtil.remove(t);delete this._paths[r.stamp(t)]},_updateStyle:function(n){var i=n._stroke,u=n._fill,t=n.options,f=n._container;f.stroked=!!t.stroke;f.filled=!!t.fill;t.stroke?(i||(i=n._stroke=r.SVG.create("stroke"),f.appendChild(i)),i.weight=t.weight+"px",i.color=t.color,i.opacity=t.opacity,i.dashStyle=t.dashArray?r.Util.isArray(t.dashArray)?t.dashArray.join(" "):t.dashArray.replace(/( *, *)/g," "):"",i.endcap=t.lineCap.replace("butt","flat"),i.joinstyle=t.lineJoin):i&&(f.removeChild(i),n._stroke=null);t.fill?(u||(u=n._fill=r.SVG.create("fill"),f.appendChild(u)),u.color=t.fillColor||t.color,u.opacity=t.fillOpacity):u&&(f.removeChild(u),n._fill=null)},_updateCircle:function(n){var t=n._point.round(),i=Math.round(n._radius),r=Math.round(n._radiusY||i);this._setPath(n,n._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+r+" 0,23592600")},_setPath:function(n,t){n._path.v=t},_bringToFront:function(n){r.DomUtil.toFront(n._container)},_bringToBack:function(n){r.DomUtil.toBack(n._container)}}:{});r.Browser.vml&&(r.SVG.create=function(){try{return t.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return t.createElement("<lvml:"+n+' class="lvml">')}}catch(n){return function(n){return t.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}());r.Canvas=r.Renderer.extend({onAdd:function(){r.Renderer.prototype.onAdd.call(this);this._layers=this._layers||{};this._draw()},_initContainer:function(){var n=this._container=t.createElement("canvas");r.DomEvent.on(n,"mousemove",this._onMouseMove,this).on(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this);this._ctx=n.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){r.Renderer.prototype._update.call(this);var t=this._bounds,n=this._container,i=t.getSize(),u=r.Browser.retina?2:1;r.DomUtil.setPosition(n,t.min);n.width=u*i.x;n.height=u*i.y;n.style.width=i.x+"px";n.style.height=i.y+"px";r.Browser.retina&&this._ctx.scale(2,2);this._ctx.translate(-t.min.x,-t.min.y)}},_initPath:function(n){this._layers[r.stamp(n)]=n},_addPath:r.Util.falseFn,_removePath:function(n){n._removed=!0;this._requestRedraw(n)},_updatePath:function(n){this._redrawBounds=n._pxBounds;this._draw(!0);n._project();n._update();this._draw();this._redrawBounds=null},_updateStyle:function(n){this._requestRedraw(n)},_requestRedraw:function(n){this._map&&(this._redrawBounds=this._redrawBounds||new r.Bounds,this._redrawBounds.extend(n._pxBounds.min).extend(n._pxBounds.max),this._redrawRequest=this._redrawRequest||r.Util.requestAnimFrame(this._redraw,this))},_redraw:function(){this._redrawRequest=null;this._draw(!0);this._draw();this._redrawBounds=null},_draw:function(n){var t,i;this._clear=n;for(i in this._layers)t=this._layers[i],(!this._redrawBounds||t._pxBounds.intersects(this._redrawBounds))&&t._updatePath(),n&&t._removed&&(delete t._removed,delete this._layers[i])},_updatePoly:function(n,t){var i,r,o,f,e=n._parts,s=e.length,u=this._ctx;if(s){for(u.beginPath(),i=0;s>i;i++){for(r=0,o=e[i].length;o>r;r++)f=e[i][r],u[r?"lineTo":"moveTo"](f.x,f.y);t&&u.closePath()}this._fillStroke(u,n)}},_updateCircle:function(n){if(!n._empty()){var u=n._point,t=this._ctx,r=n._radius,i=(n._radiusY||r)/r;1!==i&&(t.save(),t.scale(1,i));t.beginPath();t.arc(u.x,u.y/i,r,0,2*Math.PI,!1);1!==i&&t.restore();this._fillStroke(t,n)}},_fillStroke:function(n,t){var r=this._clear,i=t.options;n.globalCompositeOperation=r?"destination-out":"source-over";i.fill&&(n.globalAlpha=r?1:i.fillOpacity,n.fillStyle=i.fillColor||i.color,n.fill(i.fillRule||"evenodd"));i.stroke&&(n.globalAlpha=r?1:i.opacity,t._prevWeight=n.lineWidth=r?t._prevWeight+1:i.weight,n.strokeStyle=i.color,n.lineCap=i.lineCap,n.lineJoin=i.lineJoin,n.stroke())},_onClick:function(n){var i=this._map.mouseEventToLayerPoint(n);for(var t in this._layers)this._layers[t]._containsPoint(i)&&this._layers[t]._fireMouseEvent(n)},_onMouseMove:function(n){var t,i;if(this._map&&!this._map._animatingZoom){t=this._map.mouseEventToLayerPoint(n);for(i in this._layers)this._handleHover(this._layers[i],n,t)}},_handleHover:function(n,t,i){n.options.interactive&&(n._containsPoint(i)?(n._mouseInside||(r.DomUtil.addClass(this._container,"leaflet-interactive"),n._fireMouseEvent(t,"mouseover"),n._mouseInside=!0),n._fireMouseEvent(t)):n._mouseInside&&(r.DomUtil.removeClass(this._container,"leaflet-interactive"),n._fireMouseEvent(t,"mouseout"),n._mouseInside=!1))},_bringToFront:r.Util.falseFn,_bringToBack:r.Util.falseFn});r.Browser.canvas=function(){return!!t.createElement("canvas").getContext}();r.canvas=function(n){return r.Browser.canvas?new r.Canvas(n):null};r.Polyline.prototype._containsPoint=function(n,t){var u,i,e,s,o,f,h=this._clickTolerance();if(!this._pxBounds.contains(n))return!1;for(u=0,s=this._parts.length;s>u;u++)for(f=this._parts[u],i=0,o=f.length,e=o-1;o>i;e=i++)if((t||0!==i)&&r.LineUtil.pointToSegmentDistance(n,f[e],f[i])<=h)return!0;return!1};r.Polygon.prototype._containsPoint=function(n){var i,t,u,f,e,o,c,s,h=!1;if(!this._pxBounds.contains(n))return!1;for(f=0,c=this._parts.length;c>f;f++)for(i=this._parts[f],e=0,s=i.length,o=s-1;s>e;o=e++)t=i[e],u=i[o],t.y>n.y!=u.y>n.y&&n.x<(u.x-t.x)*(n.y-t.y)/(u.y-t.y)+t.x&&(h=!h);return h||r.Polyline.prototype._containsPoint.call(this,n,!0)};r.CircleMarker.prototype._containsPoint=function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()};r.GeoJSON=r.FeatureGroup.extend({initialize:function(n,t){r.setOptions(this,t);this._layers={};n&&this.addData(n)},addData:function(n){var f,o,i,e=r.Util.isArray(n)?n:n.features,u,t;if(e){for(f=0,o=e.length;o>f;f++)i=e[f],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}return u=this.options,!u.filter||u.filter(n)?(t=r.GeoJSON.geometryToLayer(n,u),t.feature=r.GeoJSON.asFeature(n),t.defaultOptions=t.options,this.resetStyle(t),u.onEachFeature&&u.onEachFeature(n,t),this.addLayer(t)):void 0},resetStyle:function(n){return n.options=n.defaultOptions,this._setLayerStyle(n,this.options.style),this},setStyle:function(n){return this.eachLayer(function(t){this._setLayerStyle(t,n)},this)},_setLayerStyle:function(n,t){"function"==typeof t&&(t=t(n.feature));n.setStyle&&n.setStyle(t)}});r.extend(r.GeoJSON,{geometryToLayer:function(n,t){var u,o,i,s,f="Feature"===n.type?n.geometry:n,e=f.coordinates,h=[],c=t&&t.pointToLayer,l=t&&t.coordsToLatLng||this.coordsToLatLng;switch(f.type){case"Point":return u=l(e),c?c(n,u):new r.Marker(u);case"MultiPoint":for(i=0,s=e.length;s>i;i++)u=l(e[i]),h.push(c?c(n,u):new r.Marker(u));return new r.FeatureGroup(h);case"LineString":case"MultiLineString":return o=this.coordsToLatLngs(e,"LineString"===f.type?0:1,l),new r.Polyline(o,t);case"Polygon":case"MultiPolygon":return o=this.coordsToLatLngs(e,"Polygon"===f.type?1:2,l),new r.Polygon(o,t);case"GeometryCollection":for(i=0,s=f.geometries.length;s>i;i++)h.push(this.geometryToLayer({geometry:f.geometries[i],type:"Feature",properties:n.properties},t));return new r.FeatureGroup(h);default:throw new Error("Invalid GeoJSON object.");}},coordsToLatLng:function(n){return new r.LatLng(n[1],n[0],n[2])},coordsToLatLngs:function(n,t,i){for(var u,f=[],r=0,e=n.length;e>r;r++)u=t?this.coordsToLatLngs(n[r],t-1,i):(i||this.coordsToLatLng)(n[r]),f.push(u);return f},latLngToCoords:function(n){return n.alt!==i?[n.lng,n.lat,n.alt]:[n.lng,n.lat]},latLngsToCoords:function(n,t,i){for(var u=[],f=0,e=n.length;e>f;f++)u.push(t?r.GeoJSON.latLngsToCoords(n[f],t-1,i):r.GeoJSON.latLngToCoords(n[f]));return!t&&i&&u.push(u[0]),u},getFeature:function(n,t){return n.feature?r.extend({},n.feature,{geometry:t}):r.GeoJSON.asFeature(t)},asFeature:function(n){return"Feature"===n.type?n:{type:"Feature",properties:{},geometry:n}}});e={toGeoJSON:function(){return r.GeoJSON.getFeature(this,{type:"Point",coordinates:r.GeoJSON.latLngToCoords(this.getLatLng())})}};r.Marker.include(e);r.Circle.include(e);r.CircleMarker.include(e);r.Polyline.prototype.toGeoJSON=function(){var n=!this._flat(this._latlngs),t=r.GeoJSON.latLngsToCoords(this._latlngs,n?1:0);return r.GeoJSON.getFeature(this,{type:(n?"Multi":"")+"LineString",coordinates:t})};r.Polygon.prototype.toGeoJSON=function(){var n=!this._flat(this._latlngs),i=n&&!this._flat(this._latlngs[0]),t=r.GeoJSON.latLngsToCoords(this._latlngs,i?2:n?1:0,!0);return n||(t=[t]),r.GeoJSON.getFeature(this,{type:(i?"Multi":"")+"Polygon",coordinates:t})};r.LayerGroup.include({toMultiPoint:function(){var n=[];return this.eachLayer(function(t){n.push(t.toGeoJSON().geometry.coordinates)}),r.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:n})},toGeoJSON:function(){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type,t,n;return"MultiPoint"===i?this.toMultiPoint():(t="GeometryCollection"===i,n=[],this.eachLayer(function(i){if(i.toGeoJSON){var u=i.toGeoJSON();n.push(t?u.geometry:r.GeoJSON.asFeature(u))}}),t?r.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n})}});r.geoJson=function(n,t){return new r.GeoJSON(n,t)};f="_leaflet_events";r.DomEvent={on:function(n,t,i,u){var e,f,o;if("object"==typeof t)for(e in t)this._on(n,e,t[e],i);else for(t=r.Util.splitWords(t),f=0,o=t.length;o>f;f++)this._on(n,t[f],i,u);return this},off:function(n,t,i,u){var e,f,o;if("object"==typeof t)for(e in t)this._off(n,e,t[e],i);else for(t=r.Util.splitWords(t),f=0,o=t.length;o>f;f++)this._off(n,t[f],i,u);return this},_on:function(t,i,u,e){var s=i+r.stamp(u)+(e?"_"+r.stamp(e):""),o,h;return t[f]&&t[f][s]?this:(o=function(i){return u.call(e||t,i||n.event)},h=o,r.Browser.pointer&&0===i.indexOf("touch")?this.addPointerListener(t,i,o,s):r.Browser.touch&&"dblclick"===i&&this.addDoubleTapListener?this.addDoubleTapListener(t,o,s):"addEventListener"in t?"mousewheel"===i?(t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(i,o,!1)):"mouseenter"===i||"mouseleave"===i?(o=function(i){return i=i||n.event,r.DomEvent._checkMouse(t,i)?h(i):void 0},t.addEventListener("mouseenter"===i?"mouseover":"mouseout",o,!1)):("click"===i&&r.Browser.android&&(o=function(n){return r.DomEvent._filterClick(n,h)}),t.addEventListener(i,o,!1)):"attachEvent"in t&&t.attachEvent("on"+i,o),t[f]=t[f]||{},t[f][s]=o,this)},_off:function(n,t,i,u){var o=t+r.stamp(i)+(u?"_"+r.stamp(u):""),e=n[f]&&n[f][o];return e?(r.Browser.pointer&&0===t.indexOf("touch")?this.removePointerListener(n,t,o):r.Browser.touch&&"dblclick"===t&&this.removeDoubleTapListener?this.removeDoubleTapListener(n,o):"removeEventListener"in n?"mousewheel"===t?(n.removeEventListener("DOMMouseScroll",e,!1),n.removeEventListener(t,e,!1)):n.removeEventListener("mouseenter"===t?"mouseover":"mouseleave"===t?"mouseout":t,e,!1):"detachEvent"in n&&n.detachEvent("on"+t,e),n[f][o]=null,this):this},stopPropagation:function(n){return n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,r.DomEvent._skipped(n),this},disableScrollPropagation:function(n){return r.DomEvent.on(n,"mousewheel MozMousePixelScroll",r.DomEvent.stopPropagation)},disableClickPropagation:function(n){var t=r.DomEvent.stopPropagation;return r.DomEvent.on(n,r.Draggable.START.join(" "),t),r.DomEvent.on(n,{click:r.DomEvent._fakeStop,dblclick:t})},preventDefault:function(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this},stop:function(n){return r.DomEvent.preventDefault(n).stopPropagation(n)},getMousePosition:function(n,t){if(!t)return new r.Point(n.clientX,n.clientY);var i=t.getBoundingClientRect();return new r.Point(n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop)},getWheelDelta:function(n){var t=0;return n.wheelDelta&&(t=n.wheelDelta/120),n.detail&&(t=-n.detail/3),t},_skipEvents:{},_fakeStop:function(n){r.DomEvent._skipEvents[n.type]=!0},_skipped:function(n){var t=this._skipEvents[n.type];return this._skipEvents[n.type]=!1,t},_checkMouse:function(n,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==n;)i=i.parentNode}catch(r){return!1}return i!==n},_filterClick:function(n,t){var u=n.timeStamp||n.originalEvent.timeStamp,i=r.DomEvent._lastClick&&u-r.DomEvent._lastClick;return i&&i>100&&500>i||n.target._simulatedClick&&!n._simulated?void r.DomEvent.stop(n):(r.DomEvent._lastClick=u,t(n))}};r.DomEvent.addListener=r.DomEvent.on;r.DomEvent.removeListener=r.DomEvent.off;r.Draggable=r.Evented.extend({statics:{START:r.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(n,t){this._element=n;this._dragStartTarget=t||n},enable:function(){this._enabled||(r.DomEvent.on(this._dragStartTarget,r.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(r.DomEvent.off(this._dragStartTarget,r.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._moved=!1,!(n.shiftKey||1!==n.which&&1!==n.button&&!n.touches||(r.DomEvent.stopPropagation(n),r.DomUtil.hasClass(this._element,"leaflet-zoom-anim")||(r.DomUtil.disableImageDrag(),r.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var i=n.touches?n.touches[0]:n;this._startPoint=new r.Point(i.clientX,i.clientY);this._startPos=this._newPos=r.DomUtil.getPosition(this._element);r.DomEvent.on(t,r.Draggable.MOVE[n.type],this._onMove,this).on(t,r.Draggable.END[n.type],this._onUp,this)}},_onMove:function(n){if(n.touches&&n.touches.length>1)return void(this._moved=!0);var u=n.touches&&1===n.touches.length?n.touches[0]:n,f=new r.Point(u.clientX,u.clientY),i=f.subtract(this._startPoint);(i.x||i.y)&&(r.Browser.touch&&Math.abs(i.x)+Math.abs(i.y)<3||(r.DomEvent.preventDefault(n),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=r.DomUtil.getPosition(this._element).subtract(i),r.DomUtil.addClass(t.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,r.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,r.Util.cancelAnimFrame(this._animRequest),this._animRequest=r.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag");r.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(){r.DomUtil.removeClass(t.body,"leaflet-dragging");this._lastTarget&&(r.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var n in r.Draggable.MOVE)r.DomEvent.off(t,r.Draggable.MOVE[n],this._onMove,this).off(t,r.Draggable.END[n],this._onUp,this);r.DomUtil.enableImageDrag();r.DomUtil.enableTextSelection();this._moved&&this._moving&&(r.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)}));this._moving=!1}});r.Handler=r.Class.extend({initialize:function(n){this._map=n},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}});r.Map.mergeOptions({dragging:!0,inertia:!r.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:r.Browser.touch?32:18,easeLinearity:.2,worldCopyJump:!1});r.Map.Drag=r.Handler.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new r.Draggable(n._mapPane,n._container);this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),n.on("viewreset",this._onViewReset,this),n.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDown:function(){this._map.stop()},_onDragStart:function(){var n=this._map;n.fire("movestart").fire("dragstart");n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var n=this._lastTime=+new Date,t=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(t);this._times.push(n);n-this._times[0]>100&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var n=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(n).x;this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_onPreDrag:function(){var i=this._worldWidth,t=Math.round(i/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,u=(r-t+n)%i+t-n,f=(r+t+n)%i-t-n,e=Math.abs(u+n)<Math.abs(f+n)?u:f;this._draggable._absPos=this._draggable._newPos.clone();this._draggable._newPos.x=e},_onDragEnd:function(n){var t=this._map,i=t.options,e=+new Date-this._lastTime,l=!i.inertia||e>i.inertiaThreshold||!this._positions[0];if(t.fire("dragend",n),l)t.fire("moveend");else{var a=this._lastPos.subtract(this._positions[0]),v=(this._lastTime+e-this._times[0])/1e3,f=i.easeLinearity,o=a.multiplyBy(f/v),s=o.distanceTo([0,0]),h=Math.min(i.inertiaMaxSpeed,s),y=o.multiplyBy(h/s),c=h/(i.inertiaDeceleration*f),u=y.multiplyBy(-c/2).round();u.x&&u.y?(u=t._limitOffset(u,t.options.maxBounds),r.Util.requestAnimFrame(function(){t.panBy(u,{duration:c,easeLinearity:f,noMoveStart:!0,animate:!0})})):t.fire("moveend")}}});r.Map.addInitHook("addHandler","dragging",r.Map.Drag);r.Map.mergeOptions({doubleClickZoom:!0});r.Map.DoubleClickZoom=r.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var t=this._map,i=t.getZoom(),r=n.originalEvent.shiftKey?Math.ceil(i)-1:Math.floor(i)+1;"center"===t.options.doubleClickZoom?t.setZoom(r):t.setZoomAround(n.containerPoint,r)}});r.Map.addInitHook("addHandler","doubleClickZoom",r.Map.DoubleClickZoom);r.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40});r.Map.ScrollWheelZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,{mousewheel:this._onWheelScroll,MozMousePixelScroll:r.DomEvent.preventDefault},this);this._delta=0},removeHooks:function(){r.DomEvent.off(this._map._container,{mousewheel:this._onWheelScroll,MozMousePixelScroll:r.DomEvent.preventDefault},this)},_onWheelScroll:function(n){var i=r.DomEvent.getWheelDelta(n),u=this._map.options.wheelDebounceTime,t;this._delta+=i;this._lastMousePos=this._map.mouseEventToContainerPoint(n);this._startTime||(this._startTime=+new Date);t=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(r.bind(this._performZoom,this),t);r.DomEvent.stop(n)},_performZoom:function(){var t=this._map,n=this._delta,i=t.getZoom();t.stop();n=n>0?Math.ceil(n):Math.floor(n);n=Math.max(Math.min(n,4),-4);n=t._limitZoom(i+n)-i;this._delta=0;this._startTime=null;n&&("center"===t.options.scrollWheelZoom?t.setZoom(i+n):t.setZoomAround(this._lastMousePos,i+n))}});r.Map.addInitHook("addHandler","scrollWheelZoom",r.Map.ScrollWheelZoom);r.extend(r.DomEvent,{_touchstart:r.Browser.msPointer?"MSPointerDown":r.Browser.pointer?"pointerdown":"touchstart",_touchend:r.Browser.msPointer?"MSPointerUp":r.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(n,t,i){function e(n){var e,t,i;(e=r.Browser.pointer?r.DomEvent._pointersCount:n.touches.length,e>1)||(t=Date.now(),i=t-(f||t),u=n.touches?n.touches[0]:n,s=i>0&&a>=i,f=t)}function o(){if(s){if(r.Browser.pointer){var n,i,e={};for(i in u)n=u[i],e[i]=n&&n.bind?n.bind(u):n;u=e}u.type="dblclick";t(u);f=null}}var f,u,s=!1,a=250,h="_leaflet_",c=this._touchstart,l=this._touchend;return n[h+c+i]=e,n[h+l+i]=o,n.addEventListener(c,e,!1),n.addEventListener(l,o,!1),this},removeDoubleTapListener:function(n,t){var i="_leaflet_",r=n[i+this._touchend+t];return n.removeEventListener(this._touchstart,n[i+this._touchstart+t],!1),n.removeEventListener(this._touchend,r,!1),this}});r.extend(r.DomEvent,{POINTER_DOWN:r.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:r.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:r.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:r.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:{},_pointersCount:0,addPointerListener:function(n,t,i,r){return"touchstart"===t?this._addPointerStart(n,i,r):"touchmove"===t?this._addPointerMove(n,i,r):"touchend"===t&&this._addPointerEnd(n,i,r),this},removePointerListener:function(n,t,i){var r=n["_leaflet_"+t+i];return"touchstart"===t?n.removeEventListener(this.POINTER_DOWN,r,!1):"touchmove"===t?n.removeEventListener(this.POINTER_MOVE,r,!1):"touchend"===t&&(n.removeEventListener(this.POINTER_UP,r,!1),n.removeEventListener(this.POINTER_CANCEL,r,!1)),this},_addPointerStart:function(n,i,u){var e=r.bind(function(n){r.DomEvent.preventDefault(n);this._handlePointer(n,i)},this),f;(n["_leaflet_touchstart"+u]=e,n.addEventListener(this.POINTER_DOWN,e,!1),this._pointerDocListener)||(f=r.bind(this._globalPointerUp,this),t.documentElement.addEventListener(this.POINTER_DOWN,r.bind(this._globalPointerDown,this),!0),t.documentElement.addEventListener(this.POINTER_MOVE,r.bind(this._globalPointerMove,this),!0),t.documentElement.addEventListener(this.POINTER_UP,f,!0),t.documentElement.addEventListener(this.POINTER_CANCEL,f,!0),this._pointerDocListener=!0)},_globalPointerDown:function(n){this._pointers[n.pointerId]=n;this._pointersCount++},_globalPointerMove:function(n){this._pointers[n.pointerId]&&(this._pointers[n.pointerId]=n)},_globalPointerUp:function(n){delete this._pointers[n.pointerId];this._pointersCount--},_handlePointer:function(n,t){n.touches=[];for(var i in this._pointers)n.touches.push(this._pointers[i]);n.changedTouches=[n];t(n)},_addPointerMove:function(n,t,i){var u=r.bind(function(n){(n.pointerType!==n.MSPOINTER_TYPE_MOUSE&&"mouse"!==n.pointerType||0!==n.buttons)&&this._handlePointer(n,t)},this);n["_leaflet_touchmove"+i]=u;n.addEventListener(this.POINTER_MOVE,u,!1)},_addPointerEnd:function(n,t,i){var u=r.bind(function(n){this._handlePointer(n,t)},this);n["_leaflet_touchend"+i]=u;n.addEventListener(this.POINTER_UP,u,!1);n.addEventListener(this.POINTER_CANCEL,u,!1)}});r.Map.mergeOptions({touchZoom:r.Browser.touch&&!r.Browser.android23,bounceAtZoomLimits:!0});r.Map.TouchZoom=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){r.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var i=this._map;if(n.touches&&2===n.touches.length&&!i._animatingZoom&&!this._zooming){var u=i.mouseEventToLayerPoint(n.touches[0]),f=i.mouseEventToLayerPoint(n.touches[1]),e=i._getCenterLayerPoint();this._startCenter=u.add(f)._divideBy(2);this._startDist=u.distanceTo(f);this._moved=!1;this._zooming=!0;this._centerOffset=e.subtract(this._startCenter);i.stop();r.DomEvent.on(t,"touchmove",this._onTouchMove,this).on(t,"touchend",this._onTouchEnd,this);r.DomEvent.preventDefault(n)}},_onTouchMove:function(n){var i;if(n.touches&&2===n.touches.length&&this._zooming){var t=this._map,u=t.mouseEventToLayerPoint(n.touches[0]),f=t.mouseEventToLayerPoint(n.touches[1]);if((this._scale=u.distanceTo(f)/this._startDist,this._delta=u._add(f)._divideBy(2)._subtract(this._startCenter),!t.options.bounceAtZoomLimits)&&(i=t.getScaleZoom(this._scale),i<=t.getMinZoom()&&this._scale<1||i>=t.getMaxZoom()&&this._scale>1))return;this._moved||(t.fire("movestart").fire("zoomstart"),this._moved=!0);r.Util.cancelAnimFrame(this._animRequest);this._animRequest=r.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container);r.DomEvent.preventDefault(n)}},_updateOnMove:function(){var n=this._map;this._center="center"===n.options.touchZoom?n.getCenter():n.layerPointToLatLng(this._getTargetCenter());this._zoom=n.getScaleZoom(this._scale);n._animateZoom(this._center,this._zoom)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);this._zooming=!1;r.Util.cancelAnimFrame(this._animRequest);r.DomEvent.off(t,"touchmove",this._onTouchMove).off(t,"touchend",this._onTouchEnd);var n=this._map,i=n.getZoom(),u=this._zoom-i,f=n._limitZoom(u>0?Math.ceil(this._zoom):Math.floor(this._zoom));n._animateZoom(this._center,f,!0)},_getTargetCenter:function(){var n=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(n)}});r.Map.addInitHook("addHandler","touchZoom",r.Map.TouchZoom);r.Map.mergeOptions({tap:!0,tapTolerance:15});r.Map.Tap=r.Handler.extend({addHooks:function(){r.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){r.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(n.touches){if(r.DomEvent.preventDefault(n),this._fireClick=!0,n.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=n.touches[0],u=i.target;this._startPos=this._newPos=new r.Point(i.clientX,i.clientY);u.tagName&&"a"===u.tagName.toLowerCase()&&r.DomUtil.addClass(u,"leaflet-active");this._holdTimeout=setTimeout(r.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3);this._simulateEvent("mousedown",i);r.DomEvent.on(t,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(n){if(clearTimeout(this._holdTimeout),r.DomEvent.off(t,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&n&&n.changedTouches){var u=n.changedTouches[0],i=u.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&r.DomUtil.removeClass(i,"leaflet-active");this._simulateEvent("mouseup",u);this._isTapValid()&&this._simulateEvent("click",u)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(n){var t=n.touches[0];this._newPos=new r.Point(t.clientX,t.clientY)},_simulateEvent:function(i,r){var u=t.createEvent("MouseEvents");u._simulated=!0;r.target._simulatedClick=!0;u.initMouseEvent(i,!0,!0,n,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null);r.target.dispatchEvent(u)}});r.Browser.touch&&!r.Browser.pointer&&r.Map.addInitHook("addHandler","tap",r.Map.Tap);r.Map.mergeOptions({boxZoom:!0});r.Map.BoxZoom=r.Handler.extend({initialize:function(n){this._map=n;this._container=n._container;this._pane=n._panes.overlayPane},addHooks:function(){r.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){r.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_onMouseDown:function(n){return!n.shiftKey||1!==n.which&&1!==n.button?!1:(this._moved=!1,r.DomUtil.disableTextSelection(),r.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(n),void r.DomEvent.on(t,{contextmenu:r.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=r.DomUtil.create("div","leaflet-zoom-box",this._container),r.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart"));this._point=this._map.mouseEventToContainerPoint(n);var t=new r.Bounds(this._point,this._startPoint),i=t.getSize();r.DomUtil.setPosition(this._box,t.min);this._box.style.width=i.x+"px";this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(r.DomUtil.remove(this._box),r.DomUtil.removeClass(this._container,"leaflet-crosshair"));r.DomUtil.enableTextSelection();r.DomUtil.enableImageDrag();r.DomEvent.off(t,{contextmenu:r.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(1!==n.which&&1!==n.button)return!1;if(this._finish(),this._moved){var t=new r.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(n){27===n.keyCode&&this._finish()}});r.Map.addInitHook("addHandler","boxZoom",r.Map.BoxZoom);r.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1});r.Map.Keyboard=r.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(n){this._map=n;this._setPanOffset(n.options.keyboardPanOffset);this._setZoomOffset(n.options.keyboardZoomOffset)},addHooks:function(){var n=this._map._container;-1===n.tabIndex&&(n.tabIndex="0");r.DomEvent.on(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks();r.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=t.body,r=t.documentElement,u=i.scrollTop||r.scrollTop,f=i.scrollLeft||r.scrollLeft;this._map._container.focus();n.scrollTo(f,u)}},_onFocus:function(){this._focused=!0;this._map.fire("focus")},_onBlur:function(){this._focused=!1;this._map.fire("blur")},_setPanOffset:function(n){for(var u=this._panKeys={},r=this.keyCodes,t=0,i=r.left.length;i>t;t++)u[r.left[t]]=[-1*n,0];for(t=0,i=r.right.length;i>t;t++)u[r.right[t]]=[n,0];for(t=0,i=r.down.length;i>t;t++)u[r.down[t]]=[0,n];for(t=0,i=r.up.length;i>t;t++)u[r.up[t]]=[0,-1*n]},_setZoomOffset:function(n){for(var u=this._zoomKeys={},r=this.keyCodes,t=0,i=r.zoomIn.length;i>t;t++)u[r.zoomIn[t]]=n;for(t=0,i=r.zoomOut.length;i>t;t++)u[r.zoomOut[t]]=-n},_addHooks:function(){r.DomEvent.on(t,"keydown",this._onKeyDown,this)},_removeHooks:function(){r.DomEvent.off(t,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var i=n.keyCode,t=this._map;if(i in this._panKeys){if(t._panAnim&&t._panAnim._inProgress)return;t.panBy(this._panKeys[i]);t.options.maxBounds&&t.panInsideBounds(t.options.maxBounds)}else if(i in this._zoomKeys)t.setZoom(t.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i)return;t.closePopup()}r.DomEvent.stop(n)}}});r.Map.addInitHook("addHandler","keyboard",r.Map.Keyboard);r.Handler.MarkerDrag=r.Handler.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new r.Draggable(n,n));this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable();r.DomUtil.addClass(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable();r.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var n=this._marker,t=n._shadow,i=r.DomUtil.getPosition(n._icon),u=n._map.layerPointToLatLng(i);t&&r.DomUtil.setPosition(t,i);n._latlng=u;n.fire("move",{latlng:u}).fire("drag")},_onDragEnd:function(n){this._marker.fire("moveend").fire("dragend",n)}});r.Control=r.Class.extend({options:{position:"topright"},initialize:function(n){r.setOptions(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var t=this._map;return t&&t.removeControl(this),this.options.position=n,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove();this._map=n;var t=this._container=this.onAdd(n),u=this.getPosition(),i=n._controlCorners[u];return r.DomUtil.addClass(t,"leaflet-control"),-1!==u.indexOf("bottom")?i.insertBefore(t,i.firstChild):i.appendChild(t),this},remove:function(){return this._map?(r.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}});r.control=function(n){return new r.Control(n)};r.Map.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){function n(n,f){var e=t+n+" "+t+f;i[n+f]=r.DomUtil.create("div",e,u)}var i=this._controlCorners={},t="leaflet-",u=this._controlContainer=r.DomUtil.create("div",t+"control-container",this._container);n("top","left");n("top","right");n("bottom","left");n("bottom","right")},_clearControlPos:function(){r.DomUtil.remove(this._controlContainer)}});r.Control.Zoom=r.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(n){var i="leaflet-control-zoom",u=r.DomUtil.create("div",i+" leaflet-bar"),t=this.options;return this._zoomInButton=this._createButton(t.zoomInText,t.zoomInTitle,i+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(t.zoomOutText,t.zoomOutTitle,i+"-out",u,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(n){this._map.zoomIn(n.shiftKey?3:1)},_zoomOut:function(n){this._map.zoomOut(n.shiftKey?3:1)},_createButton:function(n,t,i,u,f){var e=r.DomUtil.create("a",i,u);return e.innerHTML=n,e.href="#",e.title=t,r.DomEvent.on(e,"mousedown dblclick",r.DomEvent.stopPropagation).on(e,"click",r.DomEvent.stop).on(e,"click",f,this).on(e,"click",this._refocusOnMap,this),e},_updateDisabled:function(){var n=this._map,t="leaflet-disabled";r.DomUtil.removeClass(this._zoomInButton,t);r.DomUtil.removeClass(this._zoomOutButton,t);n._zoom===n.getMinZoom()&&r.DomUtil.addClass(this._zoomOutButton,t);n._zoom===n.getMaxZoom()&&r.DomUtil.addClass(this._zoomInButton,t)}});r.Map.mergeOptions({zoomControl:!0});r.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new r.Control.Zoom,this.addControl(this.zoomControl))});r.control.zoom=function(n){return new r.Control.Zoom(n)};r.Control.Attribution=r.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet<\/a>'},initialize:function(n){r.setOptions(this,n);this._attributions={}},onAdd:function(n){this._container=r.DomUtil.create("div","leaflet-control-attribution");r.DomEvent&&r.DomEvent.disableClickPropagation(this._container);for(var t in n._layers)n._layers[t].getAttribution&&this.addAttribution(n._layers[t].getAttribution());return this._update(),this._container},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){if(n)return(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this)},removeAttribution:function(n){if(n)return(this._attributions[n]&&(this._attributions[n]--,this._update()),this)},_update:function(){var n,i,t;if(this._map){n=[];for(i in this._attributions)this._attributions[i]&&n.push(i);t=[];this.options.prefix&&t.push(this.options.prefix);n.length&&t.push(n.join(", "));this._container.innerHTML=t.join(" | ")}}});r.Map.mergeOptions({attributionControl:!0});r.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new r.Control.Attribution).addTo(this))});r.control.attribution=function(n){return new r.Control.Attribution(n)};r.Control.Scale=r.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var t="leaflet-control-scale",i=r.DomUtil.create("div",t),u=this.options;return this._addScales(u,t+"-line",i),n.on(u.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),i},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,t,i){n.metric&&(this._mScale=r.DomUtil.create("div",t,i));n.imperial&&(this._iScale=r.DomUtil.create("div",t,i))},_update:function(){var n=this._map,t=n.getSize().y/2,i=r.CRS.Earth.distance(n.containerPointToLatLng([0,t]),n.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(i)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n);this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var t=this._getRoundNum(n),i=1e3>t?t+" m":t/1e3+" km";this._updateScale(this._mScale,i,t/n)},_updateImperial:function(n){var i,r,u,t=3.2808399*n;t>5280?(i=t/5280,r=this._getRoundNum(i),this._updateScale(this._iScale,r+" mi",r/i)):(u=this._getRoundNum(t),this._updateScale(this._iScale,u+" ft",u/t))},_updateScale:function(n,t,i){n.style.width=Math.round(this.options.maxWidth*i)+"px";n.innerHTML=t},_getRoundNum:function(n){var i=Math.pow(10,(Math.floor(n)+"").length-1),t=n/i;return t=t>=10?10:t>=5?5:t>=3?3:t>=2?2:1,i*t}});r.control.scale=function(n){return new r.Control.Scale(n)};r.Control.Layers=r.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1},initialize:function(n,t,i){r.setOptions(this,i);this._layers={};this._lastZIndex=0;this._handlingClick=!1;for(var u in n)this._addLayer(n[u],u);for(u in t)this._addLayer(t[u],u,!0)},onAdd:function(){return this._initLayout(),this._update(),this._container},addBaseLayer:function(n,t){return this._addLayer(n,t),this._update()},addOverlay:function(n,t){return this._addLayer(n,t,!0),this._update()},removeLayer:function(n){return n.off("add remove",this._onLayerChange,this),delete this._layers[r.stamp(n)],this._update()},_initLayout:function(){var t="leaflet-control-layers",n=this._container=r.DomUtil.create("div",t),i,u;n.setAttribute("aria-haspopup",!0);r.Browser.touch?r.DomEvent.on(n,"click",r.DomEvent.stopPropagation):r.DomEvent.disableClickPropagation(n).disableScrollPropagation(n);i=this._form=r.DomUtil.create("form",t+"-list");this.options.collapsed?(r.Browser.android||r.DomEvent.on(n,{mouseenter:this._expand,mouseleave:this._collapse},this),u=this._layersLink=r.DomUtil.create("a",t+"-toggle",n),u.href="#",u.title="Layers",r.Browser.touch?r.DomEvent.on(u,"click",r.DomEvent.stop).on(u,"click",this._expand,this):r.DomEvent.on(u,"focus",this._expand,this),r.DomEvent.on(i,"click",function(){setTimeout(r.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)):this._expand();this._baseLayersList=r.DomUtil.create("div",t+"-base",i);this._separator=r.DomUtil.create("div",t+"-separator",i);this._overlaysList=r.DomUtil.create("div",t+"-overlays",i);n.appendChild(i)},_addLayer:function(n,t,i){n.on("add remove",this._onLayerChange,this);var u=r.stamp(n);this._layers[u]={layer:n,name:t,overlay:i};this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex))},_update:function(){if(this._container){r.DomUtil.empty(this._baseLayersList);r.DomUtil.empty(this._overlaysList);var n,i,u,t,f=0;for(u in this._layers)t=this._layers[u],this._addItem(t),i=i||t.overlay,n=n||!t.overlay,f+=t.overlay?0:1;return this.options.hideSingleBase&&(n=n&&f>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=i&&n?"":"none",this}},_onLayerChange:function(n){this._handlingClick||this._update();var i=this._layers[r.stamp(n.target)].overlay,t=i?"add"===n.type?"overlayadd":"overlayremove":"add"===n.type?"baselayerchange":null;t&&this._map.fire(t,n.target)},_createRadioElement:function(n,i){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(i?' checked="checked"':"")+"/>",r=t.createElement("div");return r.innerHTML=u,r.firstChild},_addItem:function(n){var i,u=t.createElement("label"),e=this._map.hasLayer(n.layer),f,o;return n.overlay?(i=t.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=e):i=this._createRadioElement("leaflet-base-layers",e),i.layerId=r.stamp(n.layer),r.DomEvent.on(i,"click",this._onInputClick,this),f=t.createElement("span"),f.innerHTML=" "+n.name,u.appendChild(i),u.appendChild(f),o=n.overlay?this._overlaysList:this._baseLayersList,o.appendChild(u),u},_onInputClick:function(){var t,i,r,e=this._form.getElementsByTagName("input"),u=[],f=[],n,o;for(this._handlingClick=!0,n=0,o=e.length;o>n;n++)t=e[n],i=this._layers[t.layerId].layer,r=this._map.hasLayer(i),t.checked&&!r?u.push(i):!t.checked&&r&&f.push(i);for(n=0;n<f.length;n++)this._map.removeLayer(f[n]);for(n=0;n<u.length;n++)this._map.addLayer(u[n]);this._handlingClick=!1;this._refocusOnMap()},_expand:function(){r.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){r.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded")}});r.control.layers=function(n,t,i){return new r.Control.Layers(n,t,i)};r.PosAnimation=r.Evented.extend({run:function(n,t,i,u){this.stop();this._el=n;this._inProgress=!0;this._duration=i||.25;this._easeOutPower=1/Math.max(u||.5,.2);this._startPos=r.DomUtil.getPosition(n);this._offset=t.subtract(this._startPos);this._startTime=+new Date;this.fire("start");this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=r.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(n){var t=+new Date-this._startTime,i=1e3*this._duration;i>t?this._runFrame(this._easeOut(t/i),n):(this._runFrame(1),this._complete())},_runFrame:function(n,t){var i=this._startPos.add(this._offset.multiplyBy(n));t&&i._round();r.DomUtil.setPosition(this._el,i);this.fire("step")},_complete:function(){r.Util.cancelAnimFrame(this._animId);this._inProgress=!1;this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}});r.Map.include({setView:function(n,t,u){if(t=t===i?this._zoom:this._limitZoom(t),n=this._limitCenter(r.latLng(n),t,this.options.maxBounds),u=u||{},this.stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==i&&(u.zoom=r.extend({animate:u.animate},u.zoom),u.pan=r.extend({animate:u.animate},u.pan));var f=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,t,u.zoom):this._tryAnimatedPan(n,u.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(n,t),this},panBy:function(n,t){if(n=r.point(n).round(),t=t||{},!n.x&&!n.y)return this;if(t.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom());if(this._panAnim||(this._panAnim=new r.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){r.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(n);this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){r.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(n,t){var i=this._getCenterOffset(n)._floor();return(t&&t.animate)===!0||this.getSize().contains(i)?(this.panBy(i,t),!0):!1}});r.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4});o=r.DomUtil.TRANSITION&&r.Browser.any3d&&!r.Browser.mobileOpera;o&&r.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation;this._zoomAnimated&&(this._createAnimProxy(),r.DomEvent.on(this._proxy,r.DomUtil.TRANSITION_END,this._catchTransitionEnd,this))});r.Map.include(o?{_createAnimProxy:function(){var n=this._proxy=r.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n);this.on("zoomanim",function(t){r.DomUtil.setTransform(n,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1))},this);this.on("load moveend",function(){var i=this.getCenter(),t=this.getZoom();r.DomUtil.setTransform(n,this.project(i,t),this.getZoomScale(t,1))},this)},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var u=this.getZoomScale(t),f=this._getCenterOffset(n)._divideBy(1-1/u);return i.animate===!0||this.getSize().contains(f)?(r.Util.requestAnimFrame(function(){this.fire("movestart").fire("zoomstart")._animateZoom(n,t,!0)},this),!0):!1},_animateZoom:function(n,t,i){i&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=t,r.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"));this.fire("zoomanim",{center:n,zoom:t,scale:this.getZoomScale(t),origin:this.latLngToLayerPoint(n),offset:this._getCenterOffset(n).multiplyBy(-1)})},_onZoomTransitionEnd:function(){this._animatingZoom=!1;r.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");this._resetView(this._animateToCenter,this._animateToZoom,!0,!0)}}:{});r.Map.include({flyTo:function(n,t){function v(n){var t=(a*a-u*u+(n?-1:1)*c*c*h*h)/(2*(n?a:u)*c*h);return Math.log(Math.sqrt(t*t+1)-t)}function y(n){return(Math.exp(n)-Math.exp(-n))/2}function o(n){return(Math.exp(n)+Math.exp(-n))/2}function d(n){return y(n)/o(n)}function g(n){return u*(o(f)/o(f+e*n))}function nt(n){return u*(o(f)*d(f+e*n)-y(f))/c}function tt(n){return 1-Math.pow(1-n,1.5)}function p(){var i=(Date.now()-it)/rt,f=tt(i)*k;1>=i?(this._flyToFrame=r.Util.requestAnimFrame(p,this),this._resetView(this.unproject(l.add(w.subtract(l).multiplyBy(nt(f)/h)),s),this.getScaleZoom(u/g(f),s),!0,!0)):this._resetView(n,t,!0,!0)}this.stop();var l=this.project(this.getCenter()),w=this.project(n),b=this.getSize(),s=this._zoom;t=t===i?s:t;var u=Math.max(b.x,b.y),a=u*this.getZoomScale(s,t),h=w.distanceTo(l),e=1.42,c=e*e,f=v(0),it=Date.now(),k=(v(1)-f)/e,rt=1e3*k*.8;this.fire("zoomstart");p.call(this)}});r.Map.include({_defaultLocateOptions:{timeout:1e4,watch:!1},locate:function(n){if(n=this._locateOptions=r.extend(this._defaultLocateOptions,n),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=r.bind(this._handleGeolocationResponse,this),i=r.bind(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,n):navigator.geolocation.getCurrentPosition(t,i,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){var t=n.code,i=n.message||(1===t?"permission denied":2===t?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld();this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(n){var s=n.coords.latitude,h=n.coords.longitude,i=new r.LatLng(s,h),o=i.toBounds(n.coords.accuracy),u=this._locateOptions,f,e,t;u.setView&&(f=this.getBoundsZoom(o),this.setView(i,u.maxZoom?Math.min(f,u.maxZoom):f));e={latlng:i,bounds:o,timestamp:n.timestamp};for(t in n.coords)"number"==typeof n.coords[t]&&(e[t]=n.coords[t]);this.fire("locationfound",e)}})}(window,document),function(){var n=L.Marker.prototype.onAdd,t=L.Marker.prototype.onRemove;L.Marker.mergeOptions({bounceOnAdd:!1,bounceOnAddOptions:{duration:1e3,height:-1},bounceOnAddCallback:function(){}});L.Marker.include({_toPoint:function(n){return this._map.latLngToContainerPoint(n)},_toLatLng:function(n){return this._map.containerPointToLatLng(n)},_motionStep:function(n){var t=this,i=new Date;t._intervalId=setInterval(function(){var f=new Date-i,r=f/n.duration,u;r>1&&(r=1);u=n.delta(r);n.step(u);r===1&&(n.end(),clearInterval(t._intervalId))},n.delay||10)},_bounceMotion:function(n,t,i){var f=L.latLng(this._origLatlng),u=this._dropPoint.y,e=this._dropPoint.x,o=this._point.y-u,r=this;this._motionStep({delay:10,duration:t||1e3,delta:n,step:function(n){r._dropPoint.y=u+o*n-(r._map.project(r._map.getCenter()).y-r._origMapCenter.y);r._dropPoint.x=e-(r._map.project(r._map.getCenter()).x-r._origMapCenter.x);r.setLatLng(r._toLatLng(r._dropPoint))},end:function(){r.setLatLng(f);typeof i=="function"&&i()}})},_easeOutBounce:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounce:function(n,t){this._origLatlng=this.getLatLng();this._bounce(n,t)},_bounce:function(n,t){typeof n=="function"&&(t=n,n=null);n=n||{duration:1e3,height:-1};typeof n=="number"&&(n.duration=arguments[0],n.height=arguments[1]);this._origMapCenter=this._map.project(this._map.getCenter());this._dropPoint=this._getDropPoint(n.height);this._bounceMotion(this._easeOutBounce,n.duration,t)},_getDropPoint:function(n){this._point=this._toPoint(this._origLatlng);var t;return t=n===undefined||n<0?this._toPoint(this._map.getBounds()._northEast).y:this._point.y-n,new L.Point(this._point.x,t)},onAdd:function(t){this._map=t;this._origLatlng=this._latlng;this.options.bounceOnAdd===!0&&(typeof this.options.bounceOnAddDuration!="undefined"&&(this.options.bounceOnAddOptions.duration=this.options.bounceOnAddDuration),typeof this.options.bounceOnAddHeight!="undefined"&&(this.options.bounceOnAddOptions.height=this.options.bounceOnAddHeight),this._dropPoint=this._getDropPoint(this.options.bounceOnAddOptions.height),this.setLatLng(this._toLatLng(this._dropPoint)));n.call(this,t);this.options.bounceOnAdd===!0&&this._bounce(this.options.bounceOnAddOptions,this.options.bounceOnAddCallback)},onRemove:function(n){clearInterval(this._intervalId);t.call(this,n)}})}();
//! moment.js
//! version : 2.8.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(n){function it(n,t,i){switch(arguments.length){case 2:return n!=null?n:t;case 3:return n!=null?n:t!=null?t:i;default:throw new Error("Implement me");}}function g(n,t){return kr.call(n,t)}function at(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function ai(n){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+n)}function s(n,t){var i=!0;return nt(function(){return i&&(ai(n),i=!1),t.apply(this,arguments)},t)}function wu(n,t){ci[n]||(ai(t),ci[n]=!0)}function vi(n,t){return function(i){return r(n.call(this,i),t)}}function bu(n,t){return function(i){return this.localeData().ordinal(n.call(this,i),t)}}function yi(){}function et(n,t){t!==!1&&ur(n);pi(this,n);this._d=new Date(+n._d)}function vt(n){var i=nr(n),r=i.year||0,u=i.quarter||0,f=i.month||0,e=i.week||0,o=i.day||0,s=i.hour||0,h=i.minute||0,c=i.second||0,l=i.millisecond||0;this._milliseconds=+l+c*1e3+h*6e4+s*36e5;this._days=+o+e*7;this._months=+f+u*3+r*12;this._data={};this._locale=t.localeData();this._bubble()}function nt(n,t){for(var i in t)g(t,i)&&(n[i]=t[i]);return g(t,"toString")&&(n.toString=t.toString),g(t,"valueOf")&&(n.valueOf=t.valueOf),n}function pi(n,t){var u,i,r;if(typeof t._isAMomentObject!="undefined"&&(n._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(n._i=t._i),typeof t._f!="undefined"&&(n._f=t._f),typeof t._l!="undefined"&&(n._l=t._l),typeof t._strict!="undefined"&&(n._strict=t._strict),typeof t._tzm!="undefined"&&(n._tzm=t._tzm),typeof t._isUTC!="undefined"&&(n._isUTC=t._isUTC),typeof t._offset!="undefined"&&(n._offset=t._offset),typeof t._pf!="undefined"&&(n._pf=t._pf),typeof t._locale!="undefined"&&(n._locale=t._locale),ut.length>0)for(u in ut)i=ut[u],r=t[i],typeof r!="undefined"&&(n[i]=r);return n}function h(n){return n<0?Math.ceil(n):Math.floor(n)}function r(n,t,i){for(var r=""+Math.abs(n),u=n>=0;r.length<t;)r="0"+r;return(u?i?"+":"":"-")+r}function wi(n,t){var i={milliseconds:0,months:0};return i.months=t.month()-n.month()+(t.year()-n.year())*12,n.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+n.clone().add(i.months,"M"),i}function ku(n,t){var i;return t=pt(t,n),n.isBefore(t)?i=wi(n,t):(i=wi(t,n),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function bi(n,i){return function(r,u){var f,e;return u===null||isNaN(+u)||(wu(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period)."),e=r,r=u,u=e),r=typeof r=="string"?+r:r,f=t.duration(r,u),ki(this,f,n),this}}function ki(n,i,r,u){var o=i._milliseconds,f=i._days,e=i._months;u=u==null?!0:u;o&&n._d.setTime(+n._d+o*r);f&&yr(n,"Date",gt(n,"Date")+f*r);e&&vr(n,gt(n,"Month")+e*r);u&&t.updateOffset(n,f||e)}function ot(n){return Object.prototype.toString.call(n)==="[object Array]"}function di(n){return Object.prototype.toString.call(n)==="[object Date]"||n instanceof Date}function gi(n,t,r){for(var e=Math.min(n.length,t.length),o=Math.abs(n.length-t.length),f=0,u=0;u<e;u++)(r&&n[u]!==t[u]||!r&&i(n[u])!==i(t[u]))&&f++;return f+o}function e(n){if(n){var t=n.toLowerCase().replace(/(.)s$/,"$1");n=yu[n]||pu[t]||t}return n}function nr(n){var r={},t;for(var i in n)g(n,i)&&(t=e(i),t&&(r[t]=n[i]));return r}function du(i){var r,u;if(i.indexOf("week")===0)r=7,u="day";else if(i.indexOf("month")===0)r=12,u="month";else return;t[i]=function(f,e){var o,s,c=t._locale[i],h=[];if(typeof f=="number"&&(e=f,f=n),s=function(n){var i=t().utc().set(u,n);return c.call(t._locale,i,f||"")},e!=null)return s(e);for(o=0;o<r;o++)h.push(s(o));return h}}function i(n){var t=+n,i=0;return t!==0&&isFinite(t)&&(i=t>=0?Math.floor(t):Math.ceil(t)),i}function yt(n,t){return new Date(Date.UTC(n,t+1,0)).getUTCDate()}function tr(n,i,r){return tt(t([n,11,31+i-r]),i,r).week}function ir(n){return rr(n)?366:365}function rr(n){return n%4==0&&n%100!=0||n%400==0}function ur(n){var t;n._a&&n._pf.overflow===-2&&(t=n._a[l]<0||n._a[l]>11?l:n._a[o]<1||n._a[o]>yt(n._a[c],n._a[l])?o:n._a[f]<0||n._a[f]>24||n._a[f]===24&&(n._a[w]!==0||n._a[b]!==0||n._a[k]!==0)?f:n._a[w]<0||n._a[w]>59?w:n._a[b]<0||n._a[b]>59?b:n._a[k]<0||n._a[k]>999?k:-1,n._pf._overflowDayOfYear&&(t<c||t>o)&&(t=o),n._pf.overflow=t)}function fr(t){return t._isValid==null&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&t._pf.charsLeftOver===0&&t._pf.unusedTokens.length===0&&t._pf.bigHour===n)),t._isValid}function er(n){return n?n.toLowerCase().replace("_","-"):n}function gu(n){for(var r=0,i,t,f,u;r<n.length;){for(u=er(n[r]).split("-"),i=u.length,t=er(n[r+1]),t=t?t.split("-"):null;i>0;){if(f=or(u.slice(0,i).join("-")),f)return f;if(t&&t.length>=i&&gi(u,t,!0)>=i-1)break;i--}r++}return null}function or(n){var i=null;if(!d[n]&&ti)try{i=t.locale();require("./locale/"+n);t.locale(i)}catch(r){}return d[n]}function pt(n,i){var r,u;return i._isUTC?(r=i.clone(),u=(t.isMoment(n)||di(n)?+n:+t(n))-+r,r._d.setTime(+r._d+u),t.updateOffset(r,!1),r):t(n).local()}function nf(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function tf(n){for(var i=n.match(ii),t=0,r=i.length;t<r;t++)i[t]=a[i[t]]?a[i[t]]:nf(i[t]);return function(u){var f="";for(t=0;t<r;t++)f+=i[t]instanceof Function?i[t].call(u,n):i[t];return f}}function wt(n,t){return n.isValid()?(t=sr(t,n.localeData()),lt[t]||(lt[t]=tf(t)),lt[t](n)):n.localeData().invalidDate()}function sr(n,t){function r(n){return t.longDateFormat(n)||n}var i=5;for(ft.lastIndex=0;i>=0&&ft.test(n);)n=n.replace(ft,r),ft.lastIndex=0,i-=1;return n}function rf(n,t){var i=t._strict;switch(n){case"Q":return ui;case"DDDD":return ei;case"YYYY":case"GGGG":case"gggg":return i?hu:iu;case"Y":case"G":case"g":return lu;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?cu:ru;case"S":if(i)return ui;case"SS":if(i)return fi;case"SSS":if(i)return ei;case"DDD":return tu;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return fu;case"a":case"A":return t._locale._meridiemParse;case"x":return ou;case"X":return su;case"Z":case"ZZ":return st;case"T":return eu;case"SSSS":return uu;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?fi:ri;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return ri;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return new RegExp(hf(sf(n.replace("\\","")),"i"))}}function hr(n){n=n||"";var r=n.match(st)||[],f=r[r.length-1]||[],t=(f+"").match(vu)||["-",0,0],u=+(t[1]*60)+i(t[2]);return t[0]==="+"?-u:u}function uf(n,r,u){var s,e=u._a;switch(n){case"Q":r!=null&&(e[l]=(i(r)-1)*3);break;case"M":case"MM":r!=null&&(e[l]=i(r)-1);break;case"MMM":case"MMMM":s=u._locale.monthsParse(r,n,u._strict);s!=null?e[l]=s:u._pf.invalidMonth=r;break;case"D":case"DD":r!=null&&(e[o]=i(r));break;case"Do":r!=null&&(e[o]=i(parseInt(r.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":r!=null&&(u._dayOfYear=i(r));break;case"YY":e[c]=t.parseTwoDigitYear(r);break;case"YYYY":case"YYYYY":case"YYYYYY":e[c]=i(r);break;case"a":case"A":u._isPm=u._locale.isPM(r);break;case"h":case"hh":u._pf.bigHour=!0;case"H":case"HH":e[f]=i(r);break;case"m":case"mm":e[w]=i(r);break;case"s":case"ss":e[b]=i(r);break;case"S":case"SS":case"SSS":case"SSSS":e[k]=i(("0."+r)*1e3);break;case"x":u._d=new Date(i(r));break;case"X":u._d=new Date(parseFloat(r)*1e3);break;case"Z":case"ZZ":u._useUTC=!0;u._tzm=hr(r);break;case"dd":case"ddd":case"dddd":s=u._locale.weekdaysParse(r);s!=null?(u._w=u._w||{},u._w.d=s):u._pf.invalidWeekday=r;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":n=n.substr(0,1);case"gggg":case"GGGG":case"GGGGG":n=n.substr(0,2);r&&(u._w=u._w||{},u._w[n]=i(r));break;case"gg":case"GG":u._w=u._w||{};u._w[n]=t.parseTwoDigitYear(r)}}function ff(n){var i,o,f,u,r,e,s;i=n._w;i.GG!=null||i.W!=null||i.E!=null?(r=1,e=4,o=it(i.GG,n._a[c],tt(t(),1,4).year),f=it(i.W,1),u=it(i.E,1)):(r=n._locale._week.dow,e=n._locale._week.doy,o=it(i.gg,n._a[c],tt(t(),r,e).year),f=it(i.w,1),i.d!=null?(u=i.d,u<r&&++f):u=i.e!=null?i.e+r:r);s=kf(o,f,u,e,r);n._a[c]=s.year;n._dayOfYear=s.dayOfYear}function bt(n){var t,i,r=[],u,e;if(!n._d){for(u=of(n),n._w&&n._a[o]==null&&n._a[l]==null&&ff(n),n._dayOfYear&&(e=it(n._a[c],u[c]),n._dayOfYear>ir(e)&&(n._pf._overflowDayOfYear=!0),i=dt(e,0,n._dayOfYear),n._a[l]=i.getUTCMonth(),n._a[o]=i.getUTCDate()),t=0;t<3&&n._a[t]==null;++t)n._a[t]=r[t]=u[t];for(;t<7;t++)n._a[t]=r[t]=n._a[t]==null?t===2?1:0:n._a[t];n._a[f]===24&&n._a[w]===0&&n._a[b]===0&&n._a[k]===0&&(n._nextDay=!0,n._a[f]=0);n._d=(n._useUTC?dt:yf).apply(null,r);n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()+n._tzm);n._nextDay&&(n._a[f]=24)}}function ef(n){var t;n._d||(t=nr(n._i),n._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],bt(n))}function of(n){var t=new Date;return n._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function kt(i){if(i._f===t.ISO_8601){cr(i);return}i._a=[];i._pf.empty=!0;for(var r=""+i._i,u,e,h,l=r.length,c=0,s=sr(i._f,i._locale).match(ii)||[],o=0;o<s.length;o++)e=s[o],u=(r.match(rf(e,i))||[])[0],u&&(h=r.substr(0,r.indexOf(u)),h.length>0&&i._pf.unusedInput.push(h),r=r.slice(r.indexOf(u)+u.length),c+=u.length),a[e]?(u?i._pf.empty=!1:i._pf.unusedTokens.push(e),uf(e,u,i)):i._strict&&!u&&i._pf.unusedTokens.push(e);i._pf.charsLeftOver=l-c;r.length>0&&i._pf.unusedInput.push(r);i._pf.bigHour===!0&&i._a[f]<=12&&(i._pf.bigHour=n);i._isPm&&i._a[f]<12&&(i._a[f]+=12);i._isPm===!1&&i._a[f]===12&&(i._a[f]=0);bt(i);ur(i)}function sf(n){return n.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(n,t,i,r,u){return t||i||r||u})}function hf(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function cf(n){var t,f,u,r,i;if(n._f.length===0){n._pf.invalidFormat=!0;n._d=new Date(NaN);return}for(r=0;r<n._f.length;r++)(i=0,t=pi({},n),n._useUTC!=null&&(t._useUTC=n._useUTC),t._pf=at(),t._f=n._f[r],kt(t),fr(t))&&(i+=t._pf.charsLeftOver,i+=t._pf.unusedTokens.length*10,t._pf.score=i,(u==null||i<u)&&(u=i,f=t));nt(n,f||t)}function cr(n){var t,i,r=n._i,u=au.exec(r);if(u){for(n._pf.iso=!0,t=0,i=ht.length;t<i;t++)if(ht[t][1].exec(r)){n._f=ht[t][0]+(u[6]||" ");break}for(t=0,i=ct.length;t<i;t++)if(ct[t][1].exec(r)){n._f+=ct[t][0];break}r.match(st)&&(n._f+="Z");kt(n)}else n._isValid=!1}function lf(n){cr(n);n._isValid===!1&&(delete n._isValid,t.createFromInputFallback(n))}function af(n,t){for(var r=[],i=0;i<n.length;++i)r.push(t(n[i],i));return r}function vf(i){var r=i._i,u;r===n?i._d=new Date:di(r)?i._d=new Date(+r):(u=dr.exec(r))!==null?i._d=new Date(+u[1]):typeof r=="string"?lf(i):ot(r)?(i._a=af(r.slice(0),function(n){return parseInt(n,10)}),bt(i)):typeof r=="object"?ef(i):typeof r=="number"?i._d=new Date(r):t.createFromInputFallback(i)}function yf(n,t,i,r,u,f,e){var o=new Date(n,t,i,r,u,f,e);return n<1970&&o.setFullYear(n),o}function dt(n){var t=new Date(Date.UTC.apply(null,arguments));return n<1970&&t.setUTCFullYear(n),t}function pf(n,t){if(typeof n=="string")if(isNaN(n)){if(n=t.weekdaysParse(n),typeof n!="number")return null}else n=parseInt(n,10);return n}function wf(n,t,i,r,u){return u.relativeTime(t||1,!!i,n,r)}function bf(n,i,r){var u=t.duration(n).abs(),c=p(u.as("s")),e=p(u.as("m")),o=p(u.as("h")),s=p(u.as("d")),h=p(u.as("M")),l=p(u.as("y")),f=c<y.s&&["s",c]||e===1&&["m"]||e<y.m&&["mm",e]||o===1&&["h"]||o<y.h&&["hh",o]||s===1&&["d"]||s<y.d&&["dd",s]||h===1&&["M"]||h<y.M&&["MM",h]||l===1&&["y"]||["yy",l];return f[2]=i,f[3]=+n>0,f[4]=r,wf.apply({},f)}function tt(n,i,r){var e=r-i,u=r-n.day(),f;return u>e&&(u-=7),u<e-7&&(u+=7),f=t(n).add(u,"d"),{week:Math.ceil(f.dayOfYear()/7),year:f.year()}}function kf(n,t,i,r,u){var f=dt(n,0,1).getUTCDay(),o,e;return f=f===0?7:f,i=i!=null?i:u,o=u-f+(f>r?7:0)-(f<u?7:0),e=7*(t-1)+(i-u)+o+1,{year:e>0?n:n-1,dayOfYear:e>0?e:ir(n-1)+e}}function lr(i){var r=i._i,f=i._f,u;return(i._locale=i._locale||t.localeData(i._l),r===null||f===n&&r==="")?t.invalid({nullInput:!0}):(typeof r=="string"&&(i._i=r=i._locale.preparse(r)),t.isMoment(r))?new et(r,!0):(f?ot(f)?cf(i):kt(i):vf(i),u=new et(i),u._nextDay&&(u.add(1,"d"),u._nextDay=n),u)}function ar(n,i){var u,r;if(i.length===1&&ot(i[0])&&(i=i[0]),!i.length)return t();for(u=i[0],r=1;r<i.length;++r)i[r][n](u)&&(u=i[r]);return u}function vr(n,t){var i;return typeof t=="string"&&(t=n.localeData().monthsParse(t),typeof t!="number")?n:(i=Math.min(n.date(),yt(n.year(),t)),n._d["set"+(n._isUTC?"UTC":"")+"Month"](t,i),n)}function gt(n,t){return n._d["get"+(n._isUTC?"UTC":"")+t]()}function yr(n,t,i){return t==="Month"?vr(n,i):n._d["set"+(n._isUTC?"UTC":"")+t](i)}function v(n,i){return function(r){return r!=null?(yr(this,n,r),t.updateOffset(this,i),this):gt(this,n)}}function pr(n){return n*400/146097}function wr(n){return n*146097/400}function df(n){t.duration.fn[n]=function(){return this._data[n]}}function br(n){typeof ender=="undefined"&&(ni=rt.moment,rt.moment=n?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",t):t)}for(var t,rt=typeof global!="undefined"?global:this,ni,p=Math.round,kr=Object.prototype.hasOwnProperty,u,c=0,l=1,o=2,f=3,w=4,b=5,k=6,d={},ut=[],ti=typeof module!="undefined"&&module&&module.exports,dr=/^\/?Date\((\-?\d+)/i,gr=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,nu=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ii=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,ft=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ri=/\d\d?/,tu=/\d{1,3}/,iu=/\d{1,4}/,ru=/[+\-]?\d{1,6}/,uu=/\d+/,fu=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,st=/Z|[\+\-]\d\d:?\d\d/gi,eu=/T/i,ou=/[\+\-]?\d+/,su=/[\+\-]?\d+(\.\d{1,3})?/,ui=/\d/,fi=/\d\d/,ei=/\d{3}/,hu=/\d{4}/,cu=/[+-]?\d{6}/,lu=/[+-]?\d+/,au=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ct=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],vu=/([\+\-]|\d\d)/gi,gf="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),oi={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},yu={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},pu={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lt={},y={s:45,m:45,h:22,d:26,M:11},si="DDD w W M D d".split(" "),hi="M D H h m s w W".split(" "),a={M:function(){return this.month()+1},MMM:function(n){return this.localeData().monthsShort(this,n)},MMMM:function(n){return this.localeData().months(this,n)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(n){return this.localeData().weekdaysMin(this,n)},ddd:function(n){return this.localeData().weekdaysShort(this,n)},dddd:function(n){return this.localeData().weekdays(this,n)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return r(this.year()%100,2)},YYYY:function(){return r(this.year(),4)},YYYYY:function(){return r(this.year(),5)},YYYYYY:function(){var n=this.year(),t=n>=0?"+":"-";return t+r(Math.abs(n),6)},gg:function(){return r(this.weekYear()%100,2)},gggg:function(){return r(this.weekYear(),4)},ggggg:function(){return r(this.weekYear(),5)},GG:function(){return r(this.isoWeekYear()%100,2)},GGGG:function(){return r(this.isoWeekYear(),4)},GGGGG:function(){return r(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return i(this.milliseconds()/100)},SS:function(){return r(i(this.milliseconds()/10),2)},SSS:function(){return r(this.milliseconds(),3)},SSSS:function(){return r(this.milliseconds(),3)},Z:function(){var n=-this.zone(),t="+";return n<0&&(n=-n,t="-"),t+r(i(n/60),2)+":"+r(i(n)%60,2)},ZZ:function(){var n=-this.zone(),t="+";return n<0&&(n=-n,t="-"),t+r(i(n/60),2)+r(i(n)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ci={},li=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];si.length;)u=si.pop(),a[u+"o"]=bu(a[u],u);while(hi.length)u=hi.pop(),a[u+u]=vi(a[u],2);for(a.DDDD=vi(a.DDD,3),nt(yi.prototype,{set:function(n){var t;for(var i in n)t=n[i],typeof t=="function"?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(n){return this._months[n.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(n){return this._monthsShort[n.month()]},monthsParse:function(n,i,r){var u,f,e;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),u=0;u<12;u++)if((f=t.utc([2e3,u]),r&&!this._longMonthsParse[u]&&(this._longMonthsParse[u]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[u]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),r||this._monthsParse[u]||(e="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[u]=new RegExp(e.replace(".",""),"i")),r&&i==="MMMM"&&this._longMonthsParse[u].test(n))||r&&i==="MMM"&&this._shortMonthsParse[u].test(n)||!r&&this._monthsParse[u].test(n))return u},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(n){return this._weekdays[n.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(n){return this._weekdaysShort[n.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(n){return this._weekdaysMin[n.day()]},weekdaysParse:function(n){var i,r,u;for(this._weekdaysParse||(this._weekdaysParse=[]),i=0;i<7;i++)if(this._weekdaysParse[i]||(r=t([2e3,1]).day(i),u="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(u.replace(".",""),"i")),this._weekdaysParse[i].test(n))return i},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(n){var t=this._longDateFormat[n];return!t&&this._longDateFormat[n.toUpperCase()]&&(t=this._longDateFormat[n.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(n){return n.slice(1)}),this._longDateFormat[n]=t),t},isPM:function(n){return(n+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(n,t,i){return n>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(n,t,i){var r=this._calendar[n];return typeof r=="function"?r.apply(t,[i]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(n,t,i,r){var u=this._relativeTime[i];return typeof u=="function"?u(n,t,i,r):u.replace(/%d/i,n)},pastFuture:function(n,t){var i=this._relativeTime[n>0?"future":"past"];return typeof i=="function"?i(t):i.replace(/%s/i,t)},ordinal:function(n){return this._ordinal.replace("%d",n)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(n){return n},postformat:function(n){return n},week:function(n){return tt(n,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),t=function(t,i,r,u){var f;return typeof r=="boolean"&&(u=r,r=n),f={},f._isAMomentObject=!0,f._i=t,f._f=i,f._l=r,f._strict=u,f._isUTC=!1,f._pf=at(),lr(f)},t.suppressDeprecationWarnings=!1,t.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))}),t.min=function(){var n=[].slice.call(arguments,0);return ar("isBefore",n)},t.max=function(){var n=[].slice.call(arguments,0);return ar("isAfter",n)},t.utc=function(t,i,r,u){var f;return typeof r=="boolean"&&(u=r,r=n),f={},f._isAMomentObject=!0,f._useUTC=!0,f._isUTC=!0,f._l=r,f._i=t,f._f=i,f._strict=u,f._pf=at(),lr(f).utc()},t.unix=function(n){return t(n*1e3)},t.duration=function(n,r){var e=n,u=null,s,c,h,l;return t.isDuration(n)?e={ms:n._milliseconds,d:n._days,M:n._months}:typeof n=="number"?(e={},r?e[r]=n:e.milliseconds=n):(u=gr.exec(n))?(s=u[1]==="-"?-1:1,e={y:0,d:i(u[o])*s,h:i(u[f])*s,m:i(u[w])*s,s:i(u[b])*s,ms:i(u[k])*s}):(u=nu.exec(n))?(s=u[1]==="-"?-1:1,h=function(n){var t=n&&parseFloat(n.replace(",","."));return(isNaN(t)?0:t)*s},e={y:h(u[2]),M:h(u[3]),d:h(u[4]),h:h(u[5]),m:h(u[6]),s:h(u[7]),w:h(u[8])}):typeof e=="object"&&("from"in e||"to"in e)&&(l=ku(t(e.from),t(e.to)),e={},e.ms=l.milliseconds,e.M=l.months),c=new vt(e),t.isDuration(n)&&g(n,"_locale")&&(c._locale=n._locale),c},t.version="2.8.4",t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.ISO_8601=function(){},t.momentProperties=ut,t.updateOffset=function(){},t.relativeTimeThreshold=function(t,i){return y[t]===n?!1:i===n?y[t]:(y[t]=i,!0)},t.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(n,i){return t.locale(n,i)}),t.locale=function(n,i){var r;return n&&(r=typeof i!="undefined"?t.defineLocale(n,i):t.localeData(n),r&&(t.duration._locale=t._locale=r)),t._locale._abbr},t.defineLocale=function(n,i){return i!==null?(i.abbr=n,d[n]||(d[n]=new yi),d[n].set(i),t.locale(n),d[n]):(delete d[n],null)},t.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(n){return t.localeData(n)}),t.localeData=function(n){var i;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return t._locale;if(!ot(n)){if(i=or(n),i)return i;n=[n]}return gu(n)},t.isMoment=function(n){return n instanceof et||n!=null&&g(n,"_isAMomentObject")},t.isDuration=function(n){return n instanceof vt},u=li.length-1;u>=0;--u)du(li[u]);t.normalizeUnits=function(n){return e(n)};t.invalid=function(n){var i=t.utc(NaN);return n!=null?nt(i._pf,n):i._pf.userInvalidated=!0,i};t.parseZone=function(){return t.apply(null,arguments).parseZone()};t.parseTwoDigitYear=function(n){return i(n)+(i(n)>68?1900:2e3)};nt(t.fn=et.prototype,{clone:function(){return t(this)},valueOf:function(){return+this._d+(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var n=t(this).utc();return 0<n.year()&&n.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():wt(n,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):wt(n,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var n=this;return[n.year(),n.month(),n.date(),n.hours(),n.minutes(),n.seconds(),n.milliseconds()]},isValid:function(){return fr(this)},isDSTShifted:function(){return this._a?this.isValid()&&gi(this._a,(this._isUTC?t.utc(this._a):t(this._a)).toArray())>0:!1},parsingFlags:function(){return nt({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(n){return this.zone(0,n)},local:function(n){return this._isUTC&&(this.zone(0,n),this._isUTC=!1,n&&this.add(this._dateTzOffset(),"m")),this},format:function(n){var i=wt(this,n||t.defaultFormat);return this.localeData().postformat(i)},add:bi(1,"add"),subtract:bi(-1,"subtract"),diff:function(n,i,r){var u=pt(n,this),c=(this.zone()-u.zone())*6e4,f,o,s;return i=e(i),i==="year"||i==="month"?(f=(this.daysInMonth()+u.daysInMonth())*432e5,o=(this.year()-u.year())*12+(this.month()-u.month()),s=this-t(this).startOf("month")-(u-t(u).startOf("month")),s-=(this.zone()-t(this).startOf("month").zone()-(u.zone()-t(u).startOf("month").zone()))*6e4,o+=s/f,i==="year"&&(o=o/12)):(f=this-u,o=i==="second"?f/1e3:i==="minute"?f/6e4:i==="hour"?f/36e5:i==="day"?(f-c)/864e5:i==="week"?(f-c)/6048e5:f),r?o:h(o)},from:function(n,i){return t.duration({to:this,from:n}).locale(this.locale()).humanize(!i)},fromNow:function(n){return this.from(t(),n)},calendar:function(n){var r=n||t(),u=pt(r,this).startOf("day"),i=this.diff(u,"days",!0),f=i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(f,this,t(r)))},isLeapYear:function(){return rr(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(n){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return n!=null?(n=pf(n,this.localeData()),this.add(n-t,"d")):t},month:v("Month",!0),startOf:function(n){n=e(n);switch(n){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return n==="week"?this.weekday(0):n==="isoWeek"&&this.isoWeekday(1),n==="quarter"&&this.month(Math.floor(this.month()/3)*3),this},endOf:function(t){return(t=e(t),t===n||t==="millisecond")?this:this.startOf(t).add(1,t==="isoWeek"?"week":t).subtract(1,"ms")},isAfter:function(n,i){var r;return i=e(typeof i!="undefined"?i:"millisecond"),i==="millisecond"?(n=t.isMoment(n)?n:t(n),+this>+n):(r=t.isMoment(n)?+n:+t(n),r<+this.clone().startOf(i))},isBefore:function(n,i){var r;return i=e(typeof i!="undefined"?i:"millisecond"),i==="millisecond"?(n=t.isMoment(n)?n:t(n),+this<+n):(r=t.isMoment(n)?+n:+t(n),+this.clone().endOf(i)<r)},isSame:function(n,i){var r;return i=e(i||"millisecond"),i==="millisecond"?(n=t.isMoment(n)?n:t(n),+this==+n):(r=+t(n),+this.clone().startOf(i)<=r&&r<=+this.clone().endOf(i))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(n){return n=t.apply(null,arguments),n<this?this:n}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(n){return n=t.apply(null,arguments),n>this?this:n}),zone:function(n,i){var r=this._offset||0,u;if(n!=null)typeof n=="string"&&(n=hr(n)),Math.abs(n)<16&&(n=n*60),!this._isUTC&&i&&(u=this._dateTzOffset()),this._offset=n,this._isUTC=!0,u!=null&&this.subtract(u,"m"),r!==n&&(!i||this._changeInProgress?ki(this,t.duration(r-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null));else return this._isUTC?r:this._dateTzOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):typeof this._i=="string"&&this.zone(this._i),this},hasAlignedHourOffset:function(n){return n=n?t(n).zone():0,(this.zone()-n)%60==0},daysInMonth:function(){return yt(this.year(),this.month())},dayOfYear:function(n){var i=p((t(this).startOf("day")-t(this).startOf("year"))/864e5)+1;return n==null?i:this.add(n-i,"d")},quarter:function(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)},weekYear:function(n){var t=tt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return n==null?t:this.add(n-t,"y")},isoWeekYear:function(n){var t=tt(this,1,4).year;return n==null?t:this.add(n-t,"y")},week:function(n){var t=this.localeData().week(this);return n==null?t:this.add((n-t)*7,"d")},isoWeek:function(n){var t=tt(this,1,4).week;return n==null?t:this.add((n-t)*7,"d")},weekday:function(n){var t=(this.day()+7-this.localeData()._week.dow)%7;return n==null?t:this.add(n-t,"d")},isoWeekday:function(n){return n==null?this.day()||7:this.day(this.day()%7?n:n-7)},isoWeeksInYear:function(){return tr(this.year(),1,4)},weeksInYear:function(){var n=this.localeData()._week;return tr(this.year(),n.dow,n.doy)},get:function(n){return n=e(n),this[n]()},set:function(n,t){return n=e(n),typeof this[n]=="function"&&this[n](t),this},locale:function(i){var r;return i===n?this._locale._abbr:(r=t.localeData(i),r!=null&&(this._locale=r),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===n?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15}});t.fn.millisecond=t.fn.milliseconds=v("Milliseconds",!1);t.fn.second=t.fn.seconds=v("Seconds",!1);t.fn.minute=t.fn.minutes=v("Minutes",!1);t.fn.hour=t.fn.hours=v("Hours",!0);t.fn.date=v("Date",!0);t.fn.dates=s("dates accessor is deprecated. Use date instead.",v("Date",!0));t.fn.year=v("FullYear",!0);t.fn.years=s("years accessor is deprecated. Use year instead.",v("FullYear",!0));t.fn.days=t.fn.day;t.fn.months=t.fn.month;t.fn.weeks=t.fn.week;t.fn.isoWeeks=t.fn.isoWeek;t.fn.quarters=t.fn.quarter;t.fn.toJSON=t.fn.toISOString;nt(t.duration.fn=vt.prototype,{_bubble:function(){var o=this._milliseconds,t=this._days,i=this._months,n=this._data,u,f,e,r=0;n.milliseconds=o%1e3;u=h(o/1e3);n.seconds=u%60;f=h(u/60);n.minutes=f%60;e=h(f/60);n.hours=e%24;t+=h(e/24);r=h(pr(t));t-=h(wr(r));i+=h(t/30);t%=30;r+=h(i/12);i%=12;n.days=t;n.months=i;n.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+i(this._months/12)*31536e6},humanize:function(n){var t=bf(this,!n,this.localeData());return n&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(n,i){var r=t.duration(n,i);return this._milliseconds+=r._milliseconds,this._days+=r._days,this._months+=r._months,this._bubble(),this},subtract:function(n,i){var r=t.duration(n,i);return this._milliseconds-=r._milliseconds,this._days-=r._days,this._months-=r._months,this._bubble(),this},get:function(n){return n=e(n),this[n.toLowerCase()+"s"]()},as:function(n){var t,i;if(n=e(n),n==="month"||n==="year")return t=this._days+this._milliseconds/864e5,i=this._months+pr(t)*12,n==="month"?i:i/12;t=this._days+Math.round(wr(this._months/12));switch(n){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return t*24+this._milliseconds/36e5;case"minute":return t*1440+this._milliseconds/6e4;case"second":return t*86400+this._milliseconds/1e3;case"millisecond":return Math.floor(t*864e5)+this._milliseconds;default:throw new Error("Unknown unit "+n);}},lang:t.fn.lang,locale:t.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var r=Math.abs(this.years()),u=Math.abs(this.months()),f=Math.abs(this.days()),n=Math.abs(this.hours()),t=Math.abs(this.minutes()),i=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(r?r+"Y":"")+(u?u+"M":"")+(f?f+"D":"")+(n||t||i?"T":"")+(n?n+"H":"")+(t?t+"M":"")+(i?i+"S":""):"P0D"},localeData:function(){return this._locale}});t.duration.fn.toString=t.duration.fn.toISOString;for(u in oi)g(oi,u)&&df(u.toLowerCase());t.duration.fn.asMilliseconds=function(){return this.as("ms")};t.duration.fn.asSeconds=function(){return this.as("s")};t.duration.fn.asMinutes=function(){return this.as("m")};t.duration.fn.asHours=function(){return this.as("h")};t.duration.fn.asDays=function(){return this.as("d")};t.duration.fn.asWeeks=function(){return this.as("weeks")};t.duration.fn.asMonths=function(){return this.as("M")};t.duration.fn.asYears=function(){return this.as("y")};t.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var t=n%10,r=i(n%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return n+r}});ti?module.exports=t:typeof define=="function"&&define.amd?(define("moment",function(n,i,r){return r.config&&r.config()&&r.config().noGlobal===!0&&(rt.moment=ni),t}),br(!0)):br()}).call(this);
/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if(typeof jQuery=="undefined")throw new Error("Bootstrap's JavaScript requires jQuery");+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var t in n)if(i.style[t]!==undefined)return{end:n[t]};return!1}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one("bsTransitionEnd",function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){(n.support.transition=t(),n.support.transition)&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(t){if(n(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery);+function(n){"use strict";function u(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));typeof i=="string"&&u[i].call(r)})}var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.VERSION="3.2.0";t.prototype.close=function(t){function f(){i.detach().trigger("closed.bs.alert").remove()}var u=n(this),r=u.attr("data-target"),i;(r||(r=u.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=n(r),t&&t.preventDefault(),i.length||(i=u.hasClass("alert")?u:u.parent()),i.trigger(t=n.Event("close.bs.alert")),t.isDefaultPrevented())||(i.removeClass("in"),n.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",f).emulateTransitionEnd(150):f())};r=n.fn.alert;n.fn.alert=u;n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f=typeof i=="object"&&i;r||u.data("bs.button",r=new t(this,f));i=="toggle"?r.toggle():i&&r.setState(i)})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.isLoading=!1},r;t.VERSION="3.2.0";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var r="disabled",i=this.$element,f=i.is("input")?"val":"html",u=i.data();t=t+"Text";u.resetText==null&&i.data("resetText",i[f]());i[f](u[t]==null?this.options[t]:u[t]);setTimeout(n.proxy(function(){t=="loadingText"?(this.isLoading=!0,i.addClass(r).attr(r,r)):this.isLoading&&(this.isLoading=!1,i.removeClass(r).removeAttr(r))},this),0)};t.prototype.toggle=function(){var t=!0,i=this.$element.closest('[data-toggle="buttons"]'),n;i.length&&(n=this.$element.find("input"),n.prop("type")=="radio"&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:i.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change"));t&&this.$element.toggleClass("active")};r=n.fn.button;n.fn.button=i;n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=r,this};n(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var r=n(t.target);r.hasClass("btn")||(r=r.closest(".btn"));i.call(r,"toggle");t.preventDefault()})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i),e=typeof i=="string"?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));typeof i=="number"?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})}var t=function(t,i){this.$element=n(t).on("keydown.bs.carousel",n.proxy(this.keydown,this));this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=this.sliding=this.interval=this.$active=this.$items=null;this.options.pause=="hover"&&this.$element.on("mouseenter.bs.carousel",n.proxy(this.pause,this)).on("mouseleave.bs.carousel",n.proxy(this.cycle,this))},r;t.VERSION="3.2.0";t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0};t.prototype.keydown=function(n){switch(n.which){case 37:this.prev();break;case 39:this.next();break;default:return}n.preventDefault()};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getItemIndex=function(n){return this.$items=n.parent().children(".item"),this.$items.index(n||this.$active)};t.prototype.to=function(t){var r=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1)&&!(t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){r.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",n(this.$items[t]))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(t,i){var u=this.$element.find(".item.active"),r=i||u[t](),c=this.interval,f=t=="next"?"left":"right",a=t=="next"?"first":"last",l=this,e,o,s,h;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[a]()}return r.hasClass("active")?this.sliding=!1:(e=r[0],o=n.Event("slide.bs.carousel",{relatedTarget:e,direction:f}),this.$element.trigger(o),o.isDefaultPrevented())?void 0:(this.sliding=!0,c&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),s=n(this.$indicators.children()[this.getItemIndex(r)]),s&&s.addClass("active")),h=n.Event("slid.bs.carousel",{relatedTarget:e,direction:f}),n.support.transition&&this.$element.hasClass("slide")?(r.addClass(t),r[0].offsetWidth,u.addClass(f),r.addClass(f),u.one("bsTransitionEnd",function(){r.removeClass([t,f].join(" ")).addClass("active");u.removeClass(["active",f].join(" "));l.sliding=!1;setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(u.css("transition-duration").slice(0,-1)*1e3)):(u.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(h)),c&&this.cycle(),this)};r=n.fn.carousel;n.fn.carousel=i;n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=r,this};n(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var o,r=n(this),u=n(r.attr("data-target")||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,"")),e,f;u.hasClass("carousel")&&(e=n.extend({},u.data(),r.data()),f=r.attr("data-slide-to"),f&&(e.interval=!1),i.call(u,e),f&&u.data("bs.carousel").to(f),t.preventDefault())});n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.collapse"),f=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i);!r&&f.toggle&&i=="show"&&(i=!i);r||u.data("bs.collapse",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.transitioning=null;this.options.parent&&(this.$parent=n(this.options.parent));this.options.toggle&&this.toggle()},r;t.VERSION="3.2.0";t.DEFAULTS={toggle:!0};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var f,t,u,r,e,o;if(!this.transitioning&&!this.$element.hasClass("in")&&(f=n.Event("show.bs.collapse"),this.$element.trigger(f),!f.isDefaultPrevented())){if(t=this.$parent&&this.$parent.find("> .panel > .in"),t&&t.length){if(u=t.data("bs.collapse"),u&&u.transitioning)return;i.call(t,"hide");u||t.data("bs.collapse",null)}if(r=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1,e=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return e.call(this);o=n.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",n.proxy(e,this)).emulateTransitionEnd(350)[r](this.$element[0][o])}};t.prototype.hide=function(){var i,t,r;if(!this.transitioning&&this.$element.hasClass("in")&&(i=n.Event("hide.bs.collapse"),this.$element.trigger(i),!i.isDefaultPrevented())){if(t=this.dimension(),this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1,r=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")},!n.support.transition)return r.call(this);this.$element[t](0).one("bsTransitionEnd",n.proxy(r,this)).emulateTransitionEnd(350)}};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};r=n.fn.collapse;n.fn.collapse=i;n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=r,this};n(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var o,r=n(this),h=r.attr("data-target")||t.preventDefault()||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""),u=n(h),f=u.data("bs.collapse"),c=f?"toggle":r.data(),e=r.attr("data-parent"),s=e&&n(e);f&&f.transitioning||(s&&s.find('[data-toggle="collapse"][data-parent="'+e+'"]').not(r).addClass("collapsed"),r[u.hasClass("in")?"addClass":"removeClass"]("collapsed"));i.call(u,c)})}(jQuery);+function(n){"use strict";function r(t){t&&t.which===3||(n(e).remove(),n(i).each(function(){var i=u(n(this)),r={relatedTarget:this};i.hasClass("open")&&((i.trigger(t=n.Event("hide.bs.dropdown",r)),t.isDefaultPrevented())||i.removeClass("open").trigger("hidden.bs.dropdown",r))}))}function u(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}function o(i){return this.each(function(){var r=n(this),u=r.data("bs.dropdown");u||r.data("bs.dropdown",u=new t(this));typeof i=="string"&&u[i].call(r)})}var e=".dropdown-backdrop",i='[data-toggle="dropdown"]',t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.VERSION="3.2.0";t.prototype.toggle=function(t){var f=n(this),i,o,e;if(!f.is(".disabled, :disabled")){if(i=u(f),o=i.hasClass("open"),r(),!o){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length)n('<div class="dropdown-backdrop"/>').insertAfter(n(this)).on("click",r);if(e={relatedTarget:this},i.trigger(t=n.Event("show.bs.dropdown",e)),t.isDefaultPrevented())return;f.trigger("focus");i.toggleClass("open").trigger("shown.bs.dropdown",e)}return!1}};t.prototype.keydown=function(t){var e,o,s,h,f,r;if(/(38|40|27)/.test(t.keyCode)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=u(e),s=o.hasClass("open"),!s||s&&t.keyCode==27)return t.which==27&&o.find(i).trigger("focus"),e.trigger("click");(h=" li:not(.divider):visible a",f=o.find('[role="menu"]'+h+', [role="listbox"]'+h),f.length)&&(r=f.index(f.filter(":focus")),t.keyCode==38&&r>0&&r--,t.keyCode==40&&r<f.length-1&&r++,~r||(r=0),f.eq(r).trigger("focus"))}};f=n.fn.dropdown;n.fn.dropdown=o;n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i+', [role="menu"], [role="listbox"]',t.prototype.keydown)}(jQuery);+function(n){"use strict";function i(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),typeof i=="object"&&i);u||f.data("bs.modal",u=new t(this,e));typeof i=="string"?u[i](r):e.show&&u.show(r)})}var t=function(t,i){this.options=i;this.$body=n(document.body);this.$element=n(t);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,n.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))},r;t.VERSION="3.2.0";t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this.isShown?this.hide():this.show(n)};t.prototype.show=function(t){var i=this,r=n.Event("show.bs.modal",{relatedTarget:t});if(this.$element.trigger(r),!this.isShown&&!r.isDefaultPrevented()){this.isShown=!0;this.checkScrollbar();this.$body.addClass("modal-open");this.setScrollbar();this.escape();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this));this.backdrop(function(){var u=n.support.transition&&i.$element.hasClass("fade"),r;i.$element.parent().length||i.$element.appendTo(i.$body);i.$element.show().scrollTop(0);u&&i.$element[0].offsetWidth;i.$element.addClass("in").attr("aria-hidden",!1);i.enforceFocus();r=n.Event("shown.bs.modal",{relatedTarget:t});u?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(r)})}};t.prototype.hide=function(t){(t&&t.preventDefault(),t=n.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented())&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",n.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.trigger("focus")},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.bs.modal",n.proxy(function(n){n.which==27&&this.hide()},this));else this.isShown||this.$element.off("keyup.dismiss.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(t){var f=this,u=this.$element.hasClass("fade")?"fade":"",i,r;if(this.isShown&&this.options.backdrop){i=n.support.transition&&u;this.$backdrop=n('<div class="modal-backdrop '+u+'" />').appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",n.proxy(function(n){n.target===n.currentTarget&&(this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this));if(i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),r=function(){f.removeBackdrop();t&&t()},n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(150):r()):t&&t()};t.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())};t.prototype.setScrollbar=function(){var n=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",n+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};t.prototype.measureScrollbar=function(){var n=document.createElement("div"),t;return n.className="modal-scrollbar-measure",this.$body.append(n),t=n.offsetWidth-n.clientWidth,this.$body[0].removeChild(n),t};r=n.fn.modal;n.fn.modal=i;n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=r,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),f=r.attr("href"),u=n(r.attr("data-target")||f&&f.replace(/.*(?=#[^\s]+$)/,"")),e=u.data("bs.modal")?"toggle":n.extend({remote:!/#/.test(f)&&f},u.data(),r.data());r.is("a")&&t.preventDefault();u.one("show.bs.modal",function(n){if(!n.isDefaultPrevented())u.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})});i.call(u,e,this)})}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.tooltip"),f=typeof i=="object"&&i;(r||i!="destroy")&&(r||u.data("bs.tooltip",r=new t(this,f)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",n,t)},i;t.VERSION="3.2.0";t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,r){var f,e,u,o,s;for(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&n(this.options.viewport.selector||this.options.viewport),f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],u=="click")this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else if(u!="manual"){o=u=="hover"?"mouseenter":"focusin";s=u=="hover"?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this));this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this))}this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)};t.prototype.show=function(){var h=n.Event("show.bs."+this.type),c,y,s;if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),c=n.contains(document.documentElement,this.$element[0]),h.isDefaultPrevented()||!c)return;var f=this,i=this.tip(),l=this.getUID(this.type);this.setContent();i.attr("id",l);this.$element.attr("aria-describedby",l);this.options.animation&&i.addClass("fade");var t=typeof this.options.placement=="function"?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,v=a.test(t);v&&(t=t.replace(a,"")||"top");i.detach().css({top:0,left:0,display:"block"}).addClass(t).data("bs."+this.type,this);this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var r=this.getPosition(),e=i[0].offsetWidth,o=i[0].offsetHeight;if(v){var p=t,w=this.$element.parent(),u=this.getPosition(w);t=t=="bottom"&&r.top+r.height+o-u.scroll>u.height?"top":t=="top"&&r.top-u.scroll-o<0?"bottom":t=="right"&&r.right+e>u.width?"left":t=="left"&&r.left-e<u.left?"right":t;i.removeClass(p).addClass(t)}y=this.getCalculatedOffset(t,r,e,o);this.applyPlacement(y,t);s=function(){f.$element.trigger("shown.bs."+f.type);f.hoverState=null};n.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",s).emulateTransitionEnd(150):s()}};t.prototype.applyPlacement=function(t,i){var r=this.tip(),c=r[0].offsetWidth,e=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10),h,f,u;isNaN(o)&&(o=0);isNaN(s)&&(s=0);t.top=t.top+o;t.left=t.left+s;n.offset.setOffset(r[0],n.extend({using:function(n){r.css({top:Math.round(n.top),left:Math.round(n.left)})}},t),0);r.addClass("in");h=r[0].offsetWidth;f=r[0].offsetHeight;i=="top"&&f!=e&&(t.top=t.top+e-f);u=this.getViewportAdjustedDelta(i,t,h,f);u.left?t.left+=u.left:t.top+=u.top;var l=u.left?u.left*2-c+h:u.top*2-e+f,a=u.left?"left":"top",v=u.left?"offsetWidth":"offsetHeight";r.offset(t);this.replaceArrow(l,r[0][v],a)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i,n?50*(1-n/t)+"%":"")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(){function u(){t.hoverState!="in"&&i.detach();t.$element.trigger("hidden.bs."+t.type)}var t=this,i=this.tip(),r=n.Event("hide.bs."+this.type);if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(r),!r.isDefaultPrevented())return i.removeClass("in"),n.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",u).emulateTransitionEnd(150):u(),this.hoverState=null,this};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var r=t[0],i=r.tagName=="BODY";return n.extend({},typeof r.getBoundingClientRect=="function"?r.getBoundingClientRect():null,{scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop(),width:i?n(window).width():t.outerWidth(),height:i?n(window).height():t.outerHeight()},i?{top:0,left:0}:t.offset())};t.prototype.getCalculatedOffset=function(n,t,i,r){return n=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:n=="top"?{top:t.top-r,left:t.left+t.width/2-i/2}:n=="left"?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(n,t,i,r){var f={top:0,left:0},e,u,o,s,h,c;return this.$viewport?(e=this.options.viewport&&this.options.viewport.padding||0,u=this.getPosition(this.$viewport),/right|left/.test(n)?(o=t.top-e-u.scroll,s=t.top+e-u.scroll+r,o<u.top?f.top=u.top-o:s>u.top+u.height&&(f.top=u.top+u.height-s)):(h=t.left-e,c=t.left+e+i,h<u.left?f.left=u.left-h:c>u.width&&(f.left=u.left+u.width-c)),f):f};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title)};t.prototype.getUID=function(n){do n+=~~(Math.random()*1e6);while(document.getElementById(n));return n};t.prototype.tip=function(){return this.$tip=this.$tip||n(this.options.template)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;t&&(i=n(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),n(t.currentTarget).data("bs."+this.type,i)));i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};i=n.fn.tooltip;n.fn.tooltip=r;n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(jQuery);+function(n){"use strict";function r(i){return this.each(function(){var u=n(this),r=u.data("bs.popover"),f=typeof i=="object"&&i;(r||i!="destroy")&&(r||u.data("bs.popover",r=new t(this,f)),typeof i=="string"&&r[i]())})}var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.2.0";t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),i=this.getTitle(),t=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](i);n.find(".popover-content").empty()[this.options.html?typeof t=="string"?"html":"append":"text"](t);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};t.prototype.tip=function(){return this.$tip||(this.$tip=n(this.options.template)),this.$tip};i=n.fn.popover;n.fn.popover=r;n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(jQuery);+function(n){"use strict";function t(i,r){var u=n.proxy(this.process,this);this.$body=n("body");this.$scrollElement=n(i).is("body")?n(window):n(i);this.options=n.extend({},t.DEFAULTS,r);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",u);this.refresh();this.process()}function i(i){return this.each(function(){var u=n(this),r=u.data("bs.scrollspy"),f=typeof i=="object"&&i;r||u.data("bs.scrollspy",r=new t(this,f));typeof i=="string"&&r[i]()})}t.VERSION="3.2.0";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var i="offset",r=0,t;n.isWindow(this.$scrollElement[0])||(i="position",r=this.$scrollElement.scrollTop());this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();t=this;this.$body.find(this.selector).map(function(){var f=n(this),u=f.data("target")||f.attr("href"),t=/^#./.test(u)&&n(u);return t&&t.length&&t.is(":visible")&&[[t[i]().top+r,u]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var r=this.$scrollElement.scrollTop()+this.options.offset,f=this.getScrollHeight(),e=this.options.offset+f-this.$scrollElement.height(),t=this.offsets,i=this.targets,u=this.activeTarget,n;if(this.scrollHeight!=f&&this.refresh(),r>=e)return u!=(n=i[i.length-1])&&this.activate(n);if(u&&r<=t[0])return u!=(n=i[0])&&this.activate(n);for(n=t.length;n--;)u!=i[n]&&r>=t[n]&&(!t[n+1]||r<=t[n+1])&&this.activate(i[n])};t.prototype.activate=function(t){this.activeTarget=t;n(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=n(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate.bs.scrollspy")};var r=n.fn.scrollspy;n.fn.scrollspy=i;n.fn.scrollspy.Constructor=t;n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=r,this};n(window).on("load.bs.scrollspy.data-api",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);i.call(t,t.data())})})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));typeof i=="string"&&r[i]()})}var t=function(t){this.element=n(t)},r;t.VERSION="3.2.0";t.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=t.data("target"),r,u,f;(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),t.parent("li").hasClass("active"))||(r=e.find(".active:last a")[0],u=n.Event("show.bs.tab",{relatedTarget:r}),t.trigger(u),u.isDefaultPrevented())||(f=n(i),this.activate(t.closest("li"),e),this.activate(f,f.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:r})}))};t.prototype.activate=function(t,i,r){function e(){u.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");t.addClass("active");f?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade");t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active");r&&r()}var u=i.find("> .active"),f=r&&n.support.transition&&u.hasClass("fade");f?u.one("bsTransitionEnd",e).emulateTransitionEnd(150):e();u.removeClass("in")};r=n.fn.tab;n.fn.tab=i;n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=r,this};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault();i.call(n(this),"show")})}(jQuery);+function(n){"use strict";function i(i){return this.each(function(){var u=n(this),r=u.data("bs.affix"),f=typeof i=="object"&&i;r||u.data("bs.affix",r=new t(this,f));typeof i=="string"&&r[i]()})}var t=function(i,r){this.options=n.extend({},t.DEFAULTS,r);this.$target=n(this.options.target).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this));this.$element=n(i);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()},r;t.VERSION="3.2.0";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var n=this.$target.scrollTop(),i=this.$element.offset();return this.pinnedOffset=i.top-n};t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){var i,e,o;if(this.$element.is(":visible")){var s=n(document).height(),h=this.$target.scrollTop(),c=this.$element.offset(),r=this.options.offset,f=r.top,u=r.bottom;(typeof r!="object"&&(u=f=r),typeof f=="function"&&(f=r.top(this.$element)),typeof u=="function"&&(u=r.bottom(this.$element)),i=this.unpin!=null&&h+this.unpin<=c.top?!1:u!=null&&c.top+this.$element.height()>=s-u?"bottom":f!=null&&h<=f?"top":!1,this.affixed!==i)&&((this.unpin!=null&&this.$element.css("top",""),e="affix"+(i?"-"+i:""),o=n.Event(e+".bs.affix"),this.$element.trigger(o),o.isDefaultPrevented())||(this.affixed=i,this.unpin=i=="bottom"?this.getPinnedOffset():null,this.$element.removeClass(t.RESET).addClass(e).trigger(n.Event(e.replace("affix","affixed"))),i=="bottom"&&this.$element.offset({top:s-this.$element.height()-u})))}};r=n.fn.affix;n.fn.affix=i;n.fn.affix.Constructor=t;n.fn.affix.noConflict=function(){return n.fn.affix=r,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var r=n(this),t=r.data();t.offset=t.offset||{};t.offsetBottom&&(t.offset.bottom=t.offsetBottom);t.offsetTop&&(t.offset.top=t.offsetTop);i.call(r,t)})})}(jQuery);
/*!
 * Bootstrap-select v1.6.3 (http://silviomoreto.github.io/bootstrap-select/)
 *
 * Copyright 2013-2014 bootstrap-select
 * Licensed under MIT (https://github.com/silviomoreto/bootstrap-select/blob/master/LICENSE)
 */
(function(n){"use strict";function u(n,t){return n.toUpperCase().indexOf(t.toUpperCase())>-1}function i(t){return n.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){t=t.replace(this.re,this.ch)}),t}function r(n){var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(i).join("|")+")",u=new RegExp(r),f=new RegExp(r,"g"),t=n==null?"":""+n;return u.test(t)?t.replace(f,function(n){return i[n]}):t}function f(i,r){var u=arguments,o=i,i=u[0],r=u[1],f,e;return[].shift.apply(u),typeof i=="undefined"&&(i=o),e=this.each(function(){var s=n(this),e,o,c,h;if(s.is("select")){if(e=s.data("selectpicker"),o=typeof i=="object"&&i,e){if(o)for(h in o)o.hasOwnProperty(h)&&(e.options[h]=o[h])}else c=n.extend({},t.DEFAULTS,n.fn.selectpicker.defaults||{},s.data(),o),s.data("selectpicker",e=new t(this,c,r));typeof i=="string"&&(f=e[i]instanceof Function?e[i].apply(e,u):e.options[i])}}),typeof f!="undefined"?f:e}var t,e;n.expr[":"].icontains=function(t,i,r){return u(n(t).text(),r[3])};n.expr[":"].aicontains=function(t,i,r){return u(n(t).data("normalizedText")||n(t).text(),r[3])};t=function(i,r,u){u&&(u.stopPropagation(),u.preventDefault());this.$element=n(i);this.$newElement=null;this.$button=null;this.$menu=null;this.$lis=null;this.options=r;this.options.title===null&&(this.options.title=this.$element.attr("title"));this.val=t.prototype.val;this.render=t.prototype.render;this.refresh=t.prototype.refresh;this.setStyle=t.prototype.setStyle;this.selectAll=t.prototype.selectAll;this.deselectAll=t.prototype.deselectAll;this.destroy=t.prototype.remove;this.remove=t.prototype.remove;this.show=t.prototype.show;this.hide=t.prototype.hide;this.init()};t.VERSION="1.6.3";t.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:function(n){return n==1?"{0} item selected":"{0} items selected"},maxOptionsText:function(n,t){var i=[];return i[0]=n==1?"Limit reached ({n} item max)":"Limit reached ({n} items max)",i[1]=t==1?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)",i},selectAllText:"Select All",deselectAllText:"Deselect All",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,searchAccentInsensitive:!1};t.prototype={constructor:t,init:function(){var i=this,t=this.$element.attr("id");this.$element.hide();this.multiple=this.$element.prop("multiple");this.autofocus=this.$element.prop("autofocus");this.$newElement=this.createView();this.$element.after(this.$newElement);this.$menu=this.$newElement.find("> .dropdown-menu");this.$button=this.$newElement.find("> button");this.$searchbox=this.$newElement.find("input");this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right");typeof t!="undefined"&&(this.$button.attr("data-id",t),n('label[for="'+t+'"]').click(function(n){n.preventDefault();i.$button.focus()}));this.checkDisabled();this.clickListener();this.options.liveSearch&&this.liveSearchListener();this.render();this.liHeight();this.setStyle();this.setWidth();this.options.container&&this.selectPosition();this.$menu.data("this",this);this.$newElement.data("this",this);this.options.mobile&&this.mobile()},createDropdown:function(){var t=this.multiple?" show-tick":"",i=this.$element.parent().hasClass("input-group")?" input-group-btn":"",r=this.autofocus?" autofocus":"",u=this.$element.parents().hasClass("form-group-lg")?" btn-lg":this.$element.parents().hasClass("form-group-sm")?" btn-sm":"",f=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;<\/button>'+this.options.header+"<\/div>":"",e=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="input-block-level form-control" autocomplete="off" /><\/div>':"",o=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">'+this.options.selectAllText+'<\/button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">'+this.options.deselectAllText+"<\/button><\/div><\/div>":"",s='<div class="btn-group bootstrap-select'+t+i+'"><button type="button" class="btn dropdown-toggle selectpicker'+u+'" data-toggle="dropdown"'+r+'><span class="filter-option pull-left"><\/span>&nbsp;<span class="caret"><\/span><\/button><div class="dropdown-menu open">'+f+e+o+'<ul class="dropdown-menu inner selectpicker" role="menu"><\/ul><\/div><\/div>';return n(s)},createView:function(){var n=this.createDropdown(),t=this.createLi();return n.find("ul").append(t),n},reloadLi:function(){this.destroyLi();var n=this.createLi();this.$menu.find("ul").append(n)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var f=this,t=[],o=0,u=function(n,t,i){return"<li"+(typeof i!="undefined"?' class="'+i+'"':"")+(typeof t!="undefined"|null===t?' data-original-index="'+t+'"':"")+">"+n+"<\/li>"},e=function(n,t,u,e){var o=i(r(n));return'<a tabindex="0"'+(typeof t!="undefined"?' class="'+t+'"':"")+(typeof u!="undefined"?' style="'+u+'"':"")+(typeof e!="undefined"?'data-optgroup="'+e+'"':"")+' data-normalized-text="'+o+'">'+n+'<span class="'+f.options.iconBase+" "+f.options.tickIcon+' check-mark"><\/span><\/a>'};return this.$element.find("option").each(function(){var i=n(this),c=i.attr("class")||"",l=i.attr("style"),r=i.data("content")?i.data("content"):i.html(),y=typeof i.data("subtext")!="undefined"?'<small class="muted text-muted">'+i.data("subtext")+"<\/small>":"",h=typeof i.data("icon")!="undefined"?'<span class="'+f.options.iconBase+" "+i.data("icon")+'"><\/span> ':"",v=i.is(":disabled")||i.parent().is(":disabled"),s=i[0].index;if(h!==""&&v&&(h="<span>"+h+"<\/span>"),i.data("content")||(r=h+'<span class="text">'+r+y+"<\/span>"),!f.options.hideDisabled||!v)if(i.parent().is("optgroup")&&i.data("divider")!==!0){if(i.index()===0){o+=1;var a=i.parent().attr("label"),p=typeof i.parent().data("subtext")!="undefined"?'<small class="muted text-muted">'+i.parent().data("subtext")+"<\/small>":"",w=i.parent().data("icon")?'<span class="'+f.options.iconBase+" "+i.parent().data("icon")+'"><\/span> ':"";a=w+'<span class="text">'+a+p+"<\/span>";s!==0&&t.length>0&&t.push(u("",null,"divider"));t.push(u(a,null,"dropdown-header"))}t.push(u(e(r,"opt "+c,l,o),s))}else i.data("divider")===!0?t.push(u("",s,"divider")):i.data("hidden")===!0?t.push(u(e(r,c,l),s,"hide is-hidden")):t.push(u(e(r,c,l),s))}),this.multiple||this.$element.find("option:selected").length!==0||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),n(t.join(""))},findLis:function(){return this.$lis==null&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(t){var i=this,e,s,h;t!==!1&&this.$element.find("option").each(function(t){i.setDisabled(t,n(this).is(":disabled")||n(this).parent().is(":disabled"));i.setSelected(t,n(this).is(":selected"))});this.tabIndex();var o=this.options.hideDisabled?":not([disabled])":"",u=this.$element.find("option:selected"+o).map(function(){var t=n(this),u=t.data("icon")&&i.options.showIcon?'<i class="'+i.options.iconBase+" "+t.data("icon")+'"><\/i> ':"",r;return r=i.options.showSubtext&&t.attr("data-subtext")&&!i.multiple?' <small class="muted text-muted">'+t.data("subtext")+"<\/small>":"",t.data("content")&&i.options.showContent?t.data("content"):typeof t.attr("title")!="undefined"?t.attr("title"):u+t.html()+r}).toArray(),f=this.multiple?u.join(this.options.multipleSeparator):u[0];this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1&&(e=this.options.selectedTextFormat.split(">"),(e.length>1&&u.length>e[1]||e.length==1&&u.length>=2)&&(o=this.options.hideDisabled?", [disabled]":"",s=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+o).length,h=typeof this.options.countSelectedText=="function"?this.options.countSelectedText(u.length,s):this.options.countSelectedText,f=h.replace("{0}",u.length.toString()).replace("{1}",s.toString())));this.options.title=this.$element.attr("title");this.options.selectedTextFormat=="static"&&(f=this.options.title);f||(f=typeof this.options.title!="undefined"?this.options.title:this.options.noneSelectedText);this.$button.attr("title",r(f));this.$newElement.find(".filter-option").html(f)},setStyle:function(n,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var i=n?n:this.options.style;t=="add"?this.$button.addClass(i):t=="remove"?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(){if(this.options.size!==!1){var t=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),n=t.addClass("open").find("> .dropdown-menu"),i=n.find("li").not(".divider").not(".dropdown-header").filter(":visible").children("a").outerHeight(),r=this.options.header?n.find(".popover-title").outerHeight():0,u=this.options.liveSearch?n.find(".bs-searchbox").outerHeight():0,f=this.options.actionsBox?n.find(".bs-actionsbox").outerHeight():0;t.remove();this.$newElement.data("liHeight",i).data("headerHeight",r).data("searchHeight",u).data("actionsHeight",f)}},setSize:function(){var e,b,k;this.findLis();var r=this,t=this.$menu,a=t.find(".inner"),d=this.$newElement.outerHeight(),v=this.$newElement.data("liHeight"),h=this.$newElement.data("headerHeight"),c=this.$newElement.data("searchHeight"),l=this.$newElement.data("actionsHeight"),g=this.$lis.filter(".divider").outerHeight(!0),u=parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom"))+parseInt(t.css("border-top-width"))+parseInt(t.css("border-bottom-width")),y=this.options.hideDisabled?", .disabled":"",p=n(window),o=u+parseInt(t.css("margin-top"))+parseInt(t.css("margin-bottom"))+2,i,f,s,w=function(){f=r.$newElement.offset().top-p.scrollTop();s=p.height()-f-d};if(w(),this.options.header&&t.css("padding-top",0),this.options.size=="auto"){e=function(){var n,e=r.$lis.not(".hide");w();i=s-o;r.options.dropupAuto&&r.$newElement.toggleClass("dropup",f>s&&i-o<t.height());r.$newElement.hasClass("dropup")&&(i=f-o);n=e.length+e.filter(".dropdown-header").length>3?v*3+o-2:0;t.css({"max-height":i+"px",overflow:"hidden","min-height":n+h+c+l+"px"});a.css({"max-height":i-h-c-l-u+"px","overflow-y":"auto","min-height":Math.max(n-u,0)+"px"})};e();this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",e);n(window).off("resize.getSize").on("resize.getSize",e);n(window).off("scroll.getSize").on("scroll.getSize",e)}else this.options.size&&this.options.size!="auto"&&t.find("li"+y).length>this.options.size&&(b=this.$lis.not(".divider"+y).find(" > *").slice(0,this.options.size).last().parent().index(),k=this.$lis.slice(0,b+1).filter(".divider").length,i=v*this.options.size+k*g+u,r.options.dropupAuto&&this.$newElement.toggleClass("dropup",f>s&&i<t.height()),t.css({"max-height":i+h+c+l+"px",overflow:"hidden"}),a.css({"max-height":i-u+"px","overflow-y":"auto"}))},setWidth:function(){if(this.options.width=="auto"){this.$menu.css("min-width","0");var n=this.$newElement.clone().appendTo("body"),t=n.find("> .dropdown-menu").css("width"),i=n.css("width","auto").find("> button").css("width");n.remove();this.$newElement.css("width",Math.max(parseInt(t),parseInt(i))+"px")}else this.options.width=="fit"?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&this.options.width!=="fit"&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var t=this,i=n("<div />"),r,f,u=function(n){i.addClass(n.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",n.hasClass("dropup"));r=n.offset();f=n.hasClass("dropup")?0:n[0].offsetHeight;i.css({top:r.top+f,left:r.left,width:n[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){t.isDisabled()||(u(n(this)),i.appendTo(t.options.container),i.toggleClass("open",!n(this).hasClass("open")),i.append(t.$menu))});n(window).resize(function(){u(t.$newElement)});n(window).on("scroll",function(){u(t.$newElement)});n("html").on("click",function(r){n(r.target).closest(t.$newElement).length<1&&i.removeClass("open")})},setSelected:function(n,t){this.findLis();this.$lis.filter('[data-original-index="'+n+'"]').toggleClass("selected",t)},setDisabled:function(n,t){this.findLis();t?this.$lis.filter('[data-original-index="'+n+'"]').addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+n+'"]').removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var n=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),this.$button.attr("tabindex")==-1&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex")));this.$button.click(function(){return!n.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var t=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(n){n.stopPropagation()});this.$newElement.on("click",function(){t.setSize();t.options.liveSearch||t.multiple||setTimeout(function(){t.$menu.find(".selected a").focus()},10)});this.$menu.on("click","li a",function(i){var s=n(this),e=s.parent().data("originalIndex"),k=t.$element.val(),d=t.$element.prop("selectedIndex"),a,v,b;if(t.multiple&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!s.parent().hasClass("disabled")){var h=t.$element.find("option"),f=h.eq(e),w=f.prop("selected"),l=f.parent("optgroup"),r=t.options.maxOptions,u=l.data("maxOptions")||!1;if(t.multiple){if(f.prop("selected",!w),t.setSelected(e,!w),s.blur(),(r!==!1||u!==!1)&&(a=r<h.filter(":selected").length,v=u<l.find("option:selected").length,r&&a||u&&v))if(r&&r==1)h.prop("selected",!1),f.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(e,!0);else if(u&&u==1)l.find("option:selected").prop("selected",!1),f.prop("selected",!0),b=s.data("optgroup"),t.$menu.find(".selected").has('a[data-optgroup="'+b+'"]').removeClass("selected"),t.setSelected(e,!0);else{var o=typeof t.options.maxOptionsText=="function"?t.options.maxOptionsText(r,u):t.options.maxOptionsText,y=o[0].replace("{n}",r),p=o[1].replace("{n}",u),c=n('<div class="notify"><\/div>');o[2]&&(y=y.replace("{var}",o[2][r>1?0:1]),p=p.replace("{var}",o[2][u>1?0:1]));f.prop("selected",!1);t.$menu.append(c);r&&a&&(c.append(n("<div>"+y+"<\/div>")),t.$element.trigger("maxReached.bs.select"));u&&v&&(c.append(n("<div>"+p+"<\/div>")),t.$element.trigger("maxReachedGrp.bs.select"));setTimeout(function(){t.setSelected(e,!1)},10);c.delay(750).fadeOut(300,function(){n(this).remove()})}}else h.prop("selected",!1),f.prop("selected",!0),t.$menu.find(".selected").removeClass("selected"),t.setSelected(e,!0);t.multiple?t.options.liveSearch&&t.$searchbox.focus():t.$button.focus();(k!=t.$element.val()&&t.multiple||d!=t.$element.prop("selectedIndex")&&!t.multiple)&&t.$element.change()}});this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(n){n.target==this&&(n.preventDefault(),n.stopPropagation(),t.options.liveSearch?t.$searchbox.focus():t.$button.focus())});this.$menu.on("click","li.divider, li.dropdown-header",function(n){n.preventDefault();n.stopPropagation();t.options.liveSearch?t.$searchbox.focus():t.$button.focus()});this.$menu.on("click",".popover-title .close",function(){t.$button.focus()});this.$searchbox.on("click",function(n){n.stopPropagation()});this.$menu.on("click",".actions-btn",function(i){t.options.liveSearch?t.$searchbox.focus():t.$button.focus();i.preventDefault();i.stopPropagation();n(this).is(".bs-select-all")?t.selectAll():t.deselectAll();t.$element.change()});this.$element.change(function(){t.render(!1)})},liveSearchListener:function(){var t=this,u=n('<li class="no-results"><\/li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){t.$menu.find(".active").removeClass("active");!t.$searchbox.val()||(t.$searchbox.val(""),t.$lis.not(".is-hidden").removeClass("hide"),!u.parent().length||u.remove());t.multiple||t.$menu.find(".selected").addClass("active");setTimeout(function(){t.$searchbox.focus()},10)});this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(n){n.stopPropagation()});this.$searchbox.on("input propertychange",function(){t.$searchbox.val()?(t.options.searchAccentInsensitive?t.$lis.not(".is-hidden").removeClass("hide").find("a").not(":aicontains("+i(t.$searchbox.val())+")").parent().addClass("hide"):t.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+t.$searchbox.val()+")").parent().addClass("hide"),t.$menu.find("li").filter(":visible:not(.no-results)").length?!u.parent().length||u.remove():(!u.parent().length||u.remove(),u.html(t.options.noneResultsText+' "'+r(t.$searchbox.val())+'"').show(),t.$menu.find("li").last().after(u))):(t.$lis.not(".is-hidden").removeClass("hide"),!u.parent().length||u.remove());t.$menu.find("li.active").removeClass("active");t.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus();n(this).focus()})},val:function(n){return typeof n!="undefined"?(this.$element.val(n),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis();this.$lis.not(".divider").not(".disabled").not(".selected").filter(":visible").find("a").click()},deselectAll:function(){this.findLis();this.$lis.not(".divider").not(".disabled").filter(".selected").filter(":visible").find("a").click()},keydown:function(t){var e=n(this),c=e.is("input")?e.parent().parent():e.parent(),f,r=c.data("this"),u,h,l,a,y,p,b,s,w={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},v,o,k;(r.options.liveSearch&&(c=e.parent().parent()),r.options.container&&(c=r.$menu),f=n("[role=menu] li a",c),s=r.$menu.parent().hasClass("open"),!s&&/([0-9]|[A-z])/.test(String.fromCharCode(t.keyCode))&&(r.options.container?r.$newElement.trigger("click"):(r.setSize(),r.$menu.parent().addClass("open"),s=!0),r.$searchbox.focus()),r.options.liveSearch&&(/(^9$|27)/.test(t.keyCode.toString(10))&&s&&r.$menu.find(".active").length===0&&(t.preventDefault(),r.$menu.parent().removeClass("open"),r.$button.focus()),f=n("[role=menu] li:not(.divider):not(.dropdown-header):visible",c),e.val()||/(38|40)/.test(t.keyCode.toString(10))||f.filter(".active").length===0&&(f=r.options.searchAccentInsensitive?r.$newElement.find("li").filter(":aicontains("+i(w[t.keyCode])+")"):r.$newElement.find("li").filter(":icontains("+w[t.keyCode]+")"))),f.length)&&(/(38|40)/.test(t.keyCode.toString(10))?(u=f.index(f.filter(":focus")),l=f.parent(":not(.disabled):visible").first().index(),a=f.parent(":not(.disabled):visible").last().index(),h=f.eq(u).parent().nextAll(":not(.disabled):visible").eq(0).index(),y=f.eq(u).parent().prevAll(":not(.disabled):visible").eq(0).index(),p=f.eq(h).parent().prevAll(":not(.disabled):visible").eq(0).index(),r.options.liveSearch&&(f.each(function(t){n(this).is(":not(.disabled)")&&n(this).data("index",t)}),u=f.index(f.filter(".active")),l=f.filter(":not(.disabled):visible").first().data("index"),a=f.filter(":not(.disabled):visible").last().data("index"),h=f.eq(u).nextAll(":not(.disabled):visible").eq(0).data("index"),y=f.eq(u).prevAll(":not(.disabled):visible").eq(0).data("index"),p=f.eq(h).prevAll(":not(.disabled):visible").eq(0).data("index")),b=e.data("prevIndex"),t.keyCode==38&&(r.options.liveSearch&&(u-=1),u!=p&&u>y&&(u=y),u<l&&(u=l),u==b&&(u=a)),t.keyCode==40&&(r.options.liveSearch&&(u+=1),u==-1&&(u=0),u!=p&&u<h&&(u=h),u>a&&(u=a),u==b&&(u=l)),e.data("prevIndex",u),r.options.liveSearch?(t.preventDefault(),e.is(".dropdown-toggle")||(f.removeClass("active"),f.eq(u).addClass("active").find("a").focus(),e.focus())):f.eq(u).focus()):e.is("input")||(v=[],f.each(function(){n(this).parent().is(":not(.disabled)")&&n.trim(n(this).text().toLowerCase()).substring(0,1)==w[t.keyCode]&&v.push(n(this).parent().index())}),o=n(document).data("keycount"),o++,n(document).data("keycount",o),k=n.trim(n(":focus").text().toLowerCase()).substring(0,1),k!=w[t.keyCode]?(o=1,n(document).data("keycount",o)):o>=v.length&&(n(document).data("keycount",0),o>v.length&&(o=1)),f.eq(v[o-1]).focus()),(/(13|32)/.test(t.keyCode.toString(10))||/(^9$)/.test(t.keyCode.toString(10))&&r.options.selectOnTab)&&s&&(/(32)/.test(t.keyCode.toString(10))||t.preventDefault(),r.options.liveSearch?/(32)/.test(t.keyCode.toString(10))||(r.$menu.find(".active a").click(),e.focus()):n(":focus").click(),n(document).data("keycount",0)),(/(^9$|27)/.test(t.keyCode.toString(10))&&s&&(r.multiple||r.options.liveSearch)||/(27)/.test(t.keyCode.toString(10))&&!s)&&(r.$menu.parent().removeClass("open"),r.$button.focus()))},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement);this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null;this.reloadLi();this.render();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},update:function(){this.reloadLi();this.setWidth();this.setStyle();this.checkDisabled();this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove();this.$element.remove()}};e=n.fn.selectpicker;n.fn.selectpicker=f;n.fn.selectpicker.Constructor=t;n.fn.selectpicker.noConflict=function(){return n.fn.selectpicker=e,this};n(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",t.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(n){n.stopPropagation()});n(window).on("load.bs.select.data-api",function(){n(".selectpicker").each(function(){var t=n(this);f.call(t,t.data())})})})(jQuery);!function(n,t){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],t);else if("object"==typeof exports)t(require("jquery"),require("moment"));else{if(!jQuery)throw new Error("bootstrap-datetimepicker requires jQuery to be loaded first");if(!moment)throw new Error("bootstrap-datetimepicker requires moment.js to be loaded first");t(n.jQuery,moment)}}(this,function(n,t){"use strict";if("undefined"==typeof t)throw new Error("momentjs is required");var i=0,r=function(r,u){var g,ht=n.fn.datetimepicker.defaults,ct={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},f=this,nt=!1,lt=function(){var s,h,o=!1;if(f.options=n.extend({},ht,u),f.options.icons=n.extend({},ct,f.options.icons),f.element=n(r),at(),!f.options.pickTime&&!f.options.pickDate)throw new Error("Must choose at least one picker");if(f.id=i++,t.locale(f.options.language),f.date=t(),f.unset=!1,f.isInput=f.element.is("input"),f.component=!1,f.element.hasClass("input-group")&&(f.component=f.element.find(0===f.element.find(".datepickerbutton").size()?'[class^="input-group-"]':".datepickerbutton")),f.format=f.options.format,s=t().localeData(),f.format||(f.format=f.options.pickDate?s.longDateFormat("L"):"",f.options.pickDate&&f.options.pickTime&&(f.format+=" "),f.format+=f.options.pickTime?s.longDateFormat("LT"):"",f.options.useSeconds&&(-1!==s.longDateFormat("LT").indexOf(" A")?f.format=f.format.split(" A")[0]+":ss A":f.format+=":ss")),f.use24hours=f.format.toLowerCase().indexOf("a")<0&&f.format.indexOf("h")<0,f.component&&(o=f.component.find("span")),f.options.pickTime&&o&&o.addClass(f.options.icons.time),f.options.pickDate&&o&&(o.removeClass(f.options.icons.time),o.addClass(f.options.icons.date)),f.options.widgetParent="string"==typeof f.options.widgetParent&&f.options.widgetParent||f.element.parents().filter(function(){return"scroll"===n(this).css("overflow-y")}).get(0)||"body",f.widget=n(ii()).appendTo(f.options.widgetParent),f.minViewMode=f.options.minViewMode||0,"string"==typeof f.minViewMode)switch(f.minViewMode){case"months":f.minViewMode=1;break;case"years":f.minViewMode=2;break;default:f.minViewMode=0}if(f.viewMode=f.options.viewMode||0,"string"==typeof f.viewMode)switch(f.viewMode){case"months":f.viewMode=1;break;case"years":f.viewMode=2;break;default:f.viewMode=0}f.viewMode=Math.max(f.viewMode,f.minViewMode);f.options.disabledDates=d(f.options.disabledDates);f.options.enabledDates=d(f.options.enabledDates);f.startViewMode=f.viewMode;f.setMinDate(f.options.minDate);f.setMaxDate(f.options.maxDate);vt();yt();pt();wt();bt();c();b();e().prop("disabled")||ft();""!==f.options.defaultDate&&""===e().val()&&f.setValue(f.options.defaultDate);1!==f.options.minuteStepping&&(h=f.options.minuteStepping,f.date.minutes(Math.round(f.date.minutes()/h)*h%60).seconds(0))},e=function(){var n;if(f.isInput)return f.element;if(n=f.element.find(".datepickerinput"),0===n.size())n=f.element.find("input");else if(!n.is("input"))throw new Error('CSS class "datepickerinput" cannot be applied to non input element');return n},at=function(){var n;n=f.element.is("input")?f.element.data():f.element.find("input").data();void 0!==n.dateFormat&&(f.options.format=n.dateFormat);void 0!==n.datePickdate&&(f.options.pickDate=n.datePickdate);void 0!==n.datePicktime&&(f.options.pickTime=n.datePicktime);void 0!==n.dateUseminutes&&(f.options.useMinutes=n.dateUseminutes);void 0!==n.dateUseseconds&&(f.options.useSeconds=n.dateUseseconds);void 0!==n.dateUsecurrent&&(f.options.useCurrent=n.dateUsecurrent);void 0!==n.calendarWeeks&&(f.options.calendarWeeks=n.calendarWeeks);void 0!==n.dateMinutestepping&&(f.options.minuteStepping=n.dateMinutestepping);void 0!==n.dateMindate&&(f.options.minDate=n.dateMindate);void 0!==n.dateMaxdate&&(f.options.maxDate=n.dateMaxdate);void 0!==n.dateShowtoday&&(f.options.showToday=n.dateShowtoday);void 0!==n.dateCollapse&&(f.options.collapse=n.dateCollapse);void 0!==n.dateLanguage&&(f.options.language=n.dateLanguage);void 0!==n.dateDefaultdate&&(f.options.defaultDate=n.dateDefaultdate);void 0!==n.dateDisableddates&&(f.options.disabledDates=n.dateDisableddates);void 0!==n.dateEnableddates&&(f.options.enabledDates=n.dateEnableddates);void 0!==n.dateIcons&&(f.options.icons=n.dateIcons);void 0!==n.dateUsestrict&&(f.options.useStrict=n.dateUsestrict);void 0!==n.dateDirection&&(f.options.direction=n.dateDirection);void 0!==n.dateSidebyside&&(f.options.sideBySide=n.dateSidebyside);void 0!==n.dateDaysofweekdisabled&&(f.options.daysOfWeekDisabled=n.dateDaysofweekdisabled)},ut=function(){var r,u="absolute",t=f.component?f.component.offset():f.element.offset(),i=n(window);f.width=f.component?f.component.outerWidth():f.element.outerWidth();t.top=t.top+f.element.outerHeight();"up"===f.options.direction?r="top":"bottom"===f.options.direction?r="bottom":"auto"===f.options.direction&&(r=t.top+f.widget.height()>i.height()+i.scrollTop()&&f.widget.height()+f.element.outerHeight()<t.top?"top":"bottom");"top"===r?(t.bottom=i.height()-t.top+f.element.outerHeight()+3,f.widget.addClass("top").removeClass("bottom")):(t.top+=1,f.widget.addClass("bottom").removeClass("top"));void 0!==f.options.width&&f.widget.width(f.options.width);"left"===f.options.orientation&&(f.widget.addClass("left-oriented"),t.left=t.left-f.widget.width()+20);ti()&&(u="fixed",t.top-=i.scrollTop(),t.left-=i.scrollLeft());i.width()<t.left+f.widget.outerWidth()?(t.right=i.width()-t.left-f.width,t.left="auto",f.widget.addClass("pull-right")):(t.right="auto",f.widget.removeClass("pull-right"));f.widget.css("top"===r?{position:u,bottom:t.bottom,top:"auto",left:t.left,right:t.right}:{position:u,top:t.top,bottom:"auto",left:t.left,right:t.right})},o=function(n,i){(!t(f.date).isSame(t(n))||nt)&&(nt=!1,f.element.trigger({type:"dp.change",date:t(f.date),oldDate:t(n)}),"change"!==i&&f.element.change())},tt=function(n){nt=!0;f.element.trigger({type:"dp.error",date:t(n,f.format,f.options.useStrict)})},c=function(n){t.locale(f.options.language);var i=n;i||(i=e().val(),i&&(f.date=t(i,f.format,f.options.useStrict)),f.date||(f.date=t()));f.viewDate=t(f.date).startOf("month");v();it()},vt=function(){t.locale(f.options.language);var i,r=n("<tr>"),u=t.weekdaysMin();if(f.options.calendarWeeks===!0&&r.append('<th class="cw">#<\/th>'),0===t().localeData()._week.dow)for(i=0;7>i;i++)r.append('<th class="dow">'+u[i]+"<\/th>");else for(i=1;8>i;i++)r.append(7===i?'<th class="dow">'+u[0]+"<\/th>":'<th class="dow">'+u[i]+"<\/th>");f.widget.find(".datepicker-days thead").append(r)},yt=function(){t.locale(f.options.language);for(var i="",r=t.monthsShort(),n=0;12>n;n++)i+='<span class="month">'+r[n]+"<\/span>";f.widget.find(".datepicker-months td").append(i)},v=function(){if(f.options.pickDate){t.locale(f.options.language);var y,r,p,a,e,u,w,b,v,i=f.viewDate.year(),h=f.viewDate.month(),o=f.options.minDate.year(),d=f.options.minDate.month(),s=f.options.maxDate.year(),g=f.options.maxDate.month(),c=[],l=t.months();for(f.widget.find(".datepicker-days").find(".disabled").removeClass("disabled"),f.widget.find(".datepicker-months").find(".disabled").removeClass("disabled"),f.widget.find(".datepicker-years").find(".disabled").removeClass("disabled"),f.widget.find(".datepicker-days th:eq(1)").text(l[h]+" "+i),r=t(f.viewDate,f.format,f.options.useStrict).subtract(1,"months"),w=r.daysInMonth(),r.date(w).startOf("week"),(i===o&&d>=h||o>i)&&f.widget.find(".datepicker-days th:eq(0)").addClass("disabled"),(i===s&&h>=g||i>s)&&f.widget.find(".datepicker-days th:eq(2)").addClass("disabled"),p=t(r).add(42,"d");r.isBefore(p);){if(r.weekday()===t().startOf("week").weekday()&&(a=n("<tr>"),c.push(a),f.options.calendarWeeks===!0&&a.append('<td class="cw">'+r.week()+"<\/td>")),e="",r.year()<i||r.year()===i&&r.month()<h?e+=" old":(r.year()>i||r.year()===i&&r.month()>h)&&(e+=" new"),r.isSame(t({y:f.date.year(),M:f.date.month(),d:f.date.date()}))&&(e+=" active"),(k(r,"day")||!st(r))&&(e+=" disabled"),f.options.showToday===!0&&r.isSame(t(),"day")&&(e+=" today"),f.options.daysOfWeekDisabled)for(u=0;u<f.options.daysOfWeekDisabled.length;u++)if(r.day()===f.options.daysOfWeekDisabled[u]){e+=" disabled";break}a.append('<td class="day'+e+'">'+r.date()+"<\/td>");y=r.date();r.add(1,"d");y===r.date()&&r.add(1,"d")}for(f.widget.find(".datepicker-days tbody").empty().append(c),v=f.date.year(),l=f.widget.find(".datepicker-months").find("th:eq(1)").text(i).end().find("span").removeClass("active"),v===i&&l.eq(f.date.month()).addClass("active"),o>i-1&&f.widget.find(".datepicker-months th:eq(0)").addClass("disabled"),i+1>s&&f.widget.find(".datepicker-months th:eq(2)").addClass("disabled"),u=0;12>u;u++)i===o&&d>u||o>i?n(l[u]).addClass("disabled"):(i===s&&u>g||i>s)&&n(l[u]).addClass("disabled");for(c="",i=10*parseInt(i/10,10),b=f.widget.find(".datepicker-years").find("th:eq(1)").text(i+"-"+(i+9)).parents("table").find("td"),f.widget.find(".datepicker-years").find("th").removeClass("disabled"),o>i&&f.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled"),i+9>s&&f.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled"),i-=1,u=-1;11>u;u++)c+='<span class="year'+(-1===u||10===u?" old":"")+(v===i?" active":"")+(o>i||i>s?" disabled":"")+'">'+i+"<\/span>",i+=1;b.html(c)}},pt=function(){t.locale(f.options.language);var i,r,u,e=f.widget.find(".timepicker .timepicker-hours table"),n="";if(e.parent().hide(),f.use24hours)for(i=0,r=0;6>r;r+=1){for(n+="<tr>",u=0;4>u;u+=1)n+='<td class="hour">'+s(i.toString())+"<\/td>",i++;n+="<\/tr>"}else for(i=1,r=0;3>r;r+=1){for(n+="<tr>",u=0;4>u;u+=1)n+='<td class="hour">'+s(i.toString())+"<\/td>",i++;n+="<\/tr>"}e.html(n)},wt=function(){var i,r,e=f.widget.find(".timepicker .timepicker-minutes table"),n="",u=0,t=f.options.minuteStepping;for(e.parent().hide(),1===t&&(t=5),i=0;i<Math.ceil(15/t);i++){for(n+="<tr>",r=0;4>r;r+=1)60>u?(n+='<td class="minute">'+s(u.toString())+"<\/td>",u+=t):n+="<td><\/td>";n+="<\/tr>"}e.html(n)},bt=function(){var t,i,r=f.widget.find(".timepicker .timepicker-seconds table"),n="",u=0;for(r.parent().hide(),t=0;3>t;t++){for(n+="<tr>",i=0;4>i;i+=1)n+='<td class="second">'+s(u.toString())+"<\/td>",u+=5;n+="<\/tr>"}r.html(n)},it=function(){if(f.date){var t=f.widget.find(".timepicker span[data-time-component]"),n=f.date.hours(),i=f.date.format("A");f.use24hours||(0===n?n=12:12!==n&&(n%=12),f.widget.find(".timepicker [data-action=togglePeriod]").text(i));t.filter("[data-time-component=hours]").text(s(n));t.filter("[data-time-component=minutes]").text(s(f.date.minutes()));t.filter("[data-time-component=seconds]").text(s(f.date.second()))}},kt=function(i){i.stopPropagation();i.preventDefault();f.unset=!1;var u,e,s,h,r=n(i.target).closest("span, td, th"),c=t(f.date);if(1===r.length&&!r.is(".disabled"))switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"picker-switch":b(1);break;case"prev":case"next":s=rt.modes[f.viewMode].navStep;"prev"===r[0].className&&(s=-1*s);f.viewDate.add(s,rt.modes[f.viewMode].navFnc);v()}break;case"span":r.is(".month")?(u=r.parent().find("span").index(r),f.viewDate.month(u)):(e=parseInt(r.text(),10)||0,f.viewDate.year(e));f.viewMode===f.minViewMode&&(f.date=t({y:f.viewDate.year(),M:f.viewDate.month(),d:f.viewDate.date(),h:f.date.hours(),m:f.date.minutes(),s:f.date.seconds()}),l(),o(c,i.type));b(-1);v();break;case"td":r.is(".day")&&(h=parseInt(r.text(),10)||1,u=f.viewDate.month(),e=f.viewDate.year(),r.is(".old")?0===u?(u=11,e-=1):u-=1:r.is(".new")&&(11===u?(u=0,e+=1):u+=1),f.date=t({y:e,M:u,d:h,h:f.date.hours(),m:f.date.minutes(),s:f.date.seconds()}),f.viewDate=t({y:e,M:u,d:Math.min(28,h)}),v(),l(),o(c,i.type))}},y={incrementHours:function(){a("add","hours",1)},incrementMinutes:function(){a("add","minutes",f.options.minuteStepping)},incrementSeconds:function(){a("add","seconds",1)},decrementHours:function(){a("subtract","hours",1)},decrementMinutes:function(){a("subtract","minutes",f.options.minuteStepping)},decrementSeconds:function(){a("subtract","seconds",1)},togglePeriod:function(){var n=f.date.hours();n>=12?n-=12:n+=12;f.date.hours(n)},showPicker:function(){f.widget.find(".timepicker > div:not(.timepicker-picker)").hide();f.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){f.widget.find(".timepicker .timepicker-picker").hide();f.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.widget.find(".timepicker .timepicker-picker").hide();f.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.widget.find(".timepicker .timepicker-picker").hide();f.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var i=parseInt(n(t.target).text(),10);f.use24hours||(f.date.hours()>=12?12!==i&&(i+=12):12===i&&(i=0));f.date.hours(i);y.showPicker.call(f)},selectMinute:function(t){f.date.minutes(parseInt(n(t.target).text(),10));y.showPicker.call(f)},selectSecond:function(t){f.date.seconds(parseInt(n(t.target).text(),10));y.showPicker.call(f)}},dt=function(i){var r=t(f.date),u=n(i.currentTarget).data("action"),e=y[u].apply(f,arguments);return p(i),f.date||(f.date=t({y:1970})),l(),it(),o(r,i.type),e},p=function(n){n.stopPropagation();n.preventDefault()},gt=function(n){27===n.keyCode&&f.hide()},w=function(i){t.locale(f.options.language);var e=n(i.target),u=t(f.date),r=t(e.val(),f.format,f.options.useStrict);r.isValid()&&!k(r)&&st(r)?(c(),f.setValue(r),o(u,i.type),l()):(f.viewDate=u,f.unset=!0,o(u,i.type),tt(r))},b=function(n){n&&(f.viewMode=Math.max(f.minViewMode,Math.min(2,f.viewMode+n)));f.widget.find(".datepicker > div").hide().filter(".datepicker-"+rt.modes[f.viewMode].clsName).show()},ft=function(){var i,r,t,e,u;f.widget.on("click",".datepicker *",n.proxy(kt,this));f.widget.on("click","[data-action]",n.proxy(dt,this));f.widget.on("mousedown",n.proxy(p,this));f.element.on("keydown",n.proxy(gt,this));f.options.pickDate&&f.options.pickTime&&f.widget.on("click.togglePicker",".accordion-toggle",function(o){if(o.stopPropagation(),i=n(this),r=i.closest("ul"),t=r.find(".in"),e=r.find(".collapse:not(.in)"),t&&t.length){if(u=t.data("collapse"),u&&u.transitioning)return;t.collapse("hide");e.collapse("show");i.find("span").toggleClass(f.options.icons.time+" "+f.options.icons.date);f.component&&f.component.find("span").toggleClass(f.options.icons.time+" "+f.options.icons.date)}});f.isInput?f.element.on({click:n.proxy(f.show,this),focus:n.proxy(f.show,this),change:n.proxy(w,this),blur:n.proxy(f.hide,this)}):(f.element.on({change:n.proxy(w,this)},"input"),f.component?(f.component.on("click",n.proxy(f.show,this)),f.component.on("mousedown",n.proxy(p,this))):f.element.on("click",n.proxy(f.show,this)))},ni=function(){n(window).on("resize.datetimepicker"+f.id,n.proxy(ut,this));f.isInput||n(document).on("mousedown.datetimepicker"+f.id,n.proxy(f.hide,this))},et=function(){f.widget.off("click",".datepicker *",f.click);f.widget.off("click","[data-action]");f.widget.off("mousedown",f.stopEvent);f.options.pickDate&&f.options.pickTime&&f.widget.off("click.togglePicker");f.isInput?f.element.off({focus:f.show,change:w,click:f.show,blur:f.hide}):(f.element.off({change:w},"input"),f.component?(f.component.off("click",f.show),f.component.off("mousedown",f.stopEvent)):f.element.off("click",f.show))},ot=function(){n(window).off("resize.datetimepicker"+f.id);f.isInput||n(document).off("mousedown.datetimepicker"+f.id)},ti=function(){if(f.element){for(var i=f.element.parents(),r=!1,t=0;t<i.length;t++)if("fixed"===n(i[t]).css("position")){r=!0;break}return r}return!1},l=function(){t.locale(f.options.language);var n="";f.unset||(n=t(f.date).format(f.format));e().val(n);f.element.data("date",n);f.options.pickTime||f.hide()},a=function(n,i,r){t.locale(f.options.language);var u;return"add"===n?(u=t(f.date),23===u.hours()&&u.add(r,i),u.add(r,i)):u=t(f.date).subtract(r,i),k(t(u.subtract(r,i)))||k(u)?void tt(u.format(f.format)):("add"===n?f.date.add(r,i):f.date.subtract(r,i),void(f.unset=!1))},k=function(n,i){t.locale(f.options.language);var r=t(f.options.maxDate,f.format,f.options.useStrict),u=t(f.options.minDate,f.format,f.options.useStrict);return i&&(r=r.endOf(i),u=u.startOf(i)),n.isAfter(r)||n.isBefore(u)?!0:f.options.disabledDates===!1?!1:f.options.disabledDates[n.format("YYYY-MM-DD")]===!0},st=function(n){return t.locale(f.options.language),f.options.enabledDates===!1?!0:f.options.enabledDates[n.format("YYYY-MM-DD")]===!0},d=function(n){for(var r={},u=0,i=0;i<n.length;i++)g=t.isMoment(n[i])||n[i]instanceof Date?t(n[i]):t(n[i],f.format,f.options.useStrict),g.isValid()&&(r[g.format("YYYY-MM-DD")]=!0,u++);return u>0?r:!1},s=function(n){return n=n.toString(),n.length>=2?n:"0"+n},ii=function(){var n='<thead><tr><th class="prev">&lsaquo;<\/th><th colspan="'+(f.options.calendarWeeks?"6":"5")+'" class="picker-switch"><\/th><th class="next">&rsaquo;<\/th><\/tr><\/thead>',r='<tbody><tr><td colspan="'+(f.options.calendarWeeks?"8":"7")+'"><\/td><\/tr><\/tbody>',t='<div class="datepicker-days"><table class="table-condensed">'+n+'<tbody><\/tbody><\/table><\/div><div class="datepicker-months"><table class="table-condensed">'+n+r+'<\/table><\/div><div class="datepicker-years"><table class="table-condensed">'+n+r+"<\/table><\/div>",i="";return f.options.pickDate&&f.options.pickTime?(i='<div class="bootstrap-datetimepicker-widget'+(f.options.sideBySide?" timepicker-sbs":"")+(f.use24hours?" usetwentyfour":"")+' dropdown-menu" style="z-index:9999 !important;">',i+=f.options.sideBySide?'<div class="row"><div class="col-sm-6 datepicker">'+t+'<\/div><div class="col-sm-6 timepicker">'+h.getTemplate()+"<\/div><\/div>":'<ul class="list-unstyled"><li'+(f.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+t+'<\/div><\/li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+f.options.icons.time+'"><\/span><\/a><\/li><li'+(f.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+h.getTemplate()+"<\/div><\/li><\/ul>",i+="<\/div>"):f.options.pickTime?'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+h.getTemplate()+"<\/div><\/div>":'<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+t+"<\/div><\/div>"},rt={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}]},h={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"><\/span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"><\/span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"><\/span>'};h.getTemplate=function(){return'<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+f.options.icons.up+'"><\/span><\/a><\/td><td class="separator"><\/td><td>'+(f.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+f.options.icons.up+'"><\/span><\/a>':"")+"<\/td>"+(f.options.useSeconds?'<td class="separator"><\/td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+f.options.icons.up+'"><\/span><\/a><\/td>':"")+(f.use24hours?"":'<td class="separator"><\/td>')+"<\/tr><tr><td>"+h.hourTemplate+'<\/td> <td class="separator">:<\/td><td>'+(f.options.useMinutes?h.minuteTemplate:'<span class="timepicker-minute">00<\/span>')+"<\/td> "+(f.options.useSeconds?'<td class="separator">:<\/td><td>'+h.secondTemplate+"<\/td>":"")+(f.use24hours?"":'<td class="separator"><\/td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"><\/button><\/td>')+'<\/tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+f.options.icons.down+'"><\/span><\/a><\/td><td class="separator"><\/td><td>'+(f.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+f.options.icons.down+'"><\/span><\/a>':"")+"<\/td>"+(f.options.useSeconds?'<td class="separator"><\/td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+f.options.icons.down+'"><\/span><\/a><\/td>':"")+(f.use24hours?"":'<td class="separator"><\/td>')+'<\/tr><\/table><\/div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"><\/table><\/div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"><\/table><\/div>'+(f.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"><\/table><\/div>':"")};f.destroy=function(){et();ot();f.widget.remove();f.element.removeData("DateTimePicker");f.component&&f.component.removeData("DateTimePicker")};f.show=function(n){if(!e().prop("disabled")){if(f.options.useCurrent&&""===e().val()){if(1!==f.options.minuteStepping){var i=t(),r=f.options.minuteStepping;i.minutes(Math.round(i.minutes()/r)*r%60).seconds(0);f.setValue(i.format(f.format))}else f.setValue(t().format(f.format));o("",n.type)}n&&"click"===n.type&&f.isInput&&f.widget.hasClass("picker-open")||(f.widget.hasClass("picker-open")?(f.widget.hide(),f.widget.removeClass("picker-open")):(f.widget.show(),f.widget.addClass("picker-open")),f.height=f.component?f.component.outerHeight():f.element.outerHeight(),ut(),f.element.trigger({type:"dp.show",date:t(f.date)}),ni(),n&&p(n))}};f.disable=function(){var n=e();n.prop("disabled")||(n.prop("disabled",!0),et())};f.enable=function(){var n=e();n.prop("disabled")&&(n.prop("disabled",!1),ft())};f.hide=function(){for(var i,r=f.widget.find(".collapse"),n=0;n<r.length;n++)if(i=r.eq(n).data("collapse"),i&&i.transitioning)return;f.widget.hide();f.widget.removeClass("picker-open");f.viewMode=f.startViewMode;b();f.element.trigger({type:"dp.hide",date:t(f.date)});ot()};f.setValue=function(n){t.locale(f.options.language);n?f.unset=!1:(f.unset=!0,l());n=t.isMoment(n)?n.locale(f.options.language):n instanceof Date?t(n):t(n,f.format,f.options.useStrict);n.isValid()?(f.date=n,l(),f.viewDate=t({y:f.date.year(),M:f.date.month()}),v(),it()):tt(n)};f.getDate=function(){return f.unset?null:t(f.date)};f.setDate=function(n){var i=t(f.date);f.setValue(n?n:null);o(i,"function")};f.setDisabledDates=function(n){f.options.disabledDates=d(n);f.viewDate&&c()};f.setEnabledDates=function(n){f.options.enabledDates=d(n);f.viewDate&&c()};f.setMaxDate=function(n){void 0!==n&&(f.options.maxDate=t.isMoment(n)||n instanceof Date?t(n):t(n,f.format,f.options.useStrict),f.viewDate&&c())};f.setMinDate=function(n){void 0!==n&&(f.options.minDate=t.isMoment(n)||n instanceof Date?t(n):t(n,f.format,f.options.useStrict),f.viewDate&&c())};lt()};n.fn.datetimepicker=function(t){return this.each(function(){var i=n(this),u=i.data("DateTimePicker");u||i.data("DateTimePicker",new r(this,t))})};n.fn.datetimepicker.defaults={format:!1,pickDate:!0,pickTime:!0,useMinutes:!0,useSeconds:!1,useCurrent:!0,calendarWeeks:!1,minuteStepping:1,minDate:t({y:1900}),maxDate:t().add(100,"y"),showToday:!0,collapse:!0,language:t.locale(),defaultDate:"",disabledDates:!1,enabledDates:!1,icons:{},useStrict:!1,direction:"auto",sideBySide:!1,daysOfWeekDisabled:[],widgetParent:!1}}),function(){var c=this,tt=c._,r=Array.prototype,p=Object.prototype,it=Function.prototype,w=r.push,t=r.slice,l=r.concat,u=p.toString,b=p.hasOwnProperty,rt=Array.isArray,k=Object.keys,a=it.bind,n=function(t){if(t instanceof n)return t;if(!(this instanceof n))return new n(t);this._wrapped=t},i,v,e,f,o,s,nt,h;typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=n),exports._=n):c._=n;n.VERSION="1.7.0";i=function(n,t,i){if(t===void 0)return n;switch(i==null?3:i){case 1:return function(i){return n.call(t,i)};case 2:return function(i,r){return n.call(t,i,r)};case 3:return function(i,r,u){return n.call(t,i,r,u)};case 4:return function(i,r,u,f){return n.call(t,i,r,u,f)}}return function(){return n.apply(t,arguments)}};n.iteratee=function(t,r,u){return t==null?n.identity:n.isFunction(t)?i(t,r,u):n.isObject(t)?n.matches(t):n.property(t)};n.each=n.forEach=function(t,r,u){var f,e,o;if(t==null)return t;if(r=i(r,u),e=t.length,e===+e)for(f=0;f<e;f++)r(t[f],f,t);else for(o=n.keys(t),f=0,e=o.length;f<e;f++)r(t[o[f]],o[f],t);return t};n.map=n.collect=function(t,i,r){var u;if(t==null)return[];i=n.iteratee(i,r);var f=t.length!==+t.length&&n.keys(t),o=(f||t).length,s=Array(o),e;for(u=0;u<o;u++)e=f?f[u]:u,s[u]=i(t[e],e,t);return s};v="Reduce of empty array with no initial value";n.reduce=n.foldl=n.inject=function(t,r,u,f){t==null&&(t=[]);r=i(r,f,4);var o=t.length!==+t.length&&n.keys(t),h=(o||t).length,e=0,s;if(arguments.length<3){if(!h)throw new TypeError(v);u=t[o?o[e++]:e++]}for(;e<h;e++)s=o?o[e]:e,u=r(u,t[s],s,t);return u};n.reduceRight=n.foldr=function(t,r,u,f){t==null&&(t=[]);r=i(r,f,4);var o=t.length!==+t.length&&n.keys(t),e=(o||t).length,s;if(arguments.length<3){if(!e)throw new TypeError(v);u=t[o?o[--e]:--e]}while(e--)s=o?o[e]:e,u=r(u,t[s],s,t);return u};n.find=n.detect=function(t,i,r){var u;return i=n.iteratee(i,r),n.some(t,function(n,t,r){if(i(n,t,r))return u=n,!0}),u};n.filter=n.select=function(t,i,r){var u=[];return t==null?u:(i=n.iteratee(i,r),n.each(t,function(n,t,r){i(n,t,r)&&u.push(n)}),u)};n.reject=function(t,i,r){return n.filter(t,n.negate(n.iteratee(i)),r)};n.every=n.all=function(t,i,r){if(t==null)return!0;i=n.iteratee(i,r);for(var f=t.length!==+t.length&&n.keys(t),o=(f||t).length,e,u=0;u<o;u++)if(e=f?f[u]:u,!i(t[e],e,t))return!1;return!0};n.some=n.any=function(t,i,r){if(t==null)return!1;i=n.iteratee(i,r);for(var f=t.length!==+t.length&&n.keys(t),o=(f||t).length,e,u=0;u<o;u++)if(e=f?f[u]:u,i(t[e],e,t))return!0;return!1};n.contains=n.include=function(t,i){return t==null?!1:(t.length!==+t.length&&(t=n.values(t)),n.indexOf(t,i)>=0)};n.invoke=function(i,r){var u=t.call(arguments,2),f=n.isFunction(r);return n.map(i,function(n){return(f?r:n[r]).apply(n,u)})};n.pluck=function(t,i){return n.map(t,n.property(i))};n.where=function(t,i){return n.filter(t,n.matches(i))};n.findWhere=function(t,i){return n.find(t,n.matches(i))};n.max=function(t,i,r){var u=-Infinity,s=-Infinity,o,f,e,h;if(i==null&&t!=null)for(t=t.length===+t.length?t:n.values(t),e=0,h=t.length;e<h;e++)o=t[e],o>u&&(u=o);else i=n.iteratee(i,r),n.each(t,function(n,t,r){f=i(n,t,r);(f>s||f===-Infinity&&u===-Infinity)&&(u=n,s=f)});return u};n.min=function(t,i,r){var u=Infinity,s=Infinity,o,f,e,h;if(i==null&&t!=null)for(t=t.length===+t.length?t:n.values(t),e=0,h=t.length;e<h;e++)o=t[e],o<u&&(u=o);else i=n.iteratee(i,r),n.each(t,function(n,t,r){f=i(n,t,r);(f<s||f===Infinity&&u===Infinity)&&(u=n,s=f)});return u};n.shuffle=function(t){for(var f=t&&t.length===+t.length?t:n.values(t),e=f.length,r=Array(e),i=0,u;i<e;i++)u=n.random(0,i),u!==i&&(r[i]=r[u]),r[u]=f[i];return r};n.sample=function(t,i,r){return i==null||r?(t.length!==+t.length&&(t=n.values(t)),t[n.random(t.length-1)]):n.shuffle(t).slice(0,Math.max(0,i))};n.sortBy=function(t,i,r){return i=n.iteratee(i,r),n.pluck(n.map(t,function(n,t,r){return{value:n,index:t,criteria:i(n,t,r)}}).sort(function(n,t){var i=n.criteria,r=t.criteria;if(i!==r){if(i>r||i===void 0)return 1;if(i<r||r===void 0)return-1}return n.index-t.index}),"value")};e=function(t){return function(i,r,u){var f={};return r=n.iteratee(r,u),n.each(i,function(n,u){var e=r(n,u,i);t(f,n,e)}),f}};n.groupBy=e(function(t,i,r){n.has(t,r)?t[r].push(i):t[r]=[i]});n.indexBy=e(function(n,t,i){n[i]=t});n.countBy=e(function(t,i,r){n.has(t,r)?t[r]++:t[r]=1});n.sortedIndex=function(t,i,r,u){var e;r=n.iteratee(r,u,1);for(var s=r(i),f=0,o=t.length;f<o;)e=f+o>>>1,r(t[e])<s?f=e+1:o=e;return f};n.toArray=function(i){return i?n.isArray(i)?t.call(i):i.length===+i.length?n.map(i,n.identity):n.values(i):[]};n.size=function(t){return t==null?0:t.length===+t.length?t.length:n.keys(t).length};n.partition=function(t,i,r){i=n.iteratee(i,r);var u=[],f=[];return n.each(t,function(n,t,r){(i(n,t,r)?u:f).push(n)}),[u,f]};n.first=n.head=n.take=function(n,i,r){if(n!=null)return i==null||r?n[0]:i<0?[]:t.call(n,0,i)};n.initial=function(n,i,r){return t.call(n,0,Math.max(0,n.length-(i==null||r?1:i)))};n.last=function(n,i,r){if(n!=null)return i==null||r?n[n.length-1]:t.call(n,Math.max(n.length-i,0))};n.rest=n.tail=n.drop=function(n,i,r){return t.call(n,i==null||r?1:i)};n.compact=function(t){return n.filter(t,n.identity)};f=function(t,i,r,u){var o,s,e;if(i&&n.every(t,n.isArray))return l.apply(u,t);for(o=0,s=t.length;o<s;o++)e=t[o],n.isArray(e)||n.isArguments(e)?i?w.apply(u,e):f(e,i,r,u):r||u.push(e);return u};n.flatten=function(n,t){return f(n,t,!1,[])};n.without=function(i){return n.difference(i,t.call(arguments,1))};n.uniq=n.unique=function(t,i,r,u){var e,s,o,c,f,h;if(t==null)return[];for(n.isBoolean(i)||(u=r,r=i,i=!1),r!=null&&(r=n.iteratee(r,u)),e=[],s=[],o=0,c=t.length;o<c;o++)f=t[o],i?(o&&s===f||e.push(f),s=f):r?(h=r(f,o,t),n.indexOf(s,h)<0&&(s.push(h),e.push(f))):n.indexOf(e,f)<0&&e.push(f);return e};n.union=function(){return n.uniq(f(arguments,!0,!0,[]))};n.intersection=function(t){var r,e,u,o,f,i;if(t==null)return[];for(r=[],e=arguments.length,u=0,o=t.length;u<o;u++)if(f=t[u],!n.contains(r,f)){for(i=1;i<e;i++)if(!n.contains(arguments[i],f))break;i===e&&r.push(f)}return r};n.difference=function(i){var r=f(t.call(arguments,1),!0,!0,[]);return n.filter(i,function(t){return!n.contains(r,t)})};n.zip=function(t){var r,u,i;if(t==null)return[];for(r=n.max(arguments,"length").length,u=Array(r),i=0;i<r;i++)u[i]=n.pluck(arguments,i);return u};n.object=function(n,t){var r,i,u;if(n==null)return{};for(r={},i=0,u=n.length;i<u;i++)t?r[n[i]]=t[i]:r[n[i][0]]=n[i][1];return r};n.indexOf=function(t,i,r){if(t==null)return-1;var u=0,f=t.length;if(r)if(typeof r=="number")u=r<0?Math.max(0,f+r):r;else return u=n.sortedIndex(t,i),t[u]===i?u:-1;for(;u<f;u++)if(t[u]===i)return u;return-1};n.lastIndexOf=function(n,t,i){if(n==null)return-1;var r=n.length;for(typeof i=="number"&&(r=i<0?r+i+1:Math.min(r,i+1));--r>=0;)if(n[r]===t)return r;return-1};n.range=function(n,t,i){var u,f,r;for(arguments.length<=1&&(t=n||0,n=0),i=i||1,u=Math.max(Math.ceil((t-n)/i),0),f=Array(u),r=0;r<u;r++,n+=i)f[r]=n;return f};o=function(){};n.bind=function(i,r){var u,f;if(a&&i.bind===a)return a.apply(i,t.call(arguments,1));if(!n.isFunction(i))throw new TypeError("Bind must be called on a function");return u=t.call(arguments,2),f=function(){var e,s;return(this instanceof f)?(o.prototype=i.prototype,e=new o,o.prototype=null,s=i.apply(e,u.concat(t.call(arguments))),n.isObject(s))?s:e:i.apply(r,u.concat(t.call(arguments)))}};n.partial=function(i){var r=t.call(arguments,1);return function(){for(var f=0,t=r.slice(),u=0,e=t.length;u<e;u++)t[u]===n&&(t[u]=arguments[f++]);while(f<arguments.length)t.push(arguments[f++]);return i.apply(this,t)}};n.bindAll=function(t){var i,u=arguments.length,r;if(u<=1)throw new Error("bindAll must be passed function names");for(i=1;i<u;i++)r=arguments[i],t[r]=n.bind(t[r],t);return t};n.memoize=function(t,i){var r=function(u){var f=r.cache,e=i?i.apply(this,arguments):u;return n.has(f,e)||(f[e]=t.apply(this,arguments)),f[e]};return r.cache={},r};n.delay=function(n,i){var r=t.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},i)};n.defer=function(i){return n.delay.apply(n,[i,1].concat(t.call(arguments,1)))};n.throttle=function(t,i,r){var f,e,s,u=null,o=0,h;return r||(r={}),h=function(){o=r.leading===!1?0:n.now();u=null;s=t.apply(f,e);u||(f=e=null)},function(){var l=n.now(),c;return o||r.leading!==!1||(o=l),c=i-(l-o),f=this,e=arguments,c<=0||c>i?(clearTimeout(u),u=null,o=l,s=t.apply(f,e),u||(f=e=null)):u||r.trailing===!1||(u=setTimeout(h,c)),s}};n.debounce=function(t,i,r){var u,f,e,s,o,h=function(){var c=n.now()-s;c<i&&c>0?u=setTimeout(h,i-c):(u=null,r||(o=t.apply(e,f),u||(e=f=null)))};return function(){e=this;f=arguments;s=n.now();var c=r&&!u;return u||(u=setTimeout(h,i)),c&&(o=t.apply(e,f),e=f=null),o}};n.wrap=function(t,i){return n.partial(i,t)};n.negate=function(n){return function(){return!n.apply(this,arguments)}};n.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,i=n[t].apply(this,arguments);r--;)i=n[r].call(this,i);return i}};n.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}};n.before=function(n,t){var i;return function(){return--n>0?i=t.apply(this,arguments):t=null,i}};n.once=n.partial(n.before,2);n.keys=function(t){var i,r;if(!n.isObject(t))return[];if(k)return k(t);i=[];for(r in t)n.has(t,r)&&i.push(r);return i};n.values=function(t){for(var r=n.keys(t),u=r.length,f=Array(u),i=0;i<u;i++)f[i]=t[r[i]];return f};n.pairs=function(t){for(var r=n.keys(t),u=r.length,f=Array(u),i=0;i<u;i++)f[i]=[r[i],t[r[i]]];return f};n.invert=function(t){for(var u={},r=n.keys(t),i=0,f=r.length;i<f;i++)u[t[r[i]]]=r[i];return u};n.functions=n.methods=function(t){var i=[];for(var r in t)n.isFunction(t[r])&&i.push(r);return i.sort()};n.extend=function(t){var i,r,u,f;if(!n.isObject(t))return t;for(u=1,f=arguments.length;u<f;u++){i=arguments[u];for(r in i)b.call(i,r)&&(t[r]=i[r])}return t};n.pick=function(r,u,f){var o={},e,h,c,s,a;if(r==null)return o;if(n.isFunction(u)){u=i(u,f);for(e in r)h=r[e],u(h,e,r)&&(o[e]=h)}else for(c=l.apply([],t.call(arguments,1)),r=new Object(r),s=0,a=c.length;s<a;s++)e=c[s],e in r&&(o[e]=r[e]);return o};n.omit=function(i,r,u){if(n.isFunction(r))r=n.negate(r);else{var f=n.map(l.apply([],t.call(arguments,1)),String);r=function(t,i){return!n.contains(f,i)}}return n.pick(i,r,u)};n.defaults=function(t){var i,f,u,r;if(!n.isObject(t))return t;for(i=1,f=arguments.length;i<f;i++){u=arguments[i];for(r in u)t[r]===void 0&&(t[r]=u[r])}return t};n.clone=function(t){return n.isObject(t)?n.isArray(t)?t.slice():n.extend({},t):t};n.tap=function(n,t){return t(n),n};s=function(t,i,r,f){var l,a,h,c,e,o,y,v;if(t===i)return t!==0||1/t==1/i;if(t==null||i==null)return t===i;if(t instanceof n&&(t=t._wrapped),i instanceof n&&(i=i._wrapped),l=u.call(t),l!==u.call(i))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+t==""+i;case"[object Number]":return+t!=+t?+i!=+i:+t==0?1/+t==1/i:+t==+i;case"[object Date]":case"[object Boolean]":return+t==+i}if(typeof t!="object"||typeof i!="object")return!1;for(a=r.length;a--;)if(r[a]===t)return f[a]===i;if(h=t.constructor,c=i.constructor,h!==c&&"constructor"in t&&"constructor"in i&&!(n.isFunction(h)&&h instanceof h&&n.isFunction(c)&&c instanceof c))return!1;if(r.push(t),f.push(i),l==="[object Array]"){if(e=t.length,o=e===i.length,o)while(e--)if(!(o=s(t[e],i[e],r,f)))break}else if(y=n.keys(t),e=y.length,o=n.keys(i).length===e,o)while(e--)if(v=y[e],!(o=n.has(i,v)&&s(t[v],i[v],r,f)))break;return r.pop(),f.pop(),o};n.isEqual=function(n,t){return s(n,t,[],[])};n.isEmpty=function(t){if(t==null)return!0;if(n.isArray(t)||n.isString(t)||n.isArguments(t))return t.length===0;for(var i in t)if(n.has(t,i))return!1;return!0};n.isElement=function(n){return!!(n&&n.nodeType===1)};n.isArray=rt||function(n){return u.call(n)==="[object Array]"};n.isObject=function(n){var t=typeof n;return t==="function"||t==="object"&&!!n};n.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){n["is"+t]=function(n){return u.call(n)==="[object "+t+"]"}});n.isArguments(arguments)||(n.isArguments=function(t){return n.has(t,"callee")});typeof/./!="function"&&(n.isFunction=function(n){return typeof n=="function"||!1});n.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))};n.isNaN=function(t){return n.isNumber(t)&&t!==+t};n.isBoolean=function(n){return n===!0||n===!1||u.call(n)==="[object Boolean]"};n.isNull=function(n){return n===null};n.isUndefined=function(n){return n===void 0};n.has=function(n,t){return n!=null&&b.call(n,t)};n.noConflict=function(){return c._=tt,this};n.identity=function(n){return n};n.constant=function(n){return function(){return n}};n.noop=function(){};n.property=function(n){return function(t){return t[n]}};n.matches=function(t){var i=n.pairs(t),r=i.length;return function(n){var t,u,f;if(n==null)return!r;for(n=new Object(n),t=0;t<r;t++)if(u=i[t],f=u[0],u[1]!==n[f]||!(f in n))return!1;return!0}};n.times=function(n,t,r){var f=Array(Math.max(0,n)),u;for(t=i(t,r,1),u=0;u<n;u++)f[u]=t(u);return f};n.random=function(n,t){return t==null&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};n.now=Date.now||function(){return(new Date).getTime()};var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ut=n.invert(d),g=function(t){var r=function(n){return t[n]},i="(?:"+n.keys(t).join("|")+")",u=RegExp(i),f=RegExp(i,"g");return function(n){return n=n==null?"":""+n,u.test(n)?n.replace(f,r):n}};n.escape=g(d);n.unescape=g(ut);n.result=function(t,i){if(t==null)return void 0;var r=t[i];return n.isFunction(r)?t[i]():r};nt=0;n.uniqueId=function(n){var t=++nt+"";return n?n+t:t};n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/,ft={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},et=/\\|'|\r|\n|\u2028|\u2029/g,ot=function(n){return"\\"+ft[n]};n.template=function(t,i,r){var o,f,h;!i&&r&&(i=r);i=n.defaults({},i,n.templateSettings);var c=RegExp([(i.escape||y).source,(i.interpolate||y).source,(i.evaluate||y).source].join("|")+"|$","g"),e=0,u="__p+='";t.replace(c,function(n,i,r,f,o){return u+=t.slice(e,o).replace(et,ot),e=o+n.length,i?u+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":r?u+="'+\n((__t=("+r+"))==null?'':__t)+\n'":f&&(u+="';\n"+f+"\n__p+='"),n});u+="';\n";i.variable||(u="with(obj||{}){\n"+u+"}\n");u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{o=new Function(i.variable||"obj","_",u)}catch(s){s.source=u;throw s;}return f=function(t){return o.call(this,t,n)},h=i.variable||"obj",f.source="function("+h+"){\n"+u+"}",f};n.chain=function(t){var i=n(t);return i._chain=!0,i};h=function(t){return this._chain?n(t).chain():t};n.mixin=function(t){n.each(n.functions(t),function(i){var r=n[i]=t[i];n.prototype[i]=function(){var t=[this._wrapped];return w.apply(t,arguments),h.call(this,r.apply(n,t))}})};n.mixin(n);n.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var i=r[t];n.prototype[t]=function(){var n=this._wrapped;return i.apply(n,arguments),(t==="shift"||t==="splice")&&n.length===0&&delete n[0],h.call(this,n)}});n.each(["concat","join","slice"],function(t){var i=r[t];n.prototype[t]=function(){return h.call(this,i.apply(this._wrapped,arguments))}});n.prototype.value=function(){return this._wrapped};typeof define=="function"&&define.amd&&define("underscore",[],function(){return n})}.call(this),function(){var r=this,it=r.Backbone,h=[],rt=h.push,c=h.slice,ut=h.splice,t,n,f,y,p,w,b,d,tt,l,e;t=typeof exports!="undefined"?exports:r.Backbone={};t.VERSION="1.0.0";n=r._;n||typeof require=="undefined"||(n=require("underscore"));t.$=r.jQuery||r.Zepto||r.ender||r.$;t.noConflict=function(){return r.Backbone=it,this};t.emulateHTTP=!1;t.emulateJSON=!1;var i=t.Events={on:function(n,t,i){if(!o(this,"on",n,[t,i])||!t)return this;this._events||(this._events={});var r=this._events[n]||(this._events[n]=[]);return r.push({callback:t,context:i,ctx:i||this}),this},once:function(t,i,r){if(!o(this,"once",t,[i,r])||!i)return this;var f=this,u=n.once(function(){f.off(t,u);i.apply(this,arguments)});u._callback=i;return this.on(t,u,r)},off:function(t,i,r){var s,u,h,c,f,l,e,a;if(!this._events||!o(this,"off",t,[i,r]))return this;if(!t&&!i&&!r)return this._events={},this;for(c=t?[t]:n.keys(this._events),f=0,l=c.length;f<l;f++)if(t=c[f],h=this._events[t]){if(this._events[t]=s=[],i||r)for(e=0,a=h.length;e<a;e++)u=h[e],(i&&i!==u.callback&&i!==u.callback._callback||r&&r!==u.context)&&s.push(u);s.length||delete this._events[t]}return this},trigger:function(n){var t,i,r;return this._events?(t=c.call(arguments,1),!o(this,"trigger",n,t))?this:(i=this._events[n],r=this._events.all,i&&v(i,t),r&&v(r,arguments),this):this},stopListening:function(n,t,i){var r=this._listeners,f,u;if(!r)return this;f=!t&&!i;typeof t=="object"&&(i=this);n&&((r={})[n._listenerId]=n);for(u in r)r[u].off(t,i,this),f&&delete this._listeners[u];return this}},a=/\s+/,o=function(n,t,i,r){var f,e,u,o;if(!i)return!0;if(typeof i=="object"){for(f in i)n[t].apply(n,[f,i[f]].concat(r));return!1}if(a.test(i)){for(e=i.split(a),u=0,o=e.length;u<o;u++)n[t].apply(n,[e[u]].concat(r));return!1}return!0},v=function(n,t){var i,r=-1,u=n.length,f=t[0],e=t[1],o=t[2];switch(t.length){case 0:while(++r<u)(i=n[r]).callback.call(i.ctx);return;case 1:while(++r<u)(i=n[r]).callback.call(i.ctx,f);return;case 2:while(++r<u)(i=n[r]).callback.call(i.ctx,f,e);return;case 3:while(++r<u)(i=n[r]).callback.call(i.ctx,f,e,o);return;default:while(++r<u)(i=n[r]).callback.apply(i.ctx,t)}};n.each({listenTo:"on",listenToOnce:"once"},function(t,r){i[r]=function(i,r,u){var f=this._listeners||(this._listeners={}),e=i._listenerId||(i._listenerId=n.uniqueId("l"));return f[e]=i,typeof r=="object"&&(u=this),i[t](r,u,this),this}});i.bind=i.on;i.unbind=i.off;n.extend(t,i);f=t.Model=function(t,i){var u,r=t||{};i||(i={});this.cid=n.uniqueId("c");this.attributes={};n.extend(this,n.pick(i,y));i.parse&&(r=this.parse(r,i)||{});(u=n.result(this,"defaults"))&&(r=n.defaults({},r,u));this.set(r,i);this.changed={};this.initialize.apply(this,arguments)};y=["url","urlRoot","collection"];n.extend(f.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(n){return this.attributes[n]},escape:function(t){return n.escape(this.get(t))},has:function(n){return this.get(n)!=null},set:function(t,i,r){var u,f,l,e,h,c,a,o,s,v;if(t==null)return this;if(typeof t=="object"?(f=t,r=i):(f={})[t]=i,r||(r={}),!this._validate(f,r))return!1;l=r.unset;h=r.silent;e=[];c=this._changing;this._changing=!0;c||(this._previousAttributes=n.clone(this.attributes),this.changed={});o=this.attributes;a=this._previousAttributes;this.idAttribute in f&&(this.id=f[this.idAttribute]);for(u in f)i=f[u],n.isEqual(o[u],i)||e.push(u),n.isEqual(a[u],i)?delete this.changed[u]:this.changed[u]=i,l?delete o[u]:o[u]=i;if(!h)for(e.length&&(this._pending=!0),s=0,v=e.length;s<v;s++)this.trigger("change:"+e[s],this,o[e[s]],r);if(c)return this;if(!h)while(this._pending)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,i){return this.set(t,void 0,n.extend({},i,{unset:!0}))},clear:function(t){var i={};for(var r in this.attributes)i[r]=void 0;return this.set(i,n.extend({},t,{unset:!0}))},hasChanged:function(t){return t==null?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){var u,i,f,r;if(!t)return this.hasChanged()?n.clone(this.changed):!1;i=!1;f=this._changing?this._previousAttributes:this.attributes;for(r in t)n.isEqual(f[r],u=t[r])||((i||(i={}))[r]=u);return i},previous:function(n){return n==null||!this._previousAttributes?null:this._previousAttributes[n]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{};t.parse===void 0&&(t.parse=!0);var i=this,r=t.success;return t.success=function(n){if(!i.set(i.parse(n,t),t))return!1;r&&r(i,n,t);i.trigger("sync",i,n,t)},e(this,t),this.sync("read",this,t)},save:function(t,i,r){var u,o,c,s=this.attributes,f,h;return(t==null||typeof t=="object"?(u=t,r=i):(u={})[t]=i,u&&(!r||!r.wait)&&!this.set(u,r))?!1:(r=n.extend({validate:!0},r),!this._validate(u,r))?!1:(u&&r.wait&&(this.attributes=n.extend({},s,u)),r.parse===void 0&&(r.parse=!0),f=this,h=r.success,r.success=function(t){f.attributes=s;var i=f.parse(t[0],r);if(r.wait&&(i=n.extend(u||{},i)),n.isObject(i)&&!f.set(i,r))return!1;h&&h(f,t[0],r);f.trigger("sync",f,t[0],r)},e(this,r),o=this.isNew()?"create":r.patch?"patch":"update",o==="patch"&&(r.attrs=u),c=this.sync(o,this,r),u&&r.wait&&(this.attributes=s),c)},destroy:function(t){var f;t=t?n.clone(t):{};var i=this,r=t.success,u=function(){i.trigger("destroy",i,i.collection,t)};return(t.success=function(n){(t.wait||i.isNew())&&u();r&&r(i,n,t);i.isNew()||i.trigger("sync",i,n,t)},this.isNew())?(t.success(),!1):(e(this,t),f=this.sync("delete",this,t),t.wait||u(),f)},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||l();return this.isNew()?t:t+(t.charAt(t.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(n){return n},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,i){if(!i.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var r=this.validationError=this.validate(t,i)||null;return r?(this.trigger("invalid",this,r,n.extend(i||{},{validationError:r})),!1):!0}});p=["keys","values","pairs","invert","pick","omit"];n.each(p,function(t){f.prototype[t]=function(){var i=c.call(arguments);return i.unshift(this.attributes),n[t].apply(n,i)}});var s=t.Collection=function(t,i){i||(i={});i.url&&(this.url=i.url);i.model&&(this.model=i.model);i.comparator!==void 0&&(this.comparator=i.comparator);this._reset();this.initialize.apply(this,arguments);t&&this.reset(t,n.extend({silent:!0},i))},ft={add:!0,remove:!0,merge:!0},et={add:!0,merge:!1,remove:!1};n.extend(s.prototype,i,{model:f,initialize:function(){},toJSON:function(n){return this.map(function(t){return t.toJSON(n)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,i){return this.set(t,n.defaults(i||{},et))},remove:function(t,i){t=n.isArray(t)?t.slice():[t];i||(i={});for(var f,r,u=0,e=t.length;u<e;u++)(r=this.get(t[u]),r)&&(delete this._byId[r.id],delete this._byId[r.cid],f=this.indexOf(r),this.models.splice(f,1),this.length--,i.silent||(i.index=f,r.trigger("remove",r,this,i)),this._removeReference(r));return this},set:function(t,i){i=n.defaults(i||{},ft);i.parse&&(t=this.parse(t,i));n.isArray(t)||(t=t?[t]:[]);for(var r,s,o,h=i.at,l=this.comparator&&h==null&&i.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,f=[],c=[],a={},u=0,e=t.length;u<e;u++)if(r=this._prepareModel(t[u],i))if(s=this.get(r))i.remove&&(a[s.cid]=!0),i.merge&&(s.set(r.attributes,i),l&&!o&&s.hasChanged(v)&&(o=!0));else if(i.add){f.push(r);r.on("all",this._onModelEvent,this);this._byId[r.cid]=r;r.id!=null&&(this._byId[r.id]=r)}if(i.remove){for(u=0,e=this.length;u<e;++u)a[(r=this.models[u]).cid]||c.push(r);c.length&&this.remove(c,i)}if(f.length&&(l&&(o=!0),this.length+=f.length,h!=null?ut.apply(this.models,[h,0].concat(f)):rt.apply(this.models,f)),o&&this.sort({silent:!0}),i.silent)return this;for(u=0,e=f.length;u<e;u++)(r=f[u]).trigger("add",r,this,i);return o&&this.trigger("sort",this,i),this},reset:function(t,i){i||(i={});for(var r=0,u=this.models.length;r<u;r++)this._removeReference(this.models[r]);return i.previousModels=this.models,this._reset(),this.add(t,n.extend({silent:!0},i)),i.silent||this.trigger("reset",this,i),this},push:function(t,i){return t=this._prepareModel(t,i),this.add(t,n.extend({at:this.length},i)),t},pop:function(n){var t=this.at(this.length-1);return this.remove(t,n),t},unshift:function(t,i){return t=this._prepareModel(t,i),this.add(t,n.extend({at:0},i)),t},shift:function(n){var t=this.at(0);return this.remove(t,n),t},slice:function(n,t){return this.models.slice(n,t)},get:function(n){if(n!=null)return this._byId[n.id!=null?n.id:n.cid||n]},at:function(n){return this.models[n]},where:function(t,i){return n.isEmpty(t)?i?void 0:[]:this[i?"find":"filter"](function(n){for(var i in t)if(t[i]!==n.get(i))return!1;return!0})},findWhere:function(n){return this.where(n,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,i,r){i||(i=this.comparator);var u=n.isFunction(i)?i:function(n){return n.get(i)};return n.sortedIndex(this.models,t,u,r)},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{};t.parse===void 0&&(t.parse=!0);var r=t.success,i=this;return t.success=function(n){var u=t.reset?"reset":"set";i[u](n,t);r&&r(i,n,t);i.trigger("sync",i,n,t)},e(this,t),this.sync("read",this,t)},create:function(t,i){if(i=i?n.clone(i):{},!(t=this._prepareModel(t,i)))return!1;i.wait||this.add(t,i);var u=this,r=i.success;return i.success=function(n){i.wait&&u.add(t,i);r&&r(t,n,i)},t.save(null,i),t},parse:function(n){return n},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(n,t){if(n instanceof f)return n.collection||(n.collection=this),n;t||(t={});t.collection=this;var i=new this.model(n,t);return i._validate(n,t)?i:(this.trigger("invalid",this,n,t),!1)},_removeReference:function(n){this===n.collection&&delete n.collection;n.off("all",this._onModelEvent,this)},_onModelEvent:function(n,t,i,r){(n!=="add"&&n!=="remove"||i===this)&&(n==="destroy"&&this.remove(t,r),t&&n==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];n.each(w,function(t){s.prototype[t]=function(){var i=c.call(arguments);return i.unshift(this.models),n[t].apply(n,i)}});b=["groupBy","countBy","sortBy"];n.each(b,function(t){s.prototype[t]=function(i,r){var u=n.isFunction(i)?i:function(n){return n.get(i)};return n[t](this.models,u,r)}});var k=t.View=function(t){this.cid=n.uniqueId("view");this._configure(t||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},ot=/^(\S+)\s*(.*)$/,st=["model","collection","el","id","attributes","className","tagName","events"];n.extend(k.prototype,i,{tagName:"div",$:function(n){return this.$el.find(n)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(n,i){return this.$el&&this.undelegateEvents(),this.$el=n instanceof t.$?n:t.$(n),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){var r,i;if(!(t||(t=n.result(this,"events"))))return this;this.undelegateEvents();for(r in t)if(i=t[r],n.isFunction(i)||(i=this[t[r]]),i){var f=r.match(ot),u=f[1],e=f[2];if(i=n.bind(i,this),u+=".delegateEvents"+this.cid,e==="")this.$el.on(u,i);else this.$el.on(u,e,i)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=n.extend({},n.result(this,"options"),t));n.extend(this,n.pick(t,st));this.options=t},_ensureElement:function(){var i,r;this.el?this.setElement(n.result(this,"el"),!1):(i=n.extend({},n.result(this,"attributes")),this.id&&(i.id=n.result(this,"id")),this.className&&(i["class"]=n.result(this,"className")),r=t.$("<"+n.result(this,"tagName")+">").attr(i),this.setElement(r,!1))}});t.sync=function(i,r,u){var e=d[i],f,o,s;return n.defaults(u||(u={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON}),f={type:e,dataType:"json"},u.url||(f.url=n.result(r,"url")||l()),u.data==null&&r&&(i==="create"||i==="update"||i==="patch"||i==="delete")&&(f.contentType="application/json",f.data=JSON.stringify(u.attrs||r.toJSON(u))),u.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),u.emulateHTTP&&(e==="PUT"||e==="DELETE"||e==="PATCH")&&(f.type="POST",u.emulateJSON&&(f.data._method=e),o=u.beforeSend,u.beforeSend=function(n){return n.setRequestHeader("X-HTTP-Method-Override",e),o?o.apply(this,arguments):void 0}),f.type==="GET"||u.emulateJSON||(f.processData=!1),f.type!=="PATCH"||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}),s=u.xhr=t.ajax(n.extend(f,u)),r.trigger("request",r,s,u),s};d={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var g=t.Router=function(n){n||(n={});n.routes&&(this.routes=n.routes);this._bindRoutes();this.initialize.apply(this,arguments)},ht=/\((.*?)\)/g,ct=/(\(\?)?:\w+/g,lt=/\*\w+/g,at=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(g.prototype,i,{initialize:function(){},route:function(i,r,u){n.isRegExp(i)||(i=this._routeToRegExp(i));n.isFunction(r)&&(u=r,r="");u||(u=this[r]);var f=this;return t.history.route(i,function(n){var e=f._extractParameters(i,n);u&&u.apply(f,e);f.trigger.apply(f,["route:"+r].concat(e));f.trigger("route",r,e);t.history.trigger("route",f,r,e)}),this},navigate:function(n,i){return t.history.navigate(n,i),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,i=n.keys(this.routes);(t=i.pop())!=null;)this.route(t,this.routes[t])}},_routeToRegExp:function(n){return n=n.replace(at,"\\$&").replace(ht,"(?:$1)?").replace(ct,function(n,t){return t?n:"([^/]+)"}).replace(lt,"(.*?)"),new RegExp("^"+n+"$")},_extractParameters:function(t,i){var r=t.exec(i).slice(1);return n.map(r,function(n){return n?decodeURIComponent(n):null})}});var u=t.History=function(){this.handlers=[];n.bindAll(this,"checkUrl");typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},nt=/^[#\/]|\s+$/g,vt=/^\/+|\/+$/g,yt=/msie [\w.]+/,pt=/\/$/;u.started=!1;n.extend(u.prototype,i,{interval:50,getHash:function(n){var t=(n||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(n,t){if(n==null)if(this._hasPushState||!this._wantsHashChange||t){n=this.location.pathname;var i=this.root.replace(pt,"");n.indexOf(i)||(n=n.substr(i.length))}else n=this.getHash();return n.replace(nt,"")},start:function(i){var r,f;if(u.started)throw new Error("Backbone.history has already been started");u.started=!0;this.options=n.extend({},{root:"/"},this.options,i);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==!1;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),o=document.documentMode,s=yt.exec(navigator.userAgent.toLowerCase())&&(!o||o<=7);if(this.root=("/"+this.root+"/").replace(vt,"/"),s&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState)t.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!s)t.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));return(this.fragment=e,r=this.location,f=r.pathname.replace(/[^\/]$/,"$&/")===this.root,this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!f)?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&f&&r.hash&&(this.fragment=this.getHash().replace(nt,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);u.started=!1},route:function(n,t){this.handlers.unshift({route:n,callback:t})},checkUrl:function(){var n=this.getFragment();if(n===this.fragment&&this.iframe&&(n=this.getFragment(this.getHash(this.iframe))),n===this.fragment)return!1;this.iframe&&this.navigate(n);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(t){var i=this.fragment=this.getFragment(t);return n.any(this.handlers,function(n){if(n.route.test(i))return n.callback(i),!0})},navigate:function(n,t){if(!u.started)return!1;if(t&&t!==!0||(t={trigger:t}),n=this.getFragment(n||""),this.fragment!==n){this.fragment=n;var i=this.root+n;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else if(this._wantsHashChange)this._updateHash(this.location,n,t.replace),this.iframe&&n!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,t.replace));else return this.location.assign(i);t.trigger&&this.loadUrl(n)}},_updateHash:function(n,t,i){if(i){var r=n.href.replace(/(javascript:|#).*$/,"");n.replace(r+"#"+t)}else n.hash="#"+t}});t.history=new u;tt=function(t,i){var u=this,r,f;return r=t&&n.has(t,"constructor")?t.constructor:function(){return u.apply(this,arguments)},n.extend(r,u,i),f=function(){this.constructor=r},f.prototype=u.prototype,r.prototype=new f,t&&n.extend(r.prototype,t),r.__super__=u.prototype,r};f.extend=s.extend=g.extend=k.extend=u.extend=tt;l=function(){throw new Error('A "url" property or function must be specified');};e=function(n,t){var i=t.error;t.error=function(r){i&&i(n,r,t);n.trigger("error",n,r,t)}}}.call(this);
/*!
  backgrid 0.3.5
  http://github.com/wyuenho/backgrid
  Copyright (c) 2014 Jimmy Yuen Ho Wong and contributors <wyuenho@gmail.com>
  Licensed under the MIT license.
*/
(function(n,t){typeof define=="function"&&define.amd?define(["underscore","backbone"],function(i,r){return n.Backgrid=t(i,r)}):typeof exports=="object"?module.exports=t(require("underscore"),require("backbone")):n.Backgrid=t(n._,n.Backbone)})(this,function(n,t){"use strict";function r(n,t,i){var r=t-(n+"").length,u,f;for(r=r<0?0:r,u="",f=0;f<r;f++)u=u+i;return u+n}var s="\t\n\x0b\f\r   ᠎             　\u2028\u2029﻿",g,nt,l,i,f,e,u,a,h,v,y,p;(!String.prototype.trim||s.trim())&&(s="["+s+"]",g=new RegExp("^"+s+s+"*"),nt=new RegExp(s+s+"*$"),String.prototype.trim=function(){if(this===undefined||this===null)throw new TypeError("can't convert "+this+" to object");return String(this).replace(g,"").replace(nt,"")});l=t.$;i={Extension:{},resolveNameToClass:function(t,r){if(n.isString(t)){var u=n.map(t.split("-"),function(n){return n.slice(0,1).toUpperCase()+n.slice(1)}).join("")+r,f=i[u]||i.Extension[u];if(n.isUndefined(f))throw new ReferenceError("Class '"+u+"' not found");return f}return t},callByNeed:function(){var t=arguments[0],r,i;return n.isFunction(t)?(r=arguments[1],i=[].slice.call(arguments,2),t.apply(r,!(i+"")?[]:i)):t}};n.extend(i,t.Events);f=i.Command=function(t){n.extend(this,{altKey:!!t.altKey,char:t.char,charCode:t.charCode,ctrlKey:!!t.ctrlKey,key:t.key,keyCode:t.keyCode,locale:t.locale,location:t.location,metaKey:!!t.metaKey,repeat:!!t.repeat,shiftKey:!!t.shiftKey,which:t.which})};n.extend(f.prototype,{moveUp:function(){return this.keyCode==38},moveDown:function(){return this.keyCode===40},moveLeft:function(){return this.shiftKey&&this.keyCode===9},moveRight:function(){return!this.shiftKey&&this.keyCode===9},save:function(){return this.keyCode===13},cancel:function(){return this.keyCode===27},passThru:function(){return!(this.moveUp()||this.moveDown()||this.moveLeft()||this.moveRight()||this.save()||this.cancel())}});e=i.CellFormatter=function(){};n.extend(e.prototype,{fromRaw:function(n){return n},toRaw:function(n){return n}});u=i.NumberFormatter=function(t){if(n.extend(this,this.defaults,t||{}),this.decimals<0||this.decimals>20)throw new RangeError("decimals must be between 0 and 20");};u.prototype=new e;n.extend(u.prototype,{defaults:{decimals:2,decimalSeparator:".",orderSeparator:","},HUMANIZED_NUM_RE:/(\d)(?=(?:\d{3})+$)/g,fromRaw:function(t){if(n.isNull(t)||n.isUndefined(t))return"";t=t.toFixed(~~this.decimals);var i=t.split("."),r=i[0],u=i[1]?(this.decimalSeparator||".")+i[1]:"";return r.replace(this.HUMANIZED_NUM_RE,"$1"+this.orderSeparator)+u},toRaw:function(t){var i,f,e,r,u;if(t=t.trim(),t==="")return null;for(i="",f=t.split(this.orderSeparator),r=0;r<f.length;r++)i+=f[r];for(e=i.split(this.decimalSeparator),i="",r=0;r<e.length;r++)i=i+e[r]+".";return i[i.length-1]==="."&&(i=i.slice(0,i.length-1)),u=(i*1).toFixed(~~this.decimals)*1,n.isNumber(u)&&!n.isNaN(u)?u:void 0}});a=i.PercentFormatter=function(){i.NumberFormatter.apply(this,arguments)};a.prototype=new i.NumberFormatter;n.extend(a.prototype,{defaults:n.extend({},u.prototype.defaults,{multiplier:1,symbol:"%"}),fromRaw:function(n){var t=[].slice.call(arguments,1);return t.unshift(n*this.multiplier),(u.prototype.fromRaw.apply(this,t)||"0")+this.symbol},toRaw:function(t){var i=t.split(this.symbol),r;if(i&&i[0]&&i[1]===""||i[1]==null)return(r=u.prototype.toRaw.call(this,i[0]),n.isUndefined(r))?r:r/this.multiplier}});h=i.DatetimeFormatter=function(t){if(n.extend(this,this.defaults,t||{}),!this.includeDate&&!this.includeTime)throw new Error("Either includeDate or includeTime must be true");};h.prototype=new e;n.extend(h.prototype,{defaults:{includeDate:!0,includeTime:!0,includeMilli:!1},DATE_RE:/^([+\-]?\d{4})-(\d{2})-(\d{2})$/,TIME_RE:/^(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?$/,ISO_SPLITTER_RE:/T|Z| +/,_convert:function(t,i){var s,h,e,c,o,u,f;if((t+"").trim()==="")return null;if(h=null,n.isNumber(t)?(u=new Date(t),s=r(u.getUTCFullYear(),4,0)+"-"+r(u.getUTCMonth()+1,2,0)+"-"+r(u.getUTCDate(),2,0),h=r(u.getUTCHours(),2,0)+":"+r(u.getUTCMinutes(),2,0)+":"+r(u.getUTCSeconds(),2,0)):(t=t.trim(),e=t.split(this.ISO_SPLITTER_RE)||[],s=this.DATE_RE.test(e[0])?e[0]:"",h=s&&e[1]?e[1]:this.TIME_RE.test(e[0])?e[0]:""),c=this.DATE_RE.exec(s)||[],o=this.TIME_RE.exec(h)||[],i){if(this.includeDate&&n.isUndefined(c[0]))return;if(this.includeTime&&n.isUndefined(o[0]))return;if(!this.includeDate&&s)return;if(!this.includeTime&&h)return}return u=new Date(Date.UTC(c[1]*1||0,c[2]*1-1||0,c[3]*1||0,o[1]*1||null,o[2]*1||null,o[3]*1||null,o[5]*1||null)),f="",this.includeDate&&(f=r(u.getUTCFullYear(),4,0)+"-"+r(u.getUTCMonth()+1,2,0)+"-"+r(u.getUTCDate(),2,0)),this.includeTime&&(f=f+(this.includeDate?"T":"")+r(u.getUTCHours(),2,0)+":"+r(u.getUTCMinutes(),2,0)+":"+r(u.getUTCSeconds(),2,0),this.includeMilli&&(f=f+"."+r(u.getUTCMilliseconds(),3,0))),this.includeDate&&this.includeTime&&(f+="Z"),f},fromRaw:function(t){return n.isNull(t)||n.isUndefined(t)?"":this._convert(t)},toRaw:function(n){return this._convert(n,!0)}});v=i.StringFormatter=function(){};v.prototype=new e;n.extend(v.prototype,{fromRaw:function(t){return n.isUndefined(t)||n.isNull(t)?"":t+""}});y=i.EmailFormatter=function(){};y.prototype=new e;n.extend(y.prototype,{toRaw:function(t){var i=t.trim().split("@");if(i.length===2&&n.all(i))return t}});p=i.SelectFormatter=function(){};p.prototype=new e;n.extend(p.prototype,{fromRaw:function(t){return n.isArray(t)?t:t!=null?[t]:[]}});var b=i.CellEditor=t.View.extend({initialize:function(n){this.formatter=n.formatter;this.column=n.column;this.column instanceof o||(this.column=new o(this.column));this.listenTo(this.model,"backgrid:editing",this.postRender)},postRender:function(n,t){return(t==null||t.get("name")==this.column.get("name"))&&this.$el.focus(),this}}),tt=i.InputCellEditor=b.extend({tagName:"input",attributes:{type:"text"},events:{blur:"saveOrCancel",keydown:"saveOrCancel"},initialize:function(n){tt.__super__.initialize.apply(this,arguments);n.placeholder&&this.$el.attr("placeholder",n.placeholder)},render:function(){var n=this.model;return this.$el.val(this.formatter.fromRaw(n.get(this.column.get("name")),n)),this},saveOrCancel:function(t){var s=this.formatter,i=this.model,u=this.column,r=new f(t),h=t.type==="blur",e,o;r.moveUp()||r.moveDown()||r.moveLeft()||r.moveRight()||r.save()||h?(t.preventDefault(),t.stopPropagation(),e=this.$el.val(),o=s.toRaw(e,i),n.isUndefined(o)?i.trigger("backgrid:error",i,u,e):(i.set(u.get("name"),o),i.trigger("backgrid:edited",i,u,r))):r.cancel()&&(t.stopPropagation(),i.trigger("backgrid:edited",i,u,r))},postRender:function(n,t){if(t==null||t.get("name")==this.column.get("name"))if(this.$el.css("text-align")==="right"){var i=this.$el.val();this.$el.focus().val(null).val(i)}else this.$el.focus();return this}}),c=i.Cell=t.View.extend({tagName:"td",formatter:e,editor:tt,events:{click:"enterEditMode"},initialize:function(t){this.column=t.column;this.column instanceof o||(this.column=new o(this.column));var r=this.column,u=this.model,f=this.$el,e=i.resolveNameToClass(r.get("formatter")||this.formatter,"Formatter");n.isFunction(e.fromRaw)||n.isFunction(e.toRaw)||(e=new e);this.formatter=e;this.editor=i.resolveNameToClass(this.editor,"CellEditor");this.listenTo(u,"change:"+r.get("name"),function(){f.hasClass("editor")||this.render()});this.listenTo(u,"backgrid:error",this.renderError);this.listenTo(r,"change:editable change:sortable change:renderable",function(n){var t=n.changedAttributes();for(var i in t)t.hasOwnProperty(i)&&f.toggleClass(i,t[i])});i.callByNeed(r.editable(),r,u)&&f.addClass("editable");i.callByNeed(r.sortable(),r,u)&&f.addClass("sortable");i.callByNeed(r.renderable(),r,u)&&f.addClass("renderable")},render:function(){this.$el.empty();var n=this.model;return this.$el.text(this.formatter.fromRaw(n.get(this.column.get("name")),n)),this.delegateEvents(),this},enterEditMode:function(){var n=this.model,t=this.column,r=i.callByNeed(t.editable(),t,n);r&&(this.currentEditor=new this.editor({column:this.column,model:this.model,formatter:this.formatter}),n.trigger("backgrid:edit",n,t,this,this.currentEditor),this.undelegateEvents(),this.$el.empty(),this.$el.append(this.currentEditor.$el),this.currentEditor.render(),this.$el.addClass("editor"),n.trigger("backgrid:editing",n,t,this,this.currentEditor))},renderError:function(n,t){(t==null||t.get("name")==this.column.get("name"))&&this.$el.addClass("error")},exitEditMode:function(){this.$el.removeClass("error");this.currentEditor.remove();this.stopListening(this.currentEditor);delete this.currentEditor;this.$el.removeClass("editor");this.render()},remove:function(){return this.currentEditor&&(this.currentEditor.remove.apply(this.currentEditor,arguments),delete this.currentEditor),c.__super__.remove.apply(this,arguments)}}),rt=i.StringCell=c.extend({className:"string-cell",formatter:v}),ut=i.UriCell=c.extend({className:"uri-cell",title:null,target:"_blank",initialize:function(n){ut.__super__.initialize.apply(this,arguments);this.title=n.title||this.title;this.target=n.target||this.target},render:function(){this.$el.empty();var n=this.model.get(this.column.get("name")),t=this.formatter.fromRaw(n,this.model);return this.$el.append(l("<a>",{tabIndex:-1,href:n,title:this.title||t,target:this.target}).text(t)),this.delegateEvents(),this}}),yt=i.EmailCell=rt.extend({className:"email-cell",formatter:y,render:function(){this.$el.empty();var t=this.model,n=this.formatter.fromRaw(t.get(this.column.get("name")),t);return this.$el.append(l("<a>",{tabIndex:-1,href:"mailto:"+n,title:n}).text(n)),this.delegateEvents(),this}}),k=i.NumberCell=c.extend({className:"number-cell",decimals:u.prototype.defaults.decimals,decimalSeparator:u.prototype.defaults.decimalSeparator,orderSeparator:u.prototype.defaults.orderSeparator,formatter:u,initialize:function(){k.__super__.initialize.apply(this,arguments);var n=this.formatter;n.decimals=this.decimals;n.decimalSeparator=this.decimalSeparator;n.orderSeparator=this.orderSeparator}}),pt=i.IntegerCell=k.extend({className:"integer-cell",decimals:0}),ft=i.PercentCell=k.extend({className:"percent-cell",multiplier:a.prototype.defaults.multiplier,symbol:a.prototype.defaults.symbol,formatter:a,initialize:function(){ft.__super__.initialize.apply(this,arguments);var n=this.formatter;n.multiplier=this.multiplier;n.symbol=this.symbol}}),d=i.DatetimeCell=c.extend({className:"datetime-cell",includeDate:h.prototype.defaults.includeDate,includeTime:h.prototype.defaults.includeTime,includeMilli:h.prototype.defaults.includeMilli,formatter:h,initialize:function(){var i,t;d.__super__.initialize.apply(this,arguments);i=this.formatter;i.includeDate=this.includeDate;i.includeTime=this.includeTime;i.includeMilli=this.includeMilli;t=this.includeDate?"YYYY-MM-DD":"";t+=this.includeDate&&this.includeTime?"T":"";t+=this.includeTime?"HH:mm:ss":"";t+=this.includeTime&&this.includeMilli?".SSS":"";this.editor=this.editor.extend({attributes:n.extend({},this.editor.prototype.attributes,this.editor.attributes,{placeholder:t})})}}),wt=i.DateCell=d.extend({className:"date-cell",includeTime:!1}),bt=i.TimeCell=d.extend({className:"time-cell",includeDate:!1}),et=i.BooleanCellEditor=b.extend({tagName:"input",attributes:{tabIndex:-1,type:"checkbox"},events:{mousedown:function(){this.mouseDown=!0},blur:"enterOrExitEditMode",mouseup:function(){this.mouseDown=!1},change:"saveOrCancel",keydown:"saveOrCancel"},render:function(){var n=this.model,t=this.formatter.fromRaw(n.get(this.column.get("name")),n);return this.$el.prop("checked",t),this},enterOrExitEditMode:function(n){if(!this.mouseDown){var t=this.model;t.trigger("backgrid:edited",t,this.column,new f(n))}},saveOrCancel:function(n){var i=this.model,r=this.column,o=this.formatter,t=new f(n),u,e;if(t.passThru()&&n.type!="change")return!0;t.cancel()&&(n.stopPropagation(),i.trigger("backgrid:edited",i,r,t));u=this.$el;t.save()||t.moveLeft()||t.moveRight()||t.moveUp()||t.moveDown()?(n.preventDefault(),n.stopPropagation(),e=o.toRaw(u.prop("checked"),i),i.set(r.get("name"),e),i.trigger("backgrid:edited",i,r,t)):n.type=="change"&&(e=o.toRaw(u.prop("checked"),i),i.set(r.get("name"),e),u.focus())}}),kt=i.BooleanCell=c.extend({className:"boolean-cell",editor:et,events:{click:"enterEditMode"},render:function(){this.$el.empty();var n=this.model,t=this.column,r=i.callByNeed(t.editable(),t,n);return this.$el.append(l("<input>",{tabIndex:-1,type:"checkbox",checked:this.formatter.fromRaw(n.get(t.get("name")),n),disabled:!r})),this.delegateEvents(),this}}),ot=i.SelectCellEditor=b.extend({tagName:"select",events:{change:"save",blur:"close",keydown:"close"},template:n.template('<option value="<%- value %>" <%= selected ? \'selected="selected"\' : "" %>><%- text %><\/option>',null,{variable:null}),setOptionValues:function(t){this.optionValues=t;this.optionValues=n.result(this,"optionValues")},setMultiple:function(n){this.multiple=n;this.$el.prop("multiple",n)},_renderOptions:function(t,i){for(var u="",r=0;r<t.length;r++)u=u+this.template({text:t[r][0],value:t[r][1],selected:n.indexOf(i,t[r][1])>-1});return u},render:function(){var i,t;this.$el.empty();var r=n.result(this,"optionValues"),f=this.model,e=this.formatter.fromRaw(f.get(this.column.get("name")),f);if(!n.isArray(r))throw new TypeError("optionValues must be an array");var t=null,o=null,t=null,s=null,u=null;for(i=0;i<r.length;i++)if(t=r[i],n.isArray(t))o=t[0],t=t[1],this.$el.append(this.template({text:o,value:t,selected:n.indexOf(e,t)>-1}));else if(n.isObject(t))s=t.name,u=l("<optgroup><\/optgroup>",{label:s}),u.append(this._renderOptions.call(this,t.values,e)),this.$el.append(u);else throw new TypeError("optionValues elements must be a name-value pair or an object hash of { name: 'optgroup label', value: [option name-value pairs] }");return this.delegateEvents(),this},save:function(){var n=this.model,t=this.column;n.set(t.get("name"),this.formatter.toRaw(this.$el.val(),n))},close:function(n){var i=this.model,r=this.column,t=new f(n);t.cancel()?(n.stopPropagation(),i.trigger("backgrid:edited",i,r,new f(n))):(t.save()||t.moveLeft()||t.moveRight()||t.moveUp()||t.moveDown()||n.type=="blur")&&(n.preventDefault(),n.stopPropagation(),this.save(n),i.trigger("backgrid:edited",i,r,new f(n)))}}),st=i.SelectCell=c.extend({className:"select-cell",editor:ot,multiple:!1,formatter:p,optionValues:undefined,delimiter:", ",initialize:function(){st.__super__.initialize.apply(this,arguments);this.listenTo(this.model,"backgrid:edit",function(n,t,i,r){t.get("name")==this.column.get("name")&&(r.setOptionValues(this.optionValues),r.setMultiple(this.multiple))})},render:function(){var r,o,u,a,t,s,f,h;this.$el.empty();var i=n.result(this,"optionValues"),c=this.model,l=this.formatter.fromRaw(c.get(this.column.get("name")),c),e=[];try{if(!n.isArray(i)||n.isEmpty(i))throw new TypeError;for(r=0;r<l.length;r++)for(o=l[r],u=0;u<i.length;u++)if(t=i[u],n.isArray(t))a=t[0],t=t[1],t==o&&e.push(a);else if(n.isObject(t))for(s=t.values,f=0;f<s.length;f++)h=s[f],h[1]==o&&e.push(h[0]);else throw new TypeError;this.$el.append(e.join(this.delimiter))}catch(v){if(v instanceof TypeError)throw new TypeError("'optionValues' must be of type {Array.<Array>|Array.<{name: string, values: Array.<Array>}>}");throw v;}return this.delegateEvents(),this}}),o=i.Column=t.Model.extend({defaults:{name:undefined,label:undefined,sortable:!0,editable:!0,renderable:!0,formatter:undefined,sortType:"cycle",sortValue:undefined,direction:null,cell:undefined,headerCell:undefined},initialize:function(){this.has("label")||this.set({label:this.get("name")},{silent:!0});var n=i.resolveNameToClass(this.get("headerCell"),"HeaderCell"),t=i.resolveNameToClass(this.get("cell"),"Cell");this.set({cell:t,headerCell:n},{silent:!0})},sortValue:function(){var t=this.get("sortValue");return n.isString(t)?this[t]:n.isFunction(t)?t:function(n,t){return n.get(t)}}});n.each(["sortable","renderable","editable"],function(t){o.prototype[t]=function(){var i=this.get(t);return n.isString(i)?this[i]:n.isFunction(i)?i:!!i}});var w=i.Columns=t.Collection.extend({model:o}),ht=i.Row=t.View.extend({tagName:"tr",initialize:function(n){var i=this.columns=n.columns,r,u;for(i instanceof t.Collection||(i=this.columns=new w(i)),r=this.cells=[],u=0;u<i.length;u++)r.push(this.makeCell(i.at(u),n));this.listenTo(i,"add",function(t,i){var u=i.indexOf(t),f=this.makeCell(t,n),e;r.splice(u,0,f);e=this.$el;u===0?e.prepend(f.render().$el):u===i.length-1?e.append(f.render().$el):e.children().eq(u).before(f.render().$el)});this.listenTo(i,"remove",function(n,t,i){r[i.index].remove();r.splice(i.index,1)})},makeCell:function(n){return new(n.get("cell"))({column:n,model:this.model})},render:function(){var t,n;for(this.$el.empty(),t=document.createDocumentFragment(),n=0;n<this.cells.length;n++)t.appendChild(this.cells[n].render().el);return this.el.appendChild(t),this.delegateEvents(),this},remove:function(){for(var i,n=0;n<this.cells.length;n++)i=this.cells[n],i.remove.apply(i,arguments);return t.View.prototype.remove.apply(this,arguments)}}),it=i.EmptyRow=t.View.extend({tagName:"tr",emptyText:null,initialize:function(n){this.emptyText=n.emptyText;this.columns=n.columns},render:function(){this.$el.empty();var t=document.createElement("td");return t.setAttribute("colspan",this.columns.length),t.appendChild(document.createTextNode(n.result(this,"emptyText"))),this.el.className="empty",this.el.appendChild(t),this}}),ct=i.HeaderCell=t.View.extend({tagName:"th",events:{"click a":"onClick"},initialize:function(n){this.column=n.column;this.column instanceof o||(this.column=new o(this.column));var t=this.column,r=this.collection,u=this.$el;this.listenTo(t,"change:editable change:sortable change:renderable",function(n){var t=n.changedAttributes();for(var i in t)t.hasOwnProperty(i)&&u.toggleClass(i,t[i])});this.listenTo(t,"change:direction",this.setCellDirection);this.listenTo(t,"change:name change:label",this.render);i.callByNeed(t.editable(),t,r)&&u.addClass("editable");i.callByNeed(t.sortable(),t,r)&&u.addClass("sortable");i.callByNeed(t.renderable(),t,r)&&u.addClass("renderable");this.listenTo(r.fullCollection||r,"sort",this.removeCellDirection)},removeCellDirection:function(){this.$el.removeClass("ascending").removeClass("descending");this.column.set("direction",null)},setCellDirection:function(n,t){this.$el.removeClass("ascending").removeClass("descending");n.cid==this.column.cid&&this.$el.addClass(t)},onClick:function(n){function o(n,i){t.get("direction")==="ascending"?r.trigger(u,i,"descending"):t.get("direction")==="descending"?r.trigger(u,i,null):r.trigger(u,i,"ascending")}function s(n,i){t.get("direction")==="ascending"?r.trigger(u,i,"descending"):r.trigger(u,i,"ascending")}var f,e;n.preventDefault();var t=this.column,r=this.collection,u="backgrid:sort";f=i.callByNeed(t.sortable(),t,this.collection);f&&(e=t.get("sortType"),e==="toggle"?s(this,t):o(this,t))},render:function(){this.$el.empty();var n=this.column,r=i.callByNeed(n.sortable(),n,this.collection),t;return t=r?l("<a>").text(n.get("label")).append("<b class='sort-caret'><\/b>"):document.createTextNode(n.get("label")),this.$el.append(t),this.$el.addClass(n.get("name")),this.$el.addClass(n.get("direction")),this.delegateEvents(),this}}),dt=i.HeaderRow=i.Row.extend({initialize:function(){i.Row.prototype.initialize.apply(this,arguments)},makeCell:function(n,t){var i=n.get("headerCell")||t.headerCell||ct;return new i({column:n,collection:this.collection})}}),lt=i.Header=t.View.extend({tagName:"thead",initialize:function(n){this.columns=n.columns;this.columns instanceof t.Collection||(this.columns=new w(this.columns));this.row=new i.HeaderRow({columns:this.columns,collection:this.collection})},render:function(){return this.$el.append(this.row.render().$el),this.delegateEvents(),this},remove:function(){return this.row.remove.apply(this.row,arguments),t.View.prototype.remove.apply(this,arguments)}}),at=i.Body=t.View.extend({tagName:"tbody",initialize:function(n){this.columns=n.columns;this.columns instanceof t.Collection||(this.columns=new w(this.columns));this.row=n.row||ht;this.rows=this.collection.map(function(n){return new this.row({columns:this.columns,model:n})},this);this.emptyText=n.emptyText;this._unshiftEmptyRowMayBe();var i=this.collection;this.listenTo(i,"add",this.insertRow);this.listenTo(i,"remove",this.removeRow);this.listenTo(i,"sort",this.refresh);this.listenTo(i,"reset",this.refresh);this.listenTo(i,"backgrid:sort",this.sort);this.listenTo(i,"backgrid:edited",this.moveToNextCell)},_unshiftEmptyRowMayBe:function(){if(this.rows.length===0&&this.emptyText!=null)return this.rows.unshift(new it({emptyText:this.emptyText,columns:this.columns})),!0},insertRow:function(n,i,r){var f,u;if(this.rows[0]instanceof it&&this.rows.pop().remove(),!(i instanceof t.Collection)&&!r){this.collection.add(n,r=i);return}f=new this.row({columns:this.columns,model:n});u=i.indexOf(n);this.rows.splice(u,0,f);var e=this.$el,o=e.children(),s=f.render().$el;return u>=o.length?e.append(s):o.eq(u).before(s),this},removeRow:function(t,i,r){if(!r){this.collection.remove(t,r=i);this._unshiftEmptyRowMayBe()&&this.render();return}return(n.isUndefined(r.render)||r.render)&&this.rows[r.index].remove(),this.rows.splice(r.index,1),this._unshiftEmptyRowMayBe()&&this.render(),this},refresh:function(){for(var n=0;n<this.rows.length;n++)this.rows[n].remove();return this.rows=this.collection.map(function(n){return new this.row({columns:this.columns,model:n})},this),this._unshiftEmptyRowMayBe(),this.render(),this.collection.trigger("backgrid:refresh",this),this},render:function(){var t,n,i;for(this.$el.empty(),t=document.createDocumentFragment(),n=0;n<this.rows.length;n++)i=this.rows[n],t.appendChild(i.render().el);return this.el.appendChild(t),this.delegateEvents(),this},remove:function(){for(var i,n=0;n<this.rows.length;n++)i=this.rows[n],i.remove.apply(i,arguments);return t.View.prototype.remove.apply(this,arguments)},sort:function(i,r){var u,f,e;if(!n.contains(["ascending","descending",null],r))throw new RangeError('direction must be one of "ascending", "descending" or `null`');return n.isString(i)&&(i=this.columns.findWhere({name:i})),u=this.collection,f=r==="ascending"?-1:r==="descending"?1:null,e=this.makeComparator(i.get("name"),f,f?i.sortValue():function(n){return n.cid.replace("c","")*1}),t.PageableCollection&&u instanceof t.PageableCollection?(u.setSorting(f&&i.get("name"),f,{sortValue:i.sortValue()}),u.fullCollection?(u.fullCollection.comparator==null&&(u.fullCollection.comparator=e),u.fullCollection.sort(),u.trigger("backgrid:sorted",i,r,u)):u.fetch({reset:!0,success:function(){u.trigger("backgrid:sorted",i,r,u)}})):(u.comparator=e,u.sort(),u.trigger("backgrid:sorted",i,r,u)),i.set("direction",r),this},makeComparator:function(n,t,i){return function(r,u){var f=i(r,n),e=i(u,n),o;return(t===1&&(o=f,f=e,e=o),f===e)?0:f<e?-1:1}},moveToNextCell:function(n,t,r){var h=this.collection.indexOf(n),s=this.columns.indexOf(t),u,y,p,e,c,o,l,a,v,f;if(s===-1)return this;if(this.rows[h].cells[s].exitEditMode(),r.moveUp()||r.moveDown()||r.moveLeft()||r.moveRight()||r.save())if(o=this.columns.length,l=o*this.collection.length,r.moveUp()||r.moveDown())e=h+(r.moveUp()?-1:1),a=this.rows[e],a?(u=a.cells[s],i.callByNeed(u.column.editable(),u.column,n)&&(u.enterEditMode(),n.trigger("backgrid:next",e,s,!1))):n.trigger("backgrid:next",e,s,!0);else if(r.moveLeft()||r.moveRight()){for(v=r.moveRight(),f=h*o+s+(v?1:-1);f>=0&&f<l;v?f++:f--)if(e=~~(f/o),c=f-e*o,u=this.rows[e].cells[c],y=i.callByNeed(u.column.renderable(),u.column,u.model),p=i.callByNeed(u.column.editable(),u.column,n),y&&p){u.enterEditMode();n.trigger("backgrid:next",e,c,!1);break}f==l&&n.trigger("backgrid:next",~~(f/o),f-e*o,!0)}return this}}),gt=i.Footer=t.View.extend({tagName:"tfoot",initialize:function(n){this.columns=n.columns;this.columns instanceof t.Collection||(this.columns=new i.Columns(this.columns))}}),ni=i.Grid=t.View.extend({tagName:"table",className:"backgrid",header:lt,body:at,footer:null,initialize:function(i){i.columns instanceof t.Collection||(i.columns=new w(i.columns||this.columns));this.columns=i.columns;var r=n.omit(i,["el","id","attributes","className","tagName","events"]);this.body=i.body||this.body;this.body=new this.body(r);this.header=i.header||this.header;this.header&&(this.header=new this.header(r));this.footer=i.footer||this.footer;this.footer&&(this.footer=new this.footer(r));this.listenTo(this.columns,"reset",function(){this.header&&(this.header=new(this.header.remove().constructor)(r));this.body=new(this.body.remove().constructor)(r);this.footer&&(this.footer=new(this.footer.remove().constructor)(r));this.render()})},insertRow:function(){return this.body.insertRow.apply(this.body,arguments),this},removeRow:function(){return this.body.removeRow.apply(this.body,arguments),this},insertColumn:function(){return this.columns.add.apply(this.columns,arguments),this},removeColumn:function(){return this.columns.remove.apply(this.columns,arguments),this},sort:function(){return this.body.sort.apply(this.body,arguments),this},render:function(){return this.$el.empty(),this.header&&this.$el.append(this.header.render().$el),this.footer&&this.$el.append(this.footer.render().$el),this.$el.append(this.body.render().$el),this.delegateEvents(),this.trigger("backgrid:rendered",this),this},remove:function(){return this.header&&this.header.remove.apply(this.header,arguments),this.body.remove.apply(this.body,arguments),this.footer&&this.footer.remove.apply(this.footer,arguments),t.View.prototype.remove.apply(this,arguments)}});return i});
/*
  backgrid-moment-cell
  http://github.com/wyuenho/backgrid
  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/
(function(n,t){typeof define=="function"&&define.amd?define(["underscore","backgrid","moment"],t):typeof exports=="object"?module.exports=t(require("underscore"),require("backgrid"),require("moment")):t(n._,n.Backgrid,n.moment)})(this,function(n,t,i){var r=t.Extension.MomentFormatter=function(t){n.extend(this,this.defaults,t)},u;r.prototype=new t.CellFormatter;n.extend(r.prototype,{defaults:{modelInUnixOffset:!1,modelInUnixTimestamp:!1,modelInUTC:!0,modelLang:i.locale(),modelFormat:i.defaultFormat,displayInUnixOffset:!1,displayInUnixTimestamp:!1,displayInUTC:!0,displayLang:i.locale(),displayFormat:i.defaultFormat},fromRaw:function(n){if(n==null)return"";var t=this.modelInUnixOffset?i(n):this.modelInUnixTimestamp?i.unix(n):this.modelInUTC?i.utc(n,this.modelFormat,this.modelLang):i(n,this.modelFormat,this.modelLang);return this.displayInUnixOffset?+t:this.displayInUnixTimestamp?t.unix():(this.displayLang&&t.lang(this.displayLang),this.displayInUTC?t.utc():t.local(),t.format(this.displayFormat))},toRaw:function(n){var t=this.displayInUnixOffset?i(+n):this.displayInUnixTimestamp?i.unix(+n):this.displayInUTC?i.utc(n,this.displayFormat,this.displayLang):i(n,this.displayFormat,this.displayLang);if(t&&t.isValid())return this.modelInUnixOffset?+t:this.modelInUnixTimestamp?t.unix():(this.modelLang&&t.lang(this.modelLang),this.modelInUTC?t.utc():t.local(),t.format(this.modelFormat))}});u=t.Extension.MomentCell=t.Cell.extend({editor:t.InputCellEditor,className:"moment-cell",formatter:r,initialize:function(t){u.__super__.initialize.apply(this,arguments);var i=r.prototype.defaults,f=n.keys(i),e=n.pick(this,f),o=n.pick(t,f);n.extend(this.formatter,i,e,o);this.editor=this.editor.extend({attributes:n.extend({},this.editor.prototype.attributes||this.editor.attributes||{},{placeholder:this.formatter.displayFormat})})}});n.extend(u.prototype,r.prototype.defaults)}),function(n,t,i,r){var e=t.document,k=n(e),h=n(t),d=Array.prototype,et=!0,yt=3e4,tt=!1,y=navigator.userAgent.toLowerCase(),ot=t.location.hash.replace(/#\//,""),nt=t.location.protocol,f=Math,c=function(){},pt=function(){return!1},o=function(){var n=3,t=e.createElement("div"),i=t.getElementsByTagName("i");do t.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->";while(i[0]);return n>4?n:e.documentMode||r}(),s=function(){return{html:e.documentElement,body:e.body,head:e.getElementsByTagName("head")[0],title:e.title}},g=t.parent!==t.self,wt="data ready thumbnail loadstart loadfinish image play pause progress fullscreen_enter fullscreen_exit idle_enter idle_exit rescale lightbox_open lightbox_close lightbox_image",st=function(){var t=[];return n.each(wt.split(" "),function(n,i){t.push(i);/_/.test(i)&&t.push(i.replace(/_/g,""))}),t}(),ht=function(t){var i;return typeof t!="object"?t:(n.each(t,function(r,u){/^[a-z]+_/.test(r)&&(i="",n.each(r.split("_"),function(n,t){i+=n>0?t.substr(0,1).toUpperCase()+t.substr(1):t}),t[i]=u,delete t[r])}),t)},it=function(t){return n.inArray(t,st)>-1?i[t.toUpperCase()]:t},v={youtube:{reg:/https?:\/\/(?:[a-zA_Z]{2,3}.)?(?:youtube\.com\/watch\?)((?:[\w\d\-\_\=]+&amp;(?:amp;)?)*v(?:&lt;[A-Z]+&gt;)?=([0-9a-zA-Z\-\_]+))/i,embed:function(){return"http://www.youtube.com/embed/"+this.id},getUrl:function(){return nt+"//gdata.youtube.com/feeds/api/videos/"+this.id+"?v=2&alt=json-in-script&callback=?"},get_thumb:function(n){return n.entry.media$group.media$thumbnail[2].url},get_image:function(n){return n.entry.yt$hd?nt+"//img.youtube.com/vi/"+this.id+"/maxresdefault.jpg":n.entry.media$group.media$thumbnail[3].url}},vimeo:{reg:/https?:\/\/(?:www\.)?(vimeo\.com)\/(?:hd#)?([0-9]+)/i,embed:function(){return"http://player.vimeo.com/video/"+this.id},getUrl:function(){return nt+"//vimeo.com/api/v2/video/"+this.id+".json?callback=?"},get_thumb:function(n){return n[0].thumbnail_medium},get_image:function(n){return n[0].thumbnail_large}},dailymotion:{reg:/https?:\/\/(?:www\.)?(dailymotion\.com)\/video\/([^_]+)/,embed:function(){return nt+"//www.dailymotion.com/embed/video/"+this.id},getUrl:function(){return"https://api.dailymotion.com/video/"+this.id+"?fields=thumbnail_240_url,thumbnail_720_url&callback=?"},get_thumb:function(n){return n.thumbnail_240_url},get_image:function(n){return n.thumbnail_720_url}},_inst:[]},ct=function(t,i){for(var u,r=0;r<v._inst.length;r++)if(v._inst[r].id===i&&v._inst[r].type==t)return v._inst[r];this.type=t;this.id=i;this.readys=[];v._inst.push(this);u=this;n.extend(this,v[t]);n.getJSON(this.getUrl(),function(t){u.data=t;n.each(u.readys,function(n,t){t(u.data)});u.readys=[]});this.getMedia=function(n,t,i){i=i||c;var r=this,u=function(i){t(r["get_"+n](i))};try{r.data?u(r.data):r.readys.push(u)}catch(f){i()}}},lt=function(n){var t;for(var i in v)if(t=n&&v[i].reg&&n.match(v[i].reg),t&&t.length)return{id:t[2],provider:i};return!1},l={support:function(){var n=s().html;return!g&&(n.requestFullscreen||n.msRequestFullscreen||n.mozRequestFullScreen||n.webkitRequestFullScreen)}(),callback:c,enter:function(n,t,i){this.instance=n;this.callback=t||c;i=i||s().html;i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen&&i.webkitRequestFullScreen()},exit:function(n){this.callback=n||c;e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen&&e.webkitCancelFullScreen()},instance:null,listen:function(){if(this.support){var n=function(){if(l.instance){var n=l.instance._fullscreen;e.fullscreen||e.mozFullScreen||e.webkitIsFullScreen||e.msFullscreenElement&&e.msFullscreenElement!==null?n._enter(l.callback):n._exit(l.callback)}};e.addEventListener("fullscreenchange",n,!1);e.addEventListener("MSFullscreenChange",n,!1);e.addEventListener("mozfullscreenchange",n,!1);e.addEventListener("webkitfullscreenchange",n,!1)}}},rt=[],w=[],at=!1,a=!1,vt=[],b=[],ut=function(t){b.push(t);n.each(vt,function(n,i){i._options.theme!=t.name&&(i._initialized||i._options.theme)||(i.theme=t,i._init.call(i))})},u=function(){return{clearTimer:function(t){n.each(i.get(),function(){this.clearTimer(t)})},addTimer:function(t){n.each(i.get(),function(){this.addTimer(t)})},array:function(n){return d.slice.call(n,0)},create:function(n,t){t=t||"div";var i=e.createElement(t);return i.className=n,i},removeFromArray:function(t,i){return n.each(t,function(n,r){if(r==i)return t.splice(n,1),!1}),t},getScriptPath:function(t){t=t||n("script:last").attr("src");var i=t.split("/");return i.length==1?"":(i.pop(),i.join("/")+"/")},animate:function(){var v=function(n){var r="transition WebkitTransition MozTransition OTransition".split(" "),i;if(t.opera)return!1;for(i=0;r[i];i++)if(typeof n[r[i]]!="undefined")return r[i];return!1}((e.body||e.documentElement).style),y={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[v],s={_default:[.25,.1,.25,1],galleria:[.645,.045,.355,1],galleriaIn:[.55,.085,.68,.53],galleriaOut:[.25,.46,.45,.94],ease:[.25,0,.25,1],linear:[.25,.25,.75,.75],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},f=function(t,i,r){var u={};r=r||"transition";n.each("webkit moz ms o".split(" "),function(){u["-"+this+"-"+r]=i});t.css(u)},p=function(n){f(n,"none","transition");i.WEBKIT&&i.TOUCH&&(f(n,"translate3d(0,0,0)","transform"),n.data("revert")&&(n.css(n.data("revert")),n.data("revert",null)))},h,o,w,b,l,r,a;return function(e,k,d){if(d=n.extend({duration:400,complete:c,stop:!1},d),e=n(e),!d.duration){e.css(k);d.complete.call(e[0]);return}if(!v){e.animate(k,d);return}if(d.stop&&(e.off(y),p(e)),h=!1,n.each(k,function(n,t){a=e.css(n);u.parseValue(a)!=u.parseValue(t)&&(h=!0);e.css(n,a)}),!h){t.setTimeout(function(){d.complete.call(e[0])},d.duration);return}o=[];w=d.easing in s?s[d.easing]:s._default;b=" "+d.duration+"ms cubic-bezier("+w.join(",")+")";t.setTimeout(function(t,e,s,h){return function(){t.one(e,function(n){return function(){p(n);d.complete.call(n[0])}}(t));i.WEBKIT&&i.TOUCH&&(l={},r=[0,0,0],n.each(["left","top"],function(n,i){i in s&&(r[n]=u.parseValue(s[i])-u.parseValue(t.css(i))+"px",l[i]=s[i],delete s[i])}),(r[0]||r[1])&&(t.data("revert",l),o.push("-webkit-transform"+h),f(t,"translate3d("+r.join(",")+")","transform")));n.each(s,function(n){o.push(n+h)});f(t,o.join(","));t.css(s)}}(e,y,k,b),2)}}(),removeAlpha:function(n){if(n instanceof jQuery&&(n=n[0]),o<9&&n){var t=n.style,i=n.currentStyle,r=i&&i.filter||t.filter||"";/alpha/.test(r)&&(t.filter=r.replace(/alpha\([^)]*\)/i,""))}},forceStyles:function(t,i){t=n(t);t.attr("style")&&t.data("styles",t.attr("style")).removeAttr("style");t.css(i)},revertStyles:function(){n.each(u.array(arguments),function(t,i){i=n(i);i.removeAttr("style");i.attr("style","");i.data("styles")&&i.attr("style",i.data("styles")).data("styles",null)})},moveOut:function(n){u.forceStyles(n,{position:"absolute",left:-1e4})},moveIn:function(){u.revertStyles.apply(u,u.array(arguments))},hide:function(t,i,r){var f,e,s;r=r||c;f=n(t);t=f[0];f.data("opacity")||f.data("opacity",f.css("opacity"));e={opacity:0};i?(s=o<9&&t?function(){u.removeAlpha(t);t.style.visibility="hidden";r.call(t)}:r,u.animate(t,e,{duration:i,complete:s,stop:!0})):o<9&&t?(u.removeAlpha(t),t.style.visibility="hidden"):f.css(e)},show:function(t,i,r){var f,s,e,h;r=r||c;f=n(t);t=f[0];s=parseFloat(f.data("opacity"))||1;e={opacity:s};i?(o<9&&(f.css("opacity",0),t.style.visibility="visible"),h=o<9&&t?function(){e.opacity==1&&u.removeAlpha(t);r.call(t)}:r,u.animate(t,e,{duration:i,complete:h,stop:!0})):o<9&&e.opacity==1&&t?(u.removeAlpha(t),t.style.visibility="visible"):f.css(e)},wait:function(r){i._waiters=i._waiters||[];r=n.extend({until:pt,success:c,error:function(){i.raise("Could not complete wait function.")},timeout:3e3},r);var o=u.timestamp(),s,f,e,h=function(){if(f=u.timestamp(),s=f-o,u.removeFromArray(i._waiters,e),r.until(s))return r.success(),!1;if(typeof r.timeout=="number"&&f>=o+r.timeout)return r.error(),!1;i._waiters.push(e=t.setTimeout(h,10))};i._waiters.push(e=t.setTimeout(h,10))},toggleQuality:function(n,t){(o===7||o===8)&&n&&n.nodeName.toUpperCase()=="IMG"&&(typeof t=="undefined"&&(t=n.style.msInterpolationMode==="nearest-neighbor"),n.style.msInterpolationMode=t?"bicubic":"nearest-neighbor")},insertStyleTag:function(t,i){var r,u;i&&n("#"+i).length||(r=e.createElement("style"),i&&(r.id=i),s().head.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:(u=e.createTextNode(t),r.appendChild(u)))},loadScript:function(t,i){var u=!1,r=n("<script>").attr({src:t,async:!0}).get(0);r.onload=r.onreadystatechange=function(){u||this.readyState&&this.readyState!=="loaded"&&this.readyState!=="complete"||(u=!0,r.onload=r.onreadystatechange=null,typeof i=="function"&&i.call(this,this))};s().head.appendChild(r)},parseValue:function(n){if(typeof n=="number")return n;if(typeof n=="string"){var t=n.match(/\-?\d|\./g);return t&&t.constructor===Array?t.join("")*1:0}return 0},timestamp:function(){return(new Date).getTime()},loadCSS:function(t,f,h){var l,y,a,v;if(n("link[rel=stylesheet]").each(function(){if(new RegExp(t).test(this.href))return l=this,!1}),typeof f=="function"&&(h=f,f=r),h=h||c,l)return h.call(l,l),l;if(y=e.styleSheets.length,n("#"+f).length)n("#"+f).attr("href",t),y--;else if(l=n("<link>").attr({rel:"stylesheet",href:t,id:f}).get(0),a=n('link[rel="stylesheet"], style'),a.length?a.get(0).parentNode.insertBefore(l,a[0]):s().head.appendChild(l),o&&y>=31){i.raise("You have reached the browser stylesheet limit (31)",!0);return}return typeof h=="function"&&(v=n("<s>").attr("id","galleria-loader").hide().appendTo(s().body),u.wait({until:function(){return v.height()==1},success:function(){v.remove();h.call(l,l)},error:function(){v.remove();i.raise("Theme CSS could not load after 20 sec. "+(i.QUIRK?"Your browser is in Quirks Mode, please add a correct doctype.":"Please download the latest theme at http://galleria.io/customer/."),!0)},timeout:5e3})),l}}}(),ft=function(t){return u.insertStyleTag(".galleria-videoicon{width:60px;height:60px;position:absolute;top:50%;left:50%;z-index:1;margin:-30px 0 0 -30px;cursor:pointer;background:#000;background:rgba(0,0,0,.8);border-radius:3px;-webkit-transition:all 150ms}.galleria-videoicon i{width:0px;height:0px;border-style:solid;border-width:10px 0 10px 16px;display:block;border-color:transparent transparent transparent #ffffff;margin:20px 0 0 22px}.galleria-image:hover .galleria-videoicon{background:#000}","galleria-videoicon"),n(u.create("galleria-videoicon")).html("<i><\/i>").appendTo(t).click(function(){n(this).siblings("img").mouseup()})},p=function(){var t=function(t,i,r,f){var s=this.getOptions("easing"),h=this.getStageWidth(),e={left:h*(t.rewind?-1:1)},o={left:0};r?(e.opacity=0,o.opacity=1):e.opacity=1;n(t.next).css(e);u.animate(t.next,o,{duration:t.speed,complete:function(n){return function(){i();n.css({left:0})}}(n(t.next).add(t.prev)),queue:!1,easing:s});f&&(t.rewind=!t.rewind);t.prev&&(e={left:0},o={left:h*(t.rewind?1:-1)},r&&(e.opacity=1,o.opacity=0),n(t.prev).css(e),u.animate(t.prev,o,{duration:t.speed,queue:!1,easing:s,complete:function(){n(this).css("opacity",0)}}))};return{active:!1,init:function(n,t,i){p.effects.hasOwnProperty(n)&&p.effects[n].call(this,t,i)},effects:{fade:function(t,i){n(t.next).css({opacity:0,left:0});u.animate(t.next,{opacity:1},{duration:t.speed,complete:i});t.prev&&(n(t.prev).css("opacity",1).show(),u.animate(t.prev,{opacity:0},{duration:t.speed}))},flash:function(t,i){n(t.next).css({opacity:0,left:0});t.prev?u.animate(t.prev,{opacity:0},{duration:t.speed/2,complete:function(){u.animate(t.next,{opacity:1},{duration:t.speed,complete:i})}}):u.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},pulse:function(t,i){t.prev&&n(t.prev).hide();n(t.next).css({opacity:0,left:0}).show();u.animate(t.next,{opacity:1},{duration:t.speed,complete:i})},slide:function(){t.apply(this,u.array(arguments))},fadeslide:function(){t.apply(this,u.array(arguments).concat([!0]))},doorslide:function(){t.apply(this,u.array(arguments).concat([!1,!0]))}}}}();l.listen();n.event.special["click:fast"]={propagate:!0,add:function(i){var u=function(n){if(n.touches&&n.touches.length){var t=n.touches[0];return{x:t.pageX,y:t.pageY}}},r={touched:!1,touchdown:!1,coords:{x:0,y:0},evObj:{}};n(this).data({clickstate:r,timer:0}).on("touchstart.fast",function(i){t.clearTimeout(n(this).data("timer"));n(this).data("clickstate",{touched:!0,touchdown:!0,coords:u(i.originalEvent),evObj:i})}).on("touchmove.fast",function(t){var r=u(t.originalEvent),i=n(this).data("clickstate"),f=Math.max(Math.abs(i.coords.x-r.x),Math.abs(i.coords.y-r.y));f>6&&n(this).data("clickstate",n.extend(i,{touchdown:!1}))}).on("touchend.fast",function(u){var f=n(this),e=f.data("clickstate");e.touchdown&&i.handler.call(this,u);f.data("timer",t.setTimeout(function(){f.data("clickstate",r)},400))}).on("click.fast",function(t){var u=n(this).data("clickstate");if(u.touched)return!1;n(this).data("clickstate",r);i.handler.call(this,t)})},remove:function(){n(this).off("touchstart.fast touchmove.fast touchend.fast click.fast")}};h.on("orientationchange",function(){n(this).resize()});i=function(){var c=this,it,rt;this._options={};this._playing=!1;this._playtime=5e3;this._active=null;this._queue={length:0};this._data=[];this._dom={};this._thumbnails=[];this._layers=[];this._initialized=!1;this._firstrun=!1;this._stageWidth=0;this._stageHeight=0;this._target=r;this._binds=[];this._id=parseInt(f.random()*1e4,10);it="container stage images image-nav image-nav-left image-nav-right info info-text info-title info-description thumbnails thumbnails-list thumbnails-container thumb-nav-left thumb-nav-right loader counter tooltip";rt="current total";n.each(it.split(" "),function(n,t){c._dom[t]=u.create("galleria-"+t)});n.each(rt.split(" "),function(n,t){c._dom[t]=u.create("galleria-"+t,"span")});var nt=this._keyboard={keys:{UP:38,DOWN:40,LEFT:37,RIGHT:39,RETURN:13,ESCAPE:27,BACKSPACE:8,SPACE:32},map:{},bound:!1,press:function(n){var t=n.keyCode||n.which;t in nt.map&&typeof nt.map[t]=="function"&&nt.map[t].call(c,n)},attach:function(n){var t,i;for(t in n)n.hasOwnProperty(t)&&(i=t.toUpperCase(),i in nt.keys?nt.map[nt.keys[i]]=n[t]:nt.map[i]=n[t]);if(!nt.bound){nt.bound=!0;k.on("keydown",nt.press)}},detach:function(){nt.bound=!1;nt.map={};k.off("keydown",nt.press)}},tt=this._controls={0:r,1:r,active:0,swap:function(){tt.active=tt.active?0:1},getActive:function(){return c._options.swipe?tt.slides[c._active]:tt[tt.active]},getNext:function(){return c._options.swipe?tt.slides[c.getNext(c._active)]:tt[1-tt.active]},slides:[],frames:[],layers:[]},v=this._carousel={next:c.$("thumb-nav-right"),prev:c.$("thumb-nav-left"),width:0,current:0,max:0,hooks:[],update:function(){var t=0,i=0,r=[0];n.each(c._thumbnails,function(u,e){if(e.ready){t+=e.outerWidth||n(e.container).outerWidth(!0);var o=n(e.container).width();t+=o-f.floor(o);r[u+1]=t;i=f.max(i,e.outerHeight||n(e.container).outerHeight(!0))}});c.$("thumbnails").css({width:t,height:i});v.max=t;v.hooks=r;v.width=c.$("thumbnails-list").width();v.setClasses();c.$("thumbnails-container").toggleClass("galleria-carousel",t>v.width);v.width=c.$("thumbnails-list").width()},bindControls:function(){var n;v.next.on("click:fast",function(t){if(t.preventDefault(),c._options.carouselSteps==="auto"){for(n=v.current;n<v.hooks.length;n++)if(v.hooks[n]-v.hooks[v.current]>v.width){v.set(n-2);break}}else v.set(v.current+c._options.carouselSteps)});v.prev.on("click:fast",function(t){if(t.preventDefault(),c._options.carouselSteps==="auto"){for(n=v.current;n>=0;n--)if(v.hooks[v.current]-v.hooks[n]>v.width){v.set(n+2);break}else if(n===0){v.set(0);break}}else v.set(v.current-c._options.carouselSteps)})},set:function(n){for(n=f.max(n,0);v.hooks[n-1]+v.width>=v.max&&n>=0;)n--;v.current=n;v.animate()},getLast:function(n){return(n||v.current)-1},follow:function(n){if(n===0||n===v.hooks.length-2){v.set(n);return}for(var t=v.current;v.hooks[t]-v.hooks[v.current]<v.width&&t<=v.hooks.length;)t++;n-1<v.current?v.set(n-1):n+2>t&&v.set(n-t+v.current+2)},setClasses:function(){v.prev.toggleClass("disabled",!v.current);v.next.toggleClass("disabled",v.hooks[v.current]+v.width>=v.max)},animate:function(){v.setClasses();var t=v.hooks[v.current]*-1;isNaN(t)||(c.$("thumbnails").css("left",function(){return n(this).css("left")}),u.animate(c.get("thumbnails"),{left:t},{duration:c._options.carouselSpeed,easing:c._options.easing,queue:!1}))}},d=this._tooltip={initialized:!1,open:!1,timer:"tooltip"+c._id,swapTimer:"swap"+c._id,init:function(){d.initialized=!0;u.insertStyleTag(".galleria-tooltip{padding:3px 8px;max-width:50%;background:#ffe;color:#000;z-index:3;position:absolute;font-size:11px;line-height:1.3;opacity:0;box-shadow:0 0 2px rgba(0,0,0,.4);-moz-box-shadow:0 0 2px rgba(0,0,0,.4);-webkit-box-shadow:0 0 2px rgba(0,0,0,.4);}","galleria-tooltip");c.$("tooltip").css({opacity:.8,visibility:"visible",display:"none"})},move:function(n){var s=c.getMousePosition(n).x,e=c.getMousePosition(n).y,r=c.$("tooltip"),i=s,t=e,u=r.outerHeight(!0)+1,h=r.outerWidth(!0),o=u+15,l=c.$("container").width()-h-2,a=c.$("container").height()-u-2;isNaN(i)||isNaN(t)||(i+=10,t-=u+8,i=f.max(0,f.min(l,i)),t=f.max(0,f.min(a,t)),e<o&&(t=o),r.css({left:i,top:t}))},bind:function(t,r){if(!i.TOUCH){d.initialized||d.init();var u=function(){c.$("container").off("mousemove",d.move);c.clearTimer(d.timer);c.$("tooltip").stop().animate({opacity:0},200,function(){c.$("tooltip").hide();c.addTimer(d.swapTimer,function(){d.open=!1},1e3)})},f=function(t,i){d.define(t,i);n(t).hover(function(){c.clearTimer(d.swapTimer);c.$("container").off("mousemove",d.move).on("mousemove",d.move).trigger("mousemove");d.show(t);c.addTimer(d.timer,function(){c.$("tooltip").stop().show().animate({opacity:1});d.open=!0},d.open?0:500)},u).click(u)};typeof r=="string"?f(t in c._dom?c.get(t):t,r):n.each(t,function(n,t){f(c.get(n),t)})}},show:function(i){i=n(i in c._dom?c.get(i):i);var r=i.data("tt"),u=function(n){t.setTimeout(function(n){return function(){d.move(n)}}(n),10);i.off("mouseup",u)};if(r=typeof r=="function"?r():r,r){c.$("tooltip").html(r.replace(/\s/,"&#160;"));i.on("mouseup",u)}},define:function(t,i){if(typeof i!="function"){var r=i;i=function(){return r}}t=n(t in c._dom?c.get(t):t).data("tt",i);d.show(t)}},w=this._fullscreen={scrolled:0,crop:r,active:!1,prev:n(),beforeEnter:function(n){n()},beforeExit:function(n){n()},keymap:c._keyboard.map,parseCallback:function(t,i){return p.active?function(){typeof t=="function"&&t.call(c);var r=c._controls.getActive(),u=c._controls.getNext();c._scaleImage(u);c._scaleImage(r);i&&c._options.trueFullscreen&&n(r.container).add(u.container).trigger("transitionend")}:t},enter:function(n){w.beforeEnter(function(){n=w.parseCallback(n,!0);c._options.trueFullscreen&&l.support?(w.active=!0,u.forceStyles(c.get("container"),{width:"100%",height:"100%"}),c.rescale(),i.MAC?i.SAFARI&&/version\/[1-5]/.test(y)?(c.$("stage").css("opacity",0),t.setTimeout(function(){w.scale();c.$("stage").css("opacity",1)},4)):(c.$("container").css("opacity",0).addClass("fullscreen"),t.setTimeout(function(){w.scale();c.$("container").css("opacity",1)},50)):c.$("container").addClass("fullscreen"),h.resize(w.scale),l.enter(c,n,c.get("container"))):(w.scrolled=h.scrollTop(),i.TOUCH||t.scrollTo(0,0),w._enter(n))})},_enter:function(f){w.active=!0;g&&(w.iframe=function(){var f,o=e.referrer,r=e.createElement("a"),u=t.location;return(r.href=o,r.protocol!=u.protocol||r.hostname!=u.hostname||r.port!=u.port)?(i.raise("Parent fullscreen not available. Iframe protocol, domains and ports must match."),!1):(w.pd=t.parent.document,n(w.pd).find("iframe").each(function(){var n=this.contentDocument||this.contentWindow.document;if(n===e)return f=this,!1}),f)}());u.hide(c.getActiveImage());g&&w.iframe&&(w.iframe.scrolled=n(t.parent).scrollTop(),t.parent.scrollTo(0,0));var o=c.getData(),v=c._options,p=!c._options.trueFullscreen||!l.support,a={height:"100%",overflow:"hidden",margin:0,padding:0};if(p&&(c.$("container").addClass("fullscreen"),w.prev=c.$("container").prev(),w.prev.length||(w.parent=c.$("container").parent()),c.$("container").appendTo("body"),u.forceStyles(c.get("container"),{position:i.TOUCH?"absolute":"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1e4}),u.forceStyles(s().html,a),u.forceStyles(s().body,a)),g&&w.iframe&&(u.forceStyles(w.pd.documentElement,a),u.forceStyles(w.pd.body,a),u.forceStyles(w.iframe,n.extend(a,{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:1e4,border:"none"}))),w.keymap=n.extend({},c._keyboard.map),c.attachKeyboard({escape:c.exitFullscreen,right:c.next,left:c.prev}),w.crop=v.imageCrop,v.fullscreenCrop!=r&&(v.imageCrop=v.fullscreenCrop),o&&o.big&&o.image!==o.big){var k=new i.Picture,d=k.isCached(o.big),y=c.getIndex(),nt=c._thumbnails[y];c.trigger({type:i.LOADSTART,cached:d,rewind:!1,index:y,imageTarget:c.getActiveImage(),thumbTarget:nt,galleriaData:o});k.load(o.big,function(t){c._scaleImage(t,{complete:function(t){c.trigger({type:i.LOADFINISH,cached:d,index:y,rewind:!1,imageTarget:t.image,thumbTarget:nt});var r=c._controls.getActive().image;r&&n(r).width(t.image.width).height(t.image.height).attr("style",n(t.image).attr("style")).attr("src",t.image.src)}})});var tt=c.getNext(y),it=new i.Picture,b=c.getData(tt);it.preload(c.isFullscreen()&&b.big?b.big:b.image)}c.rescale(function(){c.addTimer(!1,function(){p&&u.show(c.getActiveImage());typeof f=="function"&&f.call(c);c.rescale()},100);c.trigger(i.FULLSCREEN_ENTER)});p?h.resize(w.scale):u.show(c.getActiveImage())},scale:function(){c.rescale()},exit:function(n){w.beforeExit(function(){n=w.parseCallback(n);c._options.trueFullscreen&&l.support?l.exit(n):w._exit(n)})},_exit:function(n){var e,o,r,a,f;w.active=!1;e=!c._options.trueFullscreen||!l.support;o=c.$("container").removeClass("fullscreen");w.parent?w.parent.prepend(o):o.insertAfter(w.prev);e&&(u.hide(c.getActiveImage()),u.revertStyles(c.get("container"),s().html,s().body),i.TOUCH||t.scrollTo(0,w.scrolled),r=c._controls.frames[c._controls.active],r&&r.image&&(r.image.src=r.image.src));g&&w.iframe&&(u.revertStyles(w.pd.documentElement,w.pd.body,w.iframe),w.iframe.scrolled&&t.parent.scrollTo(0,w.iframe.scrolled));c.detachKeyboard();c.attachKeyboard(w.keymap);c._options.imageCrop=w.crop;a=c.getData().big;f=c._controls.getActive().image;!c.getData().iframe&&f&&a&&a==f.src&&t.setTimeout(function(n){return function(){f.src=n}}(c.getData().image),1);c.rescale(function(){c.addTimer(!1,function(){e&&u.show(c.getActiveImage());typeof n=="function"&&n.call(c);h.trigger("resize")},50);c.trigger(i.FULLSCREEN_EXIT)});h.off("resize",w.scale)}},b=this._idle={trunk:[],bound:!1,active:!1,add:function(t,r,u,f){if(t&&!i.TOUCH){b.bound||b.addEvent();t=n(t);typeof u=="boolean"&&(f=u,u={});u=u||{};var o={};for(var e in r)r.hasOwnProperty(e)&&(o[e]=t.css(e));t.data("idle",{from:n.extend(o,u),to:r,complete:!0,busy:!1});f?t.css(r):b.addTimer();b.trunk.push(t)}},remove:function(t){t=n(t);n.each(b.trunk,function(n,i){i&&i.length&&!i.not(t).length&&(t.css(t.data("idle").from),b.trunk.splice(n,1))});b.trunk.length||(b.removeEvent(),c.clearTimer(b.timer))},addEvent:function(){b.bound=!0;c.$("container").on("mousemove click",b.showAll);if(c._options.idleMode=="hover")c.$("container").on("mouseleave",b.hide)},removeEvent:function(){b.bound=!1;c.$("container").on("mousemove click",b.showAll);c._options.idleMode=="hover"&&c.$("container").off("mouseleave",b.hide)},addTimer:function(){c._options.idleMode!="hover"&&c.addTimer("idle",function(){b.hide()},c._options.idleTime)},hide:function(){if(c._options.idleMode&&c.getIndex()!==!1){c.trigger(i.IDLE_ENTER);var t=b.trunk.length;n.each(b.trunk,function(n,i){var r=i.data("idle");r&&(i.data("idle").complete=!1,u.animate(i,r.to,{duration:c._options.idleSpeed,complete:function(){n==t-1&&(b.active=!1)}}))})}},showAll:function(){c.clearTimer("idle");n.each(b.trunk,function(n,t){b.show(t)})},show:function(t){var r=t.data("idle");b.active&&(r.busy||r.complete)||(r.busy=!0,c.trigger(i.IDLE_EXIT),c.clearTimer("idle"),u.animate(t,r.from,{duration:c._options.idleSpeed/2,complete:function(){b.active=!0;n(t).data("idle").busy=!1;n(t).data("idle").complete=!0}}));b.addTimer()}},a=this._lightbox={width:0,height:0,initialized:!1,active:null,image:null,elems:{},keymap:!1,init:function(){if(!a.initialized){a.initialized=!0;var r={},e=c._options,h="",t="position:absolute;",f="lightbox-",l={overlay:"position:fixed;display:none;opacity:"+e.overlayOpacity+";filter:alpha(opacity="+e.overlayOpacity*100+");top:0;left:0;width:100%;height:100%;background:"+e.overlayBackground+";z-index:99990",box:"position:fixed;display:none;width:400px;height:400px;top:50%;left:50%;margin-top:-200px;margin-left:-200px;z-index:99991",shadow:t+"background:#000;width:100%;height:100%;",content:t+"background-color:#fff;top:10px;left:10px;right:10px;bottom:10px;overflow:hidden",info:t+"bottom:10px;left:10px;right:10px;color:#444;font:11px/13px arial,sans-serif;height:13px",close:t+"top:10px;right:10px;height:20px;width:20px;background:#fff;text-align:center;cursor:pointer;color:#444;font:16px/22px arial,sans-serif;z-index:99999",image:t+"top:10px;left:10px;right:10px;bottom:30px;overflow:hidden;display:block;",prevholder:t+"width:50%;top:0;bottom:40px;cursor:pointer;",nextholder:t+"width:50%;top:0;bottom:40px;right:-1px;cursor:pointer;",prev:t+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;left:20px;display:none;text-align:center;color:#000;font:bold 16px/36px arial,sans-serif",next:t+"top:50%;margin-top:-20px;height:40px;width:30px;background:#fff;right:20px;left:auto;display:none;font:bold 16px/36px arial,sans-serif;text-align:center;color:#000",title:"float:left",counter:"float:right;margin-left:8px;"},p=function(t){return t.hover(function(){n(this).css("color","#bbb")},function(){n(this).css("color","#444")})},y={},v="";v=o>7?o<9?"background:#000;filter:alpha(opacity=0);":"background:rgba(0,0,0,0);":"z-index:99999";l.nextholder+=v;l.prevholder+=v;n.each(l,function(n,t){h+=".galleria-"+f+n+"{"+t+"}"});h+=".galleria-"+f+"box.iframe .galleria-"+f+"prevholder,.galleria-"+f+"box.iframe .galleria-"+f+"nextholder{width:100px;height:100px;top:50%;margin-top:-70px}";u.insertStyleTag(h,"galleria-lightbox");n.each("overlay box content shadow title info close prevholder prev nextholder next counter image".split(" "),function(n,t){c.addElement("lightbox-"+t);r[t]=a.elems[t]=c.get("lightbox-"+t)});a.image=new i.Picture;n.each({box:"shadow content close prevholder nextholder",info:"title counter",content:"info image",prevholder:"prev",nextholder:"next"},function(t,i){var r=[];n.each(i.split(" "),function(n,t){r.push(f+t)});y[f+t]=r});c.append(y);n(r.image).append(a.image.container);n(s().body).append(r.overlay,r.box);p(n(r.close).on("click:fast",a.hide).html("&#215;"));n.each(["Prev","Next"],function(t,u){var f=n(r[u.toLowerCase()]).html(/v/.test(u)?"&#8249;&#160;":"&#160;&#8250;"),e=n(r[u.toLowerCase()+"holder"]);e.on("click:fast",function(){a["show"+u]()});if(o<8||i.TOUCH){f.show();return}e.hover(function(){f.show()},function(){f.stop().fadeOut(200)})});n(r.overlay).on("click:fast",a.hide);i.IPAD&&(c._options.lightboxTransitionSpeed=0)}},rescale:function(t){var l=f.min(h.width()-40,a.width),v=f.min(h.height()-60,a.height),r=f.min(l/a.width,v/a.height),e=f.round(a.width*r)+40,o=f.round(a.height*r)+60,s={width:e,height:o,"margin-top":f.ceil(o/2)*-1,"margin-left":f.ceil(e/2)*-1};t?n(a.elems.box).css(s):n(a.elems.box).animate(s,{duration:c._options.lightboxTransitionSpeed,easing:c._options.easing,complete:function(){var t=a.image,r=c._options.lightboxFadeSpeed;c.trigger({type:i.LIGHTBOX_IMAGE,imageTarget:t.image});n(t.container).show();n(t.image).animate({opacity:1},r);u.show(a.elems.info,r)}})},hide:function(){a.image.image=null;h.off("resize",a.rescale);n(a.elems.box).hide().find("iframe").remove();u.hide(a.elems.info);c.detachKeyboard();c.attachKeyboard(a.keymap);a.keymap=!1;u.hide(a.elems.overlay,200,function(){n(this).hide().css("opacity",c._options.overlayOpacity);c.trigger(i.LIGHTBOX_CLOSE)})},showNext:function(){a.show(c.getNext(a.active))},showPrev:function(){a.show(c.getPrev(a.active))},show:function(r){a.active=r=typeof r=="number"?r:c.getIndex()||0;a.initialized||a.init();c.trigger(i.LIGHTBOX_OPEN);a.keymap||(a.keymap=n.extend({},c._keyboard.map),c.attachKeyboard({escape:a.hide,right:a.showNext,left:a.showPrev}));h.off("resize",a.rescale);var e=c.getData(r),p=c.getDataLength(),l=c.getNext(r),s,y,v;u.hide(a.elems.info);try{for(v=c._options.preload;v>0;v--)y=new i.Picture,s=c.getData(l),y.preload(s.big?s.big:s.image),l=c.getNext(l)}catch(w){}a.image.isIframe=e.iframe&&!e.image;n(a.elems.box).toggleClass("iframe",a.image.isIframe);n(a.image.container).find(".galleria-videoicon").remove();a.image.load(e.big||e.image||e.iframe,function(i){var u,s,l,v;i.isIframe?(u=n(t).width(),s=n(t).height(),i.video&&c._options.maxVideoSize&&(l=f.min(c._options.maxVideoSize/u,c._options.maxVideoSize/s),l<1&&(u*=l,s*=l)),a.width=u,a.height=s):(a.width=i.original.width,a.height=i.original.height);n(i.image).css({width:i.isIframe?"100%":"100.1%",height:i.isIframe?"100%":"100.1%",top:0,bottom:0,zIndex:99998,opacity:0,visibility:"visible"}).parent().height("100%");a.elems.title.innerHTML=e.title||"";a.elems.counter.innerHTML=r+1+" / "+p;h.resize(a.rescale);a.rescale();e.image&&e.iframe&&(n(a.elems.box).addClass("iframe"),e.video&&(v=ft(i.container).hide(),t.setTimeout(function(){v.fadeIn(200)},200)),n(i.image).css("cursor","pointer").mouseup(function(t,i){return function(r){n(a.image.container).find(".galleria-videoicon").remove();r.preventDefault();i.isIframe=!0;i.load(t.iframe+(t.video?"&autoplay=1":""),{width:"100%",height:o<8?n(a.image.container).height():"100%"})}}(e,i)))});n(a.elems.overlay).show().css("visibility","visible");n(a.elems.box).show()}},ut=this._timer={trunk:{},add:function(n,i,r,u){if(n=n||(new Date).getTime(),u=u||!1,this.clear(n),u){var f=i;i=function(){f();ut.add(n,i,r)}}this.trunk[n]=t.setTimeout(i,r)},clear:function(n){var r=function(n){t.clearTimeout(this.trunk[n]);delete this.trunk[n]},i;if(!!n&&n in this.trunk)r.call(this,n);else if(typeof n=="undefined")for(i in this.trunk)this.trunk.hasOwnProperty(i)&&r.call(this,i)}};return this};i.prototype={constructor:i,init:function(t,u){if(u=ht(u),this._original={target:t,options:u,data:null},this._target=this._dom.target=t.nodeName?t:n(t).get(0),this._original.html=this._target.innerHTML,w.push(this),!this._target){i.raise("Target not found",!0);return}if(this._options={autoplay:!1,carousel:!0,carouselFollow:!0,carouselSpeed:400,carouselSteps:"auto",clicknext:!1,dailymotion:{foreground:"%23EEEEEE",highlight:"%235BCEC5",background:"%23222222",logo:0,hideInfos:1},dataConfig:function(){return{}},dataSelector:"img",dataSort:!1,dataSource:this._target,debug:r,dummy:r,easing:"galleria",extend:function(){},fullscreenCrop:r,fullscreenDoubleTap:!0,fullscreenTransition:r,height:0,idleMode:!0,idleTime:3e3,idleSpeed:200,imageCrop:!1,imageMargin:0,imagePan:!1,imagePanSmoothness:12,imagePosition:"50%",imageTimeout:r,initialTransition:r,keepSource:!1,layerFollow:!0,lightbox:!1,lightboxFadeSpeed:200,lightboxTransitionSpeed:200,linkSourceImages:!0,maxScaleRatio:r,maxVideoSize:r,minScaleRatio:r,overlayOpacity:.85,overlayBackground:"#0b0b0b",pauseOnInteraction:!0,popupLinks:!1,preload:2,queue:!0,responsive:!0,show:0,showInfo:!0,showCounter:!0,showImagenav:!0,swipe:"auto",theme:null,thumbCrop:!0,thumbEventType:"click:fast",thumbMargin:0,thumbQuality:"auto",thumbDisplayOrder:!0,thumbPosition:"50%",thumbnails:!0,touchTransition:r,transition:"fade",transitionInitial:r,transitionSpeed:400,trueFullscreen:!0,useCanvas:!1,variation:"",videoPoster:!0,vimeo:{title:0,byline:0,portrait:0,color:"aaaaaa"},wait:5e3,width:"auto",youtube:{modestbranding:1,autohide:1,color:"white",hd:1,rel:0,showinfo:0}},this._options.initialTransition=this._options.initialTransition||this._options.transitionInitial,u&&(u.debug===!1&&(et=!1),typeof u.imageTimeout=="number"&&(yt=u.imageTimeout),typeof u.dummy=="string"&&(tt=u.dummy),typeof u.theme=="string"&&(this._options.theme=u.theme)),n(this._target).children().hide(),i.QUIRK&&i.raise("Your page is in Quirks mode, Galleria may not render correctly. Please validate your HTML and add a correct doctype."),b.length)if(this._options.theme){for(var f=0;f<b.length;f++)if(this._options.theme===b[f].name){this.theme=b[f];break}}else this.theme=b[0];return typeof this.theme=="object"?this._init():vt.push(this),this},_init:function(){var s=this,c=this._options,v,l;if(this._initialized)return i.raise("Init failed: Gallery instance already initialized."),this;if(this._initialized=!0,!this.theme)return i.raise("Init failed: No theme found.",!0),this;if(n.extend(!0,c,this.theme.defaults,this._original.options,i.configure.options),c.swipe=function(n){return n=="enforced"?!0:n===!1||n=="disabled"?!1:!!i.TOUCH}(c.swipe),c.swipe&&(c.clicknext=!1,c.imagePan=!1),function(n){if(!("getContext"in n)){n=null;return}a=a||{elem:n,context:n.getContext("2d"),cache:{},length:0}}(e.createElement("canvas")),this.bind(i.DATA,function(){var e,n,r;t.screen&&t.screen.width&&Array.prototype.forEach&&this._data.forEach(function(n){var i="devicePixelRatio"in t?t.devicePixelRatio:1,r=f.max(t.screen.width,t.screen.height);r*i<1024&&(n.big=n.image)});this._original.data=this._data;this.get("total").innerHTML=this.getDataLength();e=this.$("container");s._options.height<2&&(s._userRatio=s._ratio=s._options.height);n={width:0,height:0};r=function(){return s.$("stage").height()};u.wait({until:function(){return n=s._getWH(),e.width(n.width).height(n.height),r()&&n.width&&n.height>50},success:function(){s._width=n.width;s._height=n.height;s._ratio=s._ratio||n.height/n.width;i.WEBKIT?t.setTimeout(function(){s._run()},1):s._run()},error:function(){r()?i.raise("Could not extract sufficient width/height of the gallery container. Traced measures: width:"+n.width+"px, height: "+n.height+"px.",!0):i.raise("Could not extract a stage height from the CSS. Traced height: "+r()+"px.",!0)},timeout:typeof this._options.wait=="number"?this._options.wait:!1})}),this.append({"info-text":["info-title","info-description"],info:["info-text"],"image-nav":["image-nav-right","image-nav-left"],stage:["images","loader","counter","image-nav"],"thumbnails-list":["thumbnails"],"thumbnails-container":["thumb-nav-left","thumbnails-list","thumb-nav-right"],container:["stage","thumbnails-container","info","tooltip"]}),u.hide(this.$("counter").append(this.get("current"),e.createTextNode(" / "),this.get("total"))),this.setCounter("&#8211;"),u.hide(s.get("tooltip")),this.$("container").addClass([i.TOUCH?"touch":"notouch",this._options.variation,"galleria-theme-"+this.theme.name].join(" ")),this._options.swipe||n.each(new Array(2),function(t){var r=new i.Picture,f;n(r.container).css({position:"absolute",top:0,left:0}).prepend(s._layers[t]=n(u.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]);s.$("images").append(r.container);s._controls[t]=r;f=new i.Picture;f.isIframe=!0;n(f.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(r.container);s._controls.frames[t]=f}),this.$("images").css({position:"relative",top:0,left:0,width:"100%",height:"100%"}),c.swipe){this.$("images").css({position:"absolute",top:0,left:0,width:0,height:"100%"});this.finger=new i.Finger(this.get("stage"),{onchange:function(n){s.pause().show(n)},oncomplete:function(t){var i=f.max(0,f.min(parseInt(t,10),s.getDataLength()-1)),r=s.getData(i);(n(s._thumbnails[i].container).addClass("active").siblings(".active").removeClass("active"),r)&&(s.$("images").find(".galleria-frame").css("opacity",0).hide().find("iframe").remove(),s._options.carousel&&s._options.carouselFollow&&s._carousel.follow(i))}});this.bind(i.RESCALE,function(){this.finger.setup()});this.$("stage").on("click",function(){var i=s.getData(),o;if(i){if(i.iframe){s.isPlaying()&&s.pause();var u=s._controls.frames[s._active],f=s._stageWidth,e=s._stageHeight;if(n(u.container).find("iframe").length)return;n(u.container).css({width:f,height:e,opacity:0}).show().animate({opacity:1},200);t.setTimeout(function(){u.load(i.iframe+(i.video?"&autoplay=1":""),{width:f,height:e},function(n){s.$("container").addClass("videoplay");n.scale({width:s._stageWidth,height:s._stageHeight,iframelimit:i.video?s._options.maxVideoSize:r})})},100);return}if(i.link){s._options.popupLinks?o=t.open(i.link,"_blank"):t.location.href=i.link;return}}});this.bind(i.IMAGE,function(t){var i;s.setCounter(t.index);s.setInfo(t.index);var r=this.getNext(),u=this.getPrev(),f=[u,r];f.push(this.getNext(r),this.getPrev(u),s._controls.slides.length-1);i=[];n.each(f,function(t,r){n.inArray(r,i)==-1&&i.push(r)});n.each(i,function(t,i){var r=s.getData(i),u=s._controls.slides[i],f=s.isFullscreen()&&r.big?r.big:r.image||r.iframe;r.iframe&&!r.image&&(u.isIframe=!0);u.ready||s._controls.slides[i].load(f,function(t){t.isIframe||n(t.image).css("visibility","hidden");s._scaleImage(t,{complete:function(t){t.isIframe||n(t.image).css({opacity:0,visibility:"visible"}).animate({opacity:1},200)}})})})})}this.$("thumbnails, thumbnails-list").css({overflow:"hidden",position:"relative"});this.$("image-nav-right, image-nav-left").on("click:fast",function(){c.pauseOnInteraction&&s.pause();var n=/right/.test(this.className)?"next":"prev";s[n]()}).on("click",function(n){n.preventDefault();(c.clicknext||c.swipe)&&n.stopPropagation()});if(n.each(["info","counter","image-nav"],function(n,t){c["show"+t.substr(0,1).toUpperCase()+t.substr(1).replace(/-/,"")]===!1&&u.moveOut(s.get(t.toLowerCase()))}),this.load(),c.keepSource||o||(this._target.innerHTML=""),this.get("errors")&&this.appendChild("target","errors"),this.appendChild("target","container"),c.carousel&&(v=0,l=c.show,this.bind(i.THUMBNAIL,function(){this.updateCarousel();++v==this.getDataLength()&&typeof l=="number"&&l>0&&this._carousel.follow(l)})),c.responsive)h.on("resize",function(){s.isFullscreen()||s.resize()});if(c.fullscreenDoubleTap)this.$("stage").on("touchstart",function(){var n,t,i,f,e,r,o=function(n){return n.originalEvent.touches?n.originalEvent.touches[0]:n};s.$("stage").on("touchmove",function(){n=0});return function(h){if(!/(-left|-right)/.test(h.target.className)){if(r=u.timestamp(),t=o(h).pageX,i=o(h).pageY,h.originalEvent.touches.length<2&&r-n<300&&t-f<20&&i-e<20){s.toggleFullscreen();h.preventDefault();return}n=r;f=t;e=i}}}());return n.each(i.on.binds,function(t,i){n.inArray(i.hash,s._binds)==-1&&s.bind(i.type,i.callback)}),this},addTimer:function(){return this._timer.add.apply(this._timer,u.array(arguments)),this},clearTimer:function(){return this._timer.clear.apply(this._timer,u.array(arguments)),this},_getWH:function(){var e=this.$("container"),o=this.$("target"),t=this,i={},r;return n.each(["width","height"],function(n,s){t._options[s]&&typeof t._options[s]=="number"?i[s]=t._options[s]:(r=[u.parseValue(e.css(s)),u.parseValue(o.css(s)),e[s](),o[s]()],t["_"+s]||r.splice(r.length,u.parseValue(e.css("min-"+s)),u.parseValue(o.css("min-"+s))),i[s]=f.max.apply(f,r))}),t._userRatio&&(i.height=i.width*t._userRatio),i},_createThumbnails:function(r){this.get("total").innerHTML=this.getDataLength();var y,f,l,a,c=this,s=this._options,h=r?this._data.length-r.length:0,g=h,p=[],w=0,nt=o<8?"http://upload.wikimedia.org/wikipedia/commons/c/c0/Blank.gif":"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",tt=function(){var n=c.$("thumbnails").find(".active");return n.length?n.find("img").attr("src"):!1}(),v=typeof s.thumbnails=="string"?s.thumbnails.toLowerCase():null,b=function(n){return e.defaultView&&e.defaultView.getComputedStyle?e.defaultView.getComputedStyle(f.container,null)[n]:a.css(n)},it=function(t,r,u){return function(){n(u).append(t);c.trigger({type:i.THUMBNAIL,thumbTarget:t,index:r,galleriaData:c.getData(r)})}},rt=function(t){s.pauseOnInteraction&&c.pause();var i=n(t.currentTarget).data("index");c.getIndex()!==i&&c.show(i);t.preventDefault()},k=function(t,r){n(t.container).css("visibility","visible");c.trigger({type:i.THUMBNAIL,thumbTarget:t.image,index:t.data.order,galleriaData:c.getData(t.data.order)});typeof r=="function"&&r.call(c,t)},d=function(t,i){t.scale({width:t.data.width,height:t.data.height,crop:s.thumbCrop,margin:s.thumbMargin,canvas:s.useCanvas,position:s.thumbPosition,complete:function(t){var e=["left","top"],f,r,o=c.getData(t.index);n.each(["Width","Height"],function(i,u){f=u.toLowerCase();(s.thumbCrop!==!0||s.thumbCrop===f)&&(r={},r[f]=t[f],n(t.container).css(r),r={},r[e[i]]=0,n(t.image).css(r));t["outer"+u]=n(t.container)["outer"+u](!0)});u.toggleQuality(t.image,s.thumbQuality===!0||s.thumbQuality==="auto"&&t.original.width<t.width*3);s.thumbDisplayOrder&&!t.lazy?n.each(p,function(n,t){if(n===w&&t.ready&&!t.displayed){w++;t.displayed=!0;k(t,i);return}}):k(t,i)}})};for(r||(this._thumbnails=[],this.$("thumbnails").empty());this._data[h];h++)l=this._data[h],y=l.thumb||l.image,(s.thumbnails===!0||v=="lazy")&&(l.thumb||l.image)?(f=new i.Picture(h),f.index=h,f.displayed=!1,f.lazy=!1,f.video=!1,this.$("thumbnails").append(f.container),a=n(f.container),a.css("visibility","hidden"),f.data={width:u.parseValue(b("width")),height:u.parseValue(b("height")),order:h,src:y},s.thumbCrop!==!0?a.css({width:"auto",height:"auto"}):a.css({width:f.data.width,height:f.data.height}),v=="lazy"?(a.addClass("lazy"),f.lazy=!0,f.load(nt,{height:f.data.height,width:f.data.width})):f.load(y,d),s.preload==="all"&&f.preload(l.image)):l.iframe&&v!==null||v==="empty"||v==="numbers"?(f={container:u.create("galleria-image"),image:u.create("img","span"),ready:!0,data:{order:h}},v==="numbers"&&n(f.image).text(h+1),l.iframe&&n(f.image).addClass("iframe"),this.$("thumbnails").append(f.container),t.setTimeout(it(f.image,h,f.container),50+h*20)):f={container:null,image:null},n(f.container).add(s.keepSource&&s.linkSourceImages?l.original:null).data("index",h).on(s.thumbEventType,rt).data("thumbload",d),tt===y&&n(f.container).addClass("active"),this._thumbnails.push(f);return p=this._thumbnails.slice(g),this},lazyLoad:function(t,i){var u=t.constructor==Array?t:[t],r=this,f=0;return n.each(u,function(t,e){if(!(e>r._thumbnails.length-1)){var o=r._thumbnails[e],c=o.data,s=function(){++f==u.length&&typeof i=="function"&&i.call(r)},h=n(o.container).data("thumbload");o.video?h.call(r,o,s):o.load(c.src,function(n){h.call(r,n,s)})}}),this},lazyLoadChunks:function(n,i){var e=this.getDataLength(),r=0,o=0,s=[],u=[],h=this,f;for(i=i||0;r<e;r++)u.push(r),(++o==n||r==e-1)&&(s.push(u),o=0,u=[]);return f=function(n){var r=s.shift();r&&t.setTimeout(function(){h.lazyLoad(r,function(){f(!0)})},i&&n?i:0)},f(!1),this},_run:function(){var f=this;f._createThumbnails();u.wait({timeout:1e4,until:function(){return i.OPERA&&f.$("stage").css("display","inline-block"),f._stageWidth=f.$("stage").width(),f._stageHeight=f.$("stage").height(),f._stageWidth&&f._stageHeight>50},success:function(){if(rt.push(f),f._options.swipe){var e=f.$("images").width(f.getDataLength()*f._stageWidth);n.each(new Array(f.getDataLength()),function(t){var r=new i.Picture,s=f.getData(t),o;n(r.container).css({position:"absolute",top:0,left:f._stageWidth*t}).prepend(f._layers[t]=n(u.create("galleria-layer")).css({position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2})[0]).appendTo(e);s.video&&ft(r.container);f._controls.slides.push(r);o=new i.Picture;o.isIframe=!0;n(o.container).attr("class","galleria-frame").css({position:"absolute",top:0,left:0,zIndex:4,background:"#000",display:"none"}).appendTo(r.container);f._controls.frames.push(o)});f.finger.setup()}if(u.show(f.get("counter")),f._options.carousel&&f._carousel.bindControls(),f._options.autoplay&&(f.pause(),typeof f._options.autoplay=="number"&&(f._playtime=f._options.autoplay),f._playing=!0),f._firstrun){f._options.autoplay&&f.trigger(i.PLAY);typeof f._options.show=="number"&&f.show(f._options.show);return}f._firstrun=!0;i.History&&i.History.change(function(n){isNaN(n)?t.history.go(-1):f.show(n,r,!0)});f.trigger(i.READY);f.theme.init.call(f,f._options);n.each(i.ready.callbacks,function(n,t){typeof t=="function"&&t.call(f,f._options)});f._options.extend.call(f,f._options);/^[0-9]{1,4}$/.test(ot)&&i.History?f.show(ot,r,!0):f._data[f._options.show]&&f.show(f._options.show);f._options.autoplay&&f.trigger(i.PLAY)},error:function(){i.raise("Stage width or height is too small to show the gallery. Traced measures: width:"+f._stageWidth+"px, height: "+f._stageHeight+"px.",!0)}})},load:function(t,r,u){var o=this,e=this._options;return this._data=[],this._thumbnails=[],this.$("thumbnails").empty(),typeof r=="function"&&(u=r,r=null),t=t||e.dataSource,r=r||e.dataSelector,u=u||e.dataConfig,n.isPlainObject(t)&&(t=[t]),n.isArray(t)?this.validate(t)?this._data=t:i.raise("Load failed: JSON Array not valid."):(r+=",.video,.iframe",n(t).find(r).each(function(t,i){i=n(i);var r={},e=i.parent(),f=e.attr("href"),s=e.attr("rel");f&&(i[0].nodeName=="IMG"||i.hasClass("video"))&&lt(f)?r.video=f:f&&i.hasClass("iframe")?r.iframe=f:r.image=r.big=f;s&&(r.big=s);n.each("big title description link layer image".split(" "),function(n,t){i.data(t)&&(r[t]=i.data(t).toString())});r.big||(r.big=r.image);o._data.push(n.extend({title:i.attr("title")||"",thumb:i.attr("src"),image:i.attr("src"),big:i.attr("src"),description:i.attr("alt")||"",link:i.attr("longdesc"),original:i.get(0)},r,u(i)))})),typeof e.dataSort=="function"?d.sort.call(this._data,e.dataSort):e.dataSort=="random"&&this._data.sort(function(){return f.round(f.random())-.5}),this.getDataLength()&&this._parseData(function(){this.trigger(i.DATA)}),this},_parseData:function(t){var u=this,i,f=!1,e=function(){var i=!0;n.each(u._data,function(n,t){if(t.loading)return i=!1,!1});i&&!f&&(f=!0,t.call(u))};return n.each(this._data,function(t,f){if(i=u._data[t],"thumb"in f==!1&&(i.thumb=f.image),f.big||(i.big=f.image),"video"in f){var o=lt(f.video);o&&(i.iframe=new ct(o.provider,o.id).embed()+function(){if(typeof u._options[o.provider]=="object"){var t=[];return n.each(u._options[o.provider],function(n,i){t.push(n+"="+i)}),o.provider=="youtube"&&(t=["wmode=opaque"].concat(t)),"?"+t.join("&")}return""}(),i.thumb&&i.image||n.each(["thumb","image"],function(n,t){if(t=="image"&&!u._options.videoPoster){i.image=r;return}var f=new ct(o.provider,o.id);i[t]||(i.loading=!0,f.getMedia(t,function(n,t){return function(i){n[t]=i;t!="image"||n.big||(n.big=n.image);delete n.loading;e()}}(i,t)))}))}}),e(),this},destroy:function(){return this.$("target").data("galleria",null),this.$("container").off("galleria"),this.get("target").innerHTML=this._original.html,this.clearTimer(),u.removeFromArray(w,this),u.removeFromArray(rt,this),i._waiters.length&&n.each(i._waiters,function(n,i){i&&t.clearTimeout(i)}),this},splice:function(){var n=this,i=u.array(arguments);return t.setTimeout(function(){d.splice.apply(n._data,i);n._parseData(function(){n._createThumbnails()})},2),n},push:function(){var i=this,n=u.array(arguments);return n.length==1&&n[0].constructor==Array&&(n=n[0]),t.setTimeout(function(){d.push.apply(i._data,n);i._parseData(function(){i._createThumbnails(n)})},2),i},_getActive:function(){return this._controls.getActive()},validate:function(){return!0},bind:function(n,t){n=it(n);this.$("container").on(n,this.proxy(t));return this},unbind:function(n){return n=it(n),this.$("container").off(n),this},trigger:function(t){return t=typeof t=="object"?n.extend(t,{scope:this}):{type:it(t),scope:this},this.$("container").trigger(t),this},addIdleState:function(){return this._idle.add.apply(this._idle,u.array(arguments)),this},removeIdleState:function(){return this._idle.remove.apply(this._idle,u.array(arguments)),this},enterIdleMode:function(){return this._idle.hide(),this},exitIdleMode:function(){return this._idle.showAll(),this},enterFullscreen:function(){return this._fullscreen.enter.apply(this,u.array(arguments)),this},exitFullscreen:function(){return this._fullscreen.exit.apply(this,u.array(arguments)),this},toggleFullscreen:function(){return this._fullscreen[this.isFullscreen()?"exit":"enter"].apply(this,u.array(arguments)),this},bindTooltip:function(){return this._tooltip.bind.apply(this._tooltip,u.array(arguments)),this},defineTooltip:function(){return this._tooltip.define.apply(this._tooltip,u.array(arguments)),this},refreshTooltip:function(){return this._tooltip.show.apply(this._tooltip,u.array(arguments)),this},openLightbox:function(){return this._lightbox.show.apply(this._lightbox,u.array(arguments)),this},closeLightbox:function(){return this._lightbox.hide.apply(this._lightbox,u.array(arguments)),this},hasVariation:function(t){return n.inArray(t,this._options.variation.split(/\s+/))>-1},getActiveImage:function(){var n=this._getActive();return n?n.image:r},getActiveThumb:function(){return this._thumbnails[this._active].image||r},getMousePosition:function(n){return{x:n.pageX-this.$("container").offset().left,y:n.pageY-this.$("container").offset().top}},addPan:function(t){if(this._options.imageCrop!==!1){t=n(t||this.getActiveImage());var i=this,v=t.width()/2,y=t.height()/2,h=parseInt(t.css("left"),10),c=parseInt(t.css("top"),10),e=h||0,s=c||0,l=0,a=0,p=!1,d=u.timestamp(),w=0,r=0,b=function(n,i,u){if(n>0&&(r=f.round(f.max(n*-1,f.min(0,i))),w!==r))if(w=r,o===8)t.parent()["scroll"+u](r*-1);else{var e={};e[u.toLowerCase()]=r;t.css(e)}},k=function(n){u.timestamp()-d<50||(p=!0,v=i.getMousePosition(n).x,y=i.getMousePosition(n).y)},g=function(){p&&(l=t.width()-i._stageWidth,a=t.height()-i._stageHeight,h=v/i._stageWidth*l*-1,c=y/i._stageHeight*a*-1,e+=(h-e)/i._options.imagePanSmoothness,s+=(c-s)/i._options.imagePanSmoothness,b(a,s,"Top"),b(l,e,"Left"))};o===8&&(t.parent().scrollTop(s*-1).scrollLeft(e*-1),t.css({top:0,left:0}));this.$("stage").off("mousemove",k).on("mousemove",k);return this.addTimer("pan"+i._id,g,50,!0),this}},proxy:function(n,t){return typeof n!="function"?c:(t=t||this,function(){return n.apply(t,u.array(arguments))})},getThemeName:function(){return this.theme.name},removePan:function(){return this.$("stage").off("mousemove"),this.clearTimer("pan"+this._id),this},addElement:function(){var t=this._dom;return n.each(u.array(arguments),function(n,i){t[i]=u.create("galleria-"+i)}),this},attachKeyboard:function(){return this._keyboard.attach.apply(this._keyboard,u.array(arguments)),this},detachKeyboard:function(){return this._keyboard.detach.apply(this._keyboard,u.array(arguments)),this},appendChild:function(n,t){return this.$(n).append(this.get(t)||t),this},prependChild:function(n,t){return this.$(n).prepend(this.get(t)||t),this},remove:function(){return this.$(u.array(arguments).join(",")).remove(),this},append:function(n){var t,i;for(t in n)if(n.hasOwnProperty(t))if(n[t].constructor===Array)for(i=0;n[t][i];i++)this.appendChild(t,n[t][i]);else this.appendChild(t,n[t]);return this},_scaleImage:function(t,i){if(t=t||this._controls.getActive(),t){var r,e=function(t){n(t.container).children(":first").css({top:f.max(0,u.parseValue(t.image.style.top)),left:f.max(0,u.parseValue(t.image.style.left)),width:u.parseValue(t.image.width),height:u.parseValue(t.image.height)})};return i=n.extend({width:this._stageWidth,height:this._stageHeight,crop:this._options.imageCrop,max:this._options.maxScaleRatio,min:this._options.minScaleRatio,margin:this._options.imageMargin,position:this._options.imagePosition,iframelimit:this._options.maxVideoSize},i),this._options.layerFollow&&this._options.imageCrop!==!0?typeof i.complete=="function"?(r=i.complete,i.complete=function(){r.call(t,t);e(t)}):i.complete=e:n(t.container).children(":first").css({top:0,left:0}),t.scale(i),this}},updateCarousel:function(){return this._carousel.update(),this},resize:function(t,i){typeof t=="function"&&(i=t,t=r);t=n.extend({width:0,height:0},t);var f=this,u=this.$("container");return n.each(t,function(n,i){i||(u[n]("auto"),t[n]=f._getWH()[n])}),n.each(t,function(n,t){u[n](t)}),this.rescale(i)},rescale:function(t,u,f){var e=this,o;return typeof t=="function"&&(f=t,t=r),o=function(){e._stageWidth=t||e.$("stage").width();e._stageHeight=u||e.$("stage").height();e._options.swipe?(n.each(e._controls.slides,function(t,i){e._scaleImage(i);n(i.container).css("left",e._stageWidth*t)}),e.$("images").css("width",e._stageWidth*e.getDataLength())):e._scaleImage();e._options.carousel&&e.updateCarousel();var r=e._controls.frames[e._controls.active];r&&e._controls.frames[e._controls.active].scale({width:e._stageWidth,height:e._stageHeight,iframelimit:e._options.maxVideoSize});e.trigger(i.RESCALE);typeof f=="function"&&f.call(e)},o.call(e),this},refreshImage:function(){return this._scaleImage(),this._options.imagePan&&this.addPan(),this},_preload:function(){if(this._options.preload){var u,t,r=this.getNext(),n;try{for(t=this._options.preload;t>0;t--)u=new i.Picture,n=this.getData(r),u.preload(this.isFullscreen()&&n.big?n.big:n.image),r=this.getNext(r)}catch(f){}}},show:function(r,u,e){var v=this._options.swipe,o,s,l;if(v||!(this._queue.length>3||r===!1||!this._options.queue&&this._queue.stalled)){if(r=f.max(0,f.min(parseInt(r,10),this.getDataLength()-1)),u=typeof u!="undefined"?!!u:r<this.getIndex(),e=e||!1,!e&&i.History){i.History.set(r.toString());return}if(this.finger&&r!==this._active&&(this.finger.to=-(r*this.finger.width),this.finger.index=r),this._active=r,v){if(o=this.getData(r),s=this,!o)return;var a=this.isFullscreen()&&o.big?o.big:o.image||o.iframe,h=this._controls.slides[r],y=h.isCached(a),p=this._thumbnails[r],c={cached:y,index:r,rewind:u,imageTarget:h.image,thumbTarget:p.image,galleriaData:o};this.trigger(n.extend(c,{type:i.LOADSTART}));s.$("container").removeClass("videoplay");l=function(){s._layers[r].innerHTML=s.getData().layer||"";s.trigger(n.extend(c,{type:i.LOADFINISH}));s._playCheck()};s._preload();t.setTimeout(function(){h.ready&&n(h.image).attr("src")==a?(s.trigger(n.extend(c,{type:i.IMAGE})),l()):(o.iframe&&!o.image&&(h.isIframe=!0),h.load(a,function(t){c.imageTarget=t.image;s._scaleImage(t,l).trigger(n.extend(c,{type:i.IMAGE}));l()}))},100)}else d.push.call(this._queue,{index:r,rewind:u}),this._queue.stalled||this._show();return this}},_show:function(){var f=this,o=this._queue[0],e=this.getData(o.index),c;if(e){var l=this.isFullscreen()&&e.big?e.big:e.image||e.iframe,h=this._controls.getActive(),s=this._controls.getNext(),a=s.isCached(l),v=this._thumbnails[o.index],y=function(){n(s.image).trigger("mouseup")};f.$("container").toggleClass("iframe",!!e.isIframe).removeClass("videoplay");c=function(e,o,s,h,c){return function(){var l;if(p.active=!1,u.toggleQuality(o.image,f._options.imageQuality),f._layers[f._controls.active].innerHTML="",n(s.container).css({zIndex:0,opacity:0}).show(),n(s.container).find("iframe, .galleria-videoicon").remove(),n(f._controls.frames[f._controls.active].container).hide(),n(o.container).css({zIndex:1,left:0,top:0}).show(),f._controls.swap(),f._options.imagePan&&f.addPan(o.image),e.iframe&&e.image||e.link||f._options.lightbox||f._options.clicknext)n(o.image).css({cursor:"pointer"}).on("mouseup",function(u){if(typeof u.which!="number"||!(u.which>1)){if(e.iframe){f.isPlaying()&&f.pause();var o=f._controls.frames[f._controls.active],s=f._stageWidth,h=f._stageHeight;n(o.container).css({width:s,height:h,opacity:0}).show().animate({opacity:1},200);t.setTimeout(function(){o.load(e.iframe+(e.video?"&autoplay=1":""),{width:s,height:h},function(n){f.$("container").addClass("videoplay");n.scale({width:f._stageWidth,height:f._stageHeight,iframelimit:e.video?f._options.maxVideoSize:r})})},100);return}if(f._options.clicknext&&!i.TOUCH){f._options.pauseOnInteraction&&f.pause();f.next();return}if(e.link){f._options.popupLinks?l=t.open(e.link,"_blank"):t.location.href=e.link;return}f._options.lightbox&&f.openLightbox()}});f._playCheck();f.trigger({type:i.IMAGE,index:h.index,imageTarget:o.image,thumbTarget:c.image,galleriaData:e});d.shift.call(f._queue);f._queue.stalled=!1;f._queue.length&&f._show()}}(e,s,h,o,v);this._options.carousel&&this._options.carouselFollow&&this._carousel.follow(o.index);f._preload();u.show(s.container);s.isIframe=e.iframe&&!e.image;n(f._thumbnails[o.index].container).addClass("active").siblings(".active").removeClass("active");f.trigger({type:i.LOADSTART,cached:a,index:o.index,rewind:o.rewind,imageTarget:s.image,thumbTarget:v.image,galleriaData:e});f._queue.stalled=!0;s.load(l,function(t){var s=n(f._layers[1-f._controls.active]).html(e.layer||"").hide();f._scaleImage(t,{complete:function(t){var l,v;"image"in h&&u.toggleQuality(h.image,!1);u.toggleQuality(t.image,!1);f.removePan();f.setInfo(o.index);f.setCounter(o.index);e.layer&&(s.show(),(e.iframe&&e.image||e.link||f._options.lightbox||f._options.clicknext)&&s.css("cursor","pointer").off("mouseup").mouseup(y));e.video&&e.image&&ft(t.container);l=f._options.transition;n.each({initial:h.image===null,touch:i.TOUCH,fullscreen:f.isFullscreen()},function(n,t){if(t&&f._options[n+"Transition"]!==r)return l=f._options[n+"Transition"],!1});l in p.effects==!1?c():(v={prev:h.container,next:t.container,rewind:o.rewind,speed:f._options.transitionSpeed||400},p.active=!0,p.init.call(f,l,v,c));f.trigger({type:i.LOADFINISH,cached:a,index:o.index,rewind:o.rewind,imageTarget:t.image,thumbTarget:f._thumbnails[o.index].image,galleriaData:f.getData(o.index)})}})})}},getNext:function(n){return n=typeof n=="number"?n:this.getIndex(),n===this.getDataLength()-1?0:n+1},getPrev:function(n){return n=typeof n=="number"?n:this.getIndex(),n===0?this.getDataLength()-1:n-1},next:function(){return this.getDataLength()>1&&this.show(this.getNext(),!1),this},prev:function(){return this.getDataLength()>1&&this.show(this.getPrev(),!0),this},get:function(n){return n in this._dom?this._dom[n]:null},getData:function(n){return n in this._data?this._data[n]:this._data[this._active]},getDataLength:function(){return this._data.length},getIndex:function(){return typeof this._active=="number"?this._active:!1},getStageHeight:function(){return this._stageHeight},getStageWidth:function(){return this._stageWidth},getOptions:function(n){return typeof n=="undefined"?this._options:this._options[n]},setOptions:function(t,i){return typeof t=="object"?n.extend(this._options,t):this._options[t]=i,this},play:function(n){return this._playing=!0,this._playtime=n||this._playtime,this._playCheck(),this.trigger(i.PLAY),this},pause:function(){return this._playing=!1,this.trigger(i.PAUSE),this},playToggle:function(n){return this._playing?this.pause():this.play(n)},isPlaying:function(){return this._playing},isFullscreen:function(){return this._fullscreen.active},_playCheck:function(){var n=this,t=0,o=20,s=u.timestamp(),r="play"+this._id,e;this._playing&&(this.clearTimer(r),e=function(){if(t=u.timestamp()-s,t>=n._playtime&&n._playing){n.clearTimer(r);n.next();return}n._playing&&(n.trigger({type:i.PROGRESS,percent:f.ceil(t/n._playtime*100),seconds:f.floor(t/1e3),milliseconds:t}),n.addTimer(r,e,o))},n.addTimer(r,e,o))},setPlaytime:function(n){return this._playtime=n,this},setIndex:function(n){return this._active=n,this},setCounter:function(n){if(typeof n=="number"?n++:typeof n=="undefined"&&(n=this.getIndex()+1),this.get("current").innerHTML=n,o){var t=this.$("counter"),i=t.css("opacity");parseInt(i,10)===1?u.removeAlpha(t[0]):this.$("counter").css("opacity",i)}return this},setInfo:function(t){var r=this,i=this.getData(t);return n.each(["title","description"],function(n,t){var u=r.$("info-"+t);i[t]?u[i[t].length?"show":"hide"]().html(i[t]):u.empty().hide()}),this},hasInfo:function(n){for(var i="title description".split(" "),t=0;i[t];t++)if(!!this.getData(n)[i[t]])return!0;return!1},jQuery:function(t){var r=this,u=[],i;return n.each(t.split(","),function(t,i){i=n.trim(i);r.get(i)&&u.push(i)}),i=n(r.get(u.shift())),n.each(u,function(n,t){i=i.add(r.get(t))}),i},$:function(){return this.jQuery.apply(this,u.array(arguments))}};n.each(st,function(n,t){var r=/_/.test(t)?t.replace(/_/g,""):t;i[t.toUpperCase()]="galleria."+r});n.extend(i,{IE9:o===9,IE8:o===8,IE7:o===7,IE6:o===6,IE:o,WEBKIT:/webkit/.test(y),CHROME:/chrome/.test(y),SAFARI:/safari/.test(y)&&!/chrome/.test(y),QUIRK:o&&e.compatMode&&e.compatMode==="BackCompat",MAC:/mac/.test(navigator.platform.toLowerCase()),OPERA:!!t.opera,IPHONE:/iphone/.test(y),IPAD:/ipad/.test(y),ANDROID:/android/.test(y),TOUCH:"ontouchstart"in e});i.addTheme=function(r){r.name||i.raise("No theme name specified");r.defaults=typeof r.defaults!="object"?{}:ht(r.defaults);var f=!1,e;return typeof r.css=="string"?(n("link").each(function(n,t){return e=new RegExp(r.css),e.test(t.href)?(f=!0,ut(r),!1):void 0}),f||n(function(){var s=0,o=function(){n("script").each(function(n,i){e=new RegExp("galleria\\."+r.name.toLowerCase()+"\\.");e.test(i.src)&&(f=i.src.replace(/[^\/]*$/,"")+r.css,t.setTimeout(function(){u.loadCSS(f,"galleria-theme-"+r.name,function(){ut(r)})},1))});f||(s++>5?i.raise("No theme CSS loaded"):t.setTimeout(o,500))};o()})):ut(r),r};i.loadTheme=function(r){if(!n("script").filter(function(){return n(this).attr("src")==r}).length){var f=!1,e;return n(t).load(function(){f||(e=t.setTimeout(function(){f||i.raise("Galleria had problems loading theme at "+r+". Please check theme path or load manually.",!0)},2e4))}),u.loadScript(r,function(){f=!0;t.clearTimeout(e)}),i}};i.get=function(n){if(!w[n]){if(typeof n!="number")return w;i.raise("Gallery index "+n+" not found")}else return w[n]};i.configure=function(t,r){var u={};return typeof t=="string"&&r?(u[t]=r,t=u):n.extend(u,t),i.configure.options=u,n.each(i.get(),function(n,t){t.setOptions(u)}),i};i.configure.options={};i.on=function(t,r){if(t){r=r||c;var f=t+r.toString().replace(/\s/g,"")+u.timestamp();return n.each(i.get(),function(n,i){i._binds.push(f);i.bind(t,r)}),i.on.binds.push({type:t,callback:r,hash:f}),i}};i.on.binds=[];i.run=function(t,r){return n.isFunction(r)&&(r={extend:r}),n(t||"#galleria").galleria(r),i};i.addTransition=function(n,t){return p.effects[n]=t,i};i.utils=u;i.log=function(){var i=u.array(arguments);if("console"in t&&"log"in t.console)try{return t.console.log.apply(t.console,i)}catch(r){n.each(i,function(){t.console.log(this)})}else return t.alert(i.join("<br>"))};i.ready=function(t){return typeof t!="function"?i:(n.each(rt,function(n,i){t.call(i,i._options)}),i.ready.callbacks.push(t),i)};i.ready.callbacks=[];i.raise=function(t,i){var r=i?"Fatal error":"Error",u={color:"#fff",position:"absolute",top:0,left:0,zIndex:1e5},f=function(t){var f='<div style="padding:4px;margin:0 0 2px;background:#'+(i?"811":"222")+';">'+(i?"<strong>"+r+": <\/strong>":"")+t+"<\/div>";n.each(w,function(){var n=this.$("errors"),t=this.$("target");n.length||(t.css("position","relative"),n=this.addElement("errors").appendChild("target","errors").$("errors").css(u));n.append(f)});w.length||n("<div>").css(n.extend(u,{position:"fixed"})).append(f).appendTo(s().body)};if(et){if(f(t),i)throw new Error(r+": "+t);}else if(i){if(at)return;at=!0;i=!1;f("Gallery could not load.")}};i.version=1.41;i.getLoadedThemes=function(){return n.map(b,function(n){return n.name})};i.requires=function(n,t){return t=t||"You need to upgrade Galleria to version "+n+" to use one or more components.",i.version<n&&i.raise(t,!0),i};i.Picture=function(t){this.id=t||null;this.image=null;this.container=u.create("galleria-image");n(this.container).css({overflow:"hidden",position:"relative"});this.original={width:0,height:0};this.ready=!1;this.isIframe=!1};i.Picture.prototype={cache:{},show:function(){u.show(this.image)},hide:function(){u.moveOut(this.image)},clear:function(){this.image=null},isCached:function(n){return!!this.cache[n]},preload:function(t){n(new Image).load(function(n,t){return function(){t[n]=n}}(t,this.cache)).attr("src",t)},load:function(r,f,e){var o,h;if(typeof f=="function"&&(e=f,f=null),this.isIframe)return o="if"+(new Date).getTime(),h=this.image=n("<iframe>",{src:r,frameborder:0,id:o,allowfullscreen:!0,css:{visibility:"hidden"}})[0],f&&n(h).css(f),n(this.container).find("iframe,img").remove(),this.container.appendChild(this.image),n("#"+o).load(function(i,r){return function(){t.setTimeout(function(){n(i.image).css("visibility","visible");typeof r=="function"&&r.call(i,i)},10)}}(this,e)),this.container;this.image=new Image;i.IE8&&n(this.image).css("filter","inherit");i.IE||i.CHROME||i.SAFARI||n(this.image).css("image-rendering","optimizequality");var c=!1,l=!1,a=n(this.container),s=n(this.image),y=function(){c?tt?n(this).attr("src",tt):i.raise("Image not found: "+r):(c=!0,t.setTimeout(function(n,t){return function(){n.attr("src",t+(t.indexOf("?")>-1?"&":"?")+u.timestamp())}}(n(this),r),50))},v=function(r,e,o){return function(){var s=function(){n(this).off("load");r.original=f||{height:this.height,width:this.width};i.HAS3D&&(this.style.MozTransform=this.style.webkitTransform="translate3d(0,0,0)");a.append(this);r.cache[o]=o;typeof e=="function"&&t.setTimeout(function(){e.call(r,r)},1)};this.width&&this.height?s.call(this):function(t){u.wait({until:function(){return t.width&&t.height},success:function(){s.call(t)},error:function(){l?i.raise("Could not extract width/height from image: "+t.src+". Traced measures: width:"+t.width+"px, height: "+t.height+"px."):(n(new Image).load(v).attr("src",t.src),l=!0)},timeout:100})}(this)}}(this,e,r);return a.find("iframe,img").remove(),s.css("display","block"),u.hide(this.image),n.each("minWidth minHeight maxWidth maxHeight".split(" "),function(n,t){s.css(t,/min/.test(t)?"0":"none")}),s.load(v).on("error",y).attr("src",r),this.container},scale:function(t){var e=this,o,s,w,b,y,h,l,v,p;if(t=n.extend({width:0,height:0,min:r,max:r,margin:0,complete:c,position:"center",crop:!1,canvas:!1,iframelimit:r},t),this.isIframe){o=t.width;s=t.height;t.iframelimit&&(y=f.min(t.iframelimit/o,t.iframelimit/s),y<1?(w=o*y,b=s*y,n(this.image).css({top:s/2-b/2,left:o/2-w/2,position:"absolute"})):n(this.image).css({top:0,left:0}));n(this.image).width(w||o).height(b||s).removeAttr("width").removeAttr("height");n(this.container).width(o).height(s);t.complete.call(e,e);try{this.image.contentWindow&&n(this.image.contentWindow).trigger("resize")}catch(k){}return this.container}return this.image?(v=n(e.container),u.wait({until:function(){return h=t.width||v.width()||u.parseValue(v.css("width")),l=t.height||v.height()||u.parseValue(v.css("height")),h&&l},success:function(){var o=(h-t.margin*2)/e.original.width,s=(l-t.margin*2)/e.original.height,c=f.min(o,s),v=f.max(o,s),d={"true":v,width:o,height:s,"false":c,landscape:e.original.width>e.original.height?v:c,portrait:e.original.width<e.original.height?v:c},r=d[t.crop.toString()],y="";t.max&&(r=f.min(t.max,r));t.min&&(r=f.max(t.min,r));n.each(["width","height"],function(t,i){n(e.image)[i](e[i]=e.image[i]=f.round(e.original[i]*r))});n(e.container).width(h).height(l);t.canvas&&a&&(a.elem.width=e.width,a.elem.height=e.height,y=e.image.src+":"+e.width+"x"+e.height,e.image.src=a.cache[y]||function(n){a.context.drawImage(e.image,0,0,e.original.width*r,e.original.height*r);try{return p=a.elem.toDataURL(),a.length+=p.length,a.cache[n]=p,p}catch(t){return e.image.src}}(y));var i={},w={},b=function(t,i,r){var o=0,s,h;return/\%/.test(t)?(s=parseInt(t,10)/100,h=e.image[i]||n(e.image)[i](),o=f.ceil(h*-1*s+r*s)):o=u.parseValue(t),o},k={top:{top:0},left:{left:0},right:{left:"100%"},bottom:{top:"100%"}};n.each(t.position.toLowerCase().split(" "),function(n,t){t==="center"&&(t="50%");i[n?"top":"left"]=t});n.each(i,function(t,i){k.hasOwnProperty(i)&&n.extend(w,k[i])});i=i.top?n.extend(i,w):w;i=n.extend({top:"50%",left:"50%"},i);n(e.image).css({position:"absolute",top:b(i.top,"height",l),left:b(i.left,"width",h)});e.show();e.ready=!0;t.complete.call(e,e)},error:function(){i.raise("Could not scale image: "+e.image.src)},timeout:1e3}),this):this.container}};n.extend(n.easing,{galleria:function(n,t,i,r,u){return(t/=u/2)<1?r/2*t*t*t+i:r/2*((t-=2)*t*t+2)+i},galleriaIn:function(n,t,i,r,u){return r*(t/=u)*t+i},galleriaOut:function(n,t,i,r,u){return-r*(t/=u)*(t-2)+i}});i.Finger=function(){var h=f.abs,u=i.HAS3D=function(){var i=e.createElement("p"),u,r=["webkit","O","ms","Moz",""],f,t=0,o="transform";for(s().html.insertBefore(i,null);r[t];t++)f=r[t]?r[t]+"Transform":o,i.style[f]!==undefined&&(i.style[f]="translate3d(1px,1px,1px)",u=n(i).css(r[t]?"-"+r[t].toLowerCase()+"-"+o:o));return s().html.removeChild(i),u!==undefined&&u.length>0&&u!=="none"}(),o=function(){var n="RequestAnimationFrame";return t.requestAnimationFrame||t["webkit"+n]||t["moz"+n]||t["o"+n]||t["ms"+n]||function(n){t.setTimeout(n,1e3/60)}}(),r=function(i,r){if(this.config={start:0,duration:500,onchange:function(){},oncomplete:function(){},easing:function(n,t,i,r,u){return-r*((t=t/u-1)*t*t*t-1)+i}},this.easeout=function(n,t,i,r,u){return r*((t=t/u-1)*t*t*t*t+1)+i},i.children.length){var f=this;n.extend(this.config,r);this.elem=i;this.child=i.children[0];this.to=this.pos=0;this.touching=!1;this.start={};this.index=this.config.start;this.anim=0;this.easing=this.config.easing;u||(this.child.style.position="absolute",this.elem.style.position="relative");n.each(["ontouchstart","ontouchmove","ontouchend","setup"],function(n,t){f[t]=function(n){return function(){n.apply(f,arguments)}}(f[t])});this.setX=function(){var n=f.child.style;if(!u){n.left=f.pos+"px";return}n.MozTransform=n.webkitTransform=n.transform="translate3d("+f.pos+"px,0,0)";return};n(i).on("touchstart",this.ontouchstart);n(t).on("resize",this.setup);n(t).on("orientationchange",this.setup);this.setup(),function e(){o(e);f.loop.call(f)}()}};return r.prototype={constructor:r,setup:function(){this.width=n(this.elem).width();this.length=f.ceil(n(this.child).width()/this.width);this.index!==0&&(this.index=f.max(0,f.min(this.index,this.length-1)),this.pos=this.to=-this.width*this.index)},setPosition:function(n){this.pos=n;this.to=n},ontouchstart:function(n){var t=n.originalEvent.touches;this.start={pageX:t[0].pageX,pageY:t[0].pageY,time:+new Date};this.isScrolling=null;this.touching=!0;this.deltaX=0;k.on("touchmove",this.ontouchmove);k.on("touchend",this.ontouchend)},ontouchmove:function(n){var t=n.originalEvent.touches;t&&t.length>1||n.scale&&n.scale!==1||(this.deltaX=t[0].pageX-this.start.pageX,this.isScrolling===null&&(this.isScrolling=!!(this.isScrolling||f.abs(this.deltaX)<f.abs(t[0].pageY-this.start.pageY))),this.isScrolling||(n.preventDefault(),this.deltaX/=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?f.abs(this.deltaX)/this.width+1.8:1,this.to=this.deltaX-this.index*this.width),n.stopPropagation())},ontouchend:function(){this.touching=!1;var n=+new Date-this.start.time<250&&f.abs(this.deltaX)>40||f.abs(this.deltaX)>this.width/2,t=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.isScrolling||this.show(this.index+(n&&!t?this.deltaX<0?1:-1:0));k.off("touchmove",this.ontouchmove);k.off("touchend",this.ontouchend)},show:function(n){n!=this.index?this.config.onchange.call(this,n):this.to=-(n*this.width)},moveTo:function(n){n!=this.index&&(this.pos=this.to=-(n*this.width),this.index=n)},loop:function(){var n=this.to-this.pos,r=1,t,i;if(this.width&&n&&(r=f.max(.5,f.min(1.5,f.abs(n/this.width)))),this.touching||f.abs(n)<=1){if(this.pos=this.to,n=0,this.anim&&!this.touching)this.config.oncomplete(this.index);this.anim=0;this.easing=this.config.easing}else{if(this.anim||(this.anim={start:this.pos,time:+new Date,distance:n,factor:r,destination:this.to}),t=+new Date-this.anim.time,i=this.config.duration*this.anim.factor,t>i||this.anim.destination!=this.to){this.anim=0;this.easing=this.easeout;return}this.pos=this.easing(null,t,this.anim.start,this.anim.distance,i)}this.setX()}},r}();n.fn.galleria=function(t){var r=this.selector;return n(this).length?this.each(function(){n.data(this,"galleria")&&(n.data(this,"galleria").destroy(),n(this).find("*").hide());n.data(this,"galleria",(new i).init(this,t))}):(n(function(){n(r).length?n(r).galleria(t):i.utils.wait({until:function(){return n(r).length},success:function(){n(r).galleria(t)},error:function(){i.raise('Init failed: Galleria could not find the element "'+r+'".')},timeout:5e3})}),this)};typeof module=="object"&&module&&typeof module.exports=="object"?module.exports=i:(t.Galleria=i,typeof define=="function"&&define.amd&&define("galleria",["jquery"],function(){return i}))}(jQuery,this);$(document).ready(function(){var n=window.location;FMC=new ForagingMap.Controller;FMS=new ForagingMap.Setting(n.origin+window.location.pathname);FML=new ForagingMap.Localization;FMS.fetch(FMC.initialize)}),function(n){var t=function(){function t(){this.router=new n.Router;this.user=new n.User({username:"Guest",name:"Guest",auth:0})}return t.prototype.initialize=function(){FMC.getUser().fetch({remove:!1,processData:!0,data:{logout:!1},success:function(){FMV=new n.View({el:$("#fm-view-main")});FMM=new n.Model;FMC.fetchSensors()},error:function(){console.log("Login as a guest permission.");FMV=new n.View({el:$("#fm-view-main")});FMM=new n.Model;FMC.fetchSensors()}})},t.prototype.getUser=function(){return this.user},t.prototype.getRouter=function(){return this.router},t.prototype.setSelectedItem=function(n){this.selectedItem=n},t.prototype.getSelectedItem=function(){return this.selectedItem},t.prototype.hasSelectedItem=function(){return this.selectedItem!=null?!0:!1},t.prototype.addKeyEventListener=function(){$(document).keyup(function(n){n.keyCode==27&&FMV.getUIView().getMode()!=1&&(FMV.getUIView().hide(),FMV.getMapView().resize(!1),FMV.getMapView().getMarkersView().inactiveMarkers(),FMV.getMapView().getControlView().resetControls())})},t.prototype.fetchLayers=function(){FMM.getLayers().fetch({remove:!1,processData:!0,success:function(n){console.log("Fetched "+n.models.length+" layers.");FMV.render();Backbone.history.start()},error:function(){console.log("Error while fetching layer data from the server.")}})},t.prototype.fetchItems=function(n){var t=this;FMM.getItems().fetch({remove:!1,processData:!0,data:{south:n.getSouthEast().lat,north:n.getNorthEast().lat,west:n.getSouthWest().lng,east:n.getSouthEast().lng,type:parseInt(FMM.getSensors().getCurType().get("id"))},success:function(n){console.log("Fetched "+n.models.length+" items.");FMV.getMapView().getMarkersView().render();t.fetchBends(FMM.getItems().getIdsToString())},error:function(){console.log("Error while fetching item data from the server.")}})},t.prototype.fetchBends=function(n){var t=this;FMM.getBends().fetch({remove:!1,processData:!0,data:{pids:n,type:parseInt(FMM.getSensors().getCurType().get("id"))},success:function(n){console.log("Fetched "+n.models.length+" sensor values.");t.fetchThresholds(FMM.getItems().getIdsToString())},error:function(){console.log("Error while fetching sensor data from the server.")}})},t.prototype.fetchBend=function(n,t){var i=this;FMM.getBends().fetch({remove:!1,processData:!0,data:{pids:n,type:parseInt(FMM.getSensors().getCurType().get("id"))},success:function(n){console.log("Fetched "+n.models.length+" sensor values.");i.fetchThresholds(FMM.getItems().getIdsToString());t!=undefined&&t()},error:function(){console.log("Error while fetching sensor data from the server.")}})},t.prototype.fetchThresholds=function(n){var t=this;FMM.getThresholds().fetch({remove:!1,processData:!0,data:{pids:n,type:parseInt(FMM.getSensors().getCurType().get("id"))},success:function(n){console.log("Fetched "+n.models.length+" thresholds.");FMV.getMapView().getMarkersView().render();FMV.getSliderView().getIsDraggable()||FMV.getSliderView().setIsDraggable(!0);FMV.getMapView().getMarkersView().getIsSelectable()||FMV.getMapView().getMarkersView().setIsSelectable(!0)},error:function(){console.log("Error while fetching threshold data from the server.")}})},t.prototype.fetchPictures=function(n){FMM.getPictures().fetch({remove:!0,processData:!0,data:{pid:n},success:function(n){console.log("Fetched "+n.models.length+" pictures.")},error:function(){console.log("Error while fetching picture data from the server.")}})},t.prototype.createItem=function(){var t=new n.Item({name:FML.getViewUIAddTempName(),desc:"",serial:"",type:0,sort:0,amount:0,lat:FMV.getMapView().getMap().getCenter().lat,lng:FMV.getMapView().getMap().getCenter().lng,regdate:moment(new Date).format(FMS.getDateTimeFormat()),update:moment(new Date).format(FMS.getDateTimeFormat())});return FMM.getItems().add(t),t},t.prototype.createItemWithInfo=function(t,i,r){var u=new n.Item({name:FML.getViewUIAddTempName(),desc:"",serial:r,type:0,sort:0,amount:0,lat:t,lng:i,regdate:moment(new Date).format(FMS.getDateTimeFormat()),update:moment(new Date).format(FMS.getDateTimeFormat())});return FMM.getItems().add(u),u},t.prototype.removeItem=function(n){return FMM.getItems().remove(n),n},t.prototype.fetchIcons=function(){$.each(FMS.getMarkerIcons(),function(t,i){FMM.getIcons().add(new n.Icon({name:i.name,src:i.src}))});$.each(FMM.getIcons().models,function(t,i){i.icon=new L.Icon({iconUrl:n.Setting.BASE_URL+FMS.getImageDir()+i.get("src"),shadowUrl:n.Setting.BASE_URL+FMS.getImageDir()+FMS.getImageMarkerShadow(),iconSize:new L.Point(40,40),iconAnchor:new L.Point(20,40),shadowAnchor:new L.Point(9,38),popupAnchor:new L.Point(0,-40)})})},t.prototype.fetchSensors=function(){FMM.getSensors().fetch({success:function(n){console.log("success fetch with "+n.models.length+" sensors");FMM.getSensors().intializeCurType();FMC.fetchIcons();FMC.fetchLayers();FMC.addKeyEventListener()},error:function(){console.log("Error while fetching sensor type data from the server.")}})},t.prototype.resetData=function(){$.each(FMM.getItems().models,function(n,t){FMV.getMapView().getMarkersView().removeMarker(t)});FMM.getItems().reset();FMM.getBends().reset();FMM.getThresholds().reset();FMV.getUIView().hide();FMV.getMapView().resize(!1);FMV.getMapView().getControlView().resetControls()},t}();n.Controller=t}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(t){this.routes={"":"home","map/:zoom/:lat/:lng/:interval/:start/:end/:cur":"map","*path":"home"};n.call(this,t)}return __extends(t,n),t.prototype.home=function(){console.log("we have loaded the home page.");this.navigate("map/"+FMS.getDefaultZoom()+"/"+FMS.getDefaultLat()+"/"+FMS.getDefaultLng()+"/"+FMS.getDefaultInterval()+"/"+moment(new Date).subtract(6,"month").valueOf()+"/"+moment(new Date).valueOf()+"/"+moment(new Date).valueOf(),{trigger:!0,replace:!0})},t.prototype.map=function(n,t,i,r,u,f,e){console.log("we have loaded the map page with zoom: "+n+" | lat: "+t+" | lng: "+i);FMV.getMapView().renderMap(t,i,n);FMV.getSliderView().renderSlider(r,u,moment(new Date).valueOf(),e)},t.prototype.refresh=function(){console.log("Refresh page.");window.location.reload()},t}(Backbone.Router);n.Router=t}(ForagingMap||(ForagingMap={})),function(n){var t=function(){function t(){this.url="core/json/localization.json?"+moment();this.error="N/A"}return t.prototype.fetch=function(t){var i=this;$.getJSON(n.Setting.BASE_URL+this.url,{cache:!1}).done(function(n){i.data=n.en;t()})},t.prototype.getViewTitle=function(){return this.data.view.title?this.data.view.title:this.error},t.prototype.getViewCreator=function(){return this.data.view.creator?this.data.view.creator:this.error},t.prototype.getViewList=function(){return this.data.view.list?this.data.view.list:this.error},t.prototype.getViewMap=function(){return this.data.view.map?this.data.view.map:this.error},t.prototype.getViewLogIn=function(){return this.data.view.login?this.data.view.login:this.error},t.prototype.getViewSignUp=function(){return this.data.view.signup?this.data.view.signup:this.error},t.prototype.getViewMenu=function(){return this.data.view.menu?this.data.view.menu:this.error},t.prototype.getViewUIItemNotSelectedErrorMsg=function(){try{return this.data.view.ui.itemNotSelectedErrorMsg}catch(n){return this.error}},t.prototype.getViewUILocateSuccessMsg=function(){try{return this.data.view.ui.locate.successMsg}catch(n){return this.error}},t.prototype.getViewUILocateErrorMsg=function(){try{return this.data.view.ui.locate.errorMsg}catch(n){return this.error}},t.prototype.getViewUIInfoHeader=function(){try{return this.data.view.ui.info.header}catch(n){return this.error}},t.prototype.getViewUIInfoSaveSuccessMsg=function(){try{return this.data.view.ui.info.saveSuccessMsg}catch(n){return this.error}},t.prototype.getViewUIInfoSaveErrorMsg=function(){try{return this.data.view.ui.info.saveErrorMsg}catch(n){return this.error}},t.prototype.getViewUIInfoDeleteConfirmMsg=function(){try{return this.data.view.ui.info.deleteConfirmMsg}catch(n){return this.error}},t.prototype.getViewUIInfoDeleteSuccessMsg=function(){try{return this.data.view.ui.info.deleteSuccessMsg}catch(n){return this.error}},t.prototype.getViewUIInfoDeleteErrorMsg=function(){try{return this.data.view.ui.info.deleteErrorMsg}catch(n){return this.error}},t.prototype.getViewUIAddHeader=function(){try{return this.data.view.ui.add.header}catch(n){return this.error}},t.prototype.getViewUIAddTempName=function(){try{return this.data.view.ui.add.tempName}catch(n){return this.error}},t.prototype.getViewUIAddTypeSelectError=function(){try{return this.data.view.ui.add.typeSelectError}catch(n){return this.error}},t.prototype.getViewUIDataHeader=function(){try{return this.data.view.ui.data.header}catch(n){return this.error}},t.prototype.getViewUIDataSaveSuccessMsg=function(){try{return this.data.view.ui.data.saveSuccessMsg}catch(n){return this.error}},t.prototype.getViewUIDataSaveErrorMsg=function(){try{return this.data.view.ui.data.saveErrorMsg}catch(n){return this.error}},t.prototype.getViewUIDataDeleteConfirmMsg=function(){try{return this.data.view.ui.data.deleteConfirmMsg}catch(n){return this.error}},t.prototype.getViewUIDataDeleteSuccessMsg=function(){try{return this.data.view.ui.data.deleteSuccessMsg}catch(n){return this.error}},t.prototype.getViewUIDataDeleteErrorMsg=function(){try{return this.data.view.ui.data.deleteErrorMsg}catch(n){return this.error}},t.prototype.getViewUIDataNoDataMsg=function(){try{return this.data.view.ui.data.noDataMsg}catch(n){return this.error}},t.prototype.getViewUIPictureHeader=function(){try{return this.data.view.ui.picture.header}catch(n){return this.error}},t.prototype.getViewUIPictureTempName=function(){try{return this.data.view.ui.picture.tempName}catch(n){return this.error}},t.prototype.getViewUIThresholdHeader=function(){try{return this.data.view.ui.threshold.header}catch(n){return this.error}},t.prototype.getViewMarkerSaveSuccessMsg=function(){try{return this.data.view.map.marker.saveSuccessMsg}catch(n){return this.error}},t.prototype.getViewMarkerSaveErrorMsg=function(){try{return this.data.view.map.marker.saveErrorMsg}catch(n){return this.error}},t.prototype.getViewUILayerHeader=function(){try{return this.data.view.ui.layer.header}catch(n){return this.error}},t}();n.Localization=t}(ForagingMap||(ForagingMap={})),function(n){var t=function(){function n(t){this.url="core/json/setting.json";n.BASE_URL=t}return n.prototype.fetch=function(t){var i=this;$.getJSON(n.BASE_URL+this.url,{}).done(function(n){i.data=n.setting;FML.fetch(t)})},n.prototype.getMaxZoom=function(){return parseInt(this.data.maxZoom)},n.prototype.getDefaultZoom=function(){return parseInt(this.data.defaultZoom)},n.prototype.getDefaultLat=function(){return parseFloat(this.data.defaultLat)},n.prototype.getDefaultLng=function(){return parseFloat(this.data.defaultLng)},n.prototype.getTileMapAddress=function(){return this.data.tileMapAddress},n.prototype.getMsgTimeout=function(){return parseInt(this.data.msgTimeout)},n.prototype.getDateTimeFormat=function(){return this.data.dateTimeFormat},n.prototype.getDateTimeFormatSimple=function(){return this.data.dateTimeFormatSimple},n.prototype.getImageDir=function(){return this.data.imageDir},n.prototype.getImageMarkerBlank=function(){return this.data.imageMarkerBlank},n.prototype.getImageMarkerNew=function(){return this.data.imageMarkerNew},n.prototype.getImageMarkerShadow=function(){return this.data.imageMarkerShadow},n.prototype.getCircleRadiusMultiplier=function(){return this.data.circleRadiusMultiplier},n.prototype.getTempCircleColor=function(){return this.data.tempCircleColor},n.prototype.getTempCircleFillColor=function(){return this.data.tempCircleFillColor},n.prototype.getFruitCircleColor=function(){return this.data.fruitCircleColor},n.prototype.getStationCircleColor=function(){return this.data.stationCircleColor},n.prototype.getZeroAlpha=function(){return this.data.zeroAlpha},n.prototype.getInactiveAlpha=function(){return this.data.inactiveAlpha},n.prototype.getHalfAlpha=function(){return this.data.halfAplha},n.prototype.getActiveAlpha=function(){return this.data.activeAlpha},n.prototype.getFullAlpha=function(){return this.data.fullAlpha},n.prototype.getLocateZoom=function(){return parseInt(this.data.locateZoom)},n.prototype.getPictureDir=function(){return this.data.pictureDir},n.prototype.getBaseUrl=function(){return n.BASE_URL},n.prototype.getFetchDataDelay=function(){return this.data.fetchDataDelay},n.prototype.getMarkerIcons=function(){return this.data.markerIcons},n.prototype.getDefaultInterval=function(){return this.data.defaultInterval},n.prototype.getHighValueColor=function(){return this.data.highValueColor},n.prototype.getLowValueColor=function(){return this.data.lowValueColor},n}();n.Setting=t}(ForagingMap||(ForagingMap={}));FMViewTemplate="";FMViewTemplate+='<div id="fm-view-body" class="panel panel-primary">';FMViewTemplate+='<div class="panel-heading">';FMViewTemplate+='<div id="fm-logo" class="panel-title nav-title"><%= title %><\/div>';FMViewTemplate+='<div class="btn-group nav-primary" role="group" aria-label="nav-primary">';FMViewTemplate+='<div id="fm-view-slider"><\/div>';FMViewTemplate+="<\/div>";FMViewTemplate+='<div class="btn-group nav-secondary" role="group" aria-label="nav-secondary">';FMViewTemplate+='<button type="button" id="btn-toggle-menu" class="btn btn-default"><span class="glyphicon glyphicon-tasks"><\/span> <%= menu %><\/button>';FMViewTemplate+="<\/div>";FMViewTemplate+='<div class="clear" />';FMViewTemplate+="<\/div>";FMViewTemplate+='<div id="fm-view-map">';FMViewTemplate+='<div id="leaflet-view-ui"><\/div>';FMViewTemplate+='<div id="leaflet-view-map"><\/div>';FMViewTemplate+='<div id="leaflet-view-msg"><\/div>';FMViewTemplate+='<div id="leaflet-view-menu"><\/div>';FMViewTemplate+='<div id="leaflet-view-galleria">';FMViewTemplate+="<\/div>";FMViewTemplate+='<div id="leaflet-view-animation"><\/div>';FMViewTemplate+="<\/div>";FMViewTemplate+="<\/div>";FMUIInfoLayerTemplate="";FMUIInfoLayerTemplate+='<div class="ui-header"><%= header %><\/div>';FMUIInfoLayerTemplate+='<div class="ui-body">';FMUIInfoLayerTemplate+='<form class="form-horizontal">';FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-id" class="col-xs-3 control-label">#id<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-id" value="<%= id %>" readonly>';FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-name" class="col-xs-3 control-label">Name<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-name" value="<%= name %>"<% if (!isAdmin) { %>readonly<% } %>>';FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-desc" class="col-xs-3 control-label">Description<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-desc" value="<%= desc %>"<% if (!isAdmin) { %>readonly<% } %>>';FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-serial" class="col-xs-3 control-label">Sensor Serial<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-serial" value="<%= serial %>"<% if (!isAdmin) { %>readonly<% } %>>';FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<% if (isAdmin) { %>";FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-qrcode" class="col-xs-3 control-label">QRCode<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<input class="fileupload" id="item-info-qrcode" placeholder="" type="file" accept="image/*" capture="camera" />';FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<% } %>";FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-type" class="col-xs-3 control-label">Type<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<select id="item-info-type" class="selectpicker" <% if (!isAdmin) { %>disabled<% } %>>';FMUIInfoLayerTemplate+='<optgroup label="Fruit">';FMUIInfoLayerTemplate+="<% _.each(sort1, function (sort) { %>";FMUIInfoLayerTemplate+='<option data-type="1" data-sort="<%= sort.get("id") %>"><%= sort.get("name") %><\/option>';FMUIInfoLayerTemplate+="<% }); %>";FMUIInfoLayerTemplate+="                              <\/optgroup>";FMUIInfoLayerTemplate+="<\/select>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-amount" class="col-xs-3 control-label">Amount<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<div class="input-group">';FMUIInfoLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-amount" value="<%= amount %>"<% if (!isAdmin) { %>readonly<% } %>>';FMUIInfoLayerTemplate+='<span class="input-group-addon">s<\/span>';FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-lat" class="col-xs-3 control-label">Latitude<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<div class="input-group">';FMUIInfoLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-lat" value="<%= lat %>"<% if (!isAdmin) { %>readonly<% } %>>';FMUIInfoLayerTemplate+='<span class="input-group-addon">°<\/span>';FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-lng" class="col-xs-3 control-label">Longitude<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<div class="input-group">';FMUIInfoLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-lng" value="<%= lng %>"<% if (!isAdmin) { %>readonly<% } %>>';FMUIInfoLayerTemplate+='<span class="input-group-addon">°<\/span>';FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-date" class="col-xs-3 control-label">Updated<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<input type="text" class="form-control" id="item-info-date" value="<%= update %>" readonly>';FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+='<div class="form-group">';FMUIInfoLayerTemplate+='<label for="item-info-reg" class="col-xs-3 control-label">Registered<\/label>';FMUIInfoLayerTemplate+='<div class="col-xs-9">';FMUIInfoLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-reg" value="<%= regdate %>" readonly>';FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<% if (isAdmin) { %>";FMUIInfoLayerTemplate+='<button id="item-info-btn-edit" type="button" class="btn btn-default col-xs-6"><span class="glyphicon glyphicon-ok"><\/span> Save<\/button>';FMUIInfoLayerTemplate+='<button id="item-info-btn-delete" type="button" class="btn btn-default col-xs-6"><span class="glyphicon glyphicon-remove"><\/span> Delete<\/button>';FMUIInfoLayerTemplate+='<div style="clear:both;"/>';FMUIInfoLayerTemplate+="<\/form>";FMUIInfoLayerTemplate+="<\/div>";FMUIInfoLayerTemplate+="<% } %>";FMUIAddLayerTemplate="";FMUIAddLayerTemplate+='<div class="ui-header"><%= header %><\/div>';FMUIAddLayerTemplate+='<div class="ui-body">';FMUIAddLayerTemplate+='<form class="form-horizontal">';FMUIAddLayerTemplate+='<div class="form-group">';FMUIAddLayerTemplate+='<label for="item-info-name" class="col-xs-3 control-label">Name<\/label>';FMUIAddLayerTemplate+='<div class="col-xs-9">';FMUIAddLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-name" value="<%= name %>">';FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+='<div class="form-group">';FMUIAddLayerTemplate+='<label for="item-info-desc" class="col-xs-3 control-label">Description<\/label>';FMUIAddLayerTemplate+='<div class="col-xs-9">';FMUIAddLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-desc" value="<%= desc %>">';FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+='<div class="form-group">';FMUIAddLayerTemplate+='<label for="item-info-serial" class="col-xs-3 control-label">Sensor Serial<\/label>';FMUIAddLayerTemplate+='<div class="col-xs-9">';FMUIAddLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-serial" value="<%= serial %>">';FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+='<div class="form-group">';FMUIAddLayerTemplate+='<label for="item-info-qrcode" class="col-xs-3 control-label">QRCode<\/label>';FMUIAddLayerTemplate+='<div class="col-xs-9">';FMUIAddLayerTemplate+='<input class="fileupload" id="item-info-qrcode" placeholder="" type="file" accept="image/*" capture="camera" />';FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+='<div class="form-group">';FMUIAddLayerTemplate+='<label for="item-info-type" class="col-xs-3 control-label">Type<\/label>';FMUIAddLayerTemplate+='<div class="col-xs-9">';FMUIAddLayerTemplate+='<select id="item-info-type" class="selectpicker">';FMUIAddLayerTemplate+='<optgroup label="None">';FMUIAddLayerTemplate+='<option data-type="0" data-sort="0">None<\/option>';FMUIAddLayerTemplate+="<\/optgroup>";FMUIAddLayerTemplate+='<optgroup label="Fruit">';FMUIAddLayerTemplate+="<% _.each(sort1, function (sort) { %>";FMUIAddLayerTemplate+='<option data-type="1" data-sort="<%= sort.get("id") %>"><%= sort.get("name") %><\/option>';FMUIAddLayerTemplate+="<% }); %>";FMUIAddLayerTemplate+="<\/optgroup>";FMUIAddLayerTemplate+="<\/select>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+='<div class="form-group">';FMUIAddLayerTemplate+='<label for="item-info-amount" class="col-xs-3 control-label">Amount<\/label>';FMUIAddLayerTemplate+='<div class="col-xs-9">';FMUIAddLayerTemplate+='<div class="input-group">';FMUIAddLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-amount" value="<%= amount %>">';FMUIAddLayerTemplate+='<span class="input-group-addon">s<\/span>';FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+='<div class="form-group">';FMUIAddLayerTemplate+='<label for="item-info-lat" class="col-xs-3 control-label">Latitude<\/label>';FMUIAddLayerTemplate+='<div class="col-xs-9">';FMUIAddLayerTemplate+='<div class="input-group">';FMUIAddLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-lat" value="<%= lat %>">';FMUIAddLayerTemplate+='<span class="input-group-addon">°<\/span>';FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+='<div class="form-group">';FMUIAddLayerTemplate+='<label for="item-info-lng" class="col-xs-3 control-label">Longitude<\/label>';FMUIAddLayerTemplate+='<div class="col-xs-9">';FMUIAddLayerTemplate+='<div class="input-group">';FMUIAddLayerTemplate+='<input type="text" class="form-control" placeholder="" id="item-info-lng" value="<%= lng %>">';FMUIAddLayerTemplate+='<span class="input-group-addon">°<\/span>';FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+="<\/div>";FMUIAddLayerTemplate+='<button id="item-info-btn-edit" type="button" class="btn btn-default col-xs-6"><span class="glyphicon glyphicon-ok"><\/span> Save<\/button>';FMUIAddLayerTemplate+='<button id="item-info-btn-delete" type="button" class="btn btn-default col-xs-6"><span class="glyphicon glyphicon-remove"><\/span> Cancel<\/button>';FMUIAddLayerTemplate+='<div style="clear:both;"/>';FMUIAddLayerTemplate+="<\/form>";FMUIAddLayerTemplate+="<\/div>";FMViewUIDataLayerTemplate="";FMViewUIDataLayerTemplate+='<div class="ui-header"><%= header %><\/div>';FMViewUIDataLayerTemplate+='<div class="ui-body">';FMViewUIDataLayerTemplate+='<div id="bendWrapper" style="overflow-x: scroll; overflow-y: hidden;"><canvas id="bendChart" width= "460" height= "250"><\/canvas><\/div>';FMViewUIDataLayerTemplate+="<% if (isAdmin) { %>";FMViewUIDataLayerTemplate+='<button type="button" data-toggle="collapse" data-target="#date-add-panel" class="btn btn-default col-xs-12"><span class="glyphicon glyphicon-plus"><\/span> Add New Data<\/button>';FMViewUIDataLayerTemplate+='<div class="collapse" id="date-add-panel">';FMViewUIDataLayerTemplate+="<% } %>";FMViewUIDataLayerTemplate+='<\/div><div class="grid-data"><\/div>';FMViewUIDataLayerTemplate+="<\/div>";FMViewUIThresholdLayerTemplate="";FMViewUIThresholdLayerTemplate+='<div class="ui-header"><%= header %><\/div>';FMViewUIThresholdLayerTemplate+='<div class="ui-body">';FMViewUIThresholdLayerTemplate+="<% if (isAdmin) { %>";FMViewUIThresholdLayerTemplate+='<button type="button" data-toggle="collapse" data-target="#threshold-add-panel" class="btn btn-default col-xs-12"><span class="glyphicon glyphicon-plus"><\/span> Add New Threshold<\/button>';FMViewUIThresholdLayerTemplate+='<div class="collapse" id="threshold-add-panel">';FMViewUIThresholdLayerTemplate+="<% } %>";FMViewUIThresholdLayerTemplate+="<\/div>";FMViewUIThresholdLayerTemplate+="<\/div>";FMViewUIDataLayerDeleteTemplate="";FMViewUIDataLayerDeleteTemplate='<button type="button" class="btn btn-default btn-table"><span class="glyphicon glyphicon-remove"><\/span><\/button>';FMViewUIDataLayerAddTemplate="";FMViewUIDataLayerAddTemplate='<button type="button" class="btn btn-default btn-table"><span class="glyphicon glyphicon-plus"><\/span><\/button>';FMViewUILayerPictureTemplate="";FMViewUILayerPictureTemplate+='<div class="ui-header"><%= header %><\/div>';FMViewUILayerPictureTemplate+='<div class="ui-body ui-picture">';FMViewUILayerPictureTemplate+="<% if (isAdmin) { %>";FMViewUILayerPictureTemplate+='<button type="button" data-toggle="collapse" data-target="#picture-add-panel" class="btn btn-default col-xs-12"><span class="glyphicon glyphicon-plus"><\/span> Add New Picture<\/button>';FMViewUILayerPictureTemplate+='<div class="collapse" id="picture-add-panel">';FMViewUILayerPictureTemplate+="<% } %>";FMViewUILayerPictureTemplate+="<\/div>";FMViewUILayerPictureTemplate+="<\/div>";FMViewUIPictureTemplate="";FMViewUIPictureTemplate+='<img class="picture-thumbnail" src="<%= url %>" />';FMUIPictureSelectTemplate="";FMUIPictureSelectTemplate+='<input class="fileupload" type="file" accept="image/*" capture="camera" />';FMUIPictureAddTemplate="";FMUIPictureAddTemplate='<button type="button" class="btn btn-default btn-table"><span class="glyphicon glyphicon-plus"><\/span><\/button>';FMViewGalleryTemplate="";FMViewGalleryTemplate+='<button id="btn-galleria-close" type="button" class="btn btn-default btn-table"><span class="glyphicon glyphicon-remove-circle"><\/span> Close<\/button>';FMViewGalleryTemplate+='<div class="galleria">';FMViewGalleryTemplate+="<% _.each(pictures, function(picture) { %>";FMViewGalleryTemplate+='<img data-id="<%= picture.get("id") %>" src="<%= dir %><%= picture.get ("url") %>" data-title="<%= picture.get ("name") %>" data-description="<%= moment(picture.get("date")).format(FMS.getDateTimeFormat()) %>" />';FMViewGalleryTemplate+="<% }); %>";FMViewGalleryTemplate+="<\/div>";FMViewLayerTemplate="";FMViewLayerTemplate+='<div class="ui-header"><%= header %><\/div>';FMViewLayerTemplate+='<div class="ui-body">';FMViewLayerTemplate+='<button type="button" data-toggle="collapse" data-target="#layer-add-panel" class="btn btn-default col-xs-12"><span class="glyphicon glyphicon-plus"><\/span> Manage Layers<\/button>';FMViewLayerTemplate+='<div class="collapse <%= isIn %>" id="layer-add-panel">';FMViewLayerTemplate+='<div id="layer-add-grid"><\/div>';FMViewLayerTemplate+='<div id="layer-list-grid"><\/div>';FMViewLayerTemplate+="<\/div>";FMViewLayerTemplate+='<div class="checkbox btn btn-negative col-xs-12 layer-checkbox layer-checkbox-header">';FMViewLayerTemplate+='<label class="label-header"><input type="checkbox" id="check-unassigned-layer" data-sort="0" checked>Unassigned Layer Toggle<\/label>';FMViewLayerTemplate+="<\/div>";FMViewLayerTemplate+='<div class="checkbox btn btn-default col-xs-12 layer-checkbox layer-checkbox-header">';FMViewLayerTemplate+='<label class="label-header"><input type="checkbox" id="check-event-layer" checked>Event Layer Toggle<\/label>';FMViewLayerTemplate+="<% _.each(sort1, function (sort) { %>";FMViewLayerTemplate+='<div class="checkbox btn btn-default col-xs-12 layer-checkbox">';FMViewLayerTemplate+='<label><input type="checkbox" value= "" data-type="1" data-sort="<%= sort.get("id") %>"><%= sort.get("name") %> - <%= sort.get("desc") %><\/label>';FMViewLayerTemplate+="<\/div>";FMViewLayerTemplate+="<% }); %>";FMViewLayerTemplate+="<\/div>";FMMenuTemplate="";FMMenuTemplate+="";FMMenuTemplate+='<div class="ui-body">';FMMenuTemplate+='<form class="form-horizontal">';FMMenuTemplate+="<% if (!isAdmin) { %>";FMMenuTemplate+='<div class="form-group">';FMMenuTemplate+='<label for="input-menu-login-username" class="col-xs-3 control-label">Username<\/label>';FMMenuTemplate+='<div class="col-xs-9">';FMMenuTemplate+='<input type="text" class="form-control" placeholder="" id="input-menu-login-username" value="">';FMMenuTemplate+="<\/div>";FMMenuTemplate+="<\/div>";FMMenuTemplate+='<div class="form-group">';FMMenuTemplate+='<label for="input-menu-login-password" class="col-xs-3 control-label">Password<\/label>';FMMenuTemplate+='<div class="col-xs-9">';FMMenuTemplate+='<input type="password" class="form-control" placeholder="" id="input-menu-login-password" value="">';FMMenuTemplate+="<\/div>";FMMenuTemplate+="<\/div>";FMMenuTemplate+='<button id="btn-menu-login" type="button" class="btn btn-default col-xs-12"><span class="glyphicon glyphicon-log-in"><\/span> Sign In<\/button>';FMMenuTemplate+='<div class="clear-float"><\/div>';FMMenuTemplate+="<\/form>";FMMenuTemplate+="<% } else { %>";FMMenuTemplate+='<button id="btn-menu-logout" type="button" class="btn btn-default col-xs-12"><span class="glyphicon glyphicon-log-out"><\/span> Log Out from <strong><%= username %><\/strong><\/button>';FMMenuTemplate+='<div class="clear-float"><\/div>';FMMenuTemplate+="<\/form>";FMMenuTemplate+="<% } %>";FMMenuTemplate+="<hr>";FMMenuTemplate+="<% if (isAdmin) { %>";FMMenuTemplate+='<form class="form-horizontal">';FMMenuTemplate+='<div class="form-group">';FMMenuTemplate+='<label for="input-menu-qrcode" class="col-xs-3 control-label">QRCode<\/label>';FMMenuTemplate+='<div class="col-xs-9">';FMMenuTemplate+='<input class="fileupload" id="input-menu-qrcode" placeholder="" type="file" accept="image/*" capture="camera" />';FMMenuTemplate+="<\/div>";FMMenuTemplate+="<\/div>";FMMenuTemplate+='<button type="button" id="btn-near-loc" class="btn btn-default col-xs-12"><span class="glyphicon glyphicon-screenshot"><\/span> Get Near Items<\/button>';FMMenuTemplate+='<div id="item-near-loc">';FMMenuTemplate+="<\/div>";FMMenuTemplate+='<div class="clear-float"><\/div>';FMMenuTemplate+='<button id="btn-menu-register-sensor" type="button" class="btn btn-default col-xs-12"><span class="glyphicon glyphicon-plus-sign"><\/span> Create New Item<\/button>';FMMenuTemplate+='<div class="clear-float"><\/div>';FMMenuTemplate+="<\/form>";FMMenuTemplate+="<% } %>";FMMenuTemplate+='<label class="control-label">Time Slider Interval<\/label>';FMMenuTemplate+='<div class="clear-float"><\/div>';FMMenuTemplate+='<button id="btn-menu-slider-1" type="button" class="btn btn-default col-xs-3"><span class="glyphicon glyphicon-time"><\/span> 1 sec<\/button>';FMMenuTemplate+='<button id="btn-menu-slider-60" type="button" class="btn btn-default col-xs-3"><span class="glyphicon glyphicon-time"><\/span> 1 min<\/button>';FMMenuTemplate+='<button id="btn-menu-slider-3600" type="button" class="btn btn-default col-xs-3"><span class="glyphicon glyphicon-time"><\/span> 1 hour<\/button>';FMMenuTemplate+='<button id="btn-menu-slider-24" type="button" class="btn btn-default col-xs-3"><span class="glyphicon glyphicon-time"><\/span> 1 day<\/button>';FMMenuTemplate+="<hr>";FMMenuTemplate+="<\/div>";FMViewMenuSetSerialTemplate="";FMViewMenuSetSerialTemplate='<button type="button" class="btn btn-default btn-table"><span class="glyphicon glyphicon-hand-left"><\/span><\/button>';FMUIAddSensorTemplate="";FMUIAddSensorTemplate+='<div class="ui-header"><%= header %><\/div>';FMUIAddSensorTemplate+='<div class="ui-body">';FMUIAddSensorTemplate+="<% if (isAdmin) { %>";FMUIAddSensorTemplate+='<button type="button" data-toggle="collapse" data-target="#sensor-add-panel" class="btn btn-default col-xs-12"><span class="glyphicon glyphicon-plus"><\/span> Add New Sensor<\/button>';FMUIAddSensorTemplate+='<div class="collapse" id="sensor-add-panel">';FMUIAddSensorTemplate+="<% } %>";FMUIAddSensorTemplate+="<\/div>";FMUIAddSensorTemplate+="<\/div>";__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(n){t.call(this,n);this.setElement(n.el);this.origWidth=this.$el.innerWidth();this.origHeight=this.$el.innerHeight()}return __extends(i,t),i.prototype.render=function(){var i=_.template(FMViewTemplate),t;t=FMV.getOrigWidth()<540?{title:FML.getViewTitle(),list:FML.getViewList(),map:FML.getViewMap(),login:FML.getViewLogIn(),signup:FML.getViewSignUp(),menu:""}:{title:FML.getViewTitle(),list:FML.getViewList(),map:FML.getViewMap(),login:FML.getViewLogIn(),signup:FML.getViewSignUp(),menu:FML.getViewMenu()};this.$el.html(i(t));this.vMap=new n.MapView({el:$("#leaflet-view-map")});this.vUI=new n.UIView({el:$("#leaflet-view-ui")});this.vMsg=new n.MsgView({el:$("#leaflet-view-msg")});this.vGallery=new n.GalleryView({el:$("#leaflet-view-galleria")});this.vSlider=new n.SliderView({el:$("#fm-view-slider")});this.vMenu=new n.MenuView({el:$("#leaflet-view-menu")});this.vAnimation=new n.AnimationView({el:$("#leaflet-view-animation")});this.addEventListener();this.resize()},i.prototype.addEventListener=function(){var n=this;$("#btn-toggle-menu").off("click");$("#btn-toggle-menu").on("click",function(){n.vMenu.toggle()});$("#fm-logo").off("click");$("#fm-logo").on("click",function(){location.reload()})},i.prototype.resize=function(){this.origWidth=this.$el.innerWidth();this.origHeight=this.$el.innerHeight();this.vSlider.resize()},i.prototype.getOrigWidth=function(){return this.origWidth},i.prototype.getOrigHeight=function(){return this.origHeight},i.prototype.getMapView=function(){return this.vMap},i.prototype.getUIView=function(){return this.vUI},i.prototype.getMsgView=function(){return this.vMsg},i.prototype.getGalleryView=function(){return this.vGallery},i.prototype.getSliderView=function(){return this.vSlider},i.prototype.getMenuView=function(){return this.vMenu},i.prototype.getAnimationView=function(){return this.vAnimation},i.prototype.getWidth=function(){return this.$el.innerWidth()},i}(Backbone.View);n.View=t}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(n){t.call(this,n);this.setElement(n.el)}return __extends(i,t),i.prototype.getMapZoom=function(){return this.lMap.getZoom()},i.prototype.getMapCenter=function(){return this.lMap.getCenter()},i.prototype.getMapBounds=function(){return this.lMap.getBounds()},i.prototype.renderMap=function(t,i,r){var u=this;if(u.lMap==null){u.lMap=L.map(u.$el[0].id,{closePopupOnClick:!1,zoomControl:!1,doubleClickZoom:!1}).setView(new L.LatLng(t,i),r);L.tileLayer(FMS.getTileMapAddress(),{minZoom:3,maxZoom:FMS.getMaxZoom()}).addTo(u.lMap);u.lMap.invalidateSize(!1);u.lMap.doubleClickZoom.disable();u.lMap.on("moveend",function(){FMC.getRouter().navigate("map/"+u.getMapZoom()+"/"+u.getMapCenter().lat+"/"+u.getMapCenter().lng+"/"+FMV.getSliderView().getTimeInterval()+"/"+FMV.getSliderView().getStartDateValue()+"/"+FMV.getSliderView().getEndDateValue()+"/"+FMV.getSliderView().getCurDateValue(),{trigger:!1,replace:!0});u.waitForFetchData()});u.lMap.whenReady(function(){FMC.fetchItems(u.lMap.getBounds());u.vMarkers=new n.MarkersView;u.vControl=new n.MapControlView({el:$(".leaflet-top.leaflet-right")});u.vSensor=new n.SensorSelect({el:$(".leaflet-top.leaflet-left")});u.vAnimation=new n.AnimationToggle({el:$(".leaflet-bottom.leaflet-left")})});u.lMap.on("dblclick",function(){FMV.getUIView().getMode()!=1&&(FMV.getUIView().hide(),FMV.getMapView().resize(!1),FMV.getMapView().getMarkersView().inactiveMarkers(),FMV.getMapView().getControlView().resetControls())})}else u.lMap.setView(new L.LatLng(t,i),r)},i.prototype.waitForFetchData=function(){var n=this;n.timeout!=null&&clearTimeout(n.timeout);n.timeout=setTimeout(function(){FMC.fetchItems(n.getMapBounds())},FMS.getFetchDataDelay())},i.prototype.getMap=function(){return this.lMap},i.prototype.getMarkersView=function(){return this.vMarkers},i.prototype.getControlView=function(){return this.vControl},i.prototype.getSensorView=function(){return this.vSensor},i.prototype.getAnimationToggleView=function(){return this.vAnimation},i.prototype.show=function(){$("#leaflet-view-map").removeClass("hidden")},i.prototype.hide=function(){$("#leaflet-view-map").addClass("hidden")},i.prototype.resize=function(n){var t=this;FMV.getUIView().getIsOpen()?(t.$el.addClass("view-map-half"),t.$el.css({width:t.$el.parent().width()-FMV.getUIView().getOuterWidth()})):(t.$el.removeAttr("style"),t.$el.removeClass("view-map-half"));t.lMap.invalidateSize(!1);FMC.hasSelectedItem()&&n&&t.lMap.setView(new L.LatLng(parseFloat(FMC.getSelectedItem().get("lat")),parseFloat(FMC.getSelectedItem().get("lng"))))},i.prototype.SetIsMapPanZoomAvailable=function(n){n?(FMV.getMapView().getMap().dragging.enable(),FMV.getMapView().getMap().touchZoom.enable(),FMV.getMapView().getMap().scrollWheelZoom.enable()):(FMV.getMapView().getMap().dragging.disable(),FMV.getMapView().getMap().touchZoom.disable(),FMV.getMapView().getMap().scrollWheelZoom.disable())},i}(Backbone.View);n.MapView=t}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(t){n.call(this,t);this.setElement(t.el);this.render()}return __extends(t,n),t.prototype.render=function(){var n=this,t=_.template(FMMapControlViewTemplate),i={isAdmin:FMC.getUser().getIsAdmin()};n.$el.html(t(i));n.removeEventListener();n.addEventListener()},t.prototype.removeEventListener=function(){var n=this;n.$(".control-button").off("mouseenter");n.$(".control-button").off("mouseleave");n.$(".control-button.zoomin").off("click");n.$(".control-button.zoomout").off("click");n.$(".control-button.locate").off("click");n.$(".control-button.layer").off("click");n.$(".control-button.info").off("click");n.$(".control-button.add").off("click");n.$(".control-button.data").off("click");n.$(".control-button.picture").off("click")},t.prototype.addEventListener=function(){var n=this;n.$(".control-button").on("mouseenter",function(){FMV.getMapView().SetIsMapPanZoomAvailable(!1)});n.$(".control-button").on("mouseleave",function(){FMV.getMapView().SetIsMapPanZoomAvailable(!0)});n.$(".control-button.zoomin").on("click",function(){console.log("zoomIn()");FMV.getMapView().getMap().zoomIn()});n.$(".control-button.zoomout").on("click",function(){FMV.getMapView().getMap().zoomOut()});n.$(".control-button.locate").on("click",function(){FMV.getUIView().getIsLocked()||navigator.geolocation&&navigator.geolocation.getCurrentPosition(n.updatePosition)});n.$(".control-button.layer").on("click",function(){FMV.getUIView().getIsLocked()||($(this).hasClass("layer-active")?($(this).removeClass("layer-active"),FMV.getUIView().hide()):(n.resetControls(),$(this).addClass("layer-active"),FMV.getUIView().show(5)),FMV.getMapView().resize(!1))});n.$(".control-button.info").on("click",function(){FMV.getUIView().getIsLocked()||($(this).hasClass("info-active")?($(this).removeClass("info-active"),FMV.getUIView().hide(),FMV.getMapView().resize(!1)):FMC.hasSelectedItem()?(n.resetControls(),$(this).addClass("info-active"),FMV.getUIView().show(2),FMV.getMapView().resize(!0)):FMV.getMsgView().renderError(FML.getViewUIItemNotSelectedErrorMsg()))});n.$(".control-button.add").on("click",function(){if($(this).hasClass("add-active")){if($(this).removeClass("add-active"),FMC.hasSelectedItem()){var t=FMC.removeItem(FMC.getSelectedItem());FMV.getMapView().getMarkersView().removeMarker(t);FMC.setSelectedItem(null);FMV.getUIView().hide();FMV.getMapView().resize(!1)}}else n.resetControls(),$(this).addClass("add-active"),FMC.setSelectedItem(FMC.createItem()),FMV.getUIView().show(1),FMV.getMapView().resize(!0),setTimeout(function(){FMV.getMapView().getMarkersView().render()},500)});n.$(".control-button.data").on("click",function(){FMV.getUIView().getIsLocked()||($(this).hasClass("data-active")?($(this).removeClass("data-active"),FMV.getUIView().hide(),FMV.getMapView().resize(!1)):FMC.hasSelectedItem()?(n.resetControls(),$(this).addClass("data-active"),FMV.getUIView().show(3),FMV.getMapView().resize(!0)):FMV.getMsgView().renderError(FML.getViewUIItemNotSelectedErrorMsg()))});n.$(".control-button.picture").on("click",function(){FMV.getUIView().getIsLocked()||($(this).hasClass("picture-active")?($(this).removeClass("picture-active"),FMV.getUIView().hide(),FMV.getMapView().resize(!1)):FMC.hasSelectedItem()?(n.resetControls(),$(this).addClass("picture-active"),FMV.getUIView().show(4),FMV.getMapView().resize(!0)):FMV.getMsgView().renderError(FML.getViewUIItemNotSelectedErrorMsg()))});n.$(".control-button.threshold").on("click",function(){FMV.getUIView().getIsLocked()||($(this).hasClass("threshold-active")?($(this).removeClass("threshold-active"),FMV.getUIView().hide(),FMV.getMapView().resize(!1)):FMC.hasSelectedItem()?(n.resetControls(),$(this).addClass("threshold-active"),FMV.getUIView().show(6),FMV.getMapView().resize(!0)):FMV.getMsgView().renderError(FML.getViewUIItemNotSelectedErrorMsg()))})},t.prototype.resetControls=function(){var n=this;n.$(".control-button.layer").removeClass("layer-active");n.$(".control-button.info").removeClass("info-active");n.$(".control-button.add").removeClass("add-active");n.$(".control-button.data").removeClass("data-active");n.$(".control-button.threshold").removeClass("threshold-active");n.$(".control-button.picture").removeClass("picture-active")},t.prototype.updatePosition=function(n){var t=this;FMC.getRouter().navigate("map/"+FMS.getLocateZoom()+"/"+n.coords.latitude+"/"+n.coords.longitude+"/"+FMV.getSliderView().getTimeInterval()+"/"+FMV.getSliderView().getStartDateValue()+"/"+FMV.getSliderView().getEndDateValue()+"/"+FMV.getSliderView().getCurDateValue(),{trigger:!0,replace:!0});FMV.getMsgView().renderSuccess(FML.getViewUILocateSuccessMsg())},t}(Backbone.View);n.MapControlView=t}(ForagingMap||(ForagingMap={}));FMMapControlViewTemplate="";FMMapControlViewTemplate+='<div class="leaflet-control">';FMMapControlViewTemplate+='<div class="control-button zoomin"><\/div>';FMMapControlViewTemplate+='<div class="control-button zoomout"><\/div>';FMMapControlViewTemplate+='<div class="control-button locate"><\/div>';FMMapControlViewTemplate+='<div class="control-button layer"><\/div>';FMMapControlViewTemplate+='<div class="control-button info"><\/div>';FMMapControlViewTemplate+='<div class="control-button data"><\/div>';FMMapControlViewTemplate+='<div class="control-button threshold"><\/div>';FMMapControlViewTemplate+='<div class="control-button picture"><\/div>';FMMapControlViewTemplate+="<% if (isAdmin) { %>";FMMapControlViewTemplate+='<div class="control-button add"><\/div>';FMMapControlViewTemplate+="<% } %>";FMMapControlViewTemplate+="<\/div>";__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){n[n.NONE=0]="NONE";n[n.ADD=1]="ADD";n[n.INFO=2]="INFO";n[n.DATA=3]="DATA";n[n.PICTURE=4]="PICTURE";n[n.LAYER=5]="LAYER";n[n.THRESHOLD=6]="THRESHOLD";n[n.ADDSENSOR=7]="ADDSENSOR"}(UIMode||(UIMode={})),function(n){var t=function(t){function i(n){t.call(this,n);this.setElement(n.el);this.setIsLocked(!1);this.setMode(0);this.resize();this.hide();this.createLayerCheckList();this.isLayerCollapsedIn=!1}return __extends(i,t),i.prototype.createLayerCheckList=function(){this.layerHeaderList=[];this.layerHeaderList[1]=!0;this.layerBodyList=[];this.layerBodyList[0]=!0},i.prototype.updateLayerCheckList=function(){var n=this;$.each(FMM.getLayers().models,function(t,i){n.layerBodyList[parseInt(i.get("id"))]==null&&(n.layerBodyList[parseInt(i.get("id"))]=!0)})},i.prototype.updateLayer=function(){FMV.getMapView().getMarkersView().renderLayers(this.layerBodyList)},i.prototype.setMode=function(n){this.mode=n;this.mode==1?this.setIsLocked(!0):this.setIsLocked(!1)},i.prototype.getMode=function(){return this.mode},i.prototype.resize=function(){FMV.getOrigWidth()<540&&this.$el.css({width:FMV.getOrigWidth()-40})},i.prototype.show=function(n){this.setMode(n);this.setIsOpen(!0);this.$el.removeClass("hidden");this.render()},i.prototype.hide=function(){this.setMode(0);this.setIsOpen(!1);this.$el.addClass("hidden");this.setIsLocked(!1);FMV.getMapView().getMap()&&FMV.getMapView().getMap().dragging.enable()},i.prototype.setIsLocked=function(n){this.isLocked=n},i.prototype.getIsLocked=function(){return this.isLocked},i.prototype.setIsOpen=function(n){this.isOpen=n},i.prototype.getIsOpen=function(){return this.isOpen},i.prototype.getOuterWidth=function(){return this.$el.outerWidth()},i.prototype.render=function(){switch(this.mode){case 2:this.renderUIInfo();break;case 3:this.renderUIData();break;case 1:this.renderUIAdd();break;case 6:this.renderUIThreshold();break;case 4:this.renderUIPicture();break;case 5:this.renderUILayer();break;case 7:this.renderAddSensorLayer()}},i.prototype.renderAddSensorLayer=function(){var i=this,e=_.template(FMUIAddSensorTemplate),o={header:"Sensor Management",isAdmin:FMC.getUser().getIsAdmin()},t,r,u,f;i.$el.html(e(o));FMC.getUser().getIsAdmin()?(t=new Backgrid.Grid({columns:sensorColumn,collection:FMM.getSensors(),emptyText:FML.getViewUIDataNoDataMsg()}),t.render(),i.$(".ui-body").append(t.el)):(t=new Backgrid.Grid({columns:pictureColumn2,collection:FMM.getSensors(),emptyText:FML.getViewUIDataNoDataMsg()}),t.render(),i.$(".ui-body").append(t.el));FMC.getUser().getIsAdmin()&&(r=new n.Sensor({name:"",initial:""}),r.setIsSavable(!1),u=new n.Sensors,u.add(r),f=new Backgrid.Grid({columns:sensorAddColumn,collection:u,emptyText:FML.getViewUIDataNoDataMsg()}),i.$("#sensor-add-panel").append(f.render().el))},i.prototype.renderUIInfo=function(){var n=this,t=_.template(FMUIInfoLayerTemplate),i={header:FML.getViewUIInfoHeader(),id:FMC.getSelectedItem().get("id"),name:FMC.getSelectedItem().get("name"),desc:FMC.getSelectedItem().get("desc"),serial:FMC.getSelectedItem().get("serial"),amount:FMC.getSelectedItem().get("amount"),type:FMC.getSelectedItem().get("type"),sort:FMC.getSelectedItem().get("sort"),lat:FMC.getSelectedItem().get("lat"),lng:FMC.getSelectedItem().get("lng"),regdate:FMC.getSelectedItem().get("regdate"),update:FMC.getSelectedItem().get("update"),sort1:FMM.getLayers().where({type:1}),isAdmin:FMC.getUser().getIsAdmin()};n.$el.html(t(i));n.$("#item-info-type").selectpicker();n.$("#item-info-type option").each(function(){FMC.getSelectedItem().get("type")==$(this).attr("data-type")&&FMC.getSelectedItem().get("sort")==$(this).attr("data-sort")&&n.$("#item-info-type").selectpicker("val",$(this).val())});n.$("#item-info-amount").off("change");n.$("#item-info-lat").off("change");n.$("#item-info-lng").off("change");n.$("#item-info-btn-edit").off("click");n.$("#item-info-btn-delete").off("click");n.$("#item-info-date-picker").off("dp.change");n.$("#item-info-amount").on("change",function(){FMC.getSelectedItem().save({amount:parseFloat($(this).val())},{wait:!0,success:function(n){FMV.getMapView().getMarkersView().updateMarker(FMC.getSelectedItem());FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIInfoSaveSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}})});n.$("#item-info-lat").on("change",function(){FMC.getSelectedItem().save({lat:parseFloat($(this).val())},{wait:!0,success:function(n){FMV.getMapView().getMarkersView().updateMarker(FMC.getSelectedItem());FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIInfoSaveSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}})});n.$("#item-info-lng").on("change",function(){FMC.getSelectedItem().save({lng:parseFloat($(this).val())},{wait:!0,success:function(n){FMV.getMapView().getMarkersView().updateMarker(FMC.getSelectedItem());FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIInfoSaveSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}})});n.$("input[type=file]").off("change");n.$("input[type=file]").on("change",n.executeDecode);n.$("#item-info-btn-edit").on("click",function(){var i=n.$("#item-info-serial").val(),t=$("option:selected",n.$("#item-info-type"));parseInt(t.attr("data-type"))!=0&&parseInt(t.attr("data-sort"))!=0?(FMV.getMapView().getMarkersView().removeMarker(FMC.getSelectedItem()),FMC.getSelectedItem().save({id:n.$("#item-info-id").val(),name:n.$("#item-info-name").val(),desc:n.$("#item-info-desc").val(),serial:n.$("#item-info-serial").val(),type:parseInt(t.attr("data-type")),sort:parseInt(t.attr("data-sort")),amount:n.$("#item-info-amount").val(),lat:n.$("#item-info-lat").val(),lng:n.$("#item-info-lng").val()},{wait:!0,success:function(n){FMV.getMapView().getMarkersView().render();FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIInfoSaveSuccessMsg())},error:function(t,r){if(r.responseText.indexOf("Duplicate:")>-1){var u=r.responseText.replace("Duplicate:","");n.render();FMV.getMapView().getMarkersView().render();FMV.getMsgView().renderError("'"+i+"' is already registered in '"+u+"'")}else n.render(),FMV.getMapView().getMarkersView().render(),FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}})):FMV.getMsgView().renderError(FML.getViewUIAddTypeSelectError())});n.$("#item-info-btn-delete").on("click",function(){var n=confirm(FML.getViewUIInfoDeleteConfirmMsg());n==!0&&FMC.getSelectedItem().destroy({wait:!0,success:function(n){n.setIsRemoved(!0);FMM.getItems().remove(n);FMV.getMapView().getMarkersView().removeMarker(n);FMV.getMapView().getControlView().resetControls();FMV.getUIView().hide();FMV.getMapView().resize(!1);FMV.getMapView().getMarkersView().render();FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIInfoDeleteSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIInfoDeleteErrorMsg())}})})},i.prototype.executeDecode=function(n){var i=this,t;i.files=n.target.files;t=new FileReader;t.onload=function(n){qrcode.decode(n.target.result)};qrcode.callback=function(n){n=="error decoding QR Code"?FMV.getMsgView().renderError("Failed to decode QR Code."):(FMV.getMsgView().renderSuccess("Serial Number: "+n),FMV.getMenuView().setSerial(n),$("#item-info-serial").val(n))};t.readAsDataURL(i.files[0])},i.prototype.renderUIAdd=function(){var n=this,t=_.template(FMUIAddLayerTemplate),i={header:FML.getViewUIAddHeader(),name:FMC.getSelectedItem().get("name"),desc:FMC.getSelectedItem().get("desc"),serial:FMC.getSelectedItem().get("serial"),amount:FMC.getSelectedItem().get("amount"),type:FMC.getSelectedItem().get("type"),sort:FMC.getSelectedItem().get("sort"),lat:FMC.getSelectedItem().get("lat"),lng:FMC.getSelectedItem().get("lng"),sort1:FMM.getLayers().where({type:1})};n.$el.html(t(i));n.$("#item-info-type").selectpicker();n.$("#item-info-amount").off("change");n.$("#item-info-lat").off("change");n.$("#item-info-lng").off("change");n.$("#item-info-btn-edit").off("click");n.$("#item-info-btn-delete").off("click");n.$("#item-info-amount").on("change",function(){FMC.getSelectedItem().set({amount:parseFloat($(this).val())});FMV.getMapView().getMarkersView().updateMarker(FMC.getSelectedItem())});n.$("#item-info-lat").on("change",function(){FMC.getSelectedItem().set({lat:parseFloat($(this).val())});FMV.getMapView().getMarkersView().updateMarker(FMC.getSelectedItem())});n.$("#item-info-lng").on("change",function(){FMC.getSelectedItem().set({lng:parseFloat($(this).val())});FMV.getMapView().getMarkersView().updateMarker(FMC.getSelectedItem())});n.$("#item-info-type").on("change",function(){var n=$("option:selected",this);FMC.getSelectedItem().set({type:parseInt(n.attr("data-type"))});FMC.getSelectedItem().set({sort:parseInt(n.attr("data-sort"))})});n.$("#item-info-btn-edit").on("click",function(){FMC.getSelectedItem().get("type")==0?FMV.getMsgView().renderError(FML.getViewUIAddTypeSelectError()):(FMC.getSelectedItem().setIsRemoved(!0),FMV.getMapView().getMarkersView().removeMarker(FMC.getSelectedItem()),FMC.getSelectedItem().save({name:n.$("#item-info-name").val(),desc:n.$("#item-info-desc").val(),serial:n.$("#item-info-serial").val(),amount:n.$("#item-info-amount").val(),type:parseInt(FMM.getSensors().getCurType().get("id"))},{wait:!0,success:function(n){FMV.getMapView().getControlView().resetControls();FMC.hasSelectedItem()&&(FMV.getUIView().hide(),FMV.getMapView().resize(!1),FMC.getSelectedItem().setIsRemoved(!1),FMV.getMapView().getMarkersView().render(),FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIInfoSaveSuccessMsg()))},error:function(){n.render();FMC.getSelectedItem().set("type",0);FMC.getSelectedItem().setIsRemoved(!1);FMV.getMapView().getMarkersView().render();FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}}))});n.$("input[type=file]").off("change");n.$("input[type=file]").on("change",n.executeDecode);n.$("#item-info-btn-delete").on("click",function(){if(FMV.getMapView().getControlView().resetControls(),FMC.hasSelectedItem()){var n=FMC.removeItem(FMC.getSelectedItem());n.setIsRemoved(!0);FMV.getMapView().getMarkersView().removeMarker(n);FMC.setSelectedItem(null);FMV.getUIView().hide();FMV.getMapView().resize(!1)}})},i.prototype.refreshDataGrid=function(){var r,i,t;console.log("!!!!!!!!!!");r=this;i=new n.Bends(FMM.getBends().where({pid:FMC.getSelectedItem().id}));console.log(i);FMC.getUser().getIsAdmin()?(t=new Backgrid.Grid({columns:dataColumn,collection:i,emptyText:FML.getViewUIDataNoDataMsg()}),t.render(),t.sort("date","descending"),r.$(".grid-data").html(t.el)):(t=new Backgrid.Grid({columns:dataColumn2,collection:i,emptyText:FML.getViewUIDataNoDataMsg()}),t.render(),t.sort("date","descending"),r.$(".grid-data").html(t.el))},i.prototype.renderUIData=function(){var i=this,o=_.template(FMViewUIDataLayerTemplate),s={header:FML.getViewUIDataHeader(),isAdmin:FMC.getUser().getIsAdmin()},r,t,u,f,e;i.$el.html(o(s));r=new n.Bends(FMM.getBends().where({pid:FMC.getSelectedItem().id}));i.drawChart();FMC.getUser().getIsAdmin()?(t=new Backgrid.Grid({columns:dataColumn,collection:r,emptyText:FML.getViewUIDataNoDataMsg()}),t.render(),t.sort("date","descending"),i.$(".grid-data").html(t.el)):(t=new Backgrid.Grid({columns:dataColumn2,collection:r,emptyText:FML.getViewUIDataNoDataMsg()}),t.render(),t.sort("date","descending"),i.$(".grid-data").html(t.el));FMC.getUser().getIsAdmin()&&(u=new n.Bend({pid:parseInt(FMC.getSelectedItem().get("id")),type:parseInt(FMM.getSensors().getCurType().get("id")),date:moment(new Date).format(FMS.getDateTimeFormat()),update:moment(new Date).format(FMS.getDateTimeFormat())}),u.setIsSavable(!1),f=new n.Bends,f.add(u),e=new Backgrid.Grid({columns:dataAddColumn,collection:f,emptyText:FML.getViewUIDataNoDataMsg()}),i.$("#date-add-panel").append(e.render().el))},i.prototype.renderUIThreshold=function(){var i=this,e=_.template(FMViewUIThresholdLayerTemplate),o={header:FML.getViewUIThresholdHeader(),isAdmin:FMC.getUser().getIsAdmin()},t,r,u,f;i.$el.html(e(o));FMC.getUser().getIsAdmin()?(t=new Backgrid.Grid({columns:thresholdColumn,collection:new n.Bends(FMM.getThresholds().where({pid:FMC.getSelectedItem().id})),emptyText:FML.getViewUIDataNoDataMsg()}),t.render(),t.sort("date","descending"),i.$(".ui-body").append(t.el)):(t=new Backgrid.Grid({columns:thresholdColumn2,collection:new n.Bends(FMM.getThresholds().where({pid:FMC.getSelectedItem().id})),emptyText:FML.getViewUIDataNoDataMsg()}),t.render(),t.sort("date","descending"),i.$(".ui-body").append(t.el));FMC.getUser().getIsAdmin()&&(r=new n.Threshold({pid:parseInt(FMC.getSelectedItem().get("id")),type:parseInt(FMM.getSensors().getCurType().get("id")),date:moment(new Date).format(FMS.getDateTimeFormat()),update:moment(new Date).format(FMS.getDateTimeFormat())}),r.setIsSavable(!1),u=new n.Thresholds,u.add(r),f=new Backgrid.Grid({columns:thresholdAddColumn,collection:u,emptyText:FML.getViewUIDataNoDataMsg()}),i.$("#threshold-add-panel").append(f.render().el))},i.prototype.renderUIPicture=function(){var t,r,u,f;FMC.fetchPictures(parseInt(FMC.getSelectedItem().get("id")));var i=this,e=_.template(FMViewUILayerPictureTemplate),o={header:FML.getViewUIPictureHeader(),isAdmin:FMC.getUser().getIsAdmin()};i.$el.html(e(o));FMC.getUser().getIsAdmin()?(t=new Backgrid.Grid({columns:pictureColumn,collection:FMM.getPictures(),emptyText:FML.getViewUIDataNoDataMsg()}),t.render(),t.sort("date","descending"),i.$(".ui-body").append(t.el),setTimeout(function(){t.sort("date","descending")},3e3)):(t=new Backgrid.Grid({columns:pictureColumn2,collection:FMM.getPictures(),emptyText:FML.getViewUIDataNoDataMsg()}),t.render(),t.sort("date","descending"),i.$(".ui-body").append(t.el),setTimeout(function(){t.sort("date","descending")},3e3));FMC.getUser().getIsAdmin()&&(r=new n.Picture({pid:parseInt(FMC.getSelectedItem().get("id")),date:moment(new Date).format(FMS.getDateTimeFormat()),update:moment(new Date).format(FMS.getDateTimeFormat())}),r.setIsSavable(!1),u=new n.Pictures,u.add(r),f=new Backgrid.Grid({columns:pictureAddColumn,collection:u,emptyText:FML.getViewUIDataNoDataMsg()}),i.$("#picture-add-panel").append(f.render().el))},i.prototype.renderUILayer=function(){var t=this,f="",e,o,i,r,u,s;t.isLayerCollapsedIn&&(f="in");e=_.template(FMViewLayerTemplate);o={header:FML.getViewUILayerHeader(),isIn:f,sort1:FMM.getLayers().where({type:1})};t.$el.html(e(o));t.updateLayerCheckList();t.layerHeaderList[1]?$("#check-event-layer").prop({checked:!0}):$("#check-event-layer").prop({checked:!1});t.layerHeaderList[2]?$("#check-organization-layer").prop({checked:!0}):$("#check-organization-layer").prop({checked:!1});t.layerHeaderList[3]?$("#check-donor-layer").prop({checked:!0}):$("#check-donor-layer").prop({checked:!1});$("#check-event-layer").click(function(){t.layerHeaderList[1]=$(this).prop("checked");$(this).prop("checked")?$('input[type="checkbox"][data-type="1"]',t.$el).each(function(){$(this).prop({checked:!0});t.layerBodyList[parseInt($(this).attr("data-sort"))]=$(this).prop("checked")}):$('input[type="checkbox"][data-type="1"]',t.$el).each(function(){$(this).prop({checked:!1});t.layerBodyList[parseInt($(this).attr("data-sort"))]=$(this).prop("checked")})});$("#check-organization-layer").click(function(){t.layerHeaderList[2]=$(this).prop("checked");$(this).prop("checked")?$('input[type="checkbox"][data-type="2"]',t.$el).each(function(){$(this).prop({checked:!0});t.layerBodyList[parseInt($(this).attr("data-sort"))]=$(this).prop("checked")}):$('input[type="checkbox"][data-type="2"]',t.$el).each(function(){$(this).prop({checked:!1});t.layerBodyList[parseInt($(this).attr("data-sort"))]=$(this).prop("checked")})});$("#check-donor-layer").click(function(){t.layerHeaderList[3]=$(this).prop("checked");$(this).prop("checked")?$('input[type="checkbox"][data-type="3"]',t.$el).each(function(){$(this).prop({checked:!0});t.layerBodyList[parseInt($(this).attr("data-sort"))]=$(this).prop("checked")}):$('input[type="checkbox"][data-type="3"]',t.$el).each(function(){$(this).prop({checked:!1});t.layerBodyList[parseInt($(this).attr("data-sort"))]=$(this).prop("checked")})});t.layerBodyList[0]?$("#check-unassigned-layer").prop({checked:!0}):$("#check-unassigned-layer").prop({checked:!1});$("#check-unassigned-layer").click(function(){t.layerBodyList[parseInt($(this).attr("data-sort"))]=$(this).prop("checked")});$('input[type="checkbox"]',t.$el).each(function(){t.layerBodyList[parseInt($(this).attr("data-sort"))]?$(this).prop({checked:!0}):$(this).prop({checked:!1})});$('input[type="checkbox"]',t.$el).click(function(){t.layerBodyList[parseInt($(this).attr("data-sort"))]=$(this).prop("checked");t.updateLayer()});t.$('button[data-target="#layer-add-panel"]').click(function(){t.isLayerCollapsedIn=!t.isLayerCollapsedIn});layerColumn[0].cell=Backgrid.SelectCell.extend({optionValues:FMM.getIcons().toArray()});i=new Backgrid.Grid({columns:layerColumn,collection:FMM.getLayers(),emptyText:FML.getViewUIDataNoDataMsg()});i.render();i.sort("name","ascending");t.$(".ui-body #layer-list-grid").append(i.el);layerAddColumn[0].cell=Backgrid.SelectCell.extend({optionValues:FMM.getIcons().toArray()});r=new n.Layer({name:"",desc:"",type:1,icon:"marker-blank.png"});r.setIsSavable(!1);u=new n.Layers;u.add(r);s=new Backgrid.Grid({columns:layerAddColumn,collection:u,emptyText:FML.getViewUIDataNoDataMsg()});t.$(".ui-body #layer-add-grid").append(s.render().el)},i.prototype.drawChart=function(){var c=this,t=1e3,i=new n.Bends(FMM.getBends().where({pid:FMC.getSelectedItem().id})),o=i.getLabels(t),s=i.getValues(t),r=i.getDataLength(t),u,f,e,h;console.log("Drawing graph for "+r+" data");r<=15?$("#bendChart").width(450):$("#bendChart").width(30*r);$("#bendChart").height(500);u=document.getElementById("bendChart");f=u.getContext("2d");Chart.defaults.global.tooltipTemplate="<%if (label){%><%=label%><%}%>";e={labels:o,datasets:[{label:FMC.getSelectedItem().get("name"),fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:s},]};h=new Chart(f).Line(e,{animation:!1,pointHitDetectionRadius:4,showTooltips:!1,customTooltips:!1});$("#bendWrapper").animate({scrollLeft:1e6},0)},i}(Backbone.View);n.UIView=t}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(t){n.call(this,t);this.setElement(t.el)}return __extends(t,n),t.prototype.renderError=function(n){var t=this,i=_.template(FMMsgViewErrorTemplate),r={msg:n};t.$el.html(i(r));t.timeout!=null&&clearTimeout(t.timeout);t.timeout=setTimeout(function(){t.$el.html("")},FMS.getMsgTimeout())},t.prototype.renderSuccess=function(n){var t=this,i=_.template(FMMsgViewSuccessTemplate),r={msg:n};t.$el.html(i(r));t.timeout!=null&&clearTimeout(t.timeout);t.timeout=setTimeout(function(){t.$el.html("")},FMS.getMsgTimeout())},t}(Backbone.View);n.MsgView=t}(ForagingMap||(ForagingMap={}));FMMsgViewErrorTemplate="";FMMsgViewErrorTemplate+='<span class="label label-warning"><%= msg %><\/span>';FMMsgViewSuccessTemplate="";FMMsgViewSuccessTemplate+='<span class="label label-success"><%= msg %><\/span>';__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(t){n.call(this,t);this.setElement(t.el);Galleria.loadTheme("core/lib/galleria/themes/classic/galleria.classic.js");$("#leaflet-view-galleria").css({width:$("#fm-view-map").innerWidth(),height:$("#fm-view-map").innerHeight()+1})}return __extends(t,n),t.prototype.render=function(){var i=this,n,t;$("#leaflet-view-galleria").css({width:$("#fm-view-map").innerWidth(),height:$("#fm-view-map").innerHeight()+1});n=_.template(FMViewGalleryTemplate);t={pictures:FMM.getPictures().models,dir:FMS.getBaseUrl()+FMS.getPictureDir()};i.$el.html(n(t))},t.prototype.show=function(n){var t=this;t.$el.addClass("galleria-show");Galleria.run(".galleria",{show:n,imageCrop:!1,transition:"fade"});Galleria.ready(function(){$("#btn-galleria-close").off("click");$("#btn-galleria-close").on("click",function(){t.hide();t.$el.html("")})});FMV.getMapView().hide()},t.prototype.hide=function(){var n=this;n.$el.removeClass("galleria-show");FMV.getMapView().show()},t}(Backbone.View);n.GalleryView=t}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i){var r,u,f;t.call(this,i);r=this;this.isSelectable=!1;r.markerGroups=[];r.circleGroups=[];u=new L.FeatureGroup;f=new L.FeatureGroup;u.sid=0;f.sid=0;r.markerGroups.push(u);r.circleGroups.push(f);$.each(FMM.getLayers().models,function(n,t){var i=new L.FeatureGroup,u=new L.FeatureGroup;i.sid=parseInt(t.id);u.sid=parseInt(t.id);r.markerGroups.push(i);r.circleGroups.push(u)});$.each(r.markerGroups,function(n,t){t.addTo(FMV.getMapView().getMap())});$.each(r.circleGroups,function(n,t){t.addTo(FMV.getMapView().getMap())});this.iconNew=new L.Icon({iconUrl:n.Setting.BASE_URL+FMS.getImageDir()+FMS.getImageMarkerNew(),shadowUrl:n.Setting.BASE_URL+FMS.getImageDir()+FMS.getImageMarkerShadow(),iconSize:new L.Point(40,40),iconAnchor:new L.Point(20,40),shadowAnchor:new L.Point(9,38),popupAnchor:new L.Point(0,-40)})}return __extends(i,t),i.prototype.render=function(){var n=this;$.each(FMM.getItems().models,function(t,i){var u,f,r;i.getIsRemoved()||(i.marker==null&&i.circle==null?(console.log("create new marker with type: "+i.get("type")),i.get("type")==0?(i.marker=new L.Marker(new L.LatLng(parseFloat(i.get("lat")),parseFloat(i.get("lng"))),{icon:n.iconNew,draggable:!1,riseOnHover:!0}).bindPopup(i.get("name"),{closeButton:!0}),i.circle=new L.Circle(new L.LatLng(parseFloat(i.get("lat")),parseFloat(i.get("lng"))),parseFloat(i.get("amount"))*FMS.getCircleRadiusMultiplier(),{color:FMS.getTempCircleColor(),fillColor:FMS.getTempCircleColor(),fillOpacity:FMS.getInactiveAlpha(),weight:1})):(u=FMM.getLayers().findWhere({id:i.get("sort")}),f=FMM.getIcons().findWhere({src:u.get("icon")}),i.marker=new L.Marker(new L.LatLng(parseFloat(i.get("lat")),parseFloat(i.get("lng"))),{icon:f.icon,draggable:!1,riseOnHover:!0}).bindPopup(i.get("name"),{closeButton:!1}),i.circle=new L.Circle(new L.LatLng(parseFloat(i.get("lat")),parseFloat(i.get("lng"))),parseFloat(i.get("amount"))*FMS.getCircleRadiusMultiplier(),{color:FMS.getFruitCircleColor(),fillColor:FMS.getFruitCircleColor(),fillOpacity:FMS.getInactiveAlpha(),weight:1})),i.marker.setOpacity(FMS.getHalfAlpha()),r=n.getIndexOfMarkerGroups1(i),n.markerGroups[r].addLayer(i.marker),n.circleGroups[r].addLayer(i.circle),n.removeEventListener(i),n.addEventListener(i),n.updateMarker(i)):n.updateMarker(i))});FMC.getSelectedItem()!=null&&FMC.getSelectedItem().marker!=null&&FMC.getSelectedItem().marker.openPopup()},i.prototype.getIndexOfMarkerGroups1=function(n){var i=this,t;return n.id==undefined?0:(t=0,$.each(i.markerGroups,function(i,r){if(r.sid==parseInt(n.get("sort")))return t=i}),t)},i.prototype.getIndexOfMarkerGroups2=function(n){var i=this,t=0;return $.each(i.markerGroups,function(i,r){if(r.sid==n)return t=i}),t},i.prototype.getIndexOfMarkerGroups3=function(n){var i=this,t;return n.id==undefined?0:(t=0,$.each(i.markerGroups,function(i,r){if(r.sid==parseInt(n.id))return t=i}),t)},i.prototype.createNewMarkerLayer=function(n){var t=this,i=new L.FeatureGroup,r=new L.FeatureGroup;i.sid=parseInt(n.id);r.sid=parseInt(n.id);t.markerGroups.push(i);t.circleGroups.push(r)},i.prototype.updateMarker=function(n){var i,t,f,r,u;FMC.getUser().getIsAdmin()||n.marker.dragging.disable();n.marker.setPopupContent(n.get("name"));i=new L.LatLng(parseFloat(n.get("lat")),parseFloat(n.get("lng")));n.marker.setLatLng(i);n.circle.setLatLng(i);n.circle.setRadius(parseFloat(n.get("amount"))*FMS.getCircleRadiusMultiplier());n.circle!=null&&n.get("sort")!=0&&(t=FMM.getBendRatio(n),t==Number.MIN_VALUE?n.circle.setStyle({color:FMS.getTempCircleColor(),fillColor:FMS.getTempCircleFillColor(),opacity:.25}):(f=FMS.getLowValueColor()+t*(FMS.getHighValueColor()-FMS.getLowValueColor()),r=50,r=t>1?50-(t-1)*35:50,u="hsl("+f+", 90%, "+r+"%)",n.circle.setStyle({color:u,fillColor:u})))},i.prototype.removeMarker=function(n){var t=this.getIndexOfMarkerGroups1(n);n.marker!=null&&this.markerGroups[t].hasLayer(n.marker)&&this.markerGroups[t].removeLayer(n.marker);n.circle!=null&&this.circleGroups[t].hasLayer(n.circle)&&this.circleGroups[t].removeLayer(n.circle);n.marker=null;n.circle=null},i.prototype.removeMarkers=function(n){var t=this,i=FMV.getMapView().getMarkersView().getIndexOfMarkerGroups3(n);$.each(FMM.getItems().models,function(n,r){r.marker!=null&&t.markerGroups[i].hasLayer(r.marker)&&(t.markerGroups[i].removeLayer(r.marker),r.marker=null);r.circle!=null&&t.circleGroups[i].hasLayer(r.circle)&&(t.circleGroups[i].removeLayer(r.circle),r.circle=null)})},i.prototype.removeEventListener=function(n){n.marker.off("click");n.marker.off("popupclose");n.marker.off("popupopen");n.marker.off("dragstart");n.marker.off("drag");n.marker.off("dragend")},i.prototype.getIsSelectable=function(){return this.isSelectable},i.prototype.setIsSelectable=function(n){this.isSelectable=n},i.prototype.addEventListener=function(n){var t=this;n.marker.on("click",function(){t.isSelectable&&(FMV.getUIView().getIsLocked()&&n.get("type")!=0||(this.openPopup(),FMV.getUIView().render()))});n.marker.on("popupclose",function(){});n.marker.on("popupopen",function(){t.isSelectable&&(FMC.setSelectedItem(n),t.render(),t.activateMarker(n))});n.marker.on("dragstart",function(){});n.marker.on("drag",function(){n.circle.setLatLng(n.marker.getLatLng())});n.marker.on("dragend",function(){n.get("type")==0||n.id==undefined?n.set({lat:n.marker.getLatLng().lat,lng:n.marker.getLatLng().lng}):n.save({lat:n.marker.getLatLng().lat,lng:n.marker.getLatLng().lng},{success:function(n){FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewMarkerSaveSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewMarkerSaveErrorMsg())}});(FMV.getUIView().getMode()==2||FMV.getUIView().getMode()==1)&&(FMV.getUIView().$("#item-info-lat").val(n.marker.getLatLng().lat.toString()),FMV.getUIView().$("#item-info-lng").val(n.marker.getLatLng().lng.toString()));n.marker!=null&&n.marker.openPopup()})},i.prototype.activateMarker=function(){var n=this;$.each(FMM.getItems().models,function(t,i){i.marker!=null&&i.circle!=null&&(FMC.getSelectedItem()==i?(FMV.getMapView().SetIsMapPanZoomAvailable(!1),i.marker.bounce({duration:200,height:10},function(){i.marker.setOpacity(FMS.getFullAlpha());i.circle.setStyle({fillOpacity:FMS.getActiveAlpha()});var t=n.getIndexOfMarkerGroups1(i);n.markerGroups[t].bringToFront();n.circleGroups[t].bringToFront();FMV.getMapView().SetIsMapPanZoomAvailable(!0);FMC.getUser().getIsAdmin()&&i.marker.dragging.enable()})):(i.marker.off("dblclick"),i.marker.dragging.disable(),i.marker.setOpacity(FMS.getInactiveAlpha()),i.circle.setStyle({fillOpacity:FMS.getInactiveAlpha()})))})},i.prototype.inactiveMarkers=function(){var n=this;FMC.hasSelectedItem()&&FMC.getSelectedItem().marker.closePopup();FMC.setSelectedItem(null);FMV.getUIView().hide();$.each(FMM.getItems().models,function(n,t){t.marker!=null&&t.circle!=null&&(t.marker.off("dblclick"),t.marker.dragging.disable(),t.marker.setOpacity(FMS.getInactiveAlpha()),t.circle.setStyle({fillOpacity:FMS.getInactiveAlpha()}))})},i.prototype.renderLayers=function(n){var t=this;$.each(n,function(n,i){if(i!=undefined){var r=t.getIndexOfMarkerGroups2(n);i?(FMV.getMapView().getMap().addLayer(t.circleGroups[r]),FMV.getMapView().getMap().addLayer(t.markerGroups[r])):(FMV.getMapView().getMap().hasLayer(t.circleGroups[r])&&FMV.getMapView().getMap().removeLayer(t.circleGroups[r]),FMV.getMapView().getMap().hasLayer(t.markerGroups[r])&&FMV.getMapView().getMap().removeLayer(t.markerGroups[r]))}})},i}(Backbone.View);n.MarkersView=t}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(t){n.call(this,t);this.setElement(t.el);this.isDraggable=!1;this.startDate=moment(new Date).subtract(6,"month").format(FMS.getDateTimeFormat());this.endDate=moment(new Date).format(FMS.getDateTimeFormat());this.curDate=moment(new Date).format(FMS.getDateTimeFormat());this.timeInterval=3600}return __extends(t,n),t.prototype.setDateToCurDate=function(){var n=this;n.curDate=moment(new Date).format(FMS.getDateTimeFormat());$("#date-slider").val(n.curDate.valueOf());FMV.getMsgView().renderSuccess("Slider Date: "+n.curDate)},t.prototype.getTimeInterval=function(){return this.timeInterval},t.prototype.setTimeInterval=function(n){this.timeInterval=n},t.prototype.getStartDateValue=function(){return moment(this.startDate).valueOf()},t.prototype.getEndDateValue=function(){return moment(this.endDate).valueOf()},t.prototype.getCurDateValue=function(){return moment(this.curDate).valueOf()},t.prototype.render=function(){var n=this,t=_.template(FMViewSliderTemplate);this.$el.html(t({}));$("#date-start",n.$el).datetimepicker({defaultDate:n.startDate,format:FMS.getDateTimeFormat()}).on("dp.change",function(){n.startDate=$(this).data("date");moment(n.startDate).valueOf()>=moment(n.endDate).valueOf()&&(n.startDate=moment(n.endDate).subtract(1,"day"));n.slider.slider("option","min",moment(n.startDate).valueOf());n.slider.slider("value",n.slider.slider("value"));FMC.getRouter().navigate("map/"+FMV.getMapView().getMapZoom()+"/"+FMV.getMapView().getMapCenter().lat+"/"+FMV.getMapView().getMapCenter().lng+"/"+FMV.getSliderView().getTimeInterval()+"/"+FMV.getSliderView().getStartDateValue()+"/"+FMV.getSliderView().getEndDateValue()+"/"+FMV.getSliderView().getCurDateValue(),{trigger:!1,replace:!0})});$("#date-end",n.$el).datetimepicker({defaultDate:n.endDate,format:FMS.getDateTimeFormat()}).on("dp.change",function(){n.endDate=$(this).data("date");moment(n.startDate).valueOf()>=moment(n.endDate).valueOf()&&(n.endDate=moment(n.startDate).add(1,"day"));n.slider.slider("option","max",moment(n.endDate).valueOf());n.slider.slider("value",n.slider.slider("value"));FMC.getRouter().navigate("map/"+FMV.getMapView().getMapZoom()+"/"+FMV.getMapView().getMapCenter().lat+"/"+FMV.getMapView().getMapCenter().lng+"/"+FMV.getSliderView().getTimeInterval()+"/"+FMV.getSliderView().getStartDateValue()+"/"+FMV.getSliderView().getEndDateValue()+"/"+FMV.getSliderView().getCurDateValue(),{trigger:!1,replace:!0})});n.slider=$("#date-slider",n.$el).slider({min:moment(n.startDate).valueOf(),max:moment(n.endDate).valueOf(),value:moment(n.curDate).valueOf(),step:n.timeInterval*1e3});$("#date-slider",n.$el).bind("slide",function(t,i){n.curDate=moment(i.value).format(FMS.getDateTimeFormat());FMV.getMsgView().renderSuccess("Slider Date: "+n.curDate);FMV.getMapView().getMarkersView().render();FMC.getRouter().navigate("map/"+FMV.getMapView().getMapZoom()+"/"+FMV.getMapView().getMapCenter().lat+"/"+FMV.getMapView().getMapCenter().lng+"/"+FMV.getSliderView().getTimeInterval()+"/"+FMV.getSliderView().getStartDateValue()+"/"+FMV.getSliderView().getEndDateValue()+"/"+FMV.getSliderView().getCurDateValue(),{trigger:!1,replace:!0})});n.isDraggable?n.slider.slider("enable"):n.slider.slider("disable")},t.prototype.resize=function(){$("#fm-view-body .nav-primary").css({width:$("#fm-view-body .panel-heading").innerWidth()-$("#fm-view-body .nav-title").outerWidth()-$("#fm-view-body .nav-secondary").outerWidth()});$("#fm-view-body .date-slider-wrapper").css({width:$("#fm-view-body .panel-heading").innerWidth()-$("#fm-view-body .nav-title").outerWidth()-$("#fm-view-body .nav-secondary").outerWidth()-100})},t.prototype.renderSlider=function(n,t,i,r){this.startDate=moment(parseInt(t)).format(FMS.getDateTimeFormat());this.endDate=moment(parseInt(i)).format(FMS.getDateTimeFormat());this.curDate=moment(parseInt(r)).format(FMS.getDateTimeFormat());this.timeInterval=n;this.render();this.resize()},t.prototype.getCurDate=function(){return this.curDate},t.prototype.getIsDraggable=function(){return this.isDraggable},t.prototype.setIsDraggable=function(n){var t=this;t.isDraggable=n;t.isDraggable?t.slider.slider("enable"):t.slider.slider("disable")},t}(Backbone.View);n.SliderView=t}(ForagingMap||(ForagingMap={}));FMViewSliderTemplate="";FMViewSliderTemplate+='<div class="nav-float">';FMViewSliderTemplate+='<div class="input-group" id= "date-start">';FMViewSliderTemplate+='<input type="text" class="form-control hidden" id="slider-start-date" value="" />';FMViewSliderTemplate+='<span class="input-group-addon input-group-addon-calendar-left" id="slider-start-date-select"><\/span>';FMViewSliderTemplate+="<\/div>";FMViewSliderTemplate+="<\/div>";FMViewSliderTemplate+='<div class="nav-float date-slider-wrapper">';FMViewSliderTemplate+='<div id="date-slider">';FMViewSliderTemplate+="<\/div>";FMViewSliderTemplate+="<\/div>";FMViewSliderTemplate+='<div class="nav-float">';FMViewSliderTemplate+='<div class="input-group" id= "date-end">';FMViewSliderTemplate+='<input type="text" class="form-control hidden" id="slider-end-date" value="" />';FMViewSliderTemplate+='<span class="input-group-addon input-group-addon-calendar-right" id="slider-end-date-select"><\/span>';FMViewSliderTemplate+="<\/div>";FMViewSliderTemplate+="<\/div>";var DatePickerCellEditor=Backgrid.InputCellEditor.extend({events:{},initialize:function(){Backgrid.InputCellEditor.prototype.initialize.apply(this,arguments);var n=this;$(this.el).datetimepicker({defaultDate:n.model.get("date"),format:FMS.getDateTimeFormat()}).on("dp.hide",function(){if($(this).data("date")!=undefined){var t=new Backgrid.Command({});n.model.set(n.column.get("name"),$(this).data("date"));n.model.trigger("backgrid:edited",n.model,n.column,t)}})}}),DeleteCell=Backgrid.Cell.extend({template:_.template(FMViewUIDataLayerDeleteTemplate),events:{click:"deleteRow"},deleteRow:function(n){var t=confirm(FML.getViewUIDataDeleteConfirmMsg());t==!0&&(n.preventDefault(),this.model.collection.remove(this.model),this.model.destroy({wait:!0,success:function(n){FMV.getUIView().render();n.get("value")!=undefined?FMV.getMsgView().renderSuccess("'"+n.get("value")+"' "+FML.getViewUIDataDeleteSuccessMsg()):n.get("name")!=undefined?FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIDataDeleteSuccessMsg()):n.get("min")!=undefined&&FMV.getMsgView().renderSuccess("'"+n.get("min")+" - "+n.get("max")+"' "+FML.getViewUIDataDeleteSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIDataDeleteErrorMsg())}}))},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),BendAddCell=Backgrid.Cell.extend({template:_.template(FMViewUIDataLayerAddTemplate),events:{click:"addRow"},addRow:function(n){n.preventDefault();var t=this.model,i=this.model.collection;i.remove(t);FMM.getBends().add(t);t.save({},{wait:!0,success:function(n){FMV.getUIView().render();n.setIsSavable(!0);FMV.getMsgView().renderSuccess("'"+n.get("value")+"' "+FML.getViewUIDataDeleteSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIDataSaveErrorMsg())}})},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),ThresholdAddCell=Backgrid.Cell.extend({template:_.template(FMViewUIDataLayerAddTemplate),events:{click:"addRow"},addRow:function(n){n.preventDefault();var t=this.model,i=this.model.collection;i.remove(t);FMM.getThresholds().add(t);t.save({},{wait:!0,success:function(n){FMV.getUIView().render();n.setIsSavable(!0);FMV.getMsgView().renderSuccess("'"+n.get("min")+" - "+n.get("max")+"' "+FML.getViewUIDataSaveSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIDataSaveErrorMsg())}})},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),PictureCell=Backgrid.Cell.extend({template:_.template(FMViewUIPictureTemplate),className:"picture-frame",events:{click:"zoomIn"},render:function(){var n={url:FMS.getBaseUrl()+FMS.getPictureDir()+this.model.get("url")};return $(this.el).html(this.template(n)),this.delegateEvents(),this},zoomIn:function(n){n.preventDefault();FMV.getGalleryView().render();FMV.getGalleryView().show($("table.backgrid img").index($(n.target)))}}),pictureColumn=[{name:"url",label:"Picture",editable:!1,cell:PictureCell},{name:"name",label:"Name",editable:!0,cell:"string"},{name:"date",label:"Date",editable:!0,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{label:"delete",sortable:!1,editable:!1,cell:DeleteCell}],pictureColumn2=[{name:"url",label:"Picture",editable:!1,cell:PictureCell},{name:"name",label:"Name",editable:!1,cell:"string"},{name:"date",label:"Date",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{label:"option",sortable:!1,editable:!1,cell:""}],PictureSelectCell=Backgrid.Cell.extend({template:_.template(FMUIPictureSelectTemplate),className:"picture-frame",events:{},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),setTimeout(function(){$("#picture-add-panel input[type=file]").off("change");$("#picture-add-panel input[type=file]").on("change",prepareUpload)},500),this}}),PictureAddCell=Backgrid.Cell.extend({template:_.template(FMUIPictureAddTemplate),events:{click:"addRow"},addRow:function(n){console.log("try add");n.preventDefault();var t=this.model,i=this.model.collection;i.remove(t);uploadFiles(n,t)},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),pictureAddColumn=[{name:"url",label:"Picture",editable:!1,cell:PictureSelectCell},{name:"name",label:"Name",editable:!0,cell:"string"},{name:"date",label:"Date",editable:!0,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{label:"add",sortable:!1,editable:!1,cell:PictureAddCell}],dataColumn=[{name:"value",label:"Value (°)",editable:!0,cell:"number"},{name:"date",label:"Date",editable:!0,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{name:"update",label:"Updated",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{label:"delete",sortable:!1,editable:!1,cell:DeleteCell}],dataColumn2=[{name:"value",label:"Value (°)",editable:!1,cell:"number"},{name:"date",label:"Date",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{name:"update",label:"Updated",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{label:"option",sortable:!1,editable:!1,cell:"string"}],dataAddColumn=[{name:"value",label:"Value (°)",editable:!0,cell:"number"},{name:"date",label:"Date",editable:!0,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{name:"update",label:"Updated",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{label:"add",sortable:!1,editable:!1,cell:BendAddCell}],thresholdColumn=[{name:"min",label:"Min (°)",editable:!0,cell:"number"},{name:"max",label:"Max (°)",editable:!0,cell:"number"},{name:"date",label:"Date",editable:!0,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{name:"update",label:"Updated",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{label:"delete",sortable:!1,editable:!1,cell:DeleteCell}],thresholdColumn2=[{name:"min",label:"Min (°)",editable:!1,cell:"number"},{name:"max",label:"Max (°)",editable:!1,cell:"number"},{name:"date",label:"Date",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{name:"update",label:"Updated",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{label:"option",sortable:!1,editable:!1,cell:"string"}],thresholdAddColumn=[{name:"min",label:"Min (°)",editable:!0,cell:"number"},{name:"max",label:"Max (°)",editable:!0,cell:"number"},{name:"date",label:"Date",editable:!0,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{name:"update",label:"Updated",editable:!1,cell:Backgrid.Cell.extend({editor:DatePickerCellEditor})},{label:"add",sortable:!1,editable:!1,cell:ThresholdAddCell}],layerColumn=[{name:"icon",label:"Icon",editable:!0},{name:"name",label:"Name",editable:!0,cell:"string"},{name:"desc",label:"Desc",editable:!0,cell:"string"},{label:"delete",sortable:!1,editable:!1,cell:DeleteCell}],LayerAddCell=Backgrid.Cell.extend({template:_.template(FMViewUIDataLayerAddTemplate),events:{click:"addRow"},addRow:function(n){n.preventDefault();var t=this.model,i=this.model.collection;i.remove(t);FMM.getLayers().add(t);t.save({},{wait:!0,success:function(n){FMV.getUIView().render();n.setIsSavable(!0);FMV.getMsgView().renderSuccess("'"+n.get("value")+"' "+FML.getViewUIDataDeleteSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIDataSaveErrorMsg())}})},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),layerAddColumn=[{name:"icon",label:"Icon",editable:!0},{name:"name",label:"Name",editable:!0,cell:"string"},{name:"desc",label:"Desc",editable:!0,cell:"string"},{label:"add",sortable:!1,editable:!1,cell:LayerAddCell}],SetSerialCell=Backgrid.Cell.extend({template:_.template(FMViewMenuSetSerialTemplate),events:{click:"addRow"},addRow:function(n){n.preventDefault();var t=this.model;console.log(FMV.getMenuView().getSerial());FMV.getMenuView().getSerial()!=null&&t.save({serial:FMV.getMenuView().getSerial()},{wait:!0,success:function(n){FMV.getMsgView().renderSuccess("'"+n.get("name")+"' - "+FMV.getMenuView().getSerial())},error:function(){FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}})},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),itemColumn=[{name:"name",label:"Name",editable:!1,cell:"string"},{name:"sort",label:"Type",editable:!1},{name:"serial",label:"Serial",editable:!1,cell:"string"},{label:"Set",sortable:!1,editable:!1,cell:SetSerialCell}],SensorDeleteCell=Backgrid.Cell.extend({template:_.template(FMViewUIDataLayerDeleteTemplate),events:{click:"deleteRow"},deleteRow:function(n){var t=confirm(FML.getViewUIDataDeleteConfirmMsg());t==!0&&(n.preventDefault(),this.model.collection.remove(this.model),this.model.destroy({wait:!0,success:function(n){FMV.getUIView().render();FMV.getMapView().getSensorView().render();FMM.getSensors().getCurType()==n&&FMM.getSensors().intializeCurType();n.get("value")!=undefined?FMV.getMsgView().renderSuccess("'"+n.get("value")+"' "+FML.getViewUIDataDeleteSuccessMsg()):n.get("name")!=undefined?FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIDataDeleteSuccessMsg()):n.get("min")!=undefined&&FMV.getMsgView().renderSuccess("'"+n.get("min")+" - "+n.get("max")+"' "+FML.getViewUIDataDeleteSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIDataDeleteErrorMsg())}}))},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),sensorColumn=[{name:"name",label:"Name",editable:!0,cell:"string"},{name:"initial",label:"Initial",editable:!0,cell:"string"},{label:"delete",sortable:!1,editable:!1,cell:SensorDeleteCell}],sensorColumn2=[{name:"name",label:"Name",editable:!1,cell:"string"},{name:"initial",label:"Initial",editable:!1,cell:"string"},{label:"option",sortable:!1,editable:!1,cell:""}],SensorAddCell=Backgrid.Cell.extend({template:_.template(FMViewUIDataLayerAddTemplate),events:{click:"addRow"},addRow:function(n){n.preventDefault();var t=this.model,i=this.model.collection;i.remove(t);FMM.getSensors().add(t);t.save({},{wait:!0,success:function(n){FMV.getMapView().getSensorView().render();FMV.getUIView().render();n.setIsSavable(!0);FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIDataDeleteSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIDataSaveErrorMsg())}})},render:function(){return $(this.el).html(this.template()),this.delegateEvents(),this}}),sensorAddColumn=[{name:"name",label:"Name",editable:!0,cell:"string"},{name:"initial",label:"Initial",editable:!0,cell:"string"},{label:"add",sortable:!1,editable:!1,cell:SensorAddCell}],__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},ForagingMap;(function(n){var t=function(n){function t(t){n.call(this,t);this.setElement(t.el);this.resize();this.hide()}return __extends(t,n),t.prototype.setLocation=function(n,t){this.lat=n;this.lng=t},t.prototype.setSerial=function(n){var t=this;t.serial=n},t.prototype.getSerial=function(){var n=this;return n.serial},t.prototype.show=function(){this.setIsOpen(!0);this.$el.removeClass("hidden");this.render()},t.prototype.hide=function(){this.setIsOpen(!1);this.$el.addClass("hidden");FMV.getMapView().getMap()&&FMV.getMapView().getMap().dragging.enable()},t.prototype.setIsOpen=function(n){this.isOpen=n},t.prototype.getIsOpen=function(){return this.isOpen},t.prototype.resize=function(){FMV.getOrigWidth()<540&&this.$el.css({width:FMV.getOrigWidth()});this.$el.css({height:FMV.getOrigHeight()-55})},t.prototype.toggle=function(){this.getIsOpen()?this.hide():this.show()},t.prototype.render=function(){var n=this,i=_.template(FMMenuTemplate),r={username:FMC.getUser().get("username"),isAdmin:FMC.getUser().getIsAdmin()},t;n.$el.html(i(r));n.$("input[type=file]").off("change");n.$("input[type=file]").on("change",n.executeDecode);t=FMV.getSliderView().getTimeInterval();t==1?n.$("#btn-menu-slider-1").removeClass("btn-default").addClass("btn-primary"):t==60?n.$("#btn-menu-slider-60").removeClass("btn-default").addClass("btn-primary"):t==3600?n.$("#btn-menu-slider-3600").removeClass("btn-default").addClass("btn-primary"):t==86400&&n.$("#btn-menu-slider-24").removeClass("btn-default").addClass("btn-primary");n.$("#btn-near-loc").off("click");n.$("#btn-near-loc").on("click",function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(n.getPosition)});n.$("#btn-menu-register-sensor").off("click");n.$("#btn-menu-register-sensor").on("click",function(){n.lat==undefined&&n.lng==undefined&&n.serial!=null?navigator.geolocation&&navigator.geolocation.getCurrentPosition(n.createNewItem):n.lat!=undefined&&n.lng!=undefined&&n.serial!=null&&(FMV.getMapView().getControlView().resetControls(),FMV.getMapView().getControlView().$(".control-button.add").addClass("add-active"),FMC.setSelectedItem(FMC.createItemWithInfo(n.lat,n.lng,n.serial)),FMV.getUIView().show(1),FMV.getMapView().resize(!0),setTimeout(function(){FMV.getMapView().getMarkersView().render()},500),n.hide())});n.$("#btn-menu-login").off("click");n.$("#btn-menu-login").on("click",function(){FMC.getUser().fetch({remove:!1,processData:!0,data:{username:n.$("#input-menu-login-username").val(),password:n.$("#input-menu-login-password").val()},success:function(n){n.get("auth")==0?FMV.getMsgView().renderError("Failed to log in."):FMC.getRouter().refresh()},error:function(){FMV.getMsgView().renderError("Failed to log in.")}})});n.$("#btn-menu-logout").off("click");n.$("#btn-menu-logout").on("click",function(){FMC.getUser().fetch({remove:!1,processData:!0,data:{logout:!0},success:function(){FMC.getRouter().refresh()},error:function(){FMC.getRouter().refresh()}})});n.$("#btn-menu-slider-1").off("click");n.$("#btn-menu-slider-1").on("click",function(){n.$("#btn-menu-slider-1").removeClass("btn-default").addClass("btn-primary");n.$("#btn-menu-slider-60").removeClass("btn-primary").addClass("btn-default");n.$("#btn-menu-slider-3600").removeClass("btn-primary").addClass("btn-default");n.$("#btn-menu-slider-24").removeClass("btn-primary").addClass("btn-default");FMV.getSliderView().setTimeInterval(1);FMC.getRouter().navigate("map/"+FMV.getMapView().getMapZoom()+"/"+FMV.getMapView().getMapCenter().lat+"/"+FMV.getMapView().getMapCenter().lng+"/"+FMV.getSliderView().getTimeInterval()+"/"+FMV.getSliderView().getStartDateValue()+"/"+FMV.getSliderView().getEndDateValue()+"/"+FMV.getSliderView().getCurDateValue(),{trigger:!0,replace:!0})});n.$("#btn-menu-slider-60").off("click");n.$("#btn-menu-slider-60").on("click",function(){n.$("#btn-menu-slider-60").removeClass("btn-default").addClass("btn-primary");n.$("#btn-menu-slider-1").removeClass("btn-primary").addClass("btn-default");n.$("#btn-menu-slider-3600").removeClass("btn-primary").addClass("btn-default");n.$("#btn-menu-slider-24").removeClass("btn-primary").addClass("btn-default");FMV.getSliderView().setTimeInterval(60);FMC.getRouter().navigate("map/"+FMV.getMapView().getMapZoom()+"/"+FMV.getMapView().getMapCenter().lat+"/"+FMV.getMapView().getMapCenter().lng+"/"+FMV.getSliderView().getTimeInterval()+"/"+FMV.getSliderView().getStartDateValue()+"/"+FMV.getSliderView().getEndDateValue()+"/"+FMV.getSliderView().getCurDateValue(),{trigger:!0,replace:!0})});n.$("#btn-menu-slider-3600").off("click");n.$("#btn-menu-slider-3600").on("click",function(){n.$("#btn-menu-slider-3600").removeClass("btn-default").addClass("btn-primary");n.$("#btn-menu-slider-1").removeClass("btn-primary").addClass("btn-default");n.$("#btn-menu-slider-60").removeClass("btn-primary").addClass("btn-default");n.$("#btn-menu-slider-24").removeClass("btn-primary").addClass("btn-default");FMV.getSliderView().setTimeInterval(3600);FMC.getRouter().navigate("map/"+FMV.getMapView().getMapZoom()+"/"+FMV.getMapView().getMapCenter().lat+"/"+FMV.getMapView().getMapCenter().lng+"/"+FMV.getSliderView().getTimeInterval()+"/"+FMV.getSliderView().getStartDateValue()+"/"+FMV.getSliderView().getEndDateValue()+"/"+FMV.getSliderView().getCurDateValue(),{trigger:!0,replace:!0})});n.$("#btn-menu-slider-24").off("click");n.$("#btn-menu-slider-24").on("click",function(){n.$("#btn-menu-slider-24").removeClass("btn-default").addClass("btn-primary");n.$("#btn-menu-slider-1").removeClass("btn-primary").addClass("btn-default");n.$("#btn-menu-slider-60").removeClass("btn-primary").addClass("btn-default");n.$("#btn-menu-slider-3600").removeClass("btn-primary").addClass("btn-default");FMV.getSliderView().setTimeInterval(86400);FMC.getRouter().navigate("map/"+FMV.getMapView().getMapZoom()+"/"+FMV.getMapView().getMapCenter().lat+"/"+FMV.getMapView().getMapCenter().lng+"/"+FMV.getSliderView().getTimeInterval()+"/"+FMV.getSliderView().getStartDateValue()+"/"+FMV.getSliderView().getEndDateValue()+"/"+FMV.getSliderView().getCurDateValue(),{trigger:!0,replace:!0})})},t.prototype.createNewItem=function(n){FMV.getMenuView().setLocation(n.coords.latitude,n.coords.longitude);FMV.getMapView().getControlView().resetControls();FMV.getMapView().getControlView().$(".control-button.add").addClass("add-active");FMC.setSelectedItem(FMC.createItemWithInfo(FMV.getMenuView().lat,FMV.getMenuView().lng,FMV.getMenuView().serial));FMV.getUIView().show(1);FMV.getMapView().resize(!0);setTimeout(function(){FMV.getMapView().getMarkersView().render()},500);FMV.getMenuView().hide()},t.prototype.executeDecode=function(n){var i=this,t;i.files=n.target.files;t=new FileReader;t.onload=function(n){qrcode.decode(n.target.result)};qrcode.callback=function(n){n=="error decoding QR Code"?FMV.getMsgView().renderError("Failed to decode QR Code."):(FMV.getMsgView().renderSuccess("Serial Number: "+n),FMV.getMenuView().setSerial(n))};t.readAsDataURL(i.files[0])},t.prototype.getPosition=function(n){FMV.getMenuView().setLocation(n.coords.latitude,n.coords.longitude);itemColumn[1].cell=Backgrid.SelectCell.extend({optionValues:FMM.getLayers().toArray()});var t=new Backgrid.Grid({columns:itemColumn,collection:FMM.getItems().getNearItems(n.coords.latitude,n.coords.longitude),emptyText:FML.getViewUIDataNoDataMsg()});t.render();t.sort("name","ascending");FMV.getMenuView().$("#item-near-loc").html(t.el);FMC.getRouter().navigate("map/"+FMS.getLocateZoom()+"/"+n.coords.latitude+"/"+n.coords.longitude+"/"+FMV.getSliderView().getTimeInterval()+"/"+FMV.getSliderView().getStartDateValue()+"/"+FMV.getSliderView().getEndDateValue()+"/"+FMV.getSliderView().getCurDateValue(),{trigger:!0,replace:!0})},t}(Backbone.View);n.MenuView=t})(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(t){n.call(this,t);this.setElement(t.el);this.render()}return __extends(t,n),t.prototype.render=function(){var n=this,t=_.template(FMViewSensorTemplate),i={isAdmin:FMC.getUser().getIsAdmin(),sensors:FMM.getSensors().models,isActive:$("#add-new-sensor").hasClass("sensor-active")};n.$el.html(t(i));n.$(".sensor").each(function(){parseInt($(this).attr("data-id"))==parseInt(FMM.getSensors().getCurType().get("id"))&&$(this).addClass("sensor-active")});n.addEventListener()},t.prototype.addEventListener=function(){var n=this;n.$(".sensor").on("click",function(){var t=parseInt($(this).attr("data-id"));FMM.getSensors().setCurType(t);FMC.resetData();FMC.fetchItems(FMV.getMapView().getMapBounds());n.$("#add-new-sensor").removeClass("sensor-active")});n.$("#add-new-sensor").on("click",function(){$(this).hasClass("sensor-active")?($(this).removeClass("sensor-active"),FMC.setSelectedItem(null),FMV.getUIView().hide(),FMV.getMapView().resize(!1)):($(this).addClass("sensor-active"),FMV.getUIView().show(7),FMV.getMapView().resize(!0),setTimeout(function(){FMV.getMapView().getMarkersView().render()},500))})},t}(Backbone.View);n.SensorSelect=t}(ForagingMap||(ForagingMap={}));FMViewSensorTemplate="";FMViewSensorTemplate+='<div class="leaflet-control">';FMViewSensorTemplate+="<% _.each(sensors, function (sensor) { %>";FMViewSensorTemplate+='<div class="control-button sensor" data-id="<%= sensor.get("id") %>"><%= sensor.get("initial") %><\/div>';FMViewSensorTemplate+="<% }); %>";FMViewSensorTemplate+="<% if (isAdmin) { %>";FMViewSensorTemplate+="<% if (isActive) { %>";FMViewSensorTemplate+='<div id="add-new-sensor" class="control-button sensor sensor-plus sensor-active">+<\/div>';FMViewSensorTemplate+="<% } else { %>";FMViewSensorTemplate+='<div id="add-new-sensor" class="control-button sensor-plus">+<\/div>';FMViewSensorTemplate+="<% } %>";FMViewSensorTemplate+="<% } %>";FMViewSensorTemplate+="<\/div>";__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(t){var i=this;n.call(this,t);this.customUpdate=function(){var n=i,t=FMC.getSelectedItem();t!=undefined&&FMC.fetchBend(t.get("id"),function(){var r,i;FMV.getUIView().getMode()==3&&(FMV.getUIView().drawChart(),FMV.getUIView().refreshDataGrid());FMV.getSliderView().setDateToCurDate();r=FMM.getBendRatio(t);n.bendVal=r*180;n.branchPath="M60,140 Q190,107 330,"+(n.baseYVal+n.bendVal);i=new Snap.Matrix;i.scale(n.scale,n.scale,0,0);i.translate(n.baseXVal,n.baseYVal+n.bendVal+5);n.pApple.animate({transform:i},1e3,mina.elastic);n.sBranch.animate({d:n.branchPath},1e3,mina.elastic)});setTimeout(function(){FMV.getMapView().getAnimationToggleView().getIsActive()&&n.customUpdate()},2500)};this.setElement(t.el)}return __extends(t,n),t.prototype.render=function(){var n=this,r=_.template(FMAnimationViewTemplate);n.$el.html(r({}));var t=Math.min(Math.floor(FMV.getWidth()/2),700),i=Math.floor(t*36/50),u=Math.floor($("#leaflet-view-map").innerHeight()-i);n.scale=1e3/t*.95;n.$el.css({width:t,height:i,top:u});$("#fruit-animation").css({width:t,height:i});n.$el.removeClass("hidden");n.bendVal=0;n.baseXVal=330;n.baseYVal=85;n.branchPath="M60,140 Q190,107 330,"+(n.baseYVal+n.bendVal);n.renderSVG()},t.prototype.renderSVG=function(){var n=this,t;n.paper=Snap("#fruit-animation");n.pBackground=n.paper.group();n.pApple=n.paper.group();t=new Snap.Matrix;t.scale(n.scale,n.scale,0,0);n.pBackground.transform(t);var i=n.pBackground.path({path:"M-277.19-36.574c0-39.162,1.861-99.054,26.059-130.149c22.34-27.645,69.807-36.854,99.593-33.402     c14.888,1.153,26.059,8.063,39.088,17.278c16.754,13.821,15.822,16.125,29.784-3.457c24.199-35.705,51.191-43.766,87.491-49.528     c25.458-3.374,50.911,14.133,66.825,37.487l0.44,2.357c33.173-13.538,97.285-14.332,125.211-1.992     c58.629,23.32,110.884,74.08,127.636,154.41c8.38,41.461-6.281,38.87,27.223,67.374c25.131,23.323,52.353,46.643,69.105,80.329     c41.88,82.924-16.753,183.984-83.766,207.301c-50.254,18.146-193.029,26.91-237.063-16.597     c-8.515-8.416-28.88-24.855-28.88-24.855c-77.48,106.238-215.69,62.187-261.756-57.01     c-60.729,51.828-205.221,2.586-198.938-103.654c2.093-33.688,12.563-62.191,29.317-88.104     c23.036-36.279,56.538-36.279,81.668-59.602",fill:"#4A5328"}),r=n.pBackground.path({path:"M0,0h504v273.499c0,0-151.959-222.517-349.479-93.24c0,0-96.521,84.817-154.521,59.707V0z",fill:"#B1D8E0",opacity:.4}),u=n.pBackground.path({path:"M504,360V213.693c0,0-93,70.307-300,34.307c0,0-161-61.307-204,38.847V360H504z",fill:"#D9EBEB",opacity:.2}),f=n.pBackground.path({path:"M0,370V157.202c0,0,134-126.65,451,10.323    c0,0,45,16.8,53-15.975v212.858L0,370z","clip-path":"url(#SVGID_6_)",fill:"#69B1E1",opacity:.3}),i=n.pBackground.path({path:"M-277.19-36.574c0-39.162,1.861-99.054,26.059-130.149c22.34-27.645,69.807-36.854,99.593-33.402     c14.888,1.153,26.059,8.063,39.088,17.278c16.754,13.821,15.822,16.125,29.784-3.457c24.199-35.705,51.191-43.766,87.491-49.528     c25.458-3.374,50.911,14.133,66.825,37.487l0.44,2.357c33.173-13.538,97.285-14.332,125.211-1.992     c58.629,23.32,110.884,74.08,127.636,154.41c8.38,41.461-6.281,38.87,27.223,67.374c25.131,23.323,52.353,46.643,69.105,80.329     c41.88,82.924-16.753,183.984-83.766,207.301c-50.254,18.146-193.029,26.91-237.063-16.597     c-8.515-8.416-28.88-24.855-28.88-24.855c-77.48,106.238-215.69,62.187-261.756-57.01     c-60.729,51.828-205.221,2.586-198.938-103.654c2.093-33.688,12.563-62.191,29.317-88.104     c23.036-36.279,56.538-36.279,81.668-59.602",fill:"#4A5328",opacity:.8}),e=n.pBackground.path({path:"M19.008,271.731L10.844,543.78c0,5.499,23.559,5.903,29.057,5.903    c5.497,0,26.877-4.46,26.877-9.954l-7.899-295.28l-0.592-22.009l-3.41-127.526c0.316-1.334,0.262-2.666-0.104-3.854l-2.081-77.759    l141.186-97.803c1.928-1.327,1.705-4.984-0.496-8.155c-2.195-3.17-5.543-4.665-7.459-3.335L52.246-3.396l-2.389-89.343    c0-5.498-4.459-9.957-9.957-9.957c-5.498,0-9.956,4.459-9.956,9.957L24.88,76.004l-207.981-88.552    c-3.104-1.318-6.856,0.487-8.367,4.036c-1.51,3.552-0.213,7.507,2.893,8.831L24.431,91.004l-4.965,165.472L19.008,271.731z","clip-path":"url(#SVGID_6_)",fill:"#6C442D"});n.sBranch=n.pBackground.path({path:n.branchPath,"clip-path":"url(#SVGID_6_)",fill:"none",stroke:"#6C442D","stroke-width":14,"stroke-linecap":"round","stroke-miterlimit":10});var o=n.pApple.path({path:"M-62.743,44.039c2.048,8.965,6.123,9.495,9.363,18.098   c2.731,7.245,11.926,10.802,18.842,7.42c4.961-2.427,10.001-2.472,15.021-0.191c2.675,1.217,5.423,1.804,8.336,1.275   c5.113-0.928,8.977-3.632,10.865-8.525c3.312-8.577,5.965-9.383,8.955-18.076c2.672-7.765,1.514-22.552-4.367-28.279   c-5.399-5.267-13.923-6.456-21.187-3.152c-6.638,3.017-13.229,3.075-19.844-0.016c-3.306-1.545-6.804-2.078-10.4-1.675   c-9.84,1.092-17.314,9.015-16.873,18.9C-63.874,33.385-63.538,40.561-62.743,44.039z","fill-rule":"evenodd","clip-rule":"evenodd",fill:"#9C1B39"}),s=n.pApple.path({path:"M-62.743,44.039   c2.048,8.965,6.123,9.495,9.363,18.098c2.731,7.245,11.926,10.802,18.842,7.42c4.961-2.427,10.001-2.472,15.021-0.191   c2.675,1.217,5.423,1.804,8.336,1.275c5.113-0.928,8.977-3.632,10.865-8.525c3.312-8.577,5.965-9.383,8.955-18.076   c2.672-7.765,1.514-22.552-4.367-28.279c-5.399-5.267-13.923-6.456-21.187-3.152c-6.638,3.017-13.229,3.075-19.844-0.016   c-3.306-1.545-6.804-2.078-10.4-1.675c-9.84,1.092-17.314,9.015-16.873,18.9C-63.874,33.385-63.538,40.561-62.743,44.039z",fill:"none",stroke:"#A12F27","stroke-width":2,"stroke-miterlimit":10}),h=n.pApple.path({path:"M-7.759,17.652c0,0,7.796,3.921,7.196,14.3l7.197-5.814c0,0-7.997-11.199-12.595-11.997   L-7.759,17.652z",opacity:.2,fill:"#FFFFFF"}),c=n.pApple.path({path:"M-22.848,14.646c-0.007-0.203-1.208-0.316-2.683-0.252c-1.469,0.063-2.657,0.276-2.649,0.479   c0.01,0.204,1.209,0.317,2.684,0.255C-24.024,15.066-22.837,14.85-22.848,14.646z",opacity:.2,fill:"#231F20"}),l=n.pApple.path({path:"M-5.737-6.875l2.19,3.859c0,0-18.486-0.871-22.749,17.57h1.016c0,0,5.841-19.703,23.14-15.546l-1.124-5.884H-5.737z","fill-rule":"evenodd","clip-rule":"evenodd",fill:"#6C442D",stroke:"#6C442D","stroke-width":3,"stroke-miterlimit":10}),a=n.pApple.path({path:"M-28.881,14.141C-29.064,3.801-39.004-6.94-50.319-7.285   C-49.774,3.713-39.705,13.744-28.881,14.141z","fill-rule":"evenodd","clip-rule":"evenodd",fill:"#7BAD8E"}),v=n.pApple.path({path:"M-48.947-5.344c0,0,16.796,4.426,16.993,16.108c0,0-6.485-2.588-8.495-8.054C-40.449,2.711-43.547-2.546-48.947-5.344z","fill-rule":"evenodd","clip-rule":"evenodd",opacity:.2,fill:"#286934",stroke:"#7BAD8E","stroke-miterlimit":10}),y=n.pApple.path({path:"M-31.886,10.729c0.643,1.33,1.593,2.617,3.005,3.411","fill-rule":"evenodd","clip-rule":"evenodd",opacity:.2,fill:"none",stroke:"#286934","stroke-miterlimit":10}),p=n.pApple.path({path:"M-32.126,10.19c0.076,0.181,0.155,0.36,0.24,0.539","fill-rule":"evenodd","clip-rule":"evenodd",opacity:.2,fill:"none",stroke:"#286934","stroke-miterlimit":10}),t=new Snap.Matrix;t.scale(n.scale,n.scale,0,0);t.translate(n.baseXVal,n.baseYVal+5);n.pApple.transform(t);n.customUpdate()},t.prototype.unrender=function(){var n=this;n.$el.html("");n.$el.addClass("hidden")},t}(Backbone.View);n.AnimationView=t}(ForagingMap||(ForagingMap={}));FMAnimationViewTemplate='<svg id="fruit-animation"><\/svg>';__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(t){n.call(this,t);this.isActive=!1;this.setElement(t.el);this.render()}return __extends(t,n),t.prototype.render=function(){var n=this,t=_.template(FMViewAnimationTemplate);n.$el.html(t({}));n.addEventListener()},t.prototype.addEventListener=function(){var n=this;n.$(".animation").on("click",function(){n.isActive?($(this).removeClass("animation-active"),n.isActive=!1):($(this).addClass("animation-active"),n.isActive=!0);n.isActive?FMV.getAnimationView().render():FMV.getAnimationView().unrender()})},t.prototype.getIsActive=function(){return this.isActive},t}(Backbone.View);n.AnimationToggle=t}(ForagingMap||(ForagingMap={}));FMViewAnimationTemplate="";FMViewAnimationTemplate+='<div class="leaflet-control">';FMViewAnimationTemplate+='<div class="control-button animation">Animation<\/div>';FMViewAnimationTemplate+="<\/div>",function(n){var t=function(){function t(){this.layers=new n.Layers;this.items=new n.Items;this.bends=new n.Bends;this.thresholds=new n.Thresholds;this.pictures=new n.Pictures;this.types=new n.Types;this.types.add(new n.Type({name:"Fruit",type:1}));this.icons=new n.Icons;this.sensors=new n.Sensors}return t.prototype.getSensors=function(){return this.sensors},t.prototype.getIcons=function(){return this.icons},t.prototype.getTypes=function(){return this.types},t.prototype.getLayers=function(){return this.layers},t.prototype.getItems=function(){return this.items},t.prototype.getBends=function(){return this.bends},t.prototype.getPictures=function(){return this.pictures},t.prototype.getThresholds=function(){return this.thresholds},t.prototype.getBendRatio=function(t){var o=new n.Thresholds(FMM.getThresholds().where({pid:t.id})),s=new n.Bends(FMM.getBends().where({pid:t.id})),u=FMV.getSliderView().getCurDate(),i=o.getCurrentThreshold(u),f=s.getCurrentBend(u);if(i!=null&&f!=null){var e=parseFloat(i.get("min")),h=parseFloat(i.get("max")),r=parseFloat(f.get("value"));return r<e?r-e:r/h}return Number.MIN_VALUE},t}();n.Model=t}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){n[n.None=0]="None";n[n.Fruit=1]="Fruit";n[n.Station=2]="Station"}(ItemType||(ItemType={})),function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.isRemoved=!1;this.url="core/php/item.php";this.url=n.Setting.BASE_URL+this.url;this.defaults={name:"",desc:"",serial:"",type:0,sort:0,amount:0,lat:0,lng:0,regdate:moment(new Date).format(FMS.getDateTimeFormat()),update:moment(new Date).format(FMS.getDateTimeFormat())}}return __extends(i,t),i.prototype.parse=function(n,i){return n.id!=null&&(n.id=parseInt(n.id)),n.type=parseInt(n.type),n.sort=parseInt(n.sort),n.amount=parseFloat(n.amount),n.lat=parseFloat(n.lat),n.lng=parseFloat(n.lng),n.update=moment(n.update).format(FMS.getDateTimeFormat()),n.regdate=moment(n.regdate).format(FMS.getDateTimeFormat()),t.prototype.parse.call(this,n,i)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.setIsRemoved=function(n){this.isRemoved=n},i.prototype.getIsRemoved=function(){return this.isRemoved},i}(Backbone.Model),i;n.Item=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="core/php/items.php";this.model=t;this.url=n.Setting.BASE_URL+this.url}return __extends(r,i),r.prototype.getIds=function(){var t=this,n=[];return $.each(t.models,function(t,i){n.push(i.id)}),n},r.prototype.getIdsToString=function(){var t=this,n=[];return $.each(t.models,function(t,i){n.push(parseInt(i.id))}),n.sort(function(n,t){return n-t}).join(",")},r.prototype.toArray=function(){var t=this,n;return t.sort(),n=[],_.each(t.models,function(t){n.push([t.get("name"),t.id])}),n},r.prototype.comparator=function(n){return n.get("name")},r.prototype.getNearItems=function(n,t){console.log(n);console.log(t);var i=.005,f=this,u=new r;return $.each(f.models,function(r,f){parseFloat(f.get("lat"))<parseFloat(n)+i&&parseFloat(f.get("lat"))>parseFloat(n)-i&&parseFloat(f.get("lng"))<parseFloat(t)+i&&parseFloat(f.get("lng"))>parseFloat(t)-i&&u.add(f)}),u},r}(Backbone.Collection);n.Items=i}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.url="core/php/bend.php";this.isSavable=!0;var u=this;this.url=n.Setting.BASE_URL+this.url;this.defaults={pid:0,type:0,value:0,date:moment(new Date).format(FMS.getDateTimeFormat()),update:moment(new Date).format(FMS.getDateTimeFormat())};u.off("change");u.on("change",function(n){u.isSavable!=!1&&(u.isSavable=!1,n.save({},{wait:!0,success:function(n){n.isSavable=!0;FMV.getMsgView().renderSuccess("'"+n.get("value")+"' "+FML.getViewUIDataSaveSuccessMsg());FMV.getUIView().drawChart()},error:function(){FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}}))})}return __extends(i,t),i.prototype.parse=function(n,i){return n.id!=null&&(n.id=parseInt(n.id)),n.pid=parseInt(n.pid),n.type=parseInt(n.type),n.value=parseFloat(n.value),n.date=moment(n.date).format(FMS.getDateTimeFormat()),n.update=moment(n.update).format(FMS.getDateTimeFormat()),t.prototype.parse.call(this,n,i)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.setIsSavable=function(n){this.isSavable=n},i.prototype.getIsSavable=function(){return this.isSavable},i}(Backbone.Model),i;n.Bend=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="core/php/bends.php";this.model=t;this.url=n.Setting.BASE_URL+this.url}return __extends(r,i),r.prototype.getCurrentBend=function(n){var i=this,r=moment(n).valueOf(),t;return i.models.length==0?null:(t=i.models[0],$.each(i.models,function(n,i){var u=moment(i.get("date")).valueOf(),f=moment(t.get("date")).valueOf();r>=u&&f<=u&&(t=i)}),t)},r.prototype.getLabels=function(n){var t=this,i=[];return t.models.length>n?$.each(t.models,function(r,u){t.models.length-r<n&&i.push(moment(u.get("date")).format(FMS.getDateTimeFormatSimple()))}):$.each(t.models,function(n,t){i.push(moment(t.get("date")).format(FMS.getDateTimeFormatSimple()))}),i},r.prototype.getValues=function(n){var t=this,i=[];return t.models.length>n?$.each(t.models,function(r,u){t.models.length-r<n&&i.push(u.get("value"))}):$.each(t.models,function(n,t){i.push(t.get("value"))}),i},r.prototype.getDataLength=function(n){var t=this;return t.models.length>n?n:t.models.length},r}(Backbone.Collection);n.Bends=i}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.url="core/php/picture.php";this.isSavable=!0;var u=this;this.url=n.Setting.BASE_URL+this.url;this.defaults={pid:0,name:FML.getViewUIPictureTempName(),url:"",date:moment(new Date).format(FMS.getDateTimeFormat()),update:moment(new Date).format(FMS.getDateTimeFormat())};u.off("change");u.on("change",function(n){u.isSavable!=!1&&(u.isSavable=!1,n.save({update:moment(new Date).format(FMS.getDateTimeFormat())},{wait:!0,success:function(n){n.isSavable=!0;FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIDataSaveSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}}))})}return __extends(i,t),i.prototype.parse=function(n,i){return n.id!=null&&(n.id=parseInt(n.id)),n.pid=parseInt(n.pid),n.date=moment(n.date).format(FMS.getDateTimeFormat()),n.update=moment(n.update).format(FMS.getDateTimeFormat()),t.prototype.parse.call(this,n,i)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.setIsSavable=function(n){this.isSavable=n},i.prototype.getIsSavable=function(){return this.isSavable},i}(Backbone.Model),i;n.Picture=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="core/php/pictures.php";this.model=t;this.url=n.Setting.BASE_URL+this.url}return __extends(r,i),r}(Backbone.Collection);n.Pictures=i}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){n[n.None=0]="None";n[n.Normal=1]="Normal"}(ThresholdType||(ThresholdType={})),function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.url="core/php/threshold.php";this.isSavable=!0;var u=this;this.url=n.Setting.BASE_URL+this.url;this.defaults={pid:0,type:0,min:0,max:0,date:moment(new Date).format(FMS.getDateTimeFormat()),update:moment(new Date).format(FMS.getDateTimeFormat())};u.off("change");u.on("change",function(n){u.isSavable!=!1&&(u.isSavable=!1,n.save({},{wait:!0,success:function(n){n.isSavable=!0;FMV.getMsgView().renderSuccess("'"+n.get("min")+" - "+n.get("max")+"' "+FML.getViewUIDataSaveSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}}))})}return __extends(i,t),i.prototype.parse=function(n,i){return n.id!=null&&(n.id=parseInt(n.id)),n.pid=parseInt(n.pid),n.type=parseInt(n.type),n.min=parseFloat(n.min),n.max=parseFloat(n.max),n.date=moment(n.date).format(FMS.getDateTimeFormat()),n.update=moment(n.update).format(FMS.getDateTimeFormat()),t.prototype.parse.call(this,n,i)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.setIsSavable=function(n){this.isSavable=n},i.prototype.getIsSavable=function(){return this.isSavable},i}(Backbone.Model),i;n.Threshold=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="core/php/thresholds.php";this.model=t;this.url=n.Setting.BASE_URL+this.url}return __extends(r,i),r.prototype.getCurrentThreshold=function(n){var i=this,r=moment(n).valueOf(),t;return i.models.length==0?null:(t=i.models[0],$.each(i.models,function(n,i){var u=moment(i.get("date")).valueOf(),f=moment(t.get("date")).valueOf();r<=u&&f<=u&&(t=i)}),t)},r}(Backbone.Collection);n.Thresholds=i}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var r=function(t){function i(i,r){t.call(this,i,r);this.url="core/php/layer.php";this.isSavable=!0;var u=this;u.url=n.Setting.BASE_URL+u.url;u.defaults={name:"",desc:"",type:0,icon:""};u.off("change");u.on("change",function(n){if(u.isSavable!=!1){var t=FMV.getMapView().getMarkersView().removeMarkers(u);n.save({},{wait:!0,success:function(n){FMV.getUIView().render();FMV.getMapView().getMarkersView().render();FMV.getMsgView().renderSuccess("'"+n.get("name")+"' "+FML.getViewUIInfoSaveSuccessMsg())},error:function(){FMV.getUIView().render();FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}})}})}return __extends(i,t),i.prototype.parse=function(n,i){return n.id!=null&&(n.id=parseInt(n.id)),n.type=parseInt(n.type),t.prototype.parse.call(this,n,i)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.setIsSavable=function(n){this.isSavable=n},i.prototype.getIsSavable=function(){return this.isSavable},i}(Backbone.Model),u,t,f,i,e;n.Layer=r;u=function(t){function i(i,u){t.call(this,i,u);this.url="core/php/layers.php";this.model=r;this.url=n.Setting.BASE_URL+this.url}return __extends(i,t),i.prototype.getSizeOfType=function(n){var i=this,t=0;return $.each(i.models,function(i,r){parseInt(r.get("type"))==n&&t++}),t},i.prototype.toArray=function(){var t=this,n=[];return _.each(t.models,function(t){n.push([t.get("name"),t.get("id")])}),n},i}(Backbone.Collection);n.Layers=u;t=function(n){function t(t,i){n.call(this,t,i);this.defaults={name:"",type:0}}return __extends(t,n),t.prototype.parse=function(t,i){return t.id!=null&&(t.id=parseInt(t.id)),t.type=parseInt(t.type),n.prototype.parse.call(this,t,i)},t.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},t}(Backbone.Model);n.Type=t;f=function(n){function i(i,r){n.call(this,i,r);this.model=t}return __extends(i,n),i.prototype.toArray=function(){var t=this,n=[];return _.each(t.models,function(t){n.push([t.get("name"),t.get("type")])}),n},i}(Backbone.Collection);n.Types=f;i=function(n){function t(t,i){n.call(this,t,i);this.defaults={name:"",src:""}}return __extends(t,n),t.prototype.parse=function(t,i){return t.id!=null&&(t.id=parseInt(t.id)),n.prototype.parse.call(this,t,i)},t.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},t}(Backbone.Model);n.Icon=i;e=function(n){function t(t,r){n.call(this,t,r);this.model=i}return __extends(t,n),t.prototype.toArray=function(){var t=this,n=[];return _.each(t.models,function(t){n.push([t.get("name"),t.get("src")])}),n},t}(Backbone.Collection);n.Icons=e}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(n){function t(t,i){n.call(this,t,i);this.isRemoved=!1;this.url="core/php/user.php";this.defaults={username:"",name:"",auth:0}}return __extends(t,n),t.prototype.parse=function(t,i){return t.id!=null&&(t.id=parseInt(t.id)),t.auth=parseInt(t.auth),n.prototype.parse.call(this,t,i)},t.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},t.prototype.getIsAdmin=function(){return this.get("auth")==1?!0:!1},t}(Backbone.Model);n.User=t}(ForagingMap||(ForagingMap={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){var t=function(t){function i(i,r){t.call(this,i,r);this.url="core/php/sensor.php";this.isSavable=!0;var u=this;this.url=n.Setting.BASE_URL+this.url;this.defaults={initial:"",name:""};u.off("change");u.on("change",function(n){u.isSavable!=!1&&(u.isSavable=!1,n.save({},{wait:!0,success:function(n){n.isSavable=!0;FMV.getMsgView().renderSuccess("'"+n.get("value")+"' "+FML.getViewUIDataSaveSuccessMsg())},error:function(){FMV.getMsgView().renderError(FML.getViewUIInfoSaveErrorMsg())}}))})}return __extends(i,t),i.prototype.parse=function(n,i){return n.id!=null&&(n.id=parseInt(n.id)),t.prototype.parse.call(this,n,i)},i.prototype.toJSON=function(){var n=this.clone().attributes;return this.id!=null&&(n.id=this.id),n},i.prototype.setIsSavable=function(n){this.isSavable=n},i.prototype.getIsSavable=function(){return this.isSavable},i}(Backbone.Model),i;n.Sensor=t;i=function(i){function r(r,u){i.call(this,r,u);this.url="core/php/sensors.php";this.model=t;this.url=n.Setting.BASE_URL+this.url}return __extends(r,i),r.prototype.intializeCurType=function(){var n=this;$.each(n.models,function(t,i){n.curType==null&&(n.curType=i,console.log("Set Sensor Type as "+n.curType.get("name")),FMV.getMapView()&&FMV.getMapView().getSensorView()&&FMV.getMapView().getSensorView().render())})},r.prototype.getCurType=function(){return this.curType},r.prototype.setCurType=function(n){var t=this;$.each(t.models,function(i,r){parseInt(r.get("id"))==n&&(t.curType=r,console.log("Set Sensor Type as "+t.curType.get("name")),FMV.getMapView().getSensorView().render())})},r}(Backbone.Collection);n.Sensors=i}(ForagingMap||(ForagingMap={}));
//# sourceMappingURL=foragingmap.min.js.map
